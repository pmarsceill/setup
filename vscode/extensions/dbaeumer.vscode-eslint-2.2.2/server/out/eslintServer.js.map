{"version":3,"file":"eslintServer.js","mappings":"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","sources":["webpack://eslint-server/./src/diff.ts","webpack://eslint-server/./src/linkedMap.ts","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/connection.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/events.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/is.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messages.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/ral.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/node/ril.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/node.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/proposed.diagnostic.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/proposed.typeHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/node.js","webpack://eslint-server/./node_modules/vscode-languageserver-textdocument/lib/esm/main.js","webpack://eslint-server/./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/callHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/configuration.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/fileOperations.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/linkedEditingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/moniker.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/progress.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/proposed.diagnostic.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/proposed.typeHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/semanticTokens.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/server.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/showDocument.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/utils/is.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/utils/uuid.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/workspaceFolders.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/node/files.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-languageserver/node.js","webpack://eslint-server/./node_modules/vscode-uri/lib/esm/index.js","webpack://eslint-server/external node-commonjs \"child_process\"","webpack://eslint-server/external node-commonjs \"crypto\"","webpack://eslint-server/external node-commonjs \"fs\"","webpack://eslint-server/external node-commonjs \"net\"","webpack://eslint-server/external node-commonjs \"os\"","webpack://eslint-server/external node-commonjs \"path\"","webpack://eslint-server/external node-commonjs \"url\"","webpack://eslint-server/external node-commonjs \"util\"","webpack://eslint-server/webpack/bootstrap","webpack://eslint-server/webpack/runtime/define property getters","webpack://eslint-server/webpack/runtime/hasOwnProperty shorthand","webpack://eslint-server/webpack/runtime/make namespace object","webpack://eslint-server/./src/eslintServer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nexport interface IDiffChange {\r\n\t/**\r\n\t * The position of the first element in the original sequence which\r\n\t * this change affects.\r\n\t */\r\n\toriginalStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the original sequence which were\r\n\t * affected.\r\n\t */\r\n\toriginalLength: number;\r\n\r\n\t/**\r\n\t * The position of the first element in the modified sequence which\r\n\t * this change affects.\r\n\t */\r\n\tmodifiedStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the modified sequence which were\r\n\t * affected (added).\r\n\t */\r\n\tmodifiedLength: number;\r\n}\r\n\r\nexport function stringDiff(original: string, modified: string, pretty: boolean): IDiffChange[] {\r\n\treturn new LcsDiff(new StringDiffSequence(original), new StringDiffSequence(modified)).ComputeDiff(pretty).changes;\r\n}\r\n\r\ninterface ISequence {\r\n\tgetElements(): Int32Array;\r\n}\r\n\r\nclass StringDiffSequence implements ISequence {\r\n\r\n\tconstructor(private source: string) { }\r\n\r\n\tgetElements(): Int32Array {\r\n\t\tconst source = this.source;\r\n\t\tconst characters = new Int32Array(source.length);\r\n\t\tfor (let i = 0, len = source.length; i < len; i++) {\r\n\t\t\tcharacters[i] = source.charCodeAt(i);\r\n\t\t}\r\n\t\treturn characters;\r\n\t}\r\n}\r\n\r\ninterface IContinueProcessingPredicate {\r\n\t(furthestOriginalIndex: number, matchLengthOfLongest: number): boolean;\r\n}\r\n\r\ninterface IDiffResult {\r\n\tquitEarly: boolean;\r\n\tchanges: IDiffChange[];\r\n}\r\n\r\n/**\r\n * Represents information about a specific difference between two sequences.\r\n */\r\nclass DiffChange {\r\n\r\n\t/**\r\n\t * The position of the first element in the original sequence which\r\n\t * this change affects.\r\n\t */\r\n\tpublic originalStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the original sequence which were\r\n\t * affected.\r\n\t */\r\n\tpublic originalLength: number;\r\n\r\n\t/**\r\n\t * The position of the first element in the modified sequence which\r\n\t * this change affects.\r\n\t */\r\n\tpublic modifiedStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the modified sequence which were\r\n\t * affected (added).\r\n\t */\r\n\tpublic modifiedLength: number;\r\n\r\n\t/**\r\n\t * Constructs a new DiffChange with the given sequence information\r\n\t * and content.\r\n\t */\r\n\tconstructor(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number) {\r\n\t\t//Debug.Assert(originalLength > 0 || modifiedLength > 0, \"originalLength and modifiedLength cannot both be <= 0\");\r\n\t\tthis.originalStart = originalStart;\r\n\t\tthis.originalLength = originalLength;\r\n\t\tthis.modifiedStart = modifiedStart;\r\n\t\tthis.modifiedLength = modifiedLength;\r\n\t}\r\n\r\n\t/**\r\n\t * The end point (exclusive) of the change in the original sequence.\r\n\t */\r\n\tpublic getOriginalEnd() {\r\n\t\treturn this.originalStart + this.originalLength;\r\n\t}\r\n\r\n\t/**\r\n\t * The end point (exclusive) of the change in the modified sequence.\r\n\t */\r\n\tpublic getModifiedEnd() {\r\n\t\treturn this.modifiedStart + this.modifiedLength;\r\n\t}\r\n}\r\n\r\nexport class Debug {\r\n\tpublic static Assert(condition: boolean, message: string): void {\r\n\t\tif (!condition) {\r\n\t\t\tthrow new Error(message);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst enum Constants {\r\n\t/**\r\n\t * MAX SMI (SMall Integer) as defined in v8.\r\n\t * one bit is lost for boxing/unboxing flag.\r\n\t * one bit is lost for sign flag.\r\n\t * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\r\n\t */\r\n\tMAX_SAFE_SMALL_INTEGER = 1 << 30,\r\n\r\n\t/**\r\n\t * MIN SMI (SMall Integer) as defined in v8.\r\n\t * one bit is lost for boxing/unboxing flag.\r\n\t * one bit is lost for sign flag.\r\n\t * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\r\n\t */\r\n\tMIN_SAFE_SMALL_INTEGER = -(1 << 30),\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 8 bits.\r\n\t */\r\n\tMAX_UINT_8 = 255, // 2^8 - 1\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 16 bits.\r\n\t */\r\n\tMAX_UINT_16 = 65535, // 2^16 - 1\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 32 bits.\r\n\t */\r\n\tMAX_UINT_32 = 4294967295, // 2^32 - 1\r\n\r\n\tUNICODE_SUPPLEMENTARY_PLANE_BEGIN = 0x010000\r\n}\r\n\r\nconst enum LocalConstants {\r\n\tMaxDifferencesHistory = 1447\r\n}\r\n\r\nclass MyArray {\r\n\t/**\r\n\t * Copies a range of elements from an Array starting at the specified source index and pastes\r\n\t * them to another Array starting at the specified destination index. The length and the indexes\r\n\t * are specified as 64-bit integers.\r\n\t * sourceArray:\r\n\t *\t\tThe Array that contains the data to copy.\r\n\t * sourceIndex:\r\n\t *\t\tA 64-bit integer that represents the index in the sourceArray at which copying begins.\r\n\t * destinationArray:\r\n\t *\t\tThe Array that receives the data.\r\n\t * destinationIndex:\r\n\t *\t\tA 64-bit integer that represents the index in the destinationArray at which storing begins.\r\n\t * length:\r\n\t *\t\tA 64-bit integer that represents the number of elements to copy.\r\n\t */\r\n\tpublic static Copy(sourceArray: any[], sourceIndex: number, destinationArray: any[], destinationIndex: number, length: number) {\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n\t\t}\r\n\t}\r\n\tpublic static Copy2(sourceArray: Int32Array, sourceIndex: number, destinationArray: Int32Array, destinationIndex: number, length: number) {\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass DiffChangeHelper {\r\n\r\n\tprivate m_changes: DiffChange[];\r\n\tprivate m_originalStart: number;\r\n\tprivate m_modifiedStart: number;\r\n\tprivate m_originalCount: number;\r\n\tprivate m_modifiedCount: number;\r\n\r\n\t/**\r\n\t * Constructs a new DiffChangeHelper for the given DiffSequences.\r\n\t */\r\n\tconstructor() {\r\n\t\tthis.m_changes = [];\r\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_originalCount = 0;\r\n\t\tthis.m_modifiedCount = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Marks the beginning of the next change in the set of differences.\r\n\t */\r\n\tpublic MarkNextChange(): void {\r\n\t\t// Only add to the list if there is something to add\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Add the new change to our list\r\n\t\t\tthis.m_changes.push(new DiffChange(this.m_originalStart, this.m_originalCount,\r\n\t\t\t\tthis.m_modifiedStart, this.m_modifiedCount));\r\n\t\t}\r\n\r\n\t\t// Reset for the next change\r\n\t\tthis.m_originalCount = 0;\r\n\t\tthis.m_modifiedCount = 0;\r\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the original element at the given position to the elements\r\n\t * affected by the current change. The modified index gives context\r\n\t * to the change position with respect to the original sequence.\r\n\t * @param originalIndex The index of the original element to add.\r\n\t * @param modifiedIndex The index of the modified element that provides corresponding position in the modified sequence.\r\n\t */\r\n\tpublic AddOriginalElement(originalIndex: number, modifiedIndex: number) {\r\n\t\t// The 'true' start index is the smallest of the ones we've seen\r\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n\r\n\t\tthis.m_originalCount++;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the modified element at the given position to the elements\r\n\t * affected by the current change. The original index gives context\r\n\t * to the change position with respect to the modified sequence.\r\n\t * @param originalIndex The index of the original element that provides corresponding position in the original sequence.\r\n\t * @param modifiedIndex The index of the modified element to add.\r\n\t */\r\n\tpublic AddModifiedElement(originalIndex: number, modifiedIndex: number): void {\r\n\t\t// The 'true' start index is the smallest of the ones we've seen\r\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n\r\n\t\tthis.m_modifiedCount++;\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves all of the changes marked by the class.\r\n\t */\r\n\tpublic getChanges(): DiffChange[] {\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Finish up on whatever is left\r\n\t\t\tthis.MarkNextChange();\r\n\t\t}\r\n\r\n\t\treturn this.m_changes;\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves all of the changes marked by the class in the reverse order\r\n\t */\r\n\tpublic getReverseChanges(): DiffChange[] {\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Finish up on whatever is left\r\n\t\t\tthis.MarkNextChange();\r\n\t\t}\r\n\r\n\t\tthis.m_changes.reverse();\r\n\t\treturn this.m_changes;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An implementation of the difference algorithm described in\r\n * \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\r\n */\r\nexport class LcsDiff {\r\n\r\n\tprivate readonly ContinueProcessingPredicate: IContinueProcessingPredicate | null;\r\n\r\n\tprivate readonly _hasStrings: boolean;\r\n\tprivate readonly _originalStringElements: string[];\r\n\tprivate readonly _originalElementsOrHash: Int32Array;\r\n\tprivate readonly _modifiedStringElements: string[];\r\n\tprivate readonly _modifiedElementsOrHash: Int32Array;\r\n\r\n\tprivate m_forwardHistory: Int32Array[];\r\n\tprivate m_reverseHistory: Int32Array[];\r\n\r\n\t/**\r\n\t * Constructs the DiffFinder\r\n\t */\r\n\tconstructor(originalSequence: ISequence, modifiedSequence: ISequence, continueProcessingPredicate: IContinueProcessingPredicate | null = null) {\r\n\t\tthis.ContinueProcessingPredicate = continueProcessingPredicate;\r\n\r\n\t\tconst [originalStringElements, originalElementsOrHash, originalHasStrings] = LcsDiff._getElements(originalSequence);\r\n\t\tconst [modifiedStringElements, modifiedElementsOrHash, modifiedHasStrings] = LcsDiff._getElements(modifiedSequence);\r\n\r\n\t\tthis._hasStrings = (originalHasStrings && modifiedHasStrings);\r\n\t\tthis._originalStringElements = originalStringElements;\r\n\t\tthis._originalElementsOrHash = originalElementsOrHash;\r\n\t\tthis._modifiedStringElements = modifiedStringElements;\r\n\t\tthis._modifiedElementsOrHash = modifiedElementsOrHash;\r\n\r\n\t\tthis.m_forwardHistory = [];\r\n\t\tthis.m_reverseHistory = [];\r\n\t}\r\n\r\n\tprivate static _getElements(sequence: ISequence): [string[], Int32Array, boolean] {\r\n\t\tconst elements = sequence.getElements();\r\n\r\n\t\tif (elements instanceof Int32Array) {\r\n\t\t\treturn [[], elements, false];\r\n\t\t}\r\n\r\n\t\treturn [[], new Int32Array(elements), false];\r\n\t}\r\n\r\n\tprivate ElementsAreEqual(originalIndex: number, newIndex: number): boolean {\r\n\t\tif (this._originalElementsOrHash[originalIndex] !== this._modifiedElementsOrHash[newIndex]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._originalStringElements[originalIndex] === this._modifiedStringElements[newIndex] : true);\r\n\t}\r\n\r\n\tprivate OriginalElementsAreEqual(index1: number, index2: number): boolean {\r\n\t\tif (this._originalElementsOrHash[index1] !== this._originalElementsOrHash[index2]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._originalStringElements[index1] === this._originalStringElements[index2] : true);\r\n\t}\r\n\r\n\tprivate ModifiedElementsAreEqual(index1: number, index2: number): boolean {\r\n\t\tif (this._modifiedElementsOrHash[index1] !== this._modifiedElementsOrHash[index2]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._modifiedStringElements[index1] === this._modifiedStringElements[index2] : true);\r\n\t}\r\n\r\n\tpublic ComputeDiff(pretty: boolean): IDiffResult {\r\n\t\treturn this._ComputeDiff(0, this._originalElementsOrHash.length - 1, 0, this._modifiedElementsOrHash.length - 1, pretty);\r\n\t}\r\n\r\n\t/**\r\n\t * Computes the differences between the original and modified input\r\n\t * sequences on the bounded range.\r\n\t * @returns An array of the differences between the two input sequences.\r\n\t */\r\n\tprivate _ComputeDiff(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, pretty: boolean): IDiffResult {\r\n\t\tconst quitEarlyArr = [false];\r\n\t\tlet changes = this.ComputeDiffRecursive(originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr);\r\n\r\n\t\tif (pretty) {\r\n\t\t\t// We have to clean up the computed diff to be more intuitive\r\n\t\t\t// but it turns out this cannot be done correctly until the entire set\r\n\t\t\t// of diffs have been computed\r\n\t\t\tchanges = this.PrettifyChanges(changes);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tquitEarly: quitEarlyArr[0],\r\n\t\t\tchanges: changes\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Private helper method which computes the differences on the bounded range\r\n\t * recursively.\r\n\t * @returns An array of the differences between the two input sequences.\r\n\t */\r\n\tprivate ComputeDiffRecursive(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, quitEarlyArr: boolean[]): DiffChange[] {\r\n\t\tquitEarlyArr[0] = false;\r\n\r\n\t\t// Find the start of the differences\r\n\t\twhile (originalStart <= originalEnd && modifiedStart <= modifiedEnd && this.ElementsAreEqual(originalStart, modifiedStart)) {\r\n\t\t\toriginalStart++;\r\n\t\t\tmodifiedStart++;\r\n\t\t}\r\n\r\n\t\t// Find the end of the differences\r\n\t\twhile (originalEnd >= originalStart && modifiedEnd >= modifiedStart && this.ElementsAreEqual(originalEnd, modifiedEnd)) {\r\n\t\t\toriginalEnd--;\r\n\t\t\tmodifiedEnd--;\r\n\t\t}\r\n\r\n\t\t// In the special case where we either have all insertions or all deletions or the sequences are identical\r\n\t\tif (originalStart > originalEnd || modifiedStart > modifiedEnd) {\r\n\t\t\tlet changes: DiffChange[];\r\n\r\n\t\t\tif (modifiedStart <= modifiedEnd) {\r\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n\r\n\t\t\t\t// All insertions\r\n\t\t\t\tchanges = [\r\n\t\t\t\t\tnew DiffChange(originalStart, 0, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t\t\t];\r\n\t\t\t} else if (originalStart <= originalEnd) {\r\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n\r\n\t\t\t\t// All deletions\r\n\t\t\t\tchanges = [\r\n\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, 0)\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n\r\n\t\t\t\t// Identical sequences - No differences\r\n\t\t\t\tchanges = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn changes;\r\n\t\t}\r\n\r\n\t\t// This problem can be solved using the Divide-And-Conquer technique.\r\n\t\tconst midOriginalArr = [0];\r\n\t\tconst midModifiedArr = [0];\r\n\t\tconst result = this.ComputeRecursionPoint(originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr);\r\n\r\n\t\tconst midOriginal = midOriginalArr[0];\r\n\t\tconst midModified = midModifiedArr[0];\r\n\r\n\t\tif (result !== null) {\r\n\t\t\t// Result is not-null when there was enough memory to compute the changes while\r\n\t\t\t// searching for the recursion point\r\n\t\t\treturn result;\r\n\t\t} else if (!quitEarlyArr[0]) {\r\n\t\t\t// We can break the problem down recursively by finding the changes in the\r\n\t\t\t// First Half:   (originalStart, modifiedStart) to (midOriginal, midModified)\r\n\t\t\t// Second Half:  (midOriginal + 1, minModified + 1) to (originalEnd, modifiedEnd)\r\n\t\t\t// NOTE: ComputeDiff() is inclusive, therefore the second range starts on the next point\r\n\r\n\t\t\tconst leftChanges = this.ComputeDiffRecursive(originalStart, midOriginal, modifiedStart, midModified, quitEarlyArr);\r\n\t\t\tlet rightChanges: DiffChange[] = [];\r\n\r\n\t\t\tif (!quitEarlyArr[0]) {\r\n\t\t\t\trightChanges = this.ComputeDiffRecursive(midOriginal + 1, originalEnd, midModified + 1, modifiedEnd, quitEarlyArr);\r\n\t\t\t} else {\r\n\t\t\t\t// We did't have time to finish the first half, so we don't have time to compute this half.\r\n\t\t\t\t// Consider the entire rest of the sequence different.\r\n\t\t\t\trightChanges = [\r\n\t\t\t\t\tnew DiffChange(midOriginal + 1, originalEnd - (midOriginal + 1) + 1, midModified + 1, modifiedEnd - (midModified + 1) + 1)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\treturn this.ConcatenateChanges(leftChanges, rightChanges);\r\n\t\t}\r\n\r\n\t\t// If we hit here, we quit early, and so can't return anything meaningful\r\n\t\treturn [\r\n\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t];\r\n\t}\r\n\r\n\tprivate WALKTRACE(diagonalForwardBase: number, diagonalForwardStart: number, diagonalForwardEnd: number, diagonalForwardOffset: number,\r\n\t\tdiagonalReverseBase: number, diagonalReverseStart: number, diagonalReverseEnd: number, diagonalReverseOffset: number,\r\n\t\tforwardPoints: Int32Array, reversePoints: Int32Array,\r\n\t\toriginalIndex: number, originalEnd: number, midOriginalArr: number[],\r\n\t\tmodifiedIndex: number, modifiedEnd: number, midModifiedArr: number[],\r\n\t\tdeltaIsEven: boolean, quitEarlyArr: boolean[]\r\n\t): DiffChange[] {\r\n\t\tlet forwardChanges: DiffChange[] | null = null;\r\n\t\tlet reverseChanges: DiffChange[] | null = null;\r\n\r\n\t\t// First, walk backward through the forward diagonals history\r\n\t\tlet changeHelper = new DiffChangeHelper();\r\n\t\tlet diagonalMin = diagonalForwardStart;\r\n\t\tlet diagonalMax = diagonalForwardEnd;\r\n\t\tlet diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalForwardOffset;\r\n\t\tlet lastOriginalIndex = Constants.MIN_SAFE_SMALL_INTEGER;\r\n\t\tlet historyIndex = this.m_forwardHistory.length - 1;\r\n\r\n\t\tdo {\r\n\t\t\t// Get the diagonal index from the relative diagonal number\r\n\t\t\tconst diagonal = diagonalRelative + diagonalForwardBase;\r\n\r\n\t\t\t// Figure out where we came from\r\n\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n\t\t\t\t// Vertical line (the element is an insert)\r\n\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\r\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\r\n\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t}\r\n\t\t\t\tlastOriginalIndex = originalIndex;\r\n\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex);\r\n\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalForwardBase; //Setup for the next iteration\r\n\t\t\t} else {\r\n\t\t\t\t// Horizontal line (the element is a deletion)\r\n\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\r\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\r\n\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t}\r\n\t\t\t\tlastOriginalIndex = originalIndex - 1;\r\n\t\t\t\tchangeHelper.AddOriginalElement(originalIndex, modifiedIndex + 1);\r\n\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalForwardBase; //Setup for the next iteration\r\n\t\t\t}\r\n\r\n\t\t\tif (historyIndex >= 0) {\r\n\t\t\t\tforwardPoints = this.m_forwardHistory[historyIndex];\r\n\t\t\t\tdiagonalForwardBase = forwardPoints[0]; //We stored this in the first spot\r\n\t\t\t\tdiagonalMin = 1;\r\n\t\t\t\tdiagonalMax = forwardPoints.length - 1;\r\n\t\t\t}\r\n\t\t} while (--historyIndex >= -1);\r\n\r\n\t\t// Ironically, we get the forward changes as the reverse of the\r\n\t\t// order we added them since we technically added them backwards\r\n\t\tforwardChanges = changeHelper.getReverseChanges();\r\n\r\n\t\tif (quitEarlyArr[0]) {\r\n\t\t\t// TODO: Calculate a partial from the reverse diagonals.\r\n\t\t\t//       For now, just assume everything after the midOriginal/midModified point is a diff\r\n\r\n\t\t\tlet originalStartPoint = midOriginalArr[0] + 1;\r\n\t\t\tlet modifiedStartPoint = midModifiedArr[0] + 1;\r\n\r\n\t\t\tif (forwardChanges !== null && forwardChanges.length > 0) {\r\n\t\t\t\tconst lastForwardChange = forwardChanges[forwardChanges.length - 1];\r\n\t\t\t\toriginalStartPoint = Math.max(originalStartPoint, lastForwardChange.getOriginalEnd());\r\n\t\t\t\tmodifiedStartPoint = Math.max(modifiedStartPoint, lastForwardChange.getModifiedEnd());\r\n\t\t\t}\r\n\r\n\t\t\treverseChanges = [\r\n\t\t\t\tnew DiffChange(originalStartPoint, originalEnd - originalStartPoint + 1,\r\n\t\t\t\t\tmodifiedStartPoint, modifiedEnd - modifiedStartPoint + 1)\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\t// Now walk backward through the reverse diagonals history\r\n\t\t\tchangeHelper = new DiffChangeHelper();\r\n\t\t\tdiagonalMin = diagonalReverseStart;\r\n\t\t\tdiagonalMax = diagonalReverseEnd;\r\n\t\t\tdiagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalReverseOffset;\r\n\t\t\tlastOriginalIndex = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\t\thistoryIndex = (deltaIsEven) ? this.m_reverseHistory.length - 1 : this.m_reverseHistory.length - 2;\r\n\r\n\t\t\tdo {\r\n\t\t\t\t// Get the diagonal index from the relative diagonal number\r\n\t\t\t\tconst diagonal = diagonalRelative + diagonalReverseBase;\r\n\r\n\t\t\t\t// Figure out where we came from\r\n\t\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n\t\t\t\t\t// Horizontal line (the element is a deletion))\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\r\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\r\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastOriginalIndex = originalIndex + 1;\r\n\t\t\t\t\tchangeHelper.AddOriginalElement(originalIndex + 1, modifiedIndex + 1);\r\n\t\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalReverseBase; //Setup for the next iteration\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Vertical line (the element is an insertion)\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\r\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\r\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastOriginalIndex = originalIndex;\r\n\t\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex + 1);\r\n\t\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalReverseBase; //Setup for the next iteration\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (historyIndex >= 0) {\r\n\t\t\t\t\treversePoints = this.m_reverseHistory[historyIndex];\r\n\t\t\t\t\tdiagonalReverseBase = reversePoints[0]; //We stored this in the first spot\r\n\t\t\t\t\tdiagonalMin = 1;\r\n\t\t\t\t\tdiagonalMax = reversePoints.length - 1;\r\n\t\t\t\t}\r\n\t\t\t} while (--historyIndex >= -1);\r\n\r\n\t\t\t// There are cases where the reverse history will find diffs that\r\n\t\t\t// are correct, but not intuitive, so we need shift them.\r\n\t\t\treverseChanges = changeHelper.getChanges();\r\n\t\t}\r\n\r\n\t\treturn this.ConcatenateChanges(forwardChanges, reverseChanges);\r\n\t}\r\n\r\n\t/**\r\n\t * Given the range to compute the diff on, this method finds the point:\r\n\t * (midOriginal, midModified)\r\n\t * that exists in the middle of the LCS of the two sequences and\r\n\t * is the point at which the LCS problem may be broken down recursively.\r\n\t * This method will try to keep the LCS trace in memory. If the LCS recursion\r\n\t * point is calculated and the full trace is available in memory, then this method\r\n\t * will return the change list.\r\n\t * @param originalStart The start bound of the original sequence range\r\n\t * @param originalEnd The end bound of the original sequence range\r\n\t * @param modifiedStart The start bound of the modified sequence range\r\n\t * @param modifiedEnd The end bound of the modified sequence range\r\n\t * @param midOriginal The middle point of the original sequence range\r\n\t * @param midModified The middle point of the modified sequence range\r\n\t * @returns The diff changes, if available, otherwise null\r\n\t */\r\n\tprivate ComputeRecursionPoint(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, midOriginalArr: number[], midModifiedArr: number[], quitEarlyArr: boolean[]) {\r\n\t\tlet originalIndex = 0, modifiedIndex = 0;\r\n\t\tlet diagonalForwardStart = 0, diagonalForwardEnd = 0;\r\n\t\tlet diagonalReverseStart = 0, diagonalReverseEnd = 0;\r\n\r\n\t\t// To traverse the edit graph and produce the proper LCS, our actual\r\n\t\t// start position is just outside the given boundary\r\n\t\toriginalStart--;\r\n\t\tmodifiedStart--;\r\n\r\n\t\t// We set these up to make the compiler happy, but they will\r\n\t\t// be replaced before we return with the actual recursion point\r\n\t\tmidOriginalArr[0] = 0;\r\n\t\tmidModifiedArr[0] = 0;\r\n\r\n\t\t// Clear out the history\r\n\t\tthis.m_forwardHistory = [];\r\n\t\tthis.m_reverseHistory = [];\r\n\r\n\t\t// Each cell in the two arrays corresponds to a diagonal in the edit graph.\r\n\t\t// The integer value in the cell represents the originalIndex of the furthest\r\n\t\t// reaching point found so far that ends in that diagonal.\r\n\t\t// The modifiedIndex can be computed mathematically from the originalIndex and the diagonal number.\r\n\t\tconst maxDifferences = (originalEnd - originalStart) + (modifiedEnd - modifiedStart);\r\n\t\tconst numDiagonals = maxDifferences + 1;\r\n\t\tconst forwardPoints = new Int32Array(numDiagonals);\r\n\t\tconst reversePoints = new Int32Array(numDiagonals);\r\n\t\t// diagonalForwardBase: Index into forwardPoints of the diagonal which passes through (originalStart, modifiedStart)\r\n\t\t// diagonalReverseBase: Index into reversePoints of the diagonal which passes through (originalEnd, modifiedEnd)\r\n\t\tconst diagonalForwardBase = (modifiedEnd - modifiedStart);\r\n\t\tconst diagonalReverseBase = (originalEnd - originalStart);\r\n\t\t// diagonalForwardOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n\t\t//    diagonal number (relative to diagonalForwardBase)\r\n\t\t// diagonalReverseOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n\t\t//    diagonal number (relative to diagonalReverseBase)\r\n\t\tconst diagonalForwardOffset = (originalStart - modifiedStart);\r\n\t\tconst diagonalReverseOffset = (originalEnd - modifiedEnd);\r\n\r\n\t\t// delta: The difference between the end diagonal and the start diagonal. This is used to relate diagonal numbers\r\n\t\t//   relative to the start diagonal with diagonal numbers relative to the end diagonal.\r\n\t\t// The Even/Oddn-ness of this delta is important for determining when we should check for overlap\r\n\t\tconst delta = diagonalReverseBase - diagonalForwardBase;\r\n\t\tconst deltaIsEven = (delta % 2 === 0);\r\n\r\n\t\t// Here we set up the start and end points as the furthest points found so far\r\n\t\t// in both the forward and reverse directions, respectively\r\n\t\tforwardPoints[diagonalForwardBase] = originalStart;\r\n\t\treversePoints[diagonalReverseBase] = originalEnd;\r\n\r\n\t\t// Remember if we quit early, and thus need to do a best-effort result instead of a real result.\r\n\t\tquitEarlyArr[0] = false;\r\n\r\n\r\n\r\n\t\t// A couple of points:\r\n\t\t// --With this method, we iterate on the number of differences between the two sequences.\r\n\t\t//   The more differences there actually are, the longer this will take.\r\n\t\t// --Also, as the number of differences increases, we have to search on diagonals further\r\n\t\t//   away from the reference diagonal (which is diagonalForwardBase for forward, diagonalReverseBase for reverse).\r\n\t\t// --We extend on even diagonals (relative to the reference diagonal) only when numDifferences\r\n\t\t//   is even and odd diagonals only when numDifferences is odd.\r\n\t\tfor (let numDifferences = 1; numDifferences <= (maxDifferences / 2) + 1; numDifferences++) {\r\n\t\t\tlet furthestOriginalIndex = 0;\r\n\t\t\tlet furthestModifiedIndex = 0;\r\n\r\n\t\t\t// Run the algorithm in the forward direction\r\n\t\t\tdiagonalForwardStart = this.ClipDiagonalBound(diagonalForwardBase - numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n\t\t\tdiagonalForwardEnd = this.ClipDiagonalBound(diagonalForwardBase + numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n\t\t\tfor (let diagonal = diagonalForwardStart; diagonal <= diagonalForwardEnd; diagonal += 2) {\r\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\r\n\t\t\t\t// is further away from the start point (originalStart, modifiedStart)\r\n\t\t\t\tif (diagonal === diagonalForwardStart || (diagonal < diagonalForwardEnd && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\r\n\t\t\t\t}\r\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalForwardBase) - diagonalForwardOffset;\r\n\r\n\t\t\t\t// Save the current originalIndex so we can test for false overlap in step 3\r\n\t\t\t\tconst tempOriginalIndex = originalIndex;\r\n\r\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// so long as the elements are equal.\r\n\t\t\t\twhile (originalIndex < originalEnd && modifiedIndex < modifiedEnd && this.ElementsAreEqual(originalIndex + 1, modifiedIndex + 1)) {\r\n\t\t\t\t\toriginalIndex++;\r\n\t\t\t\t\tmodifiedIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tforwardPoints[diagonal] = originalIndex;\r\n\r\n\t\t\t\tif (originalIndex + modifiedIndex > furthestOriginalIndex + furthestModifiedIndex) {\r\n\t\t\t\t\tfurthestOriginalIndex = originalIndex;\r\n\t\t\t\t\tfurthestModifiedIndex = modifiedIndex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// STEP 3: If delta is odd (overlap first happens on forward when delta is odd)\r\n\t\t\t\t// and diagonal is in the range of reverse diagonals computed for numDifferences-1\r\n\t\t\t\t// (the previous iteration; we haven't computed reverse diagonals for numDifferences yet)\r\n\t\t\t\t// then check for overlap.\r\n\t\t\t\tif (!deltaIsEven && Math.abs(diagonal - diagonalReverseBase) <= (numDifferences - 1)) {\r\n\t\t\t\t\tif (originalIndex >= reversePoints[diagonal]) {\r\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\r\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\r\n\r\n\t\t\t\t\t\tif (tempOriginalIndex <= reversePoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\r\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\r\n\t\t\t\t\t\t\t// Just return the recursion point\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Check to see if we should be quitting early, before moving on to the next iteration.\r\n\t\t\tconst matchLengthOfLongest = ((furthestOriginalIndex - originalStart) + (furthestModifiedIndex - modifiedStart) - numDifferences) / 2;\r\n\r\n\t\t\tif (this.ContinueProcessingPredicate !== null && !this.ContinueProcessingPredicate(furthestOriginalIndex, matchLengthOfLongest)) {\r\n\t\t\t\t// We can't finish, so skip ahead to generating a result from what we have.\r\n\t\t\t\tquitEarlyArr[0] = true;\r\n\r\n\t\t\t\t// Use the furthest distance we got in the forward direction.\r\n\t\t\t\tmidOriginalArr[0] = furthestOriginalIndex;\r\n\t\t\t\tmidModifiedArr[0] = furthestModifiedIndex;\r\n\r\n\t\t\t\tif (matchLengthOfLongest > 0 && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t// Enough of the history is in memory to walk it backwards\r\n\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// We didn't actually remember enough of the history.\r\n\r\n\t\t\t\t\t//Since we are quitting the diff early, we need to shift back the originalStart and modified start\r\n\t\t\t\t\t//back into the boundary limits since we decremented their value above beyond the boundary limit.\r\n\t\t\t\t\toriginalStart++;\r\n\t\t\t\t\tmodifiedStart++;\r\n\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1,\r\n\t\t\t\t\t\t\tmodifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Run the algorithm in the reverse direction\r\n\t\t\tdiagonalReverseStart = this.ClipDiagonalBound(diagonalReverseBase - numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n\t\t\tdiagonalReverseEnd = this.ClipDiagonalBound(diagonalReverseBase + numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n\t\t\tfor (let diagonal = diagonalReverseStart; diagonal <= diagonalReverseEnd; diagonal += 2) {\r\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\r\n\t\t\t\t// is further away from the start point (originalEnd, modifiedEnd)\r\n\t\t\t\tif (diagonal === diagonalReverseStart || (diagonal < diagonalReverseEnd && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\r\n\t\t\t\t}\r\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalReverseBase) - diagonalReverseOffset;\r\n\r\n\t\t\t\t// Save the current originalIndex so we can test for false overlap\r\n\t\t\t\tconst tempOriginalIndex = originalIndex;\r\n\r\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// as long as the elements are equal.\r\n\t\t\t\twhile (originalIndex > originalStart && modifiedIndex > modifiedStart && this.ElementsAreEqual(originalIndex, modifiedIndex)) {\r\n\t\t\t\t\toriginalIndex--;\r\n\t\t\t\t\tmodifiedIndex--;\r\n\t\t\t\t}\r\n\t\t\t\treversePoints[diagonal] = originalIndex;\r\n\r\n\t\t\t\t// STEP 4: If delta is even (overlap first happens on reverse when delta is even)\r\n\t\t\t\t// and diagonal is in the range of forward diagonals computed for numDifferences\r\n\t\t\t\t// then check for overlap.\r\n\t\t\t\tif (deltaIsEven && Math.abs(diagonal - diagonalForwardBase) <= numDifferences) {\r\n\t\t\t\t\tif (originalIndex <= forwardPoints[diagonal]) {\r\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\r\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\r\n\r\n\t\t\t\t\t\tif (tempOriginalIndex >= forwardPoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\r\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\r\n\t\t\t\t\t\t\t// Just return the recursion point\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Save current vectors to history before the next iteration\r\n\t\t\tif (numDifferences <= LocalConstants.MaxDifferencesHistory) {\r\n\t\t\t\t// We are allocating space for one extra int, which we fill with\r\n\t\t\t\t// the index of the diagonal base index\r\n\t\t\t\tlet temp = new Int32Array(diagonalForwardEnd - diagonalForwardStart + 2);\r\n\t\t\t\ttemp[0] = diagonalForwardBase - diagonalForwardStart + 1;\r\n\t\t\t\tMyArray.Copy2(forwardPoints, diagonalForwardStart, temp, 1, diagonalForwardEnd - diagonalForwardStart + 1);\r\n\t\t\t\tthis.m_forwardHistory.push(temp);\r\n\r\n\t\t\t\ttemp = new Int32Array(diagonalReverseEnd - diagonalReverseStart + 2);\r\n\t\t\t\ttemp[0] = diagonalReverseBase - diagonalReverseStart + 1;\r\n\t\t\t\tMyArray.Copy2(reversePoints, diagonalReverseStart, temp, 1, diagonalReverseEnd - diagonalReverseStart + 1);\r\n\t\t\t\tthis.m_reverseHistory.push(temp);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// If we got here, then we have the full trace in history. We just have to convert it to a change list\r\n\t\t// NOTE: This part is a bit messy\r\n\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\tforwardPoints, reversePoints,\r\n\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Shifts the given changes to provide a more intuitive diff.\r\n\t * While the first element in a diff matches the first element after the diff,\r\n\t * we shift the diff down.\r\n\t *\r\n\t * @param changes The list of changes to shift\r\n\t * @returns The shifted changes\r\n\t */\r\n\tprivate PrettifyChanges(changes: DiffChange[]): DiffChange[] {\r\n\r\n\t\t// Shift all the changes down first\r\n\t\tfor (let i = 0; i < changes.length; i++) {\r\n\t\t\tconst change = changes[i];\r\n\t\t\tconst originalStop = (i < changes.length - 1) ? changes[i + 1].originalStart : this._originalElementsOrHash.length;\r\n\t\t\tconst modifiedStop = (i < changes.length - 1) ? changes[i + 1].modifiedStart : this._modifiedElementsOrHash.length;\r\n\t\t\tconst checkOriginal = change.originalLength > 0;\r\n\t\t\tconst checkModified = change.modifiedLength > 0;\r\n\r\n\t\t\twhile (change.originalStart + change.originalLength < originalStop &&\r\n\t\t\t\tchange.modifiedStart + change.modifiedLength < modifiedStop &&\r\n\t\t\t\t(!checkOriginal || this.OriginalElementsAreEqual(change.originalStart, change.originalStart + change.originalLength)) &&\r\n\t\t\t\t(!checkModified || this.ModifiedElementsAreEqual(change.modifiedStart, change.modifiedStart + change.modifiedLength))) {\r\n\t\t\t\tchange.originalStart++;\r\n\t\t\t\tchange.modifiedStart++;\r\n\t\t\t}\r\n\r\n\t\t\tlet mergedChangeArr: Array<DiffChange | null> = [null];\r\n\t\t\tif (i < changes.length - 1 && this.ChangesOverlap(changes[i], changes[i + 1], mergedChangeArr)) {\r\n\t\t\t\tchanges[i] = mergedChangeArr[0]!;\r\n\t\t\t\tchanges.splice(i + 1, 1);\r\n\t\t\t\ti--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Shift changes back up until we hit empty or whitespace-only lines\r\n\t\tfor (let i = changes.length - 1; i >= 0; i--) {\r\n\t\t\tconst change = changes[i];\r\n\r\n\t\t\tlet originalStop = 0;\r\n\t\t\tlet modifiedStop = 0;\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tconst prevChange = changes[i - 1];\r\n\t\t\t\tif (prevChange.originalLength > 0) {\r\n\t\t\t\t\toriginalStop = prevChange.originalStart + prevChange.originalLength;\r\n\t\t\t\t}\r\n\t\t\t\tif (prevChange.modifiedLength > 0) {\r\n\t\t\t\t\tmodifiedStop = prevChange.modifiedStart + prevChange.modifiedLength;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst checkOriginal = change.originalLength > 0;\r\n\t\t\tconst checkModified = change.modifiedLength > 0;\r\n\r\n\t\t\tlet bestDelta = 0;\r\n\t\t\tlet bestScore = this._boundaryScore(change.originalStart, change.originalLength, change.modifiedStart, change.modifiedLength);\r\n\r\n\t\t\tfor (let delta = 1; ; delta++) {\r\n\t\t\t\tconst originalStart = change.originalStart - delta;\r\n\t\t\t\tconst modifiedStart = change.modifiedStart - delta;\r\n\r\n\t\t\t\tif (originalStart < originalStop || modifiedStart < modifiedStop) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkOriginal && !this.OriginalElementsAreEqual(originalStart, originalStart + change.originalLength)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkModified && !this.ModifiedElementsAreEqual(modifiedStart, modifiedStart + change.modifiedLength)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst score = this._boundaryScore(originalStart, change.originalLength, modifiedStart, change.modifiedLength);\r\n\r\n\t\t\t\tif (score > bestScore) {\r\n\t\t\t\t\tbestScore = score;\r\n\t\t\t\t\tbestDelta = delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tchange.originalStart -= bestDelta;\r\n\t\t\tchange.modifiedStart -= bestDelta;\r\n\t\t}\r\n\r\n\t\treturn changes;\r\n\t}\r\n\r\n\tprivate _OriginalIsBoundary(index: number): boolean {\r\n\t\tif (index <= 0 || index >= this._originalElementsOrHash.length - 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._originalStringElements[index]));\r\n\t}\r\n\r\n\tprivate _OriginalRegionIsBoundary(originalStart: number, originalLength: number): boolean {\r\n\t\tif (this._OriginalIsBoundary(originalStart) || this._OriginalIsBoundary(originalStart - 1)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (originalLength > 0) {\r\n\t\t\tconst originalEnd = originalStart + originalLength;\r\n\t\t\tif (this._OriginalIsBoundary(originalEnd - 1) || this._OriginalIsBoundary(originalEnd)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate _ModifiedIsBoundary(index: number): boolean {\r\n\t\tif (index <= 0 || index >= this._modifiedElementsOrHash.length - 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._modifiedStringElements[index]));\r\n\t}\r\n\r\n\tprivate _ModifiedRegionIsBoundary(modifiedStart: number, modifiedLength: number): boolean {\r\n\t\tif (this._ModifiedIsBoundary(modifiedStart) || this._ModifiedIsBoundary(modifiedStart - 1)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (modifiedLength > 0) {\r\n\t\t\tconst modifiedEnd = modifiedStart + modifiedLength;\r\n\t\t\tif (this._ModifiedIsBoundary(modifiedEnd - 1) || this._ModifiedIsBoundary(modifiedEnd)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate _boundaryScore(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number): number {\r\n\t\tconst originalScore = (this._OriginalRegionIsBoundary(originalStart, originalLength) ? 1 : 0);\r\n\t\tconst modifiedScore = (this._ModifiedRegionIsBoundary(modifiedStart, modifiedLength) ? 1 : 0);\r\n\t\treturn (originalScore + modifiedScore);\r\n\t}\r\n\r\n\t/**\r\n\t * Concatenates the two input DiffChange lists and returns the resulting\r\n\t * list.\r\n\t * @param The left changes\r\n\t * @param The right changes\r\n\t * @returns The concatenated list\r\n\t */\r\n\tprivate ConcatenateChanges(left: DiffChange[], right: DiffChange[]): DiffChange[] {\r\n\t\tlet mergedChangeArr: DiffChange[] = [];\r\n\r\n\t\tif (left.length === 0 || right.length === 0) {\r\n\t\t\treturn (right.length > 0) ? right : left;\r\n\t\t} else if (this.ChangesOverlap(left[left.length - 1], right[0], mergedChangeArr)) {\r\n\t\t\t// Since we break the problem down recursively, it is possible that we\r\n\t\t\t// might recurse in the middle of a change thereby splitting it into\r\n\t\t\t// two changes. Here in the combining stage, we detect and fuse those\r\n\t\t\t// changes back together\r\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length - 1);\r\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length - 1);\r\n\t\t\tresult[left.length - 1] = mergedChangeArr[0];\r\n\t\t\tMyArray.Copy(right, 1, result, left.length, right.length - 1);\r\n\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length);\r\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length);\r\n\t\t\tMyArray.Copy(right, 0, result, left.length, right.length);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if the two changes overlap and can be merged into a single\r\n\t * change\r\n\t * @param left The left change\r\n\t * @param right The right change\r\n\t * @param mergedChange The merged change if the two overlap, null otherwise\r\n\t * @returns True if the two changes overlap\r\n\t */\r\n\tprivate ChangesOverlap(left: DiffChange, right: DiffChange, mergedChangeArr: Array<DiffChange | null>): boolean {\r\n\t\tDebug.Assert(left.originalStart <= right.originalStart, 'Left change is not less than or equal to right change');\r\n\t\tDebug.Assert(left.modifiedStart <= right.modifiedStart, 'Left change is not less than or equal to right change');\r\n\r\n\t\tif (left.originalStart + left.originalLength >= right.originalStart || left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n\t\t\tconst originalStart = left.originalStart;\r\n\t\t\tlet originalLength = left.originalLength;\r\n\t\t\tconst modifiedStart = left.modifiedStart;\r\n\t\t\tlet modifiedLength = left.modifiedLength;\r\n\r\n\t\t\tif (left.originalStart + left.originalLength >= right.originalStart) {\r\n\t\t\t\toriginalLength = right.originalStart + right.originalLength - left.originalStart;\r\n\t\t\t}\r\n\t\t\tif (left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n\t\t\t\tmodifiedLength = right.modifiedStart + right.modifiedLength - left.modifiedStart;\r\n\t\t\t}\r\n\r\n\t\t\tmergedChangeArr[0] = new DiffChange(originalStart, originalLength, modifiedStart, modifiedLength);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tmergedChangeArr[0] = null;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Helper method used to clip a diagonal index to the range of valid\r\n\t * diagonals. This also decides whether or not the diagonal index,\r\n\t * if it exceeds the boundary, should be clipped to the boundary or clipped\r\n\t * one inside the boundary depending on the Even/Odd status of the boundary\r\n\t * and numDifferences.\r\n\t * @param diagonal The index of the diagonal to clip.\r\n\t * @param numDifferences The current number of differences being iterated upon.\r\n\t * @param diagonalBaseIndex The base reference diagonal.\r\n\t * @param numDiagonals The total number of diagonals.\r\n\t * @returns The clipped diagonal index.\r\n\t */\r\n\tprivate ClipDiagonalBound(diagonal: number, numDifferences: number, diagonalBaseIndex: number, numDiagonals: number): number {\r\n\t\tif (diagonal >= 0 && diagonal < numDiagonals) {\r\n\t\t\t// Nothing to clip, its in range\r\n\t\t\treturn diagonal;\r\n\t\t}\r\n\r\n\t\t// diagonalsBelow: The number of diagonals below the reference diagonal\r\n\t\t// diagonalsAbove: The number of diagonals above the reference diagonal\r\n\t\tconst diagonalsBelow = diagonalBaseIndex;\r\n\t\tconst diagonalsAbove = numDiagonals - diagonalBaseIndex - 1;\r\n\t\tconst diffEven = (numDifferences % 2 === 0);\r\n\r\n\t\tif (diagonal < 0) {\r\n\t\t\tconst lowerBoundEven = (diagonalsBelow % 2 === 0);\r\n\t\t\treturn (diffEven === lowerBoundEven) ? 0 : 1;\r\n\t\t} else {\r\n\t\t\tconst upperBoundEven = (diagonalsAbove % 2 === 0);\r\n\t\t\treturn (diffEven === upperBoundEven) ? numDiagonals - 1 : numDiagonals - 2;\r\n\t\t}\r\n\t}\r\n}\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\ninterface Item<K, V> {\n\tprevious: Item<K, V> | undefined;\n\tnext: Item<K, V> | undefined;\n\tkey: K;\n\tvalue: V;\n}\n\nexport namespace Touch {\n\texport const None: 0 = 0;\n\texport const First: 1 = 1;\n\texport const AsOld: 1 = Touch.First;\n\texport const Last: 2 = 2;\n\texport const AsNew: 2 = Touch.Last;\n}\n\nexport type Touch = 0 | 1 | 2;\n\nexport class LinkedMap<K, V> implements Map<K, V> {\n\n\treadonly [Symbol.toStringTag] = 'LinkedMap';\n\n\tprivate _map: Map<K, Item<K, V>>;\n\tprivate _head: Item<K, V> | undefined;\n\tprivate _tail: Item<K, V> | undefined;\n\tprivate _size: number;\n\n\tprivate _state: number;\n\n\tpublic constructor() {\n\t\tthis._map = new Map<K, Item<K, V>>();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state = 0;\n\t}\n\n\tpublic clear(): void {\n\t\tthis._map.clear();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state++;\n\t}\n\n\tpublic isEmpty(): boolean {\n\t\treturn !this._head && !this._tail;\n\t}\n\n\tpublic get size(): number {\n\t\treturn this._size;\n\t}\n\n\tpublic get first(): V | undefined {\n\t\treturn this._head?.value;\n\t}\n\n\tpublic get last(): V | undefined {\n\t\treturn this._tail?.value;\n\t}\n\n\tpublic has(key: K): boolean {\n\t\treturn this._map.has(key);\n\t}\n\n\tpublic get(key: K, touch: Touch = Touch.None): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (touch !== Touch.None) {\n\t\t\tthis.touch(item, touch);\n\t\t}\n\t\treturn item.value;\n\t}\n\n\tpublic set(key: K, value: V, touch: Touch = Touch.None): this {\n\t\tlet item = this._map.get(key);\n\t\tif (item) {\n\t\t\titem.value = value;\n\t\t\tif (touch !== Touch.None) {\n\t\t\t\tthis.touch(item, touch);\n\t\t\t}\n\t\t} else {\n\t\t\titem = { key, value, next: undefined, previous: undefined };\n\t\t\tswitch (touch) {\n\t\t\t\tcase Touch.None:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.First:\n\t\t\t\t\tthis.addItemFirst(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.Last:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._map.set(key, item);\n\t\t\tthis._size++;\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic delete(key: K): boolean {\n\t\treturn !!this.remove(key);\n\t}\n\n\tpublic remove(key: K): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._map.delete(key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tpublic shift(): V | undefined {\n\t\tif (!this._head && !this._tail) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tconst item = this._head;\n\t\tthis._map.delete(item.key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tpublic forEach(callbackfn: (value: V, key: K, map: LinkedMap<K, V>) => void, thisArg?: any): void {\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\twhile (current) {\n\t\t\tif (thisArg) {\n\t\t\t\tcallbackfn.bind(thisArg)(current.value, current.key, this);\n\t\t\t} else {\n\t\t\t\tcallbackfn(current.value, current.key, this);\n\t\t\t}\n\t\t\tif (this._state !== state) {\n\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n\n\tpublic keys(): IterableIterator<K> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<K> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<K> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.key, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tpublic values(): IterableIterator<V> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<V> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<V> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.value, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tpublic entries(): IterableIterator<[K, V]> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<[K, V]> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<[K, V]> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result: IteratorResult<[K, V]> = { value: [current.key, current.value], done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tpublic [Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.entries();\n\t}\n\n\tprotected trimOld(newSize: number) {\n\t\tif (newSize >= this.size) {\n\t\t\treturn;\n\t\t}\n\t\tif (newSize === 0) {\n\t\t\tthis.clear();\n\t\t\treturn;\n\t\t}\n\t\tlet current = this._head;\n\t\tlet currentSize = this.size;\n\t\twhile (current && currentSize > newSize) {\n\t\t\tthis._map.delete(current.key);\n\t\t\tcurrent = current.next;\n\t\t\tcurrentSize--;\n\t\t}\n\t\tthis._head = current;\n\t\tthis._size = currentSize;\n\t\tif (current) {\n\t\t\tcurrent.previous = undefined;\n\t\t}\n\t\tthis._state++;\n\t}\n\n\tprivate addItemFirst(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._tail = item;\n\t\t} else if (!this._head) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t}\n\t\tthis._head = item;\n\t\tthis._state++;\n\t}\n\n\tprivate addItemLast(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._head = item;\n\t\t} else if (!this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t}\n\t\tthis._tail = item;\n\t\tthis._state++;\n\t}\n\n\tprivate removeItem(item: Item<K, V>): void {\n\t\tif (item === this._head && item === this._tail) {\n\t\t\tthis._head = undefined;\n\t\t\tthis._tail = undefined;\n\t\t}\n\t\telse if (item === this._head) {\n\t\t\t// This can only happend if size === 1 which is handle\n\t\t\t// by the case above.\n\t\t\tif (!item.next) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.next.previous = undefined;\n\t\t\tthis._head = item.next;\n\t\t}\n\t\telse if (item === this._tail) {\n\t\t\t// This can only happend if size === 1 which is handle\n\t\t\t// by the case above.\n\t\t\tif (!item.previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.previous.next = undefined;\n\t\t\tthis._tail = item.previous;\n\t\t}\n\t\telse {\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\t\t\tif (!next || !previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\tnext.previous = previous;\n\t\t\tprevious.next = next;\n\t\t}\n\t\titem.next = undefined;\n\t\titem.previous = undefined;\n\t\tthis._state++;\n\t}\n\n\tprivate touch(item: Item<K, V>, touch: Touch): void {\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tif ((touch !== Touch.First && touch !== Touch.Last)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (touch === Touch.First) {\n\t\t\tif (item === this._head) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item\n\t\t\tif (item === this._tail) {\n\t\t\t\t// previous must be defined since item was not head but is tail\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tprevious!.next = undefined;\n\t\t\t\tthis._tail = previous;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\n\t\t\t// Insert the node at head\n\t\t\titem.previous = undefined;\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t\tthis._head = item;\n\t\t\tthis._state++;\n\t\t} else if (touch === Touch.Last) {\n\t\t\tif (item === this._tail) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item.\n\t\t\tif (item === this._head) {\n\t\t\t\t// next must be defined since item was not tail but is head\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tnext!.previous = undefined;\n\t\t\t\tthis._head = next;\n\t\t\t} else {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\t\t\titem.next = undefined;\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t\tthis._tail = item;\n\t\t\tthis._state++;\n\t\t}\n\t}\n\n\tpublic toJSON(): [K, V][] {\n\t\tconst data: [K, V][] = [];\n\n\t\tthis.forEach((value, key) => {\n\t\t\tdata.push([key, value]);\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tpublic fromJSON(data: [K, V][]): void {\n\t\tthis.clear();\n\n\t\tfor (const [key, value] of data) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t}\n}\n\nexport class LRUCache<K, V> extends LinkedMap<K, V> {\n\n\tprivate _limit: number;\n\tprivate _ratio: number;\n\n\tpublic constructor(limit: number, ratio: number = 1) {\n\t\tsuper();\n\t\tthis._limit = limit;\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t}\n\n\tpublic get limit(): number {\n\t\treturn this._limit;\n\t}\n\n\tpublic set limit(limit: number) {\n\t\tthis._limit = limit;\n\t\tthis.checkTrim();\n\t}\n\n\tpublic get ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tpublic set ratio(ratio: number) {\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t\tthis.checkTrim();\n\t}\n\n\tpublic get(key: K, touch: Touch = Touch.AsNew): V | undefined {\n\t\treturn super.get(key, touch);\n\t}\n\n\tpublic peek(key: K): V | undefined {\n\t\treturn super.get(key, Touch.None);\n\t}\n\n\tpublic set(key: K, value: V): this {\n\t\tsuper.set(key, value, Touch.Last);\n\t\tthis.checkTrim();\n\t\treturn this;\n\t}\n\n\tprivate checkTrim() {\n\t\tif (this.size > this._limit) {\n\t\t\tthis.trimOld(Math.round(this._limit * this._ratio));\n\t\t}\n\t}\n}","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.Trace = exports.ProgressType = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.RAL = void 0;\nexports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n//# sourceMappingURL=api.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n//# sourceMappingURL=cancellation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.Trace = exports.NullLogger = exports.ProgressType = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.createCancellationTokenSource);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = Object.create(null);\n    let starNotificationHandler = undefined;\n    const notificationHandlers = Object.create(null);\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = Object.create(null);\n    let knownCanceledRequests = new Set();\n    let requestTokens = Object.create(null);\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if ((0, messages_1.isRequestMessage)(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if ((0, messages_1.isResponseMessage)(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            if ((0, messages_1.isRequestMessage)(message)) {\n                handleRequest(message);\n            }\n            else if ((0, messages_1.isNotificationMessage)(message)) {\n                handleNotification(message);\n            }\n            else if ((0, messages_1.isResponseMessage)(message)) {\n                handleResponse(message);\n            }\n            else {\n                handleInvalidMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if ((0, messages_1.isNotificationMessage)(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if ((0, messages_1.isRequestMessage)(toCancel)) {\n                    const strategy = options === null || options === void 0 ? void 0 : options.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const tokenKey = String(cancelId);\n                const cancellationToken = requestTokens[tokenKey];\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers[requestMessage.method];\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = String(requestMessage.id);\n            const cancellationSource = cancellationStrategy.receiver.createCancellationTokenSource(tokenKey);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            requestTokens[tokenKey] = cancellationSource;\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    delete requestTokens[tokenKey];\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        delete requestTokens[tokenKey];\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        delete requestTokens[tokenKey];\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    delete requestTokens[tokenKey];\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                delete requestTokens[tokenKey];\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = String(responseMessage.id);\n            const responsePromise = responsePromises[key];\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise) {\n                delete responsePromises[key];\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers[message.method];\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        if (type !== undefined) {\n                            if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                            }\n                            if (type.numberOfParams !== message.params.length) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${message.params.length} arguments`);\n                            }\n                        }\n                        notificationHandler(...message.params);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = String(responseMessage.id);\n            const responseHandler = responsePromises[key];\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch(() => logger.error(`Sending notification failed.`));\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers[type.method] = { type, handler };\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        delete notificationHandlers[method];\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const result = new Promise((resolve, reject) => {\n                const requestMessage = {\n                    jsonrpc: version,\n                    id: id,\n                    method: method,\n                    params: messageParams\n                };\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                let responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                traceSendingRequest(requestMessage);\n                try {\n                    messageWriter.write(requestMessage).catch(() => logger.error(`Sending request failed.`));\n                }\n                catch (e) {\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\n                    responsePromise = null;\n                }\n                if (responsePromise) {\n                    responsePromises[String(id)] = responsePromise;\n                }\n            });\n            return result;\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers[type] = { handler: handler, type: undefined };\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers[type.method] = { type, handler };\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        delete requestHandlers[method];\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) }).catch(() => {\n                    logger.error(`Sending trace notification failed`);\n                });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new Error('Connection got disposed.');\n            Object.keys(responsePromises).forEach((key) => {\n                responsePromises[key].reject(error);\n            });\n            responsePromises = Object.create(null);\n            requestTokens = Object.create(null);\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n//# sourceMappingURL=disposable.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n//# sourceMappingURL=events.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        var _b;\n        return (_b = this._head) === null || _b === void 0 ? void 0 : _b.value;\n    }\n    get last() {\n        var _b;\n        return (_b = this._tail) === null || _b === void 0 ? void 0 : _b.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=linkedMap.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders() {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n//# sourceMappingURL=messageBuffer.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        var _a;\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options !== null && options !== void 0 ? options : 'utf-8';\n        }\n        else {\n            charset = (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders();\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('Content-Length');\n                if (!contentLength) {\n                    throw new Error('Header must provide a Content-Length property.');\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    throw new Error('Content-Length value must be a number.');\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            let p;\n            if (this.options.contentDecoder !== undefined) {\n                p = this.options.contentDecoder.decode(body);\n            }\n            else {\n                p = Promise.resolve(body);\n            }\n            p.then((value) => {\n                this.options.contentTypeDecoder.decode(value, this.options).then((msg) => {\n                    this.callback(msg);\n                }, (error) => {\n                    this.fireError(error);\n                });\n            }, (error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n//# sourceMappingURL=messageReader.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        var _a, _b;\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options !== null && options !== void 0 ? options : 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: (_b = options.contentTypeEncoder) !== null && _b !== void 0 ? _b : (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n//# sourceMappingURL=messageWriter.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isResponseMessage = exports.isNotificationMessage = exports.isRequestMessage = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = ErrorCodes.jsonrpcReservedErrorRangeStart;\n    ErrorCodes.MessageWriteError = -32099;\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = ErrorCodes.jsonrpcReservedErrorRangeEnd;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\n/**\n * Tests if the given message is a request message\n */\nfunction isRequestMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n}\nexports.isRequestMessage = isRequestMessage;\n/**\n * Tests if the given message is a notification message\n */\nfunction isNotificationMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && message.id === void 0;\n}\nexports.isNotificationMessage = isNotificationMessage;\n/**\n * Tests if the given message is a response message\n */\nfunction isResponseMessage(message) {\n    const candidate = message;\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n}\nexports.isResponseMessage = isResponseMessage;\n//# sourceMappingURL=messages.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n//# sourceMappingURL=ral.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n//# sourceMappingURL=semaphore.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readble, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readble), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length >= limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=main.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"../common/ral\");\nconst util_1 = require(\"util\");\nconst disposable_1 = require(\"../common/disposable\");\nconst messageBuffer_1 = require(\"../common/messageBuffer\");\nclass MessageBuffer extends messageBuffer_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        ral_1.default.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n//# sourceMappingURL=ril.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Proposed = exports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes = exports.LSPErrorCodes || (exports.LSPErrorCodes = {}));\nconst diag = require(\"./proposed.diagnostic\");\nconst typeh = require(\"./proposed.typeHierarchy\");\nvar Proposed;\n(function (Proposed) {\n    Proposed.DiagnosticServerCancellationData = diag.DiagnosticServerCancellationData;\n    Proposed.DocumentDiagnosticReportKind = diag.DocumentDiagnosticReportKind;\n    Proposed.DocumentDiagnosticRequest = diag.DocumentDiagnosticRequest;\n    Proposed.WorkspaceDiagnosticRequest = diag.WorkspaceDiagnosticRequest;\n    Proposed.DiagnosticRefreshRequest = diag.DiagnosticRefreshRequest;\n    Proposed.TypeHierarchyPrepareRequest = typeh.TypeHierarchyPrepareRequest;\n    Proposed.TypeHierarchySupertypesRequest = typeh.TypeHierarchySupertypesRequest;\n    Proposed.TypeHierarchySubtypesRequest = typeh.TypeHierarchySubtypesRequest;\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n//# sourceMappingURL=messages.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0 - proposed state\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData = exports.DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0 - proposed state\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind[\"full\"] = \"full\";\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind[\"unChanged\"] = \"unChanged\";\n})(DocumentDiagnosticReportKind = exports.DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0 - proposed state\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest = exports.DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0 - proposed state\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest = exports.WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0 - proposed state\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest = exports.DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = {}));\n//# sourceMappingURL=proposed.diagnostic.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0 - proposed state\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest = exports.TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0 - proposed state\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest = exports.TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0 - proposed state\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest = exports.TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = {}));\n//# sourceMappingURL=proposed.typeHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to a incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\n//# sourceMappingURL=protocol.callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\n//# sourceMappingURL=protocol.colorProvider.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\n//# sourceMappingURL=protocol.configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\n * to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\n//# sourceMappingURL=protocol.declaration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind = exports.FileOperationPatternKind || (exports.FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest = exports.WillCreateFilesRequest || (exports.WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification = exports.DidCreateFilesNotification || (exports.DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest = exports.WillRenameFilesRequest || (exports.WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification = exports.DidRenameFilesNotification || (exports.DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification = exports.DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest = exports.WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = {}));\n//# sourceMappingURL=protocol.fileOperations.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRequest = exports.FoldingRangeKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Enum of known range kinds\n */\nvar FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\n//# sourceMappingURL=protocol.foldingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\n//# sourceMappingURL=protocol.implementation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeError = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.DocumentFilter = void 0;\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolders_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The DocumentFilter namespace provides helper functions to work with\n * [DocumentFilter](#DocumentFilter) literals.\n */\nvar DocumentFilter;\n(function (DocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    DocumentFilter.is = is;\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * [DocumentSelector](#DocumentSelector)s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type [InitializeParams](#InitializeParams)\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeError`;\n */\nvar InitializeError;\n(function (InitializeError) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeError.unknownProtocolVersion = 1;\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent = exports.TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type [CompletionItem](#CompletionItem) the response\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\n * type [Hover](#Hover) or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\n * to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type [ReferenceParams](#ReferenceParams) the response is of type\n * [Location[]](#Location) or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n/**\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type [CodeAction](#CodeAction) the response\n * is of type [CodeAction](#CodeAction) or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest = exports.CodeActionResolveRequest || (exports.CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\n * resolves to such.\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest = exports.CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type [DocumentLink](#DocumentLink) the response\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior = exports.PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n//# sourceMappingURL=protocol.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest = exports.LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = {}));\n//# sourceMappingURL=protocol.linkedEditingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel[\"document\"] = \"document\";\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel[\"project\"] = \"project\";\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel[\"group\"] = \"group\";\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel[\"scheme\"] = \"scheme\";\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel[\"global\"] = \"global\";\n})(UniquenessLevel = exports.UniquenessLevel || (exports.UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind[\"import\"] = \"import\";\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind[\"export\"] = \"export\";\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind[\"local\"] = \"local\";\n})(MonikerKind = exports.MonikerKind || (exports.MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type [TextDocumentPositionParams](#TextDocumentPositionParams).\n * The response is of type [Moniker[]](#Moniker[]) or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest = exports.MonikerRequest || (exports.MonikerRequest = {}));\n//# sourceMappingURL=protocol.moniker.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\n//# sourceMappingURL=protocol.progress.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\n//# sourceMappingURL=protocol.selectionRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat = exports.TokenFormat || (exports.TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType = exports.SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n})(SemanticTokensDeltaRequest = exports.SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest = exports.SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = {}));\n//# sourceMappingURL=protocol.semanticTokens.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest = exports.ShowDocumentRequest || (exports.ShowDocumentRequest = {}));\n//# sourceMappingURL=protocol.showDocument.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\n//# sourceMappingURL=protocol.typeDefinition.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\n//# sourceMappingURL=protocol.workspaceFolders.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__exportStar(require(\"vscode-jsonrpc/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(input, output, logger, options) {\n    return (0, node_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=main.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (changes, version) {\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                var range = getWellformedRange(change.range);\n                // update content\n                var startOffset = this.offsetAt(range.start);\n                var endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                var startLine = Math.max(range.start.line, 0);\n                var endLine = Math.max(range.end.line, 0);\n                var lineOffsets = this._lineOffsets;\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice.apply(lineOffsets, __spreadArray([startLine + 1, endLine - startLine], addedLineOffsets, false));\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                var diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return { line: line, character: offset - lineOffsets[line] };\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.isIncremental = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    };\n    FullTextDocument.isFull = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    };\n    return FullTextDocument;\n}());\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifying its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @param version the changes version for the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = 0;\n        var spans = [];\n        for (var _i = 0, sortedEdits_1 = sortedEdits; _i < sortedEdits_1.length; _i++) {\n            var e = sortedEdits_1[_i];\n            var startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    var p = (data.length / 2) | 0;\n    var left = data.slice(0, p);\n    var right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    var leftIdx = 0;\n    var rightIdx = 0;\n    var i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        var ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\n    if (textOffset === void 0) { textOffset = 0; }\n    var result = isAtLineStart ? [textOffset] : [];\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charCodeAt(i);\n        if (ch === 13 /* CarriageReturn */ || ch === 10 /* LineFeed */) {\n            if (ch === 13 /* CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction getWellformedRange(range) {\n    var start = range.start;\n    var end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    var range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range: range };\n    }\n    return textEdit;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nexport var integer;\n(function (integer) {\n    integer.MIN_VALUE = -2147483648;\n    integer.MAX_VALUE = 2147483647;\n})(integer || (integer = {}));\nexport var uinteger;\n(function (uinteger) {\n    uinteger.MIN_VALUE = 0;\n    uinteger.MAX_VALUE = 2147483647;\n})(uinteger || (uinteger = {}));\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        if (line === Number.MAX_VALUE) {\n            line = uinteger.MAX_VALUE;\n        }\n        if (character === Number.MAX_VALUE) {\n            character = uinteger.MAX_VALUE;\n        }\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * [LocationLink](#LocationLink) literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && Range.is(candidate.targetSelectionRange)\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [Color](#Color) literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.numberRange(candidate.red, 0, 1)\n            && Is.numberRange(candidate.green, 0, 1)\n            && Is.numberRange(candidate.blue, 0, 1)\n            && Is.numberRange(candidate.alpha, 0, 1);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * [ColorInformation](#ColorInformation) literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [ColorPresentation](#ColorPresentation) literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * Enum of known range kinds\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * [FoldingRange](#FoldingRange) literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n *\n * @since 3.16.0\n */\nexport var CodeDescription;\n(function (CodeDescription) {\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && Is.string(candidate.href);\n    }\n    CodeDescription.is = is;\n})(CodeDescription || (CodeDescription = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var _a;\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\nexport var ChangeAnnotation;\n(function (ChangeAnnotation) {\n    function create(label, needsConfirmation, description) {\n        var result = { label: label };\n        if (needsConfirmation !== undefined) {\n            result.needsConfirmation = needsConfirmation;\n        }\n        if (description !== undefined) {\n            result.description = description;\n        }\n        return result;\n    }\n    ChangeAnnotation.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n            (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    ChangeAnnotation.is = is;\n})(ChangeAnnotation || (ChangeAnnotation = {}));\nexport var ChangeAnnotationIdentifier;\n(function (ChangeAnnotationIdentifier) {\n    function is(value) {\n        var candidate = value;\n        return typeof candidate === 'string';\n    }\n    ChangeAnnotationIdentifier.is = is;\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\nexport var AnnotatedTextEdit;\n(function (AnnotatedTextEdit) {\n    /**\n     * Creates an annotated replace text edit.\n     *\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     * @param annotation The annotation.\n     */\n    function replace(range, newText, annotation) {\n        return { range: range, newText: newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.replace = replace;\n    /**\n     * Creates an annotated insert text edit.\n     *\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     * @param annotation The annotation.\n     */\n    function insert(position, newText, annotation) {\n        return { range: { start: position, end: position }, newText: newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.insert = insert;\n    /**\n     * Creates an annotated delete text edit.\n     *\n     * @param range The range of text to be deleted.\n     * @param annotation The annotation.\n     */\n    function del(range, annotation) {\n        return { range: range, newText: '', annotationId: annotation };\n    }\n    AnnotatedTextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    AnnotatedTextEdit.is = is;\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options, annotation) {\n        var result = {\n            kind: 'create',\n            uri: uri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options, annotation) {\n        var result = {\n            kind: 'rename',\n            oldUri: oldUri,\n            newUri: newUri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options, annotation) {\n        var result = {\n            kind: 'delete',\n            uri: uri\n        };\n        if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n            (candidate.documentChanges === undefined || candidate.documentChanges.every(function (change) {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits, changeAnnotations) {\n        this.edits = edits;\n        this.changeAnnotations = changeAnnotations;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.insert(position, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.insert(position, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.insert(position, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.replace(range, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.replace(range, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.replace(range, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.delete = function (range, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.del(range);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.del(range, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.del(range, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    TextEditChangeImpl.prototype.assertChangeAnnotations = function (value) {\n        if (value === undefined) {\n            throw new Error(\"Text edit change is not configured to manage change annotations.\");\n        }\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A helper class\n */\nvar ChangeAnnotations = /** @class */ (function () {\n    function ChangeAnnotations(annotations) {\n        this._annotations = annotations === undefined ? Object.create(null) : annotations;\n        this._counter = 0;\n        this._size = 0;\n    }\n    ChangeAnnotations.prototype.all = function () {\n        return this._annotations;\n    };\n    Object.defineProperty(ChangeAnnotations.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ChangeAnnotations.prototype.manage = function (idOrAnnotation, annotation) {\n        var id;\n        if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n            id = idOrAnnotation;\n        }\n        else {\n            id = this.nextId();\n            annotation = idOrAnnotation;\n        }\n        if (this._annotations[id] !== undefined) {\n            throw new Error(\"Id \" + id + \" is already in use.\");\n        }\n        if (annotation === undefined) {\n            throw new Error(\"No annotation provided for id \" + id);\n        }\n        this._annotations[id] = annotation;\n        this._size++;\n        return id;\n    };\n    ChangeAnnotations.prototype.nextId = function () {\n        this._counter++;\n        return this._counter.toString();\n    };\n    return ChangeAnnotations;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit !== undefined) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                workspaceEdit.documentChanges.forEach(function (change) {\n                    if (TextDocumentEdit.is(change)) {\n                        var textEditChange = new TextEditChangeImpl(change.edits, _this._changeAnnotations);\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n        else {\n            this._workspaceEdit = {};\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            this.initDocumentChanges();\n            if (this._changeAnnotations !== undefined) {\n                if (this._changeAnnotations.size === 0) {\n                    this._workspaceEdit.changeAnnotations = undefined;\n                }\n                else {\n                    this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                }\n            }\n            return this._workspaceEdit;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var textDocument = { uri: key.uri, version: key.version };\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            this.initChanges();\n            if (this._workspaceEdit.changes === undefined) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    WorkspaceChange.prototype.initDocumentChanges = function () {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._changeAnnotations = new ChangeAnnotations();\n            this._workspaceEdit.documentChanges = [];\n            this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n        }\n    };\n    WorkspaceChange.prototype.initChanges = function () {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._workspaceEdit.changes = Object.create(null);\n        }\n    };\n    WorkspaceChange.prototype.createFile = function (uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = CreateFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = CreateFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = RenameFile.create(oldUri, newUri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = RenameFile.create(oldUri, newUri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    WorkspaceChange.prototype.deleteFile = function (uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = DeleteFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = DeleteFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [OptionalVersionedTextDocumentIdentifier](#OptionalVersionedTextDocumentIdentifier) literals.\n */\nexport var OptionalVersionedTextDocumentIdentifier;\n(function (OptionalVersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    OptionalVersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [OptionalVersionedTextDocumentIdentifier](#OptionalVersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n    }\n    OptionalVersionedTextDocumentIdentifier.is = is;\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n(function (MarkupKind) {\n    /**\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText: newText, insert: insert, replace: replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given literal conforms to the [InsertReplaceEdit](#InsertReplaceEdit) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * How whitespace and indentation is handled during completion\n * item insertion.\n *\n * @since 3.16.0\n */\nexport var InsertTextMode;\n(function (InsertTextMode) {\n    /**\n     * The insertion or replace strings is taken as it is. If the\n     * value is multi line the lines below the cursor will be\n     * inserted using the indentation defined in the string value.\n     * The client will not apply any kind of adjustments to the\n     * string.\n     */\n    InsertTextMode.asIs = 1;\n    /**\n     * The editor adjusts leading whitespace of new lines so that\n     * they match the indentation up to the cursor of the line for\n     * which the item is accepted.\n     *\n     * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n     * multi line completion item is indented using 2 tabs and all\n     * following lines inserted will be indented using 2 tabs as well.\n     */\n    InsertTextMode.adjustIndentation = 2;\n})(InsertTextMode || (InsertTextMode = {}));\nexport var CompletionItemLabelDetails;\n(function (CompletionItemLabelDetails) {\n    function is(value) {\n        var candidate = value;\n        return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    CompletionItemLabelDetails.is = is;\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     * @param kind The highlight kind\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== undefined) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === undefined || Is.string(candidate.detail)) &&\n            (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === undefined || Array.isArray(candidate.children)) &&\n            (candidate.tags === undefined || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only) {\n        var result = { diagnostics: diagnostics };\n        if (only !== undefined && only !== null) {\n            result.only = only;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string));\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, kindOrCommandOrEdit, kind) {\n        var result = { title: title };\n        var checkKind = true;\n        if (typeof kindOrCommandOrEdit === 'string') {\n            checkKind = false;\n            result.kind = kindOrCommandOrEdit;\n        }\n        else if (Command.is(kindOrCommandOrEdit)) {\n            result.command = kindOrCommandOrEdit;\n        }\n        else {\n            result.edit = kindOrCommandOrEdit;\n        }\n        if (checkKind && kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === undefined || Is.string(candidate.kind)) &&\n            (candidate.edit !== undefined || candidate.command !== undefined) &&\n            (candidate.command === undefined || Command.is(candidate.command)) &&\n            (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range: range, parent: parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    /**\n     * Represents a generic type. Acts as a fallback for types which can't be mapped to\n     * a specific type like class or enum.\n     */\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"method\"] = \"method\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0\n */\nexport var SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens || (SemanticTokens = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId The document's language Id.\n     * @param version The document's version.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function numberRange(value, min, max) {\n        return toString.call(value) === '[object Number]' && min <= value && value <= max;\n    }\n    Is.numberRange = numberRange;\n    function integer(value) {\n        return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n    }\n    Is.integer = integer;\n    function uinteger(value) {\n        return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n    }\n    Is.uinteger = uinteger;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.SemanticTokensBuilder = void 0;\nconst semanticTokens_1 = require(\"./semanticTokens\");\nObject.defineProperty(exports, \"SemanticTokensBuilder\", { enumerable: true, get: function () { return semanticTokens_1.SemanticTokensBuilder; } });\n__exportStar(require(\"vscode-languageserver-protocol/\"), exports);\n__exportStar(require(\"./server\"), exports);\nconst proposed_diagnostic_1 = require(\"./proposed.diagnostic\");\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    ProposedFeatures.all = {\n        __brand: 'features',\n        languages: proposed_diagnostic_1.DiagnosticFeature\n    };\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n//# sourceMappingURL=api.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst CallHierarchyFeature = (Base) => {\n    return class extends Base {\n        get callHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onIncomingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onOutgoingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.CallHierarchyFeature = CallHierarchyFeature;\n//# sourceMappingURL=callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst ConfigurationFeature = (Base) => {\n    return class extends Base {\n        getConfiguration(arg) {\n            if (!arg) {\n                return this._getConfiguration({});\n            }\n            else if (Is.string(arg)) {\n                return this._getConfiguration({ section: arg });\n            }\n            else {\n                return this._getConfiguration(arg);\n            }\n        }\n        _getConfiguration(arg) {\n            let params = {\n                items: Array.isArray(arg) ? arg : [arg]\n            };\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, params).then((result) => {\n                return Array.isArray(arg) ? result : result[0];\n            });\n        }\n    };\n};\nexports.ConfigurationFeature = ConfigurationFeature;\n//# sourceMappingURL=configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileOperationsFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst FileOperationsFeature = (Base) => {\n    return class extends Base {\n        onDidCreateFiles(handler) {\n            this.connection.onNotification(vscode_languageserver_protocol_1.DidCreateFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onDidRenameFiles(handler) {\n            this.connection.onNotification(vscode_languageserver_protocol_1.DidRenameFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onDidDeleteFiles(handler) {\n            this.connection.onNotification(vscode_languageserver_protocol_1.DidDeleteFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onWillCreateFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillCreateFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n        onWillRenameFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillRenameFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n        onWillDeleteFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillDeleteFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n    };\n};\nexports.FileOperationsFeature = FileOperationsFeature;\n//# sourceMappingURL=fileOperations.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst LinkedEditingRangeFeature = (Base) => {\n    return class extends Base {\n        onLinkedEditingRange(handler) {\n            this.connection.onRequest(vscode_languageserver_protocol_1.LinkedEditingRangeRequest.type, (params, cancel) => {\n                return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n            });\n        }\n    };\n};\nexports.LinkedEditingRangeFeature = LinkedEditingRangeFeature;\n//# sourceMappingURL=linkedEditingRange.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst MonikerFeature = (Base) => {\n    return class extends Base {\n        get moniker() {\n            return {\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.MonikerRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n            };\n        }\n    };\n};\nexports.MonikerFeature = MonikerFeature;\n//# sourceMappingURL=moniker.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attachPartialResult = exports.ProgressFeature = exports.attachWorkDone = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nclass WorkDoneProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n        WorkDoneProgressReporterImpl.Instances.set(this._token, this);\n    }\n    begin(title, percentage, message, cancellable) {\n        let param = {\n            kind: 'begin',\n            title,\n            percentage,\n            message,\n            cancellable\n        };\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    report(arg0, arg1) {\n        let param = {\n            kind: 'report'\n        };\n        if (typeof arg0 === 'number') {\n            param.percentage = arg0;\n            if (arg1 !== undefined) {\n                param.message = arg1;\n            }\n        }\n        else {\n            param.message = arg0;\n        }\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    done() {\n        WorkDoneProgressReporterImpl.Instances.delete(this._token);\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, { kind: 'end' });\n    }\n}\nWorkDoneProgressReporterImpl.Instances = new Map();\nclass WorkDoneProgressServerReporterImpl extends WorkDoneProgressReporterImpl {\n    constructor(connection, token) {\n        super(connection, token);\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n        super.done();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nclass NullProgressReporter {\n    constructor() {\n    }\n    begin() {\n    }\n    report() {\n    }\n    done() {\n    }\n}\nclass NullProgressServerReporter extends NullProgressReporter {\n    constructor() {\n        super();\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nfunction attachWorkDone(connection, params) {\n    if (params === undefined || params.workDoneToken === undefined) {\n        return new NullProgressReporter();\n    }\n    const token = params.workDoneToken;\n    delete params.workDoneToken;\n    return new WorkDoneProgressReporterImpl(connection, token);\n}\nexports.attachWorkDone = attachWorkDone;\nconst ProgressFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._progressSupported = false;\n        }\n        initialize(capabilities) {\n            var _a;\n            super.initialize(capabilities);\n            if (((_a = capabilities === null || capabilities === void 0 ? void 0 : capabilities.window) === null || _a === void 0 ? void 0 : _a.workDoneProgress) === true) {\n                this._progressSupported = true;\n                this.connection.onNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, (params) => {\n                    let progress = WorkDoneProgressReporterImpl.Instances.get(params.token);\n                    if (progress instanceof WorkDoneProgressServerReporterImpl || progress instanceof NullProgressServerReporter) {\n                        progress.cancel();\n                    }\n                });\n            }\n        }\n        attachWorkDoneProgress(token) {\n            if (token === undefined) {\n                return new NullProgressReporter();\n            }\n            else {\n                return new WorkDoneProgressReporterImpl(this.connection, token);\n            }\n        }\n        createWorkDoneProgress() {\n            if (this._progressSupported) {\n                const token = (0, uuid_1.generateUuid)();\n                return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, { token }).then(() => {\n                    const result = new WorkDoneProgressServerReporterImpl(this.connection, token);\n                    return result;\n                });\n            }\n            else {\n                return Promise.resolve(new NullProgressServerReporter());\n            }\n        }\n    };\n};\nexports.ProgressFeature = ProgressFeature;\nvar ResultProgress;\n(function (ResultProgress) {\n    ResultProgress.type = new vscode_languageserver_protocol_1.ProgressType();\n})(ResultProgress || (ResultProgress = {}));\nclass ResultProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n    }\n    report(data) {\n        this._connection.sendProgress(ResultProgress.type, this._token, data);\n    }\n}\nfunction attachPartialResult(connection, params) {\n    if (params === undefined || params.partialResultToken === undefined) {\n        return undefined;\n    }\n    const token = params.partialResultToken;\n    delete params.partialResultToken;\n    return new ResultProgressReporterImpl(connection, token);\n}\nexports.attachPartialResult = attachPartialResult;\n//# sourceMappingURL=progress.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst DiagnosticFeature = (Base) => {\n    return class extends Base {\n        get diagnostics() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.Proposed.DiagnosticRefreshRequest.type);\n                },\n                on: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.partialResult, params));\n                    });\n                },\n                onWorkspace: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.Proposed.WorkspaceDiagnosticRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(vscode_languageserver_protocol_1.Proposed.WorkspaceDiagnosticRequest.partialResult, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.DiagnosticFeature = DiagnosticFeature;\n//# sourceMappingURL=proposed.diagnostic.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst TypeHierarchyFeature = (Base) => {\n    return class extends Base {\n        get typeHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onSupertypes: (handler) => {\n                    const type = vscode_languageserver_protocol_1.Proposed.TypeHierarchySupertypesRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onSubtypes: (handler) => {\n                    const type = vscode_languageserver_protocol_1.Proposed.TypeHierarchySubtypesRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n//# sourceMappingURL=proposed.typeHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensBuilder = exports.SemanticTokensDiff = exports.SemanticTokensFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst SemanticTokensFeature = (Base) => {\n    return class extends Base {\n        get semanticTokens() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type);\n                },\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onDelta: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onRange: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.SemanticTokensFeature = SemanticTokensFeature;\nclass SemanticTokensDiff {\n    constructor(originalSequence, modifiedSequence) {\n        this.originalSequence = originalSequence;\n        this.modifiedSequence = modifiedSequence;\n    }\n    computeDiff() {\n        const originalLength = this.originalSequence.length;\n        const modifiedLength = this.modifiedSequence.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && this.originalSequence[startIndex] === this.modifiedSequence[startIndex]) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= startIndex && modifiedEndIndex >= startIndex && this.originalSequence[originalEndIndex] === this.modifiedSequence[modifiedEndIndex]) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            // if one moved behind the start index move them forward again\n            if (originalEndIndex < startIndex || modifiedEndIndex < startIndex) {\n                originalEndIndex++;\n                modifiedEndIndex++;\n            }\n            const deleteCount = originalEndIndex - startIndex + 1;\n            const newData = this.modifiedSequence.slice(startIndex, modifiedEndIndex + 1);\n            // If we moved behind the start index we could have missed a simple delete.\n            if (newData.length === 1 && newData[0] === this.originalSequence[originalEndIndex]) {\n                return [\n                    { start: startIndex, deleteCount: deleteCount - 1 }\n                ];\n            }\n            else {\n                return [\n                    { start: startIndex, deleteCount, data: newData }\n                ];\n            }\n        }\n        else if (startIndex < modifiedLength) {\n            return [\n                { start: startIndex, deleteCount: 0, data: this.modifiedSequence.slice(startIndex) }\n            ];\n        }\n        else if (startIndex < originalLength) {\n            return [\n                { start: startIndex, deleteCount: originalLength - startIndex }\n            ];\n        }\n        else {\n            // The two arrays are the same.\n            return [];\n        }\n    }\n}\nexports.SemanticTokensDiff = SemanticTokensDiff;\nclass SemanticTokensBuilder {\n    constructor() {\n        this._prevData = undefined;\n        this.initialize();\n    }\n    initialize() {\n        this._id = Date.now();\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._data = [];\n        this._dataLen = 0;\n    }\n    push(line, char, length, tokenType, tokenModifiers) {\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n    get id() {\n        return this._id.toString();\n    }\n    previousResult(id) {\n        if (this.id === id) {\n            this._prevData = this._data;\n        }\n        this.initialize();\n    }\n    build() {\n        this._prevData = undefined;\n        return {\n            resultId: this.id,\n            data: this._data\n        };\n    }\n    canBuildEdits() {\n        return this._prevData !== undefined;\n    }\n    buildEdits() {\n        if (this._prevData !== undefined) {\n            return {\n                resultId: this.id,\n                edits: (new SemanticTokensDiff(this._prevData, this._data)).computeDiff()\n            };\n        }\n        else {\n            return this.build();\n        }\n    }\n}\nexports.SemanticTokensBuilder = SemanticTokensBuilder;\n//# sourceMappingURL=semanticTokens.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConnection = exports.combineFeatures = exports.combineLanguagesFeatures = exports.combineWorkspaceFeatures = exports.combineWindowFeatures = exports.combineClientFeatures = exports.combineTracerFeatures = exports.combineTelemetryFeatures = exports.combineConsoleFeatures = exports._LanguagesImpl = exports.BulkUnregistration = exports.BulkRegistration = exports.ErrorMessageTracker = exports.TextDocuments = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst progress_1 = require(\"./progress\");\nconst configuration_1 = require(\"./configuration\");\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst showDocument_1 = require(\"./showDocument\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst moniker_1 = require(\"./moniker\");\nconst proposed_typeHierarchy_1 = require(\"./proposed.typeHierarchy\");\nfunction null2Undefined(value) {\n    if (value === null) {\n        return undefined;\n    }\n    return value;\n}\n/**\n * A manager for simple text documents. The manager requires at a minimum that\n * the server registered for the following text document sync events in the\n * initialize handler or via dynamic registration:\n *\n * - open and close events.\n * - change events.\n *\n * Registering for save and will save events is optional.\n */\nclass TextDocuments {\n    /**\n     * Create a new text document manager.\n     */\n    constructor(configuration) {\n        this._documents = Object.create(null);\n        this._configuration = configuration;\n        this._onDidChangeContent = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\n        this._onWillSave = new vscode_languageserver_protocol_1.Emitter();\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened or the content changes.\n     */\n    get onDidChangeContent() {\n        return this._onDidChangeContent.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened.\n     */\n    get onDidOpen() {\n        return this._onDidOpen.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * will be saved.\n     */\n    get onWillSave() {\n        return this._onWillSave.event;\n    }\n    /**\n     * Sets a handler that will be called if a participant wants to provide\n     * edits during a text document save.\n     */\n    onWillSaveWaitUntil(handler) {\n        this._willSaveWaitUntil = handler;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been saved.\n     */\n    get onDidSave() {\n        return this._onDidSave.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been closed.\n     */\n    get onDidClose() {\n        return this._onDidClose.event;\n    }\n    /**\n     * Returns the document for the given URI. Returns undefined if\n     * the document is not managed by this instance.\n     *\n     * @param uri The text document's URI to retrieve.\n     * @return the text document or `undefined`.\n     */\n    get(uri) {\n        return this._documents[uri];\n    }\n    /**\n     * Returns all text documents managed by this instance.\n     *\n     * @return all text documents.\n     */\n    all() {\n        return Object.keys(this._documents).map(key => this._documents[key]);\n    }\n    /**\n     * Returns the URIs of all text documents managed by this instance.\n     *\n     * @return the URI's of all text documents.\n     */\n    keys() {\n        return Object.keys(this._documents);\n    }\n    /**\n     * Listens for `low level` notification on the given connection to\n     * update the text documents managed by this instance.\n     *\n     * Please note that the connection only provides handlers not an event model. Therefore\n     * listening on a connection will overwrite the following handlers on a connection:\n     * `onDidOpenTextDocument`, `onDidChangeTextDocument`, `onDidCloseTextDocument`,\n     * `onWillSaveTextDocument`, `onWillSaveTextDocumentWaitUntil` and `onDidSaveTextDocument`.\n     *\n     * Use the corresponding events on the TextDocuments instance instead.\n     *\n     * @param connection The connection to listen on.\n     */\n    listen(connection) {\n        connection.__textDocumentSync = vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        connection.onDidOpenTextDocument((event) => {\n            let td = event.textDocument;\n            let document = this._configuration.create(td.uri, td.languageId, td.version, td.text);\n            this._documents[td.uri] = document;\n            let toFire = Object.freeze({ document });\n            this._onDidOpen.fire(toFire);\n            this._onDidChangeContent.fire(toFire);\n        });\n        connection.onDidChangeTextDocument((event) => {\n            let td = event.textDocument;\n            let changes = event.contentChanges;\n            if (changes.length === 0) {\n                return;\n            }\n            let document = this._documents[td.uri];\n            const { version } = td;\n            if (version === null || version === undefined) {\n                throw new Error(`Received document change event for ${td.uri} without valid version identifier`);\n            }\n            document = this._configuration.update(document, changes, version);\n            this._documents[td.uri] = document;\n            this._onDidChangeContent.fire(Object.freeze({ document }));\n        });\n        connection.onDidCloseTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                delete this._documents[event.textDocument.uri];\n                this._onDidClose.fire(Object.freeze({ document }));\n            }\n        });\n        connection.onWillSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onWillSave.fire(Object.freeze({ document, reason: event.reason }));\n            }\n        });\n        connection.onWillSaveTextDocumentWaitUntil((event, token) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document && this._willSaveWaitUntil) {\n                return this._willSaveWaitUntil(Object.freeze({ document, reason: event.reason }), token);\n            }\n            else {\n                return [];\n            }\n        });\n        connection.onDidSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onDidSave.fire(Object.freeze({ document }));\n            }\n        });\n    }\n}\nexports.TextDocuments = TextDocuments;\n/**\n * Helps tracking error message. Equal occurrences of the same\n * message are only stored once. This class is for example\n * useful if text documents are validated in a loop and equal\n * error message should be folded into one.\n */\nclass ErrorMessageTracker {\n    constructor() {\n        this._messages = Object.create(null);\n    }\n    /**\n     * Add a message to the tracker.\n     *\n     * @param message The message to add.\n     */\n    add(message) {\n        let count = this._messages[message];\n        if (!count) {\n            count = 0;\n        }\n        count++;\n        this._messages[message] = count;\n    }\n    /**\n     * Send all tracked messages to the connection's window.\n     *\n     * @param connection The connection established between client and server.\n     */\n    sendErrors(connection) {\n        Object.keys(this._messages).forEach(message => {\n            connection.window.showErrorMessage(message);\n        });\n    }\n}\nexports.ErrorMessageTracker = ErrorMessageTracker;\nclass RemoteConsoleImpl {\n    constructor() {\n    }\n    rawAttach(connection) {\n        this._rawConnection = connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    initialize(_capabilities) {\n    }\n    error(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Error, message);\n    }\n    warn(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Warning, message);\n    }\n    info(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Info, message);\n    }\n    log(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Log, message);\n    }\n    send(type, message) {\n        if (this._rawConnection) {\n            this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, { type, message }).catch(() => {\n                (0, vscode_languageserver_protocol_1.RAL)().console.error(`Sending log message failed`);\n            });\n        }\n    }\n}\nclass _RemoteWindowImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    showErrorMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Error, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showWarningMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Warning, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showInformationMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Info, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n}\nconst RemoteWindowImpl = (0, showDocument_1.ShowDocumentFeature)((0, progress_1.ProgressFeature)(_RemoteWindowImpl));\nvar BulkRegistration;\n(function (BulkRegistration) {\n    /**\n     * Creates a new bulk registration.\n     * @return an empty bulk registration.\n     */\n    function create() {\n        return new BulkRegistrationImpl();\n    }\n    BulkRegistration.create = create;\n})(BulkRegistration = exports.BulkRegistration || (exports.BulkRegistration = {}));\nclass BulkRegistrationImpl {\n    constructor() {\n        this._registrations = [];\n        this._registered = new Set();\n    }\n    add(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        if (this._registered.has(method)) {\n            throw new Error(`${method} is already added to this registration`);\n        }\n        const id = UUID.generateUuid();\n        this._registrations.push({\n            id: id,\n            method: method,\n            registerOptions: registerOptions || {}\n        });\n        this._registered.add(method);\n    }\n    asRegistrationParams() {\n        return {\n            registrations: this._registrations\n        };\n    }\n}\nvar BulkUnregistration;\n(function (BulkUnregistration) {\n    function create() {\n        return new BulkUnregistrationImpl(undefined, []);\n    }\n    BulkUnregistration.create = create;\n})(BulkUnregistration = exports.BulkUnregistration || (exports.BulkUnregistration = {}));\nclass BulkUnregistrationImpl {\n    constructor(_connection, unregistrations) {\n        this._connection = _connection;\n        this._unregistrations = new Map();\n        unregistrations.forEach(unregistration => {\n            this._unregistrations.set(unregistration.method, unregistration);\n        });\n    }\n    get isAttached() {\n        return !!this._connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    add(unregistration) {\n        this._unregistrations.set(unregistration.method, unregistration);\n    }\n    dispose() {\n        let unregistrations = [];\n        for (let unregistration of this._unregistrations.values()) {\n            unregistrations.push(unregistration);\n        }\n        let params = {\n            unregisterations: unregistrations\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).catch(() => {\n            this._connection.console.info(`Bulk unregistration failed.`);\n        });\n    }\n    disposeSingle(arg) {\n        const method = Is.string(arg) ? arg : arg.method;\n        const unregistration = this._unregistrations.get(method);\n        if (!unregistration) {\n            return false;\n        }\n        let params = {\n            unregisterations: [unregistration]\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(() => {\n            this._unregistrations.delete(method);\n        }, (_error) => {\n            this._connection.console.info(`Un-registering request handler for ${unregistration.id} failed.`);\n        });\n        return true;\n    }\n}\nclass RemoteClientImpl {\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    register(typeOrRegistrations, registerOptionsOrType, registerOptions) {\n        if (typeOrRegistrations instanceof BulkRegistrationImpl) {\n            return this.registerMany(typeOrRegistrations);\n        }\n        else if (typeOrRegistrations instanceof BulkUnregistrationImpl) {\n            return this.registerSingle1(typeOrRegistrations, registerOptionsOrType, registerOptions);\n        }\n        else {\n            return this.registerSingle2(typeOrRegistrations, registerOptionsOrType);\n        }\n    }\n    registerSingle1(unregistration, type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        if (!unregistration.isAttached) {\n            unregistration.attach(this.connection);\n        }\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            unregistration.add({ id: id, method: method });\n            return unregistration;\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    registerSingle2(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            return vscode_languageserver_protocol_1.Disposable.create(() => {\n                this.unregisterSingle(id, method).catch(() => { this.connection.console.info(`Un-registering capability with id ${id} failed.`); });\n            });\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    unregisterSingle(id, method) {\n        let params = {\n            unregisterations: [{ id, method }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).catch(() => {\n            this.connection.console.info(`Un-registering request handler for ${id} failed.`);\n        });\n    }\n    registerMany(registrations) {\n        let params = registrations.asRegistrationParams();\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then(() => {\n            return new BulkUnregistrationImpl(this._connection, params.registrations.map(registration => { return { id: registration.id, method: registration.method }; }));\n        }, (_error) => {\n            this.connection.console.info(`Bulk registration failed.`);\n            return Promise.reject(_error);\n        });\n    }\n}\nclass _RemoteWorkspaceImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    applyEdit(paramOrEdit) {\n        function isApplyWorkspaceEditParams(value) {\n            return value && !!value.edit;\n        }\n        let params = isApplyWorkspaceEditParams(paramOrEdit) ? paramOrEdit : { edit: paramOrEdit };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params);\n    }\n}\nconst RemoteWorkspaceImpl = (0, fileOperations_1.FileOperationsFeature)((0, workspaceFolders_1.WorkspaceFoldersFeature)((0, configuration_1.ConfigurationFeature)(_RemoteWorkspaceImpl)));\nclass TracerImpl {\n    constructor() {\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    set trace(value) {\n        this._trace = value;\n    }\n    log(message, verbose) {\n        if (this._trace === vscode_languageserver_protocol_1.Trace.Off) {\n            return;\n        }\n        this.connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type, {\n            message: message,\n            verbose: this._trace === vscode_languageserver_protocol_1.Trace.Verbose ? verbose : undefined\n        });\n    }\n}\nclass TelemetryImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    logEvent(data) {\n        this.connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, data);\n    }\n}\nclass _LanguagesImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    attachWorkDoneProgress(params) {\n        return (0, progress_1.attachWorkDone)(this.connection, params);\n    }\n    attachPartialResultProgress(_type, params) {\n        return (0, progress_1.attachPartialResult)(this.connection, params);\n    }\n}\nexports._LanguagesImpl = _LanguagesImpl;\nconst LanguagesImpl = (0, proposed_typeHierarchy_1.TypeHierarchyFeature)((0, moniker_1.MonikerFeature)((0, linkedEditingRange_1.LinkedEditingRangeFeature)((0, semanticTokens_1.SemanticTokensFeature)((0, callHierarchy_1.CallHierarchyFeature)(_LanguagesImpl)))));\nfunction combineConsoleFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineConsoleFeatures = combineConsoleFeatures;\nfunction combineTelemetryFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTelemetryFeatures = combineTelemetryFeatures;\nfunction combineTracerFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTracerFeatures = combineTracerFeatures;\nfunction combineClientFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineClientFeatures = combineClientFeatures;\nfunction combineWindowFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWindowFeatures = combineWindowFeatures;\nfunction combineWorkspaceFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWorkspaceFeatures = combineWorkspaceFeatures;\nfunction combineLanguagesFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineLanguagesFeatures = combineLanguagesFeatures;\nfunction combineFeatures(one, two) {\n    function combine(one, two, func) {\n        if (one && two) {\n            return func(one, two);\n        }\n        else if (one) {\n            return one;\n        }\n        else {\n            return two;\n        }\n    }\n    let result = {\n        __brand: 'features',\n        console: combine(one.console, two.console, combineConsoleFeatures),\n        tracer: combine(one.tracer, two.tracer, combineTracerFeatures),\n        telemetry: combine(one.telemetry, two.telemetry, combineTelemetryFeatures),\n        client: combine(one.client, two.client, combineClientFeatures),\n        window: combine(one.window, two.window, combineWindowFeatures),\n        workspace: combine(one.workspace, two.workspace, combineWorkspaceFeatures)\n    };\n    return result;\n}\nexports.combineFeatures = combineFeatures;\nfunction createConnection(connectionFactory, watchDog, factories) {\n    const logger = (factories && factories.console ? new (factories.console(RemoteConsoleImpl))() : new RemoteConsoleImpl());\n    const connection = connectionFactory(logger);\n    logger.rawAttach(connection);\n    const tracer = (factories && factories.tracer ? new (factories.tracer(TracerImpl))() : new TracerImpl());\n    const telemetry = (factories && factories.telemetry ? new (factories.telemetry(TelemetryImpl))() : new TelemetryImpl());\n    const client = (factories && factories.client ? new (factories.client(RemoteClientImpl))() : new RemoteClientImpl());\n    const remoteWindow = (factories && factories.window ? new (factories.window(RemoteWindowImpl))() : new RemoteWindowImpl());\n    const workspace = (factories && factories.workspace ? new (factories.workspace(RemoteWorkspaceImpl))() : new RemoteWorkspaceImpl());\n    const languages = (factories && factories.languages ? new (factories.languages(LanguagesImpl))() : new LanguagesImpl());\n    const allRemotes = [logger, tracer, telemetry, client, remoteWindow, workspace, languages];\n    function asPromise(value) {\n        if (value instanceof Promise) {\n            return value;\n        }\n        else if (Is.thenable(value)) {\n            return new Promise((resolve, reject) => {\n                value.then((resolved) => resolve(resolved), (error) => reject(error));\n            });\n        }\n        else {\n            return Promise.resolve(value);\n        }\n    }\n    let shutdownHandler = undefined;\n    let initializeHandler = undefined;\n    let exitHandler = undefined;\n    let protocolConnection = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(type, handler),\n        sendNotification: (type, param) => {\n            const method = Is.string(type) ? type : type.method;\n            if (arguments.length === 1) {\n                return connection.sendNotification(method);\n            }\n            else {\n                return connection.sendNotification(method, param);\n            }\n        },\n        onNotification: (type, handler) => connection.onNotification(type, handler),\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        onInitialize: (handler) => initializeHandler = handler,\n        onInitialized: (handler) => connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type, handler),\n        onShutdown: (handler) => shutdownHandler = handler,\n        onExit: (handler) => exitHandler = handler,\n        get console() { return logger; },\n        get telemetry() { return telemetry; },\n        get tracer() { return tracer; },\n        get client() { return client; },\n        get window() { return remoteWindow; },\n        get workspace() { return workspace; },\n        get languages() { return languages; },\n        onDidChangeConfiguration: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, handler),\n        onDidChangeWatchedFiles: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, handler),\n        __textDocumentSync: undefined,\n        onDidOpenTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, handler),\n        onDidChangeTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, handler),\n        onDidCloseTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, handler),\n        onWillSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, handler),\n        onWillSaveTextDocumentWaitUntil: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, handler),\n        onDidSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, handler),\n        sendDiagnostics: (params) => connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params),\n        onHover: (handler) => connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onCompletion: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCompletionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, handler),\n        onSignatureHelp: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDeclaration: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onTypeDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onImplementation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onReferences: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentHighlight: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onWorkspaceSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCodeAction: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCodeActionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onCodeLens: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCodeLensResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDocumentRangeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDocumentOnTypeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onRenameRequest: (handler) => connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onPrepareRename: (handler) => connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentLinks: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentLinkResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentColor: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onColorPresentation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onFoldingRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onSelectionRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onExecuteCommand: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        dispose: () => connection.dispose()\n    };\n    for (let remote of allRemotes) {\n        remote.attach(protocolConnection);\n    }\n    connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type, (params) => {\n        watchDog.initialize(params);\n        if (Is.string(params.trace)) {\n            tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.trace);\n        }\n        for (let remote of allRemotes) {\n            remote.initialize(params.capabilities);\n        }\n        if (initializeHandler) {\n            let result = initializeHandler(params, new vscode_languageserver_protocol_1.CancellationTokenSource().token, (0, progress_1.attachWorkDone)(connection, params), undefined);\n            return asPromise(result).then((value) => {\n                if (value instanceof vscode_languageserver_protocol_1.ResponseError) {\n                    return value;\n                }\n                let result = value;\n                if (!result) {\n                    result = { capabilities: {} };\n                }\n                let capabilities = result.capabilities;\n                if (!capabilities) {\n                    capabilities = {};\n                    result.capabilities = capabilities;\n                }\n                if (capabilities.textDocumentSync === undefined || capabilities.textDocumentSync === null) {\n                    capabilities.textDocumentSync = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                else if (!Is.number(capabilities.textDocumentSync) && !Is.number(capabilities.textDocumentSync.change)) {\n                    capabilities.textDocumentSync.change = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                for (let remote of allRemotes) {\n                    remote.fillServerCapabilities(capabilities);\n                }\n                return result;\n            });\n        }\n        else {\n            let result = { capabilities: { textDocumentSync: vscode_languageserver_protocol_1.TextDocumentSyncKind.None } };\n            for (let remote of allRemotes) {\n                remote.fillServerCapabilities(result.capabilities);\n            }\n            return result;\n        }\n    });\n    connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, () => {\n        watchDog.shutdownReceived = true;\n        if (shutdownHandler) {\n            return shutdownHandler(new vscode_languageserver_protocol_1.CancellationTokenSource().token);\n        }\n        else {\n            return undefined;\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type, () => {\n        try {\n            if (exitHandler) {\n                exitHandler();\n            }\n        }\n        finally {\n            if (watchDog.shutdownReceived) {\n                watchDog.exit(0);\n            }\n            else {\n                watchDog.exit(1);\n            }\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type, (params) => {\n        tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.value);\n    });\n    return protocolConnection;\n}\nexports.createConnection = createConnection;\n//# sourceMappingURL=server.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst ShowDocumentFeature = (Base) => {\n    return class extends Base {\n        showDocument(params) {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, params);\n        }\n    };\n};\nexports.ShowDocumentFeature = ShowDocumentFeature;\n//# sourceMappingURL=showDocument.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.thenable = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUuid = exports.parse = exports.isUUID = exports.v4 = exports.empty = void 0;\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n//# sourceMappingURL=uuid.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst WorkspaceFoldersFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._notificationIsAutoRegistered = false;\n        }\n        initialize(capabilities) {\n            super.initialize(capabilities);\n            let workspaceCapabilities = capabilities.workspace;\n            if (workspaceCapabilities && workspaceCapabilities.workspaceFolders) {\n                this._onDidChangeWorkspaceFolders = new vscode_languageserver_protocol_1.Emitter();\n                this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, (params) => {\n                    this._onDidChangeWorkspaceFolders.fire(params.event);\n                });\n            }\n        }\n        fillServerCapabilities(capabilities) {\n            var _a, _b;\n            super.fillServerCapabilities(capabilities);\n            const changeNotifications = (_b = (_a = capabilities.workspace) === null || _a === void 0 ? void 0 : _a.workspaceFolders) === null || _b === void 0 ? void 0 : _b.changeNotifications;\n            this._notificationIsAutoRegistered = changeNotifications === true || typeof changeNotifications === 'string';\n        }\n        getWorkspaceFolders() {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type);\n        }\n        get onDidChangeWorkspaceFolders() {\n            if (!this._onDidChangeWorkspaceFolders) {\n                throw new Error('Client doesn\\'t support sending workspace folder change events.');\n            }\n            if (!this._notificationIsAutoRegistered && !this._unregistration) {\n                this._unregistration = this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type);\n            }\n            return this._onDidChangeWorkspaceFolders.event;\n        }\n    };\n};\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n//# sourceMappingURL=workspaceFolders.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveModulePath = exports.FileSystem = exports.resolveGlobalYarnPath = exports.resolveGlobalNodePath = exports.resolve = exports.uriToFilePath = void 0;\nconst url = require(\"url\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\nconst child_process_1 = require(\"child_process\");\n/**\n * @deprecated Use the `vscode-uri` npm module which provides a more\n * complete implementation of handling VS Code URIs.\n */\nfunction uriToFilePath(uri) {\n    let parsed = url.parse(uri);\n    if (parsed.protocol !== 'file:' || !parsed.path) {\n        return undefined;\n    }\n    let segments = parsed.path.split('/');\n    for (var i = 0, len = segments.length; i < len; i++) {\n        segments[i] = decodeURIComponent(segments[i]);\n    }\n    if (process.platform === 'win32' && segments.length > 1) {\n        let first = segments[0];\n        let second = segments[1];\n        // Do we have a drive letter and we started with a / which is the\n        // case if the first segement is empty (see split above)\n        if (first.length === 0 && second.length > 1 && second[1] === ':') {\n            // Remove first slash\n            segments.shift();\n        }\n    }\n    return path.normalize(segments.join('/'));\n}\nexports.uriToFilePath = uriToFilePath;\nfunction isWindows() {\n    return process.platform === 'win32';\n}\nfunction resolve(moduleName, nodePath, cwd, tracer) {\n    const nodePathKey = 'NODE_PATH';\n    const app = [\n        'var p = process;',\n        'p.on(\\'message\\',function(m){',\n        'if(m.c===\\'e\\'){',\n        'p.exit(0);',\n        '}',\n        'else if(m.c===\\'rs\\'){',\n        'try{',\n        'var r=require.resolve(m.a);',\n        'p.send({c:\\'r\\',s:true,r:r});',\n        '}',\n        'catch(err){',\n        'p.send({c:\\'r\\',s:false});',\n        '}',\n        '}',\n        '});'\n    ].join('');\n    return new Promise((resolve, reject) => {\n        let env = process.env;\n        let newEnv = Object.create(null);\n        Object.keys(env).forEach(key => newEnv[key] = env[key]);\n        if (nodePath && fs.existsSync(nodePath) /* see issue 545 */) {\n            if (newEnv[nodePathKey]) {\n                newEnv[nodePathKey] = nodePath + path.delimiter + newEnv[nodePathKey];\n            }\n            else {\n                newEnv[nodePathKey] = nodePath;\n            }\n            if (tracer) {\n                tracer(`NODE_PATH value is: ${newEnv[nodePathKey]}`);\n            }\n        }\n        newEnv['ELECTRON_RUN_AS_NODE'] = '1';\n        try {\n            let cp = (0, child_process_1.fork)('', [], {\n                cwd: cwd,\n                env: newEnv,\n                execArgv: ['-e', app]\n            });\n            if (cp.pid === void 0) {\n                reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));\n                return;\n            }\n            cp.on('error', (error) => {\n                reject(error);\n            });\n            cp.on('message', (message) => {\n                if (message.c === 'r') {\n                    cp.send({ c: 'e' });\n                    if (message.s) {\n                        resolve(message.r);\n                    }\n                    else {\n                        reject(new Error(`Failed to resolve module: ${moduleName}`));\n                    }\n                }\n            });\n            let message = {\n                c: 'rs',\n                a: moduleName\n            };\n            cp.send(message);\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\nexports.resolve = resolve;\n/**\n * Resolve the global npm package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalNodePath(tracer) {\n    let npmCommand = 'npm';\n    const env = Object.create(null);\n    Object.keys(process.env).forEach(key => env[key] = process.env[key]);\n    env['NO_UPDATE_NOTIFIER'] = 'true';\n    const options = {\n        encoding: 'utf8',\n        env\n    };\n    if (isWindows()) {\n        npmCommand = 'npm.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let stdout = (0, child_process_1.spawnSync)(npmCommand, ['config', 'get', 'prefix'], options).stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'npm config get prefix' didn't return a value.`);\n            }\n            return undefined;\n        }\n        let prefix = stdout.trim();\n        if (tracer) {\n            tracer(`'npm config get prefix' value is: ${prefix}`);\n        }\n        if (prefix.length > 0) {\n            if (isWindows()) {\n                return path.join(prefix, 'node_modules');\n            }\n            else {\n                return path.join(prefix, 'lib', 'node_modules');\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalNodePath = resolveGlobalNodePath;\n/*\n * Resolve the global yarn pakage path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalYarnPath(tracer) {\n    let yarnCommand = 'yarn';\n    let options = {\n        encoding: 'utf8'\n    };\n    if (isWindows()) {\n        yarnCommand = 'yarn.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let results = (0, child_process_1.spawnSync)(yarnCommand, ['global', 'dir', '--json'], options);\n        let stdout = results.stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'yarn global dir' didn't return a value.`);\n                if (results.stderr) {\n                    tracer(results.stderr);\n                }\n            }\n            return undefined;\n        }\n        let lines = stdout.trim().split(/\\r?\\n/);\n        for (let line of lines) {\n            try {\n                let yarn = JSON.parse(line);\n                if (yarn.type === 'log') {\n                    return path.join(yarn.data, 'node_modules');\n                }\n            }\n            catch (e) {\n                // Do nothing. Ignore the line\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalYarnPath = resolveGlobalYarnPath;\nvar FileSystem;\n(function (FileSystem) {\n    let _isCaseSensitive = undefined;\n    function isCaseSensitive() {\n        if (_isCaseSensitive !== void 0) {\n            return _isCaseSensitive;\n        }\n        if (process.platform === 'win32') {\n            _isCaseSensitive = false;\n        }\n        else {\n            // convert current file name to upper case / lower case and check if file exists\n            // (guards against cases when name is already all uppercase or lowercase)\n            _isCaseSensitive = !fs.existsSync(__filename.toUpperCase()) || !fs.existsSync(__filename.toLowerCase());\n        }\n        return _isCaseSensitive;\n    }\n    FileSystem.isCaseSensitive = isCaseSensitive;\n    function isParent(parent, child) {\n        if (isCaseSensitive()) {\n            return path.normalize(child).indexOf(path.normalize(parent)) === 0;\n        }\n        else {\n            return path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase()) === 0;\n        }\n    }\n    FileSystem.isParent = isParent;\n})(FileSystem = exports.FileSystem || (exports.FileSystem = {}));\nfunction resolveModulePath(workspaceRoot, moduleName, nodePath, tracer) {\n    if (nodePath) {\n        if (!path.isAbsolute(nodePath)) {\n            nodePath = path.join(workspaceRoot, nodePath);\n        }\n        return resolve(moduleName, nodePath, nodePath, tracer).then((value) => {\n            if (FileSystem.isParent(nodePath, value)) {\n                return value;\n            }\n            else {\n                return Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`));\n            }\n        }).then(undefined, (_error) => {\n            return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n        });\n    }\n    else {\n        return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n    }\n}\nexports.resolveModulePath = resolveModulePath;\n//# sourceMappingURL=files.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConnection = exports.Files = void 0;\nconst Is = require(\"../common/utils/is\");\nconst server_1 = require(\"../common/server\");\nconst fm = require(\"./files\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n__exportStar(require(\"vscode-languageserver-protocol/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nvar Files;\n(function (Files) {\n    Files.uriToFilePath = fm.uriToFilePath;\n    Files.resolveGlobalNodePath = fm.resolveGlobalNodePath;\n    Files.resolveGlobalYarnPath = fm.resolveGlobalYarnPath;\n    Files.resolve = fm.resolve;\n    Files.resolveModulePath = fm.resolveModulePath;\n})(Files = exports.Files || (exports.Files = {}));\nlet _protocolConnection;\nfunction endProtocolConnection() {\n    if (_protocolConnection === undefined) {\n        return;\n    }\n    try {\n        _protocolConnection.end();\n    }\n    catch (_err) {\n        // Ignore. The client process could have already\n        // did and we can't send an end into the connection.\n    }\n}\nlet _shutdownReceived = false;\nlet exitTimer = undefined;\nfunction setupExitTimer() {\n    const argName = '--clientProcessId';\n    function runTimer(value) {\n        try {\n            let processId = parseInt(value);\n            if (!isNaN(processId)) {\n                exitTimer = setInterval(() => {\n                    try {\n                        process.kill(processId, 0);\n                    }\n                    catch (ex) {\n                        // Parent process doesn't exist anymore. Exit the server.\n                        endProtocolConnection();\n                        process.exit(_shutdownReceived ? 0 : 1);\n                    }\n                }, 3000);\n            }\n        }\n        catch (e) {\n            // Ignore errors;\n        }\n    }\n    for (let i = 2; i < process.argv.length; i++) {\n        let arg = process.argv[i];\n        if (arg === argName && i + 1 < process.argv.length) {\n            runTimer(process.argv[i + 1]);\n            return;\n        }\n        else {\n            let args = arg.split('=');\n            if (args[0] === argName) {\n                runTimer(args[1]);\n            }\n        }\n    }\n}\nsetupExitTimer();\nconst watchDog = {\n    initialize: (params) => {\n        const processId = params.processId;\n        if (Is.number(processId) && exitTimer === undefined) {\n            // We received a parent process id. Set up a timer to periodically check\n            // if the parent is still alive.\n            setInterval(() => {\n                try {\n                    process.kill(processId, 0);\n                }\n                catch (ex) {\n                    // Parent process doesn't exist anymore. Exit the server.\n                    process.exit(_shutdownReceived ? 0 : 1);\n                }\n            }, 3000);\n        }\n    },\n    get shutdownReceived() {\n        return _shutdownReceived;\n    },\n    set shutdownReceived(value) {\n        _shutdownReceived = value;\n    },\n    exit: (code) => {\n        endProtocolConnection();\n        process.exit(code);\n    }\n};\nfunction createConnection(arg1, arg2, arg3, arg4) {\n    let factories;\n    let input;\n    let output;\n    let options;\n    if (arg1 !== void 0 && arg1.__brand === 'features') {\n        factories = arg1;\n        arg1 = arg2;\n        arg2 = arg3;\n        arg3 = arg4;\n    }\n    if (node_1.ConnectionStrategy.is(arg1) || node_1.ConnectionOptions.is(arg1)) {\n        options = arg1;\n    }\n    else {\n        input = arg1;\n        output = arg2;\n        options = arg3;\n    }\n    return _createConnection(input, output, options, factories);\n}\nexports.createConnection = createConnection;\nfunction _createConnection(input, output, options, factories) {\n    if (!input && !output && process.argv.length > 2) {\n        let port = void 0;\n        let pipeName = void 0;\n        let argv = process.argv.slice(2);\n        for (let i = 0; i < argv.length; i++) {\n            let arg = argv[i];\n            if (arg === '--node-ipc') {\n                input = new node_1.IPCMessageReader(process);\n                output = new node_1.IPCMessageWriter(process);\n                break;\n            }\n            else if (arg === '--stdio') {\n                input = process.stdin;\n                output = process.stdout;\n                break;\n            }\n            else if (arg === '--socket') {\n                port = parseInt(argv[i + 1]);\n                break;\n            }\n            else if (arg === '--pipe') {\n                pipeName = argv[i + 1];\n                break;\n            }\n            else {\n                var args = arg.split('=');\n                if (args[0] === '--socket') {\n                    port = parseInt(args[1]);\n                    break;\n                }\n                else if (args[0] === '--pipe') {\n                    pipeName = args[1];\n                    break;\n                }\n            }\n        }\n        if (port) {\n            let transport = (0, node_1.createServerSocketTransport)(port);\n            input = transport[0];\n            output = transport[1];\n        }\n        else if (pipeName) {\n            let transport = (0, node_1.createServerPipeTransport)(pipeName);\n            input = transport[0];\n            output = transport[1];\n        }\n    }\n    var commandLineMessage = 'Use arguments of createConnection or set command line parameters: \\'--node-ipc\\', \\'--stdio\\' or \\'--socket={number}\\'';\n    if (!input) {\n        throw new Error('Connection input stream is not set. ' + commandLineMessage);\n    }\n    if (!output) {\n        throw new Error('Connection output stream is not set. ' + commandLineMessage);\n    }\n    // Backwards compatibility\n    if (Is.func(input.read) && Is.func(input.on)) {\n        let inputStream = input;\n        inputStream.on('end', () => {\n            endProtocolConnection();\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n        inputStream.on('close', () => {\n            endProtocolConnection();\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n    }\n    const connectionFactory = (logger) => {\n        const result = (0, node_1.createProtocolConnection)(input, output, logger, options);\n        return result;\n    };\n    return (0, server_1.createConnection)(connectionFactory, watchDog, factories);\n}\n//# sourceMappingURL=main.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","var LIB;LIB=(()=>{\"use strict\";var t={470:t=>{function e(t){if(\"string\"!=typeof t)throw new TypeError(\"Path must be a string. Received \"+JSON.stringify(t))}function r(t,e){for(var r,n=\"\",o=0,i=-1,a=0,h=0;h<=t.length;++h){if(h<t.length)r=t.charCodeAt(h);else{if(47===r)break;r=47}if(47===r){if(i===h-1||1===a);else if(i!==h-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var s=n.lastIndexOf(\"/\");if(s!==n.length-1){-1===s?(n=\"\",o=0):o=(n=n.slice(0,s)).length-1-n.lastIndexOf(\"/\"),i=h,a=0;continue}}else if(2===n.length||1===n.length){n=\"\",o=0,i=h,a=0;continue}e&&(n.length>0?n+=\"/..\":n=\"..\",o=2)}else n.length>0?n+=\"/\"+t.slice(i+1,h):n=t.slice(i+1,h),o=h-i-1;i=h,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var t,n=\"\",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===t&&(t=process.cwd()),a=t),e(a),0!==a.length&&(n=a+\"/\"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?\"/\"+n:\"/\":n.length>0?n:\".\"},normalize:function(t){if(e(t),0===t.length)return\".\";var n=47===t.charCodeAt(0),o=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!n)).length||n||(t=\".\"),t.length>0&&o&&(t+=\"/\"),n?\"/\"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return\".\";for(var t,r=0;r<arguments.length;++r){var o=arguments[r];e(o),o.length>0&&(void 0===t?t=o:t+=\"/\"+o)}return void 0===t?\".\":n.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return\"\";if((t=n.resolve(t))===(r=n.resolve(r)))return\"\";for(var o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length,a=i-o,h=1;h<r.length&&47===r.charCodeAt(h);++h);for(var s=r.length-h,f=a<s?a:s,u=-1,c=0;c<=f;++c){if(c===f){if(s>f){if(47===r.charCodeAt(h+c))return r.slice(h+c+1);if(0===c)return r.slice(h+c)}else a>f&&(47===t.charCodeAt(o+c)?u=c:0===c&&(u=0));break}var l=t.charCodeAt(o+c);if(l!==r.charCodeAt(h+c))break;47===l&&(u=c)}var p=\"\";for(c=o+u+1;c<=i;++c)c!==i&&47!==t.charCodeAt(c)||(0===p.length?p+=\"..\":p+=\"/..\");return p.length>0?p+r.slice(h+u):(h+=u,47===r.charCodeAt(h)&&++h,r.slice(h))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return\".\";for(var r=t.charCodeAt(0),n=47===r,o=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(r=t.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?\"/\":\".\":n&&1===o?\"//\":t.slice(0,o)},basename:function(t,r){if(void 0!==r&&\"string\"!=typeof r)throw new TypeError('\"ext\" argument must be a string');e(t);var n,o=0,i=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return\"\";var h=r.length-1,s=-1;for(n=t.length-1;n>=0;--n){var f=t.charCodeAt(n);if(47===f){if(!a){o=n+1;break}}else-1===s&&(a=!1,s=n+1),h>=0&&(f===r.charCodeAt(h)?-1==--h&&(i=n):(h=-1,i=s))}return o===i?i=s:-1===i&&(i=t.length),t.slice(o,i)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){o=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?\"\":t.slice(o,i)},extname:function(t){e(t);for(var r=-1,n=0,o=-1,i=!0,a=0,h=t.length-1;h>=0;--h){var s=t.charCodeAt(h);if(47!==s)-1===o&&(i=!1,o=h+1),46===s?-1===r?r=h:1!==a&&(a=1):-1!==r&&(a=-1);else if(!i){n=h+1;break}}return-1===r||-1===o||0===a||1===a&&r===o-1&&r===n+1?\"\":t.slice(r,o)},format:function(t){if(null===t||\"object\"!=typeof t)throw new TypeError('The \"pathObject\" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||\"\")+(e.ext||\"\");return r?r===e.root?r+n:r+\"/\"+n:n}(0,t)},parse:function(t){e(t);var r={root:\"\",dir:\"\",base:\"\",ext:\"\",name:\"\"};if(0===t.length)return r;var n,o=t.charCodeAt(0),i=47===o;i?(r.root=\"/\",n=1):n=0;for(var a=-1,h=0,s=-1,f=!0,u=t.length-1,c=0;u>=n;--u)if(47!==(o=t.charCodeAt(u)))-1===s&&(f=!1,s=u+1),46===o?-1===a?a=u:1!==c&&(c=1):-1!==a&&(c=-1);else if(!f){h=u+1;break}return-1===a||-1===s||0===c||1===c&&a===s-1&&a===h+1?-1!==s&&(r.base=r.name=0===h&&i?t.slice(1,s):t.slice(h,s)):(0===h&&i?(r.name=t.slice(1,a),r.base=t.slice(1,s)):(r.name=t.slice(h,a),r.base=t.slice(h,s)),r.ext=t.slice(a,s)),h>0?r.dir=t.slice(0,h-1):i&&(r.dir=\"/\"),r},sep:\"/\",delimiter:\":\",win32:null,posix:null};n.posix=n,t.exports=n},447:(t,e,r)=>{var n;if(r.r(e),r.d(e,{URI:()=>g,Utils:()=>O}),\"object\"==typeof process)n=\"win32\"===process.platform;else if(\"object\"==typeof navigator){var o=navigator.userAgent;n=o.indexOf(\"Windows\")>=0}var i,a,h=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=/^\\w[\\w\\d+.-]*$/,f=/^\\//,u=/^\\/\\//,c=\"\",l=\"/\",p=/^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/,g=function(){function t(t,e,r,n,o,i){void 0===i&&(i=!1),\"object\"==typeof t?(this.scheme=t.scheme||c,this.authority=t.authority||c,this.path=t.path||c,this.query=t.query||c,this.fragment=t.fragment||c):(this.scheme=function(t,e){return t||e?t:\"file\"}(t,i),this.authority=e||c,this.path=function(t,e){switch(t){case\"https\":case\"http\":case\"file\":e?e[0]!==l&&(e=l+e):e=l}return e}(this.scheme,r||c),this.query=n||c,this.fragment=o||c,function(t,e){if(!t.scheme&&e)throw new Error('[UriError]: Scheme is missing: {scheme: \"\", authority: \"'+t.authority+'\", path: \"'+t.path+'\", query: \"'+t.query+'\", fragment: \"'+t.fragment+'\"}');if(t.scheme&&!s.test(t.scheme))throw new Error(\"[UriError]: Scheme contains illegal characters.\");if(t.path)if(t.authority){if(!f.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character')}else if(u.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")')}(this,i))}return t.isUri=function(e){return e instanceof t||!!e&&\"string\"==typeof e.authority&&\"string\"==typeof e.fragment&&\"string\"==typeof e.path&&\"string\"==typeof e.query&&\"string\"==typeof e.scheme&&\"function\"==typeof e.fsPath&&\"function\"==typeof e.with&&\"function\"==typeof e.toString},Object.defineProperty(t.prototype,\"fsPath\",{get:function(){return C(this,!1)},enumerable:!1,configurable:!0}),t.prototype.with=function(t){if(!t)return this;var e=t.scheme,r=t.authority,n=t.path,o=t.query,i=t.fragment;return void 0===e?e=this.scheme:null===e&&(e=c),void 0===r?r=this.authority:null===r&&(r=c),void 0===n?n=this.path:null===n&&(n=c),void 0===o?o=this.query:null===o&&(o=c),void 0===i?i=this.fragment:null===i&&(i=c),e===this.scheme&&r===this.authority&&n===this.path&&o===this.query&&i===this.fragment?this:new v(e,r,n,o,i)},t.parse=function(t,e){void 0===e&&(e=!1);var r=p.exec(t);return r?new v(r[2]||c,x(r[4]||c),x(r[5]||c),x(r[7]||c),x(r[9]||c),e):new v(c,c,c,c,c)},t.file=function(t){var e=c;if(n&&(t=t.replace(/\\\\/g,l)),t[0]===l&&t[1]===l){var r=t.indexOf(l,2);-1===r?(e=t.substring(2),t=l):(e=t.substring(2,r),t=t.substring(r)||l)}return new v(\"file\",e,t,c,c)},t.from=function(t){return new v(t.scheme,t.authority,t.path,t.query,t.fragment)},t.prototype.toString=function(t){return void 0===t&&(t=!1),A(this,t)},t.prototype.toJSON=function(){return this},t.revive=function(e){if(e){if(e instanceof t)return e;var r=new v(e);return r._formatted=e.external,r._fsPath=e._sep===d?e.fsPath:null,r}return e},t}(),d=n?1:void 0,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._formatted=null,e._fsPath=null,e}return h(e,t),Object.defineProperty(e.prototype,\"fsPath\",{get:function(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(t){return void 0===t&&(t=!1),t?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)},e.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=d),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t},e}(g),m=((a={})[58]=\"%3A\",a[47]=\"%2F\",a[63]=\"%3F\",a[35]=\"%23\",a[91]=\"%5B\",a[93]=\"%5D\",a[64]=\"%40\",a[33]=\"%21\",a[36]=\"%24\",a[38]=\"%26\",a[39]=\"%27\",a[40]=\"%28\",a[41]=\"%29\",a[42]=\"%2A\",a[43]=\"%2B\",a[44]=\"%2C\",a[59]=\"%3B\",a[61]=\"%3D\",a[32]=\"%20\",a);function y(t,e){for(var r=void 0,n=-1,o=0;o<t.length;o++){var i=t.charCodeAt(o);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||e&&47===i)-1!==n&&(r+=encodeURIComponent(t.substring(n,o)),n=-1),void 0!==r&&(r+=t.charAt(o));else{void 0===r&&(r=t.substr(0,o));var a=m[i];void 0!==a?(-1!==n&&(r+=encodeURIComponent(t.substring(n,o)),n=-1),r+=a):-1===n&&(n=o)}}return-1!==n&&(r+=encodeURIComponent(t.substring(n))),void 0!==r?r:t}function b(t){for(var e=void 0,r=0;r<t.length;r++){var n=t.charCodeAt(r);35===n||63===n?(void 0===e&&(e=t.substr(0,r)),e+=m[n]):void 0!==e&&(e+=t[r])}return void 0!==e?e:t}function C(t,e){var r;return r=t.authority&&t.path.length>1&&\"file\"===t.scheme?\"//\"+t.authority+t.path:47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?e?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,n&&(r=r.replace(/\\//g,\"\\\\\")),r}function A(t,e){var r=e?b:y,n=\"\",o=t.scheme,i=t.authority,a=t.path,h=t.query,s=t.fragment;if(o&&(n+=o,n+=\":\"),(i||\"file\"===o)&&(n+=l,n+=l),i){var f=i.indexOf(\"@\");if(-1!==f){var u=i.substr(0,f);i=i.substr(f+1),-1===(f=u.indexOf(\":\"))?n+=r(u,!1):(n+=r(u.substr(0,f),!1),n+=\":\",n+=r(u.substr(f+1),!1)),n+=\"@\"}-1===(f=(i=i.toLowerCase()).indexOf(\":\"))?n+=r(i,!1):(n+=r(i.substr(0,f),!1),n+=i.substr(f))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2))(c=a.charCodeAt(1))>=65&&c<=90&&(a=\"/\"+String.fromCharCode(c+32)+\":\"+a.substr(3));else if(a.length>=2&&58===a.charCodeAt(1)){var c;(c=a.charCodeAt(0))>=65&&c<=90&&(a=String.fromCharCode(c+32)+\":\"+a.substr(2))}n+=r(a,!0)}return h&&(n+=\"?\",n+=r(h,!1)),s&&(n+=\"#\",n+=e?s:y(s,!1)),n}function w(t){try{return decodeURIComponent(t)}catch(e){return t.length>3?t.substr(0,3)+w(t.substr(3)):t}}var _=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function x(t){return t.match(_)?t.replace(_,(function(t){return w(t)})):t}var O,P=r(470),j=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,h=i.length;a<h;a++,o++)n[o]=i[a];return n},U=P.posix||P;!function(t){t.joinPath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.with({path:U.join.apply(U,j([t.path],e))})},t.resolvePath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t.path||\"/\";return t.with({path:U.resolve.apply(U,j([n],e))})},t.dirname=function(t){var e=U.dirname(t.path);return 1===e.length&&46===e.charCodeAt(0)?t:t.with({path:e})},t.basename=function(t){return U.basename(t.path)},t.extname=function(t){return U.extname(t.path)}}(O||(O={}))}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r(447)})();export const{URI,Utils}=LIB;\n//# sourceMappingURL=index.js.map","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n\r\nimport * as path from 'path';\r\nimport * as fs from 'fs';\r\nimport * as crypto from 'crypto';\r\nimport { execSync } from 'child_process';\r\nimport { EOL } from 'os';\r\n\r\nimport {\r\n\tcreateConnection, Connection, ResponseError, RequestType, NotificationType, RequestHandler, NotificationHandler,\r\n\tDiagnostic, DiagnosticSeverity, Range, Files, CancellationToken, TextDocuments, TextDocumentSyncKind, TextEdit,\r\n\tTextDocumentIdentifier, Command, WorkspaceChange, CodeActionRequest, VersionedTextDocumentIdentifier,\r\n\tExecuteCommandRequest, DidChangeWatchedFilesNotification, DidChangeConfigurationNotification, WorkspaceFolder,\r\n\tDidChangeWorkspaceFoldersNotification, CodeAction, CodeActionKind, Position, DocumentFormattingRequest,\r\n\tDocumentFormattingRegistrationOptions, Disposable, DocumentFilter, TextDocumentEdit, LSPErrorCodes, DiagnosticTag, NotificationType0,\r\n\tMessage as LMessage, RequestMessage as LRequestMessage, ResponseMessage as LResponseMessage\r\n} from 'vscode-languageserver/node';\r\n\r\nimport {\r\n\tTextDocument\r\n} from 'vscode-languageserver-textdocument';\r\n\r\nimport { URI } from 'vscode-uri';\r\n\r\nimport { stringDiff } from './diff';\r\nimport { LRUCache } from './linkedMap';\r\n\r\nnamespace Is {\r\n\tconst toString = Object.prototype.toString;\r\n\r\n\texport function boolean(value: any): value is boolean {\r\n\t\treturn value === true || value === false;\r\n\t}\r\n\r\n\texport function nullOrUndefined(value: any): value is null | undefined {\r\n\t\treturn value === null || value === undefined;\r\n\t}\r\n\r\n\texport function string(value: any): value is string {\r\n\t\treturn toString.call(value) === '[object String]';\r\n\t}\r\n}\r\n\r\nnamespace CommandIds {\r\n\texport const applySingleFix: string = 'eslint.applySingleFix';\r\n\texport const applySuggestion: string = 'eslint.applySuggestion';\r\n\texport const applySameFixes: string = 'eslint.applySameFixes';\r\n\texport const applyAllFixes: string = 'eslint.applyAllFixes';\r\n\texport const applyDisableLine: string = 'eslint.applyDisableLine';\r\n\texport const applyDisableFile: string = 'eslint.applyDisableFile';\r\n\texport const openRuleDoc: string = 'eslint.openRuleDoc';\r\n}\r\n\r\ninterface ESLintError extends Error {\r\n\tmessageTemplate?: string;\r\n\tmessageData?: {\r\n\t\tpluginName?: string;\r\n\t};\r\n}\r\n\r\nenum Status {\r\n\tok = 1,\r\n\twarn = 2,\r\n\terror = 3\r\n}\r\n\r\ninterface StatusParams {\r\n\turi: string;\r\n\tstate: Status;\r\n}\r\n\r\nnamespace StatusNotification {\r\n\texport const type = new NotificationType<StatusParams>('eslint/status');\r\n}\r\n\r\ninterface NoConfigParams {\r\n\tmessage: string;\r\n\tdocument: TextDocumentIdentifier;\r\n}\r\n\r\ninterface NoConfigResult {\r\n}\r\n\r\nnamespace NoConfigRequest {\r\n\texport const type = new RequestType<NoConfigParams, NoConfigResult, void>('eslint/noConfig');\r\n}\r\n\r\ninterface NoESLintLibraryParams {\r\n\tsource: TextDocumentIdentifier;\r\n}\r\n\r\ninterface NoESLintLibraryResult {\r\n}\r\n\r\nnamespace NoESLintLibraryRequest {\r\n\texport const type = new RequestType<NoESLintLibraryParams, NoESLintLibraryResult, void>('eslint/noLibrary');\r\n}\r\n\r\ninterface OpenESLintDocParams {\r\n\turl: string;\r\n}\r\n\r\ninterface OpenESLintDocResult {\r\n}\r\n\r\nnamespace OpenESLintDocRequest {\r\n\texport const type = new RequestType<OpenESLintDocParams, OpenESLintDocResult, void>('eslint/openDoc');\r\n}\r\n\r\ninterface ProbeFailedParams {\r\n\ttextDocument: TextDocumentIdentifier;\r\n}\r\n\r\nnamespace ProbeFailedRequest {\r\n\texport const type = new RequestType<ProbeFailedParams, void, void>('eslint/probeFailed');\r\n}\r\n\r\nnamespace ShowOutputChannel {\r\n\texport const type = new NotificationType0('eslint/showOutputChannel');\r\n}\r\n\r\ntype RunValues = 'onType' | 'onSave';\r\n\r\nenum ModeEnum {\r\n\tauto = 'auto',\r\n\tlocation = 'location'\r\n}\r\n\r\nnamespace ModeEnum {\r\n\texport function is(value: string): value is ModeEnum {\r\n\t\treturn value === ModeEnum.auto || value === ModeEnum.location;\r\n\t}\r\n}\r\n\r\ninterface ModeItem {\r\n\tmode: ModeEnum\r\n}\r\n\r\nnamespace ModeItem {\r\n\texport function is(item: any): item is ModeItem {\r\n\t\tconst candidate = item as ModeItem;\r\n\t\treturn candidate && ModeEnum.is(candidate.mode);\r\n\t}\r\n}\r\n\r\ninterface DirectoryItem {\r\n\tdirectory: string;\r\n\t'!cwd'?: boolean;\r\n}\r\n\r\nnamespace DirectoryItem {\r\n\texport function is(item: any): item is DirectoryItem {\r\n\t\tconst candidate = item as DirectoryItem;\r\n\t\treturn candidate && Is.string(candidate.directory) && (Is.boolean(candidate['!cwd']) || candidate['!cwd'] === undefined);\r\n\t}\r\n}\r\n\r\ninterface CodeActionSettings {\r\n\tdisableRuleComment: {\r\n\t\tenable: boolean;\r\n\t\tlocation: 'separateLine' | 'sameLine';\r\n\t};\r\n\tshowDocumentation: {\r\n\t\tenable: boolean;\r\n\t};\r\n}\r\n\r\ntype PackageManagers = 'npm' | 'yarn' | 'pnpm';\r\n\r\ntype ESLintOptions = object & { fixTypes?: string[] };\r\nenum Validate {\r\n\ton = 'on',\r\n\toff = 'off',\r\n\tprobe = 'probe'\r\n}\r\n\r\nenum ESLintSeverity {\r\n\toff = 'off',\r\n\twarn = 'warn',\r\n\terror = 'error'\r\n}\r\n\r\nenum CodeActionsOnSaveMode {\r\n\tall = 'all',\r\n\tproblems = 'problems'\r\n}\r\n\r\ninterface CodeActionsOnSaveSettings {\r\n\tenable: boolean;\r\n\tmode: CodeActionsOnSaveMode;\r\n\trules?: string[];\r\n}\r\n\r\nenum RuleSeverity {\r\n\t// Original ESLint values\r\n\tinfo = 'info',\r\n\twarn = 'warn',\r\n\terror = 'error',\r\n\r\n\t// Added severity override changes\r\n\toff = 'off',\r\n\tdefault = 'default',\r\n\tdowngrade = 'downgrade',\r\n\tupgrade = 'upgrade'\r\n}\r\n\r\ninterface RuleCustomization  {\r\n\trule: string;\r\n\tseverity: RuleSeverity;\r\n}\r\n\r\ninterface CommonSettings {\r\n\tvalidate: Validate;\r\n\tpackageManager: 'npm' | 'yarn' | 'pnpm';\r\n\tuseESLintClass: boolean;\r\n\tcodeAction: CodeActionSettings;\r\n\tcodeActionOnSave: CodeActionsOnSaveSettings;\r\n\tformat: boolean;\r\n\tquiet: boolean;\r\n\tonIgnoredFiles: ESLintSeverity;\r\n\toptions: ESLintOptions | undefined;\r\n\trulesCustomizations: RuleCustomization[];\r\n\trun: RunValues;\r\n\tnodePath: string | null;\r\n\tworkspaceFolder: WorkspaceFolder | undefined;\r\n}\r\n\r\ninterface ConfigurationSettings extends CommonSettings {\r\n\tworkingDirectory: ModeItem | DirectoryItem | undefined;\r\n}\r\n\r\ninterface TextDocumentSettings extends CommonSettings {\r\n\tsilent: boolean;\r\n\tworkingDirectory: DirectoryItem | undefined;\r\n\tlibrary: ESLintModule | undefined;\r\n\tresolvedGlobalPackageManagerPath: string | undefined;\r\n}\r\n\r\nnamespace TextDocumentSettings {\r\n\texport function hasLibrary(settings: TextDocumentSettings): settings is (TextDocumentSettings & { library: ESLintModule }) {\r\n\t\treturn settings.library !== undefined;\r\n\t}\r\n}\r\n\r\ninterface ESLintAutoFixEdit {\r\n\trange: [number, number];\r\n\ttext: string;\r\n}\r\n\r\ninterface ESLintSuggestionResult {\r\n\tdesc: string;\r\n\tfix: ESLintAutoFixEdit;\r\n}\r\n\r\ninterface ESLintProblem {\r\n\tline: number;\r\n\tcolumn: number;\r\n\tendLine?: number;\r\n\tendColumn?: number;\r\n\tseverity: number;\r\n\truleId: string;\r\n\tmessage: string;\r\n\tfix?: ESLintAutoFixEdit;\r\n\tsuggestions?: ESLintSuggestionResult[]\r\n}\r\n\r\ninterface ESLintDocumentReport {\r\n\tfilePath: string;\r\n\terrorCount: number;\r\n\twarningCount: number;\r\n\tmessages: ESLintProblem[];\r\n\toutput?: string;\r\n}\r\n\r\ninterface ESLintReport {\r\n\terrorCount: number;\r\n\twarningCount: number;\r\n\tresults: ESLintDocumentReport[];\r\n}\r\n\r\ninterface CLIOptions {\r\n\tcwd?: string;\r\n\tfixTypes?: string[];\r\n\tfix?: boolean;\r\n}\r\n\r\ntype SeverityConf = 0 | 1 | 2 | 'off' | 'warn' | 'error';\r\n\r\ntype RuleConf = SeverityConf | [SeverityConf, ...any[]];\r\n\r\ntype ConfigData = {\r\n\trules?: Record<string, RuleConf>;\r\n};\r\n\r\ninterface ESLintClassOptions {\r\n\tcwd?: string;\r\n\tfixTypes?: string[];\r\n\tfix?: boolean;\r\n\toverrideConfig?: ConfigData;\r\n}\r\n\r\ntype RuleMetaData = {\r\n\tdocs?: {\r\n\t\turl?: string;\r\n\t};\r\n\ttype?: string;\r\n};\r\n\r\n// { meta: { docs: [Object], schema: [Array] }, create: [Function: create] }\r\ntype RuleData = {\r\n\tmeta?: RuleMetaData;\r\n};\r\n\r\nnamespace RuleData {\r\n\texport function hasMetaType(value: RuleMetaData | undefined): value is RuleMetaData & { type: string; } {\r\n\t\treturn value !== undefined && value.type !== undefined;\r\n\t}\r\n}\r\n\r\ninterface ParserOptions {\r\n\tparser?: string;\r\n}\r\n\r\ninterface ESLintConfig {\r\n \tenv: Record<string, boolean>;\r\n\textends:  string | string[];\r\n \t// globals: Record<string, GlobalConf>;\r\n \tignorePatterns: string | string[];\r\n \tnoInlineConfig: boolean;\r\n \t// overrides: OverrideConfigData[];\r\n \tparser: string | null;\r\n \tparserOptions?: ParserOptions;\r\n \tplugins: string[];\r\n \tprocessor: string;\r\n \treportUnusedDisableDirectives: boolean | undefined;\r\n \troot: boolean;\r\n \trules: Record<string, RuleConf>;\r\n \tsettings: object;\r\n}\r\n\r\ninterface ESLintClass {\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintlinttextcode-options\r\n\tlintText(content: string, options: {filePath?: string, warnIgnored?: boolean}): Promise<ESLintDocumentReport[]>;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintispathignoredfilepath\r\n\tisPathIgnored(path: string): Promise<boolean>;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintgetrulesmetaforresultsresults\r\n\tgetRulesMetaForResults?(results: ESLintDocumentReport[]): Record<string, RuleMetaData> | undefined /* for ESLintClassEmulator */;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintcalculateconfigforfilefilepath\r\n\tcalculateConfigForFile(path: string): Promise<ESLintConfig | undefined /* for ESLintClassEmulator */>;\r\n\t// Whether it is the old CLI Engine\r\n\tisCLIEngine?: boolean;\r\n}\r\n\r\ninterface ESLintClassConstructor {\r\n\tnew(options: ESLintClassOptions): ESLintClass;\r\n}\r\n\r\ninterface CLIEngineConstructor {\r\n\tnew(options: CLIOptions): CLIEngine;\r\n}\r\n\r\ntype ESLintModule =\r\n{\r\n\t// version < 7.0\r\n\tESLint: undefined;\r\n\tCLIEngine: CLIEngineConstructor;\r\n} | {\r\n\t// 7.0 <= version < 8.0\r\n\tESLint: ESLintClassConstructor;\r\n\tCLIEngine: CLIEngineConstructor;\r\n} | {\r\n\t// 8.0 <= version.\r\n\tESLint: ESLintClassConstructor;\r\n\tCLIEngine: undefined;\r\n};\r\n\r\nnamespace ESLintModule {\r\n\texport function hasESLintClass(value: ESLintModule): value is { ESLint: ESLintClassConstructor; CLIEngine: CLIEngineConstructor | undefined;} {\r\n\t\treturn value.ESLint !== undefined;\r\n\t}\r\n\texport function hasCLIEngine(value: ESLintModule): value is { CLIEngine: CLIEngineConstructor; ESLint: ESLintClassConstructor | undefined; } {\r\n\t\treturn value.CLIEngine !== undefined;\r\n\t}\r\n}\r\n\r\nnamespace ESLintClass {\r\n\texport function newESLintClass(library: ESLintModule, newOptions: ESLintClassOptions | CLIOptions, useESLintClass: boolean): ESLintClass {\r\n\t\tif (ESLintModule.hasESLintClass(library) && useESLintClass) {\r\n\t\t\treturn new library.ESLint(newOptions);\r\n\t\t}\r\n\t\tif (ESLintModule.hasCLIEngine(library)) {\r\n\t\t\treturn new ESLintClassEmulator(new library.CLIEngine(newOptions));\r\n\t\t}\r\n\t\treturn new library.ESLint(newOptions);\r\n\t}\r\n}\r\n\r\ninterface CLIEngine {\r\n\texecuteOnText(content: string, file?: string, warn?: boolean): ESLintReport;\r\n\tisPathIgnored(path: string): boolean;\r\n\t// This is only available from v4.15.0 forward\r\n\tgetRules?(): Map<string, RuleData>;\r\n\tgetConfigForFile?(path: string): ESLintConfig;\r\n}\r\n\r\nnamespace CLIEngine {\r\n\texport function hasRule(value: CLIEngine): value is CLIEngine & { getRules(): Map<string, RuleData> } {\r\n\t\treturn value.getRules !== undefined;\r\n\t}\r\n}\r\n\r\n/**\r\n * ESLint class emulator using CLI Engine.\r\n */\r\nclass ESLintClassEmulator implements ESLintClass {\r\n\r\n\tprivate cli: CLIEngine;\r\n\r\n\tconstructor(cli: CLIEngine) {\r\n\t\tthis.cli = cli;\r\n\t}\r\n\tget isCLIEngine(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\tasync lintText(content: string, options: { filePath?: string | undefined; warnIgnored?: boolean | undefined; }): Promise<ESLintDocumentReport[]> {\r\n\t\treturn this.cli.executeOnText(content, options.filePath, options.warnIgnored).results;\r\n\t}\r\n\tasync isPathIgnored(path: string): Promise<boolean> {\r\n\t\treturn this.cli.isPathIgnored(path);\r\n\t}\r\n\tgetRulesMetaForResults(_results: ESLintDocumentReport[]): Record<string, RuleMetaData> | undefined {\r\n\t\tif (!CLIEngine.hasRule(this.cli)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tconst rules: Record<string, RuleMetaData> = {};\r\n\t\tfor (const [name, rule] of this.cli.getRules()) {\r\n\t\t\tif (rule.meta !== undefined) {\r\n\t\t\t\trules[name] = rule.meta;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rules;\r\n\t}\r\n\tasync calculateConfigForFile(path: string): Promise<ESLintConfig | undefined> {\r\n\t\treturn typeof this.cli.getConfigForFile === 'function' ? this.cli.getConfigForFile(path) : undefined;\r\n\t}\r\n}\r\n\r\nnamespace RuleMetaData {\r\n\tconst handled: Set<string> = new Set();\r\n\tconst ruleId2Meta: Map<string, RuleMetaData> = new Map();\r\n\r\n\texport function capture(eslint: ESLintClass, reports: ESLintDocumentReport[]): void {\r\n\t\tlet rulesMetaData: Record<string, RuleMetaData> | undefined;\r\n\t\tif (eslint.isCLIEngine) {\r\n\t\t\tconst toHandle = reports.filter(report => !handled.has(report.filePath));\r\n\t\t\tif (toHandle.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\trulesMetaData = typeof eslint.getRulesMetaForResults === 'function' ? eslint.getRulesMetaForResults(toHandle) : undefined;\r\n\t\t\ttoHandle.forEach(report => handled.add(report.filePath));\r\n\t\t} else {\r\n\t\t\trulesMetaData = typeof eslint.getRulesMetaForResults === 'function' ? eslint.getRulesMetaForResults(reports) : undefined;\r\n\t\t}\r\n\t\tif (rulesMetaData === undefined) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tObject.entries(rulesMetaData).forEach(([key, meta]) => {\r\n\t\t\tif (ruleId2Meta.has(key)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (meta && meta.docs && Is.string(meta.docs.url)) {\r\n\t\t\t\truleId2Meta.set(key, meta);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport function clear(): void {\r\n\t\thandled.clear();\r\n\t\truleId2Meta.clear();\r\n\t}\r\n\r\n\texport function getUrl(ruleId: string): string | undefined {\r\n\t\treturn ruleId2Meta.get(ruleId)?.docs?.url;\r\n\t}\r\n\r\n\texport function getType(ruleId: string): string | undefined {\r\n\t\treturn ruleId2Meta.get(ruleId)?.type;\r\n\t}\r\n\r\n\texport function hasRuleId(ruleId: string): boolean {\r\n\t\treturn ruleId2Meta.has(ruleId);\r\n\t}\r\n}\r\n\r\ndeclare const __webpack_require__: typeof require;\r\ndeclare const __non_webpack_require__: typeof require;\r\nfunction loadNodeModule<T>(moduleName: string): T | undefined {\r\n\tconst r = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require;\r\n\ttry {\r\n\t\treturn r(moduleName);\r\n\t} catch (err: any) {\r\n\t\tif (err.stack) {\r\n\t\t\tconnection.console.error(err.stack.toString());\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\nconst ruleSeverityCache = new LRUCache<string, RuleSeverity | null>(1024);\r\n\r\nfunction asteriskMatches(matcher: string, ruleId: string): boolean {\r\n\treturn matcher.startsWith('!')\r\n\t\t? !(new RegExp(`^${matcher.slice(1).replace(/\\*/g, '.*')}$`, 'g').test(ruleId))\r\n\t\t: new RegExp(`^${matcher.replace(/\\*/g, '.*')}$`, 'g').test(ruleId);\r\n}\r\n\r\nfunction getSeverityOverride(ruleId: string, customizations: RuleCustomization[]): RuleSeverity | undefined {\r\n\tlet result: RuleSeverity | undefined | null = ruleSeverityCache.get(ruleId);\r\n\tif (result === null) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (result !== undefined) {\r\n\t\treturn result;\r\n\t}\r\n\tfor (const customization of customizations) {\r\n\t\tif (asteriskMatches(customization.rule, ruleId)) {\r\n\t\t\tresult = customization.severity;\r\n\t\t}\r\n\t}\r\n\tif (result === undefined) {\r\n\t\truleSeverityCache.set(ruleId, null);\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\truleSeverityCache.set(ruleId, result);\r\n\treturn result;\r\n}\r\n\r\ntype SaveRuleConfigItem = { offRules: Set<string>, onRules: Set<string>};\r\nconst saveRuleConfigCache = new LRUCache<string, SaveRuleConfigItem | null>(128);\r\nfunction isOff(ruleId: string, matchers: string[]): boolean {\r\n\tfor (const matcher of matchers) {\r\n\t\tif (matcher.startsWith('!') && new RegExp(`^${matcher.slice(1).replace(/\\*/g, '.*')}$`, 'g').test(ruleId)) {\r\n\t\t\treturn true;\r\n\t\t} else if (new RegExp(`^${matcher.replace(/\\*/g, '.*')}$`, 'g').test(ruleId)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nasync function getSaveRuleConfig(filePath: string, settings: TextDocumentSettings  & { library: ESLintModule }): Promise<SaveRuleConfigItem | undefined> {\r\n\tlet result = saveRuleConfigCache.get(filePath);\r\n\tif (result === null) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (result !== undefined) {\r\n\t\treturn result;\r\n\t}\r\n\tconst rules = settings.codeActionOnSave.rules;\r\n\tif (rules === undefined || !ESLintModule.hasESLintClass(settings.library) || !settings.useESLintClass) {\r\n\t\tresult = undefined;\r\n\t} else {\r\n\t\tresult = await withESLintClass(async (eslint) => {\r\n\t\t\tconst config = await eslint.calculateConfigForFile(filePath);\r\n\t\t\tif (config === undefined || config.rules === undefined || config.rules.length === 0) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst offRules: Set<string> = new Set();\r\n\t\t\tconst onRules: Set<string> = new Set();\r\n\t\t\tif (rules.length === 0) {\r\n\t\t\t\tObject.keys(config.rules).forEach(ruleId => offRules.add(ruleId));\r\n\t\t\t} else {\r\n\t\t\t\tfor (const ruleId of Object.keys(config.rules)) {\r\n\t\t\t\t\tif (isOff(ruleId, rules)) {\r\n\t\t\t\t\t\toffRules.add(ruleId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonRules.add(ruleId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn offRules.size > 0 ? { offRules, onRules } : undefined;\r\n\t\t}, settings);\r\n\t}\r\n\tif (result === undefined || result === null) {\r\n\t\tsaveRuleConfigCache.set(filePath, null);\r\n\t\treturn undefined;\r\n\t} else {\r\n\t\tsaveRuleConfigCache.set(filePath, result);\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction makeDiagnostic(settings: TextDocumentSettings, problem: ESLintProblem): [Diagnostic, RuleSeverity | undefined] {\r\n\tconst message = problem.message;\r\n\tconst startLine = Is.nullOrUndefined(problem.line) ? 0 : Math.max(0, problem.line - 1);\r\n\tconst startChar = Is.nullOrUndefined(problem.column) ? 0 : Math.max(0, problem.column - 1);\r\n\tconst endLine = Is.nullOrUndefined(problem.endLine) ? startLine : Math.max(0, problem.endLine - 1);\r\n\tconst endChar = Is.nullOrUndefined(problem.endColumn) ? startChar : Math.max(0, problem.endColumn - 1);\r\n\tconst override = getSeverityOverride(problem.ruleId, settings.rulesCustomizations);\r\n\tconst result: Diagnostic = {\r\n\t\tmessage: message,\r\n\t\tseverity: convertSeverityToDiagnosticWithOverride(problem.severity, override),\r\n\t\tsource: 'eslint',\r\n\t\trange: {\r\n\t\t\tstart: { line: startLine, character: startChar },\r\n\t\t\tend: { line: endLine, character: endChar }\r\n\t\t}\r\n\t};\r\n\tif (problem.ruleId) {\r\n\t\tconst url = RuleMetaData.getUrl(problem.ruleId);\r\n\t\tresult.code = problem.ruleId;\r\n\t\tif (url !== undefined) {\r\n\t\t\tresult.codeDescription = {\r\n\t\t\t\thref: url\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (problem.ruleId === 'no-unused-vars') {\r\n\t\t\tresult.tags = [DiagnosticTag.Unnecessary];\r\n\t\t}\r\n\t}\r\n\r\n\treturn [result, override];\r\n}\r\n\r\ninterface Problem {\r\n\tlabel: string;\r\n\tdocumentVersion: number;\r\n\truleId: string;\r\n\tline: number;\r\n\tdiagnostic: Diagnostic;\r\n\tedit?: ESLintAutoFixEdit;\r\n\tsuggestions?: ESLintSuggestionResult[];\r\n}\r\n\r\nnamespace Problem {\r\n\texport function isFixable(problem: Problem): problem is FixableProblem {\r\n\t\treturn problem.edit !== undefined;\r\n\t}\r\n\r\n\texport function hasSuggestions(problem: Problem): problem is SuggestionsProblem {\r\n\t\treturn problem.suggestions !== undefined;\r\n\t}\r\n}\r\n\r\ninterface FixableProblem extends Problem {\r\n\tedit: ESLintAutoFixEdit;\r\n}\r\n\r\nnamespace FixableProblem {\r\n\texport function createTextEdit(document: TextDocument, editInfo: FixableProblem): TextEdit {\r\n\t\treturn TextEdit.replace(Range.create(document.positionAt(editInfo.edit.range[0]), document.positionAt(editInfo.edit.range[1])), editInfo.edit.text || '');\r\n\t}\r\n}\r\n\r\ninterface SuggestionsProblem extends Problem {\r\n\tsuggestions: ESLintSuggestionResult[];\r\n}\r\n\r\nnamespace SuggestionsProblem {\r\n\texport function createTextEdit(document: TextDocument, suggestion: ESLintSuggestionResult): TextEdit {\r\n\t\treturn TextEdit.replace(Range.create(document.positionAt(suggestion.fix.range[0]), document.positionAt(suggestion.fix.range[1])), suggestion.fix.text || '');\r\n\t}\r\n}\r\n\r\nfunction computeKey(diagnostic: Diagnostic): string {\r\n\tconst range = diagnostic.range;\r\n\tlet message: string | undefined;\r\n\tif (diagnostic.message) {\r\n\t\tconst hash  = crypto.createHash('md5');\r\n\t\thash.update(diagnostic.message);\r\n\t\tmessage = hash.digest('base64');\r\n\t}\r\n\treturn `[${range.start.line},${range.start.character},${range.end.line},${range.end.character}]-${diagnostic.code}-${message ?? ''}`;\r\n}\r\n\r\nconst codeActions: Map<string, Map<string, Problem>> = new Map<string, Map<string, Problem>>();\r\nfunction recordCodeAction(document: TextDocument, diagnostic: Diagnostic, problem: ESLintProblem): void {\r\n\tif (!problem.ruleId) {\r\n\t\treturn;\r\n\t}\r\n\tconst uri = document.uri;\r\n\tlet edits: Map<string, Problem> | undefined = codeActions.get(uri);\r\n\tif (edits === undefined) {\r\n\t\tedits = new Map<string, Problem>();\r\n\t\tcodeActions.set(uri, edits);\r\n\t}\r\n\tedits.set(computeKey(diagnostic), {\r\n\t\tlabel: `Fix this ${problem.ruleId} problem`,\r\n\t\tdocumentVersion: document.version,\r\n\t\truleId: problem.ruleId,\r\n\t\tline: problem.line,\r\n\t\tdiagnostic: diagnostic,\r\n\t\tedit: problem.fix,\r\n\t\tsuggestions: problem.suggestions\r\n\t });\r\n}\r\n\r\nfunction adjustSeverityForOverride(severity: number | RuleSeverity, severityOverride?: RuleSeverity) {\r\n\tswitch (severityOverride) {\r\n\t\tcase RuleSeverity.off:\r\n\t\tcase RuleSeverity.info:\r\n\t\tcase RuleSeverity.warn:\r\n\t\tcase RuleSeverity.error:\r\n\t\t\treturn severityOverride;\r\n\r\n\t\tcase RuleSeverity.downgrade:\r\n\t\t\tswitch (convertSeverityToDiagnostic(severity)) {\r\n\t\t\t\tcase DiagnosticSeverity.Error:\r\n\t\t\t\t\treturn RuleSeverity.warn;\r\n\t\t\t\tcase DiagnosticSeverity.Warning:\r\n\t\t\t\tcase DiagnosticSeverity.Information:\r\n\t\t\t\t\treturn RuleSeverity.info;\r\n\t\t\t}\r\n\r\n\t\tcase RuleSeverity.upgrade:\r\n\t\t\tswitch (convertSeverityToDiagnostic(severity)) {\r\n\t\t\t\tcase DiagnosticSeverity.Information:\r\n\t\t\t\t\treturn RuleSeverity.warn;\r\n\t\t\t\tcase DiagnosticSeverity.Warning:\r\n\t\t\t\tcase DiagnosticSeverity.Error:\r\n\t\t\t\t\treturn RuleSeverity.error;\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn severity;\r\n\t}\r\n}\r\n\r\nfunction convertSeverityToDiagnostic(severity: number | RuleSeverity) {\r\n\t// RuleSeverity concerns an overridden rule. A number is direct from ESLint.\r\n\tswitch (severity) {\r\n\t\t// Eslint 1 is warning\r\n\t\tcase 1:\r\n\t\tcase RuleSeverity.warn:\r\n\t\t\treturn DiagnosticSeverity.Warning;\r\n\t\tcase 2:\r\n\t\tcase RuleSeverity.error:\r\n\t\t\treturn DiagnosticSeverity.Error;\r\n\t\tcase RuleSeverity.info:\r\n\t\t\treturn DiagnosticSeverity.Information;\r\n\t\tdefault:\r\n\t\t\treturn DiagnosticSeverity.Error;\r\n\t}\r\n}\r\n\r\nfunction convertSeverityToDiagnosticWithOverride(severity: number | RuleSeverity, severityOverride: RuleSeverity | undefined): DiagnosticSeverity {\r\n\treturn convertSeverityToDiagnostic(adjustSeverityForOverride(severity, severityOverride));\r\n\r\n}\r\n\r\nconst enum CharCode {\r\n\t/**\r\n\t * The `\\` character.\r\n\t */\r\n\tBackslash = 92,\r\n}\r\n\r\n/**\r\n * Check if the path follows this pattern: `\\\\hostname\\sharename`.\r\n *\r\n * @see https://msdn.microsoft.com/en-us/library/gg465305.aspx\r\n * @return A boolean indication if the path is a UNC path, on none-windows\r\n * always false.\r\n */\r\nfunction isUNC(path: string): boolean {\r\n\tif (process.platform !== 'win32') {\r\n\t\t// UNC is a windows concept\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!path || path.length < 5) {\r\n\t\t// at least \\\\a\\b\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet code = path.charCodeAt(0);\r\n\tif (code !== CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\tcode = path.charCodeAt(1);\r\n\tif (code !== CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\tlet pos = 2;\r\n\tconst start = pos;\r\n\tfor (; pos < path.length; pos++) {\r\n\t\tcode = path.charCodeAt(pos);\r\n\t\tif (code === CharCode.Backslash) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tif (start === pos) {\r\n\t\treturn false;\r\n\t}\r\n\tcode = path.charCodeAt(pos + 1);\r\n\tif (isNaN(code) || code === CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction normalizeDriveLetter(path: string): string {\r\n\tif (process.platform !== 'win32' || path.length < 2 || path[1] !== ':') {\r\n\t\treturn path;\r\n\t}\r\n\treturn path[0].toUpperCase() + path.substr(1);\r\n}\r\n\r\nfunction getFileSystemPath(uri: URI): string {\r\n\tlet result = uri.fsPath;\r\n\tif (process.platform === 'win32' && result.length >= 2 && result[1] === ':') {\r\n\t\t// Node by default uses an upper case drive letter and ESLint uses\r\n\t\t// === to compare paths which results in the equal check failing\r\n\t\t// if the drive letter is lower case in th URI. Ensure upper case.\r\n\t\tresult = result[0].toUpperCase() + result.substr(1);\r\n\t}\r\n\tif (process.platform === 'win32' || process.platform === 'darwin') {\r\n\t\tconst realpath = fs.realpathSync.native(result);\r\n\t\t// Only use the real path if only the casing has changed.\r\n\t\tif (realpath.toLowerCase() === result.toLowerCase()) {\r\n\t\t\tresult = realpath;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normalizePath(path: string): string;\r\nfunction normalizePath(path: undefined): undefined;\r\nfunction normalizePath(path: string | undefined): string | undefined {\r\n\tif (path === undefined) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (process.platform === 'win32') {\r\n\t\treturn path.replace(/\\\\/g, '/');\r\n\t}\r\n\treturn path;\r\n}\r\n\r\nfunction getUri(documentOrUri: string | TextDocument | URI): URI {\r\n\treturn Is.string(documentOrUri)\r\n\t\t? URI.parse(documentOrUri)\r\n\t\t: documentOrUri instanceof URI\r\n\t\t\t? documentOrUri\r\n\t\t\t: URI.parse(documentOrUri.uri);\r\n}\r\n\r\nfunction getFilePath(documentOrUri: string | TextDocument | URI | undefined): string | undefined {\r\n\tif (!documentOrUri) {\r\n\t\treturn undefined;\r\n\t}\r\n\tconst uri = getUri(documentOrUri);\r\n\tif (uri.scheme !== 'file') {\r\n\t\treturn undefined;\r\n\t}\r\n\treturn getFileSystemPath(uri);\r\n}\r\n\r\nconst exitCalled = new NotificationType<[number, string]>('eslint/exitCalled');\r\n\r\nconst nodeExit = process.exit;\r\nprocess.exit = ((code?: number): void => {\r\n\tconst stack = new Error('stack');\r\n\tconnection.sendNotification(exitCalled, [code ? code : 0, stack.stack]);\r\n\tsetTimeout(() => {\r\n\t\tnodeExit(code);\r\n\t}, 1000);\r\n}) as any;\r\nprocess.on('uncaughtException', (error: any) => {\r\n\tlet message: string | undefined;\r\n\tif (error) {\r\n\t\tif (typeof error.stack === 'string') {\r\n\t\t\tmessage = error.stack;\r\n\t\t} else if (typeof error.message === 'string') {\r\n\t\t\tmessage = error.message;\r\n\t\t} else if (typeof error === 'string') {\r\n\t\t\tmessage = error;\r\n\t\t}\r\n\t\tif (message === undefined || message.length === 0) {\r\n\t\t\ttry {\r\n\t\t\t\tmessage = JSON.stringify(error, undefined, 4);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Should not happen.\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// eslint-disable-next-line no-console\r\n\tconsole.error('Uncaught exception received.');\r\n\tif (message) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(message);\r\n\t}\r\n});\r\n\r\n\r\nfunction isRequestMessage(message: LMessage | undefined): message is LRequestMessage {\r\n\tconst candidate = <LRequestMessage>message;\r\n\treturn candidate && typeof candidate.method === 'string' && (typeof candidate.id === 'string' || typeof candidate.id === 'number');\r\n}\r\n\r\nconst connection = createConnection({\r\n\tcancelUndispatched: (message: LMessage) => {\r\n\t\t// Code actions can savely be cancel on request.\r\n\t\tif (isRequestMessage(message) && message.method === 'textDocument/codeAction') {\r\n\t\t\tconst response: LResponseMessage = {\r\n\t\t\t\tjsonrpc: message.jsonrpc,\r\n\t\t\t\tid: message.id,\r\n\t\t\t\tresult: null\r\n\t\t\t};\r\n\t\t\treturn response;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n});\r\nconnection.console.info(`ESLint server running in node ${process.version}`);\r\n// Is instantiated in the initialize handle;\r\nlet documents!: TextDocuments<TextDocument>;\r\n\r\nconst _globalPaths: Record<string, { cache: string | undefined; get(): string | undefined; }> = {\r\n\tyarn: {\r\n\t\tcache: undefined,\r\n\t\tget(): string | undefined {\r\n\t\t\treturn Files.resolveGlobalYarnPath(trace);\r\n\t\t}\r\n\t},\r\n\tnpm: {\r\n\t\tcache: undefined,\r\n\t\tget(): string | undefined {\r\n\t\t\treturn Files.resolveGlobalNodePath(trace);\r\n\t\t}\r\n\t},\r\n\tpnpm: {\r\n\t\tcache: undefined,\r\n\t\tget(): string {\r\n\t\t\tconst pnpmPath = execSync('pnpm root -g').toString().trim();\r\n\t\t\treturn pnpmPath;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction globalPathGet(packageManager: PackageManagers): string | undefined {\r\n\tconst pm = _globalPaths[packageManager];\r\n\tif (pm) {\r\n\t\tif (pm.cache === undefined) {\r\n\t\t\tpm.cache = pm.get();\r\n\t\t}\r\n\t\treturn pm.cache;\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\ntype LanguageConfig = {\r\n\text: string;\r\n\tlineComment: string;\r\n\tblockComment: [string, string];\r\n};\r\n\r\nconst languageId2Config: Map<string, LanguageConfig> = new Map([\r\n\t['javascript', { ext: 'js', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['javascriptreact', { ext: 'jsx', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['typescript', { ext: 'ts', lineComment: '//', blockComment: ['/*', '*/'] } ],\r\n\t['typescriptreact', { ext: 'tsx', lineComment: '//', blockComment: ['/*', '*/'] } ],\r\n\t['html', { ext: 'html', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['vue', { ext: 'vue', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['coffeescript', { ext: 'coffee', lineComment: '#', blockComment: ['###', '###'] }],\r\n\t['yaml', { ext: 'yaml', lineComment: '#', blockComment: ['#', ''] }],\r\n\t['graphql', { ext: 'graphql', lineComment: '#', blockComment: ['#', ''] }]\r\n]);\r\n\r\nfunction getLineComment(languageId: string): string {\r\n\treturn languageId2Config.get(languageId)?.lineComment ?? '//';\r\n}\r\n\r\nfunction getBlockComment(languageId: string): [string, string] {\r\n\treturn languageId2Config.get(languageId)?.blockComment ?? ['/**', '*/'];\r\n}\r\n\r\nconst languageId2ParserRegExp: Map<string, RegExp[]> = function createLanguageId2ParserRegExp() {\r\n\tconst result = new Map<string, RegExp[]>();\r\n\tconst typescript = /\\/@typescript-eslint\\/parser\\//;\r\n\tconst babelESLint = /\\/babel-eslint\\/lib\\/index.js$/;\r\n\tresult.set('typescript', [typescript, babelESLint]);\r\n\tresult.set('typescriptreact', [typescript, babelESLint]);\r\n\r\n\tconst angular = /\\/@angular-eslint\\/template-parser\\//;\r\n\tresult.set('html', [angular]);\r\n\r\n\treturn result;\r\n}();\r\n\r\nconst languageId2ParserOptions: Map<string, { regExps: RegExp[]; parsers: Set<string>; parserRegExps?: RegExp[] }> = function createLanguageId2ParserOptionsRegExp() {\r\n\tconst result = new Map<string, { regExps: RegExp[]; parsers: Set<string>; parserRegExps?: RegExp[] }>();\r\n\tconst vue = /vue-eslint-parser\\/.*\\.js$/;\r\n\tconst typescriptEslintParser = /@typescript-eslint\\/parser\\/.*\\.js$/;\r\n\tresult.set('typescript', { regExps: [vue], parsers: new Set<string>(['@typescript-eslint/parser']), parserRegExps: [typescriptEslintParser] });\r\n\treturn result;\r\n}();\r\n\r\nconst languageId2PluginName: Map<string, string> = new Map([\r\n\t['html', 'html'],\r\n\t['vue', 'vue'],\r\n\t['markdown', 'markdown']\r\n]);\r\n\r\nconst defaultLanguageIds: Set<string> = new Set([\r\n\t'javascript', 'javascriptreact'\r\n]);\r\n\r\nconst path2Library: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\nconst document2Settings: Map<string, Promise<TextDocumentSettings>> = new Map<string, Promise<TextDocumentSettings>>();\r\n\r\nconst projectFolderIndicators: [string, boolean][] = [\r\n\t[ 'package.json',  true ],\r\n\t[ '.eslintignore', true],\r\n\t[ '.eslintrc', false ],\r\n\t[ '.eslintrc.json', false ],\r\n\t[ '.eslintrc.js', false ],\r\n\t[ '.eslintrc.yaml', false ],\r\n\t[ '.eslintrc.yml', false ]\r\n];\r\n\r\nfunction getESLintFilePath(document: TextDocument | undefined, settings: TextDocumentSettings): string | undefined {\r\n\tif (document === undefined) {\r\n\t\treturn undefined;\r\n\t}\r\n\tconst uri = URI.parse(document.uri);\r\n\tif (uri.scheme === 'untitled') {\r\n\t\tif (settings.workspaceFolder !== undefined) {\r\n\t\t\tconst ext = languageId2Config.get(document.languageId);\r\n\t\t\tconst workspacePath = getFilePath(settings.workspaceFolder.uri);\r\n\t\t\tif (workspacePath !== undefined && ext !== undefined) {\r\n\t\t\t\treturn path.join(workspacePath, `test${ext}`);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t} else {\r\n\t\treturn getFilePath(uri);\r\n\t}\r\n}\r\n\r\nfunction findWorkingDirectory(workspaceFolder: string, file: string | undefined): string | undefined {\r\n\tif (file === undefined || isUNC(file)) {\r\n\t\treturn workspaceFolder;\r\n\t}\r\n\t// Don't probe for something in node modules folder.\r\n\tif (file.indexOf(`${path.sep}node_modules${path.sep}`) !== -1) {\r\n\t\treturn workspaceFolder;\r\n\t}\r\n\r\n\tlet result: string = workspaceFolder;\r\n\tlet directory: string | undefined = path.dirname(file);\r\n\touter: while (directory !== undefined && directory.startsWith(workspaceFolder)) {\r\n\t\tfor (const item of projectFolderIndicators) {\r\n\t\t\tif (fs.existsSync(path.join(directory, item[0]))) {\r\n\t\t\t\tresult = directory;\r\n\t\t\t\tif (item[1]) {\r\n\t\t\t\t\tbreak outer;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst parent = path.dirname(directory);\r\n\t\tdirectory = parent !== directory ? parent : undefined;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction resolveSettings(document: TextDocument): Promise<TextDocumentSettings> {\r\n\tconst uri = document.uri;\r\n\tlet resultPromise = document2Settings.get(uri);\r\n\tif (resultPromise) {\r\n\t\treturn resultPromise;\r\n\t}\r\n\tresultPromise = connection.workspace.getConfiguration({ scopeUri: uri, section: '' }).then((configuration: ConfigurationSettings) => {\r\n\t\tconst settings: TextDocumentSettings = Object.assign(\r\n\t\t\t{},\r\n\t\t\tconfiguration,\r\n\t\t\t{ silent: false, library: undefined, resolvedGlobalPackageManagerPath: undefined },\r\n\t\t\t{ workingDirectory: undefined}\r\n\t\t);\r\n\t\tif (settings.validate === Validate.off) {\r\n\t\t\treturn settings;\r\n\t\t}\r\n\t\tsettings.resolvedGlobalPackageManagerPath = globalPathGet(settings.packageManager);\r\n\t\tconst filePath = getFilePath(document);\r\n\t\tconst workspaceFolderPath = settings.workspaceFolder !== undefined ? getFilePath(settings.workspaceFolder.uri) : undefined;\r\n\t\tconst hasUserDefinedWorkingDirectories: boolean = configuration.workingDirectory !== undefined;\r\n\t\tconst workingDirectoryConfig = configuration.workingDirectory ?? { mode: ModeEnum.location };\r\n\t\tif (ModeItem.is(workingDirectoryConfig)) {\r\n\t\t\tlet candidate: string | undefined;\r\n\t\t\tif (workingDirectoryConfig.mode === ModeEnum.location) {\r\n\t\t\t\tif (workspaceFolderPath !== undefined) {\r\n\t\t\t\t\tcandidate = workspaceFolderPath;\r\n\t\t\t\t} else if (filePath !== undefined && !isUNC(filePath)) {\r\n\t\t\t\t\tcandidate = path.dirname(filePath);\r\n\t\t\t\t}\r\n\t\t\t} else if (workingDirectoryConfig.mode === ModeEnum.auto) {\r\n\t\t\t\tif (workspaceFolderPath !== undefined) {\r\n\t\t\t\t\tcandidate = findWorkingDirectory(workspaceFolderPath, filePath);\r\n\t\t\t\t} else if (filePath !== undefined && !isUNC(filePath)) {\r\n\t\t\t\t\tcandidate = path.dirname(filePath);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (candidate !== undefined && fs.existsSync(candidate)) {\r\n\t\t\t\tsettings.workingDirectory = { directory: candidate };\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsettings.workingDirectory = workingDirectoryConfig;\r\n\t\t}\r\n\t\tlet promise: Promise<string>;\r\n\t\tlet nodePath: string | undefined;\r\n\t\tif (settings.nodePath !== null) {\r\n\t\t\tnodePath = settings.nodePath;\r\n\t\t\tif (!path.isAbsolute(nodePath) && workspaceFolderPath !== undefined) {\r\n\t\t\t\tnodePath = path.join(workspaceFolderPath, nodePath);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet moduleResolveWorkingDirectory: string | undefined;\r\n\t\tif (!hasUserDefinedWorkingDirectories && filePath !== undefined) {\r\n\t\t\tmoduleResolveWorkingDirectory = path.dirname(filePath);\r\n\t\t}\r\n\t\tif (moduleResolveWorkingDirectory === undefined && settings.workingDirectory !== undefined && !settings.workingDirectory['!cwd']) {\r\n\t\t\tmoduleResolveWorkingDirectory = settings.workingDirectory.directory;\r\n\t\t}\r\n\t\tif (nodePath !== undefined) {\r\n\t\t\tpromise = Files.resolve('eslint', nodePath, nodePath, trace).then<string, string>(undefined, () => {\r\n\t\t\t\treturn Files.resolve('eslint', settings.resolvedGlobalPackageManagerPath, moduleResolveWorkingDirectory, trace);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tpromise = Files.resolve('eslint', settings.resolvedGlobalPackageManagerPath, moduleResolveWorkingDirectory, trace);\r\n\t\t}\r\n\r\n\t\tsettings.silent = settings.validate === Validate.probe;\r\n\t\treturn promise.then(async (libraryPath) => {\r\n\t\t\tlet library = path2Library.get(libraryPath);\r\n\t\t\tif (library === undefined) {\r\n\t\t\t\tlibrary = loadNodeModule(libraryPath);\r\n\t\t\t\tif (library === undefined) {\r\n\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\tif (!settings.silent) {\r\n\t\t\t\t\t\tconnection.console.error(`Failed to load eslint library from ${libraryPath}. See output panel for more information.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (library.CLIEngine === undefined && library.ESLint === undefined) {\r\n\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\tconnection.console.error(`The eslint library loaded from ${libraryPath} doesn\\'t neither exports a CLIEngine nor an ESLint class. You need at least eslint@1.0.0`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconnection.console.info(`ESLint library loaded from: ${libraryPath}`);\r\n\t\t\t\t\tsettings.library = library;\r\n\t\t\t\t\tpath2Library.set(libraryPath, library);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsettings.library = library;\r\n\t\t\t}\r\n\t\t\tif (settings.validate === Validate.probe && TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\tlet filePath = getESLintFilePath(document, settings);\r\n\t\t\t\tif (filePath !== undefined) {\r\n\t\t\t\t\tconst parserRegExps = languageId2ParserRegExp.get(document.languageId);\r\n\t\t\t\t\tconst pluginName = languageId2PluginName.get(document.languageId);\r\n\t\t\t\t\tconst parserOptions = languageId2ParserOptions.get(document.languageId);\r\n\t\t\t\t\tif (defaultLanguageIds.has(document.languageId)) {\r\n\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t} else if (parserRegExps !== undefined || pluginName !== undefined || parserOptions !== undefined) {\r\n\t\t\t\t\t\tconst eslintConfig: ESLintConfig | undefined = await withESLintClass((eslintClass) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\treturn eslintClass.calculateConfigForFile(filePath!);\r\n\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, settings);\r\n\t\t\t\t\t\tif (eslintConfig !== undefined) {\r\n\t\t\t\t\t\t\tconst parser: string | undefined =  eslintConfig.parser !== null\r\n\t\t\t\t\t\t\t\t? normalizePath(eslintConfig.parser)\r\n\t\t\t\t\t\t\t\t: undefined;\r\n\t\t\t\t\t\t\tif (parser !== undefined) {\r\n\t\t\t\t\t\t\t\tif (parserRegExps !== undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (const regExp of parserRegExps) {\r\n\t\t\t\t\t\t\t\t\t\tif (regExp.test(parser)) {\r\n\t\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (settings.validate !== Validate.on && parserOptions !== undefined && typeof eslintConfig.parserOptions?.parser === 'string') {\r\n\t\t\t\t\t\t\t\t\tconst eslintConfigParserOptionsParser = normalizePath(eslintConfig.parserOptions.parser);\r\n\t\t\t\t\t\t\t\t\tfor (const regExp of parserOptions.regExps) {\r\n\t\t\t\t\t\t\t\t\t\tif (regExp.test(parser) && (\r\n\t\t\t\t\t\t\t\t\t\t\tparserOptions.parsers.has(eslintConfig.parserOptions.parser) ||\r\n\t\t\t\t\t\t\t\t\t\t\tparserOptions.parserRegExps !== undefined && parserOptions.parserRegExps.some(parserRegExp => parserRegExp.test(eslintConfigParserOptionsParser))\r\n\t\t\t\t\t\t\t\t\t\t)) {\r\n\t\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (settings.validate !== Validate.on && Array.isArray(eslintConfig.plugins) && eslintConfig.plugins.length > 0 && pluginName !== undefined) {\r\n\t\t\t\t\t\t\t\tfor (const name of eslintConfig.plugins) {\r\n\t\t\t\t\t\t\t\t\tif (name === pluginName) {\r\n\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (settings.validate === Validate.off) {\r\n\t\t\t\t\tconst params: ProbeFailedParams = { textDocument: { uri: document.uri } };\r\n\t\t\t\t\tvoid connection.sendRequest(ProbeFailedRequest.type, params);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (settings.format && settings.validate === Validate.on && TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\t\tconst Uri = URI.parse(uri);\r\n\t\t\t\tconst isFile = Uri.scheme === 'file';\r\n\t\t\t\tlet pattern: string = isFile\r\n\t\t\t\t\t? Uri.fsPath.replace(/\\\\/g, '/')\r\n\t\t\t\t\t: Uri.fsPath;\r\n\t\t\t\tpattern = pattern.replace(/[\\[\\]\\{\\}]/g, '?');\r\n\r\n\t\t\t\tconst filter: DocumentFilter = { scheme: Uri.scheme, pattern: pattern };\r\n\t\t\t\tconst options: DocumentFormattingRegistrationOptions = { documentSelector: [filter] };\r\n\t\t\t\tif (!isFile) {\r\n\t\t\t\t\tformatterRegistrations.set(uri, connection.client.register(DocumentFormattingRequest.type, options));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst filePath = getFilePath(uri)!;\r\n\t\t\t\t\tawait withESLintClass(async (eslintClass) => {\r\n\t\t\t\t\t\tif (!await eslintClass.isPathIgnored(filePath)) {\r\n\t\t\t\t\t\t\tformatterRegistrations.set(uri, connection.client.register(DocumentFormattingRequest.type, options));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, settings);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn settings;\r\n\t\t}, () => {\r\n\t\t\tsettings.validate = Validate.off;\r\n\t\t\tif (!settings.silent) {\r\n\t\t\t\tvoid connection.sendRequest(NoESLintLibraryRequest.type, { source: { uri: document.uri } });\r\n\t\t\t}\r\n\t\t\treturn settings;\r\n\t\t});\r\n\t});\r\n\tdocument2Settings.set(uri, resultPromise);\r\n\treturn resultPromise;\r\n}\r\n\r\ninterface Request<P, R> {\r\n\tmethod: string;\r\n\tparams: P;\r\n\tdocumentVersion: number | undefined;\r\n\tresolve: (value: R | Promise<R>) => void | undefined;\r\n\treject: (error: any) => void | undefined;\r\n\ttoken: CancellationToken;\r\n}\r\n\r\nnamespace Request {\r\n\texport function is(value: any): value is Request<any, any> {\r\n\t\tconst candidate: Request<any, any> = value;\r\n\t\treturn candidate && candidate.token !== undefined && candidate.resolve !== undefined && candidate.reject !== undefined;\r\n\t}\r\n}\r\n\r\ninterface Notification<P> {\r\n\tmethod: string;\r\n\tparams: P;\r\n\tdocumentVersion: number | undefined;\r\n}\r\n\r\ntype Message<P, R> = Notification<P> | Request<P, R>;\r\n\r\ninterface VersionProvider<P> {\r\n\t(params: P): number | undefined;\r\n}\r\n\r\nnamespace Thenable {\r\n\texport function is<T>(value: any): value is Thenable<T> {\r\n\t\tconst candidate: Thenable<T> = value;\r\n\t\treturn candidate && typeof candidate.then === 'function';\r\n\t}\r\n}\r\n\r\nclass BufferedMessageQueue {\r\n\r\n\tprivate queue: Message<any, any>[];\r\n\tprivate requestHandlers: Map<string, { handler: RequestHandler<any, any, any>, versionProvider?: VersionProvider<any> }>;\r\n\tprivate notificationHandlers: Map<string, { handler: NotificationHandler<any>, versionProvider?: VersionProvider<any> }>;\r\n\tprivate timer: NodeJS.Immediate | undefined;\r\n\r\n\tconstructor(private connection: Connection) {\r\n\t\tthis.queue = [];\r\n\t\tthis.requestHandlers = new Map();\r\n\t\tthis.notificationHandlers = new Map();\r\n\t}\r\n\r\n\tpublic registerRequest<P, R, E>(type: RequestType<P, R, E>, handler: RequestHandler<P, R, E>, versionProvider?: VersionProvider<P>): void {\r\n\t\tthis.connection.onRequest(type, (params, token) => {\r\n\t\t\treturn new Promise<R>((resolve, reject) => {\r\n\t\t\t\tthis.queue.push({\r\n\t\t\t\t\tmethod: type.method,\r\n\t\t\t\t\tparams: params,\r\n\t\t\t\t\tdocumentVersion: versionProvider ? versionProvider(params) : undefined,\r\n\t\t\t\t\tresolve: resolve,\r\n\t\t\t\t\treject: reject,\r\n\t\t\t\t\ttoken: token\r\n\t\t\t\t});\r\n\t\t\t\tthis.trigger();\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.requestHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tpublic registerNotification<P>(type: NotificationType<P>, handler: NotificationHandler<P>, versionProvider?: (params: P) => number): void {\r\n\t\tconnection.onNotification(type, (params) => {\r\n\t\t\tthis.queue.push({\r\n\t\t\t\tmethod: type.method,\r\n\t\t\t\tparams: params,\r\n\t\t\t\tdocumentVersion: versionProvider ? versionProvider(params) : undefined,\r\n\t\t\t});\r\n\t\t\tthis.trigger();\r\n\t\t});\r\n\t\tthis.notificationHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tpublic addNotificationMessage<P>(type: NotificationType<P>, params: P, version: number) {\r\n\t\tthis.queue.push({\r\n\t\t\tmethod: type.method,\r\n\t\t\tparams,\r\n\t\t\tdocumentVersion: version\r\n\t\t});\r\n\t\tthis.trigger();\r\n\t}\r\n\r\n\tpublic onNotification<P>(type: NotificationType<P>, handler: NotificationHandler<P>, versionProvider?: (params: P) => number): void {\r\n\t\tthis.notificationHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tprivate trigger(): void {\r\n\t\tif (this.timer || this.queue.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.timer = setImmediate(() => {\r\n\t\t\tthis.timer = undefined;\r\n\t\t\tthis.processQueue();\r\n\t\t\tthis.trigger();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate processQueue(): void {\r\n\t\tconst message = this.queue.shift();\r\n\t\tif (!message) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (Request.is(message)) {\r\n\t\t\tconst requestMessage = message;\r\n\t\t\tif (requestMessage.token.isCancellationRequested) {\r\n\t\t\t\trequestMessage.reject(new ResponseError(LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst elem = this.requestHandlers.get(requestMessage.method);\r\n\t\t\tif (elem === undefined) {\r\n\t\t\t\tthrow new Error(`No handler registered`);\r\n\t\t\t}\r\n\t\t\tif (elem.versionProvider && requestMessage.documentVersion !== undefined && requestMessage.documentVersion !== elem.versionProvider(requestMessage.params)) {\r\n\t\t\t\trequestMessage.reject(new ResponseError(LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst result = elem.handler(requestMessage.params, requestMessage.token);\r\n\t\t\tif (Thenable.is(result)) {\r\n\t\t\t\tresult.then((value) => {\r\n\t\t\t\t\trequestMessage.resolve(value);\r\n\t\t\t\t}, (error) => {\r\n\t\t\t\t\trequestMessage.reject(error);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\trequestMessage.resolve(result);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst notificationMessage = message;\r\n\t\t\tconst elem = this.notificationHandlers.get(notificationMessage.method);\r\n\t\t\tif (elem === undefined) {\r\n\t\t\t\tthrow new Error(`No handler registered`);\r\n\t\t\t}\r\n\t\t\tif (elem.versionProvider && notificationMessage.documentVersion !== undefined && notificationMessage.documentVersion !== elem.versionProvider(notificationMessage.params)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telem.handler(notificationMessage.params);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst messageQueue: BufferedMessageQueue = new BufferedMessageQueue(connection);\r\nconst formatterRegistrations: Map<string, Promise<Disposable>> = new Map();\r\n\r\nnamespace ValidateNotification {\r\n\texport const type: NotificationType<TextDocument> = new NotificationType<TextDocument>('eslint/validate');\r\n}\r\n\r\nmessageQueue.onNotification(ValidateNotification.type, (document) => {\r\n\tvoid validateSingle(document, true);\r\n}, (document): number => {\r\n\treturn document.version;\r\n});\r\n\r\nfunction setupDocumentsListeners() {\r\n\t// The documents manager listen for text document create, change\r\n\t// and close on the connection\r\n\tdocuments.listen(connection);\r\n\tdocuments.onDidOpen((event) => {\r\n\t\tvoid resolveSettings(event.document).then((settings) => {\r\n\t\t\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (settings.run === 'onSave') {\r\n\t\t\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, event.document, event.document.version);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t// A text document has changed. Validate the document according the run setting.\r\n\tdocuments.onDidChangeContent((event) => {\r\n\t\tconst uri = event.document.uri;\r\n\t\tcodeActions.delete(uri);\r\n\t\tvoid resolveSettings(event.document).then((settings) => {\r\n\t\t\tif (settings.validate !== Validate.on || settings.run !== 'onType') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, event.document, event.document.version);\r\n\t\t});\r\n\t});\r\n\r\n\t// A text document has been saved. Validate the document according the run setting.\r\n\tdocuments.onDidSave((event) => {\r\n\t\tvoid resolveSettings(event.document).then((settings) => {\r\n\t\t\tif (settings.validate !== Validate.on || settings.run !== 'onSave') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, event.document, event.document.version);\r\n\t\t});\r\n\t});\r\n\r\n\tdocuments.onDidClose((event) => {\r\n\t\tvoid resolveSettings(event.document).then((settings) => {\r\n\t\t\tconst uri = event.document.uri;\r\n\t\t\tdocument2Settings.delete(uri);\r\n\t\t\tsaveRuleConfigCache.delete(uri);\r\n\t\t\tcodeActions.delete(uri);\r\n\t\t\tconst unregister = formatterRegistrations.get(event.document.uri);\r\n\t\t\tif (unregister !== undefined) {\r\n\t\t\t\tvoid unregister.then(disposable => disposable.dispose());\r\n\t\t\t\tformatterRegistrations.delete(event.document.uri);\r\n\t\t\t}\r\n\t\t\tif (settings.validate === Validate.on) {\r\n\t\t\t\tconnection.sendDiagnostics({ uri: uri, diagnostics: [] });\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction environmentChanged() {\r\n\tdocument2Settings.clear();\r\n\truleSeverityCache.clear();\r\n\tsaveRuleConfigCache.clear();\r\n\r\n\tfor (const document of documents.all()) {\r\n\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n\t}\r\n\tfor (const unregistration of formatterRegistrations.values()) {\r\n\t\tvoid unregistration.then(disposable => disposable.dispose());\r\n\t}\r\n\tformatterRegistrations.clear();\r\n}\r\n\r\nfunction trace(message: string, verbose?: string): void {\r\n\tconnection.tracer.log(message, verbose);\r\n}\r\n\r\nconnection.onInitialize((_params, _cancel, progress) => {\r\n\tprogress.begin('Initializing ESLint Server');\r\n\tconst syncKind: TextDocumentSyncKind = TextDocumentSyncKind.Incremental;\r\n\tdocuments = new TextDocuments(TextDocument);\r\n\tsetupDocumentsListeners();\r\n\tprogress.done();\r\n\treturn {\r\n\t\tcapabilities: {\r\n\t\t\ttextDocumentSync: {\r\n\t\t\t\topenClose: true,\r\n\t\t\t\tchange: syncKind,\r\n\t\t\t\twillSaveWaitUntil: false,\r\n\t\t\t\tsave: {\r\n\t\t\t\t\tincludeText: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tworkspace: {\r\n\t\t\t\tworkspaceFolders: {\r\n\t\t\t\t\tsupported: true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcodeActionProvider: { codeActionKinds: [CodeActionKind.QuickFix, `${CodeActionKind.SourceFixAll}.eslint`] },\r\n\t\t\texecuteCommandProvider: {\r\n\t\t\t\tcommands: [\r\n\t\t\t\t\tCommandIds.applySingleFix,\r\n\t\t\t\t\tCommandIds.applySuggestion,\r\n\t\t\t\t\tCommandIds.applySameFixes,\r\n\t\t\t\t\tCommandIds.applyAllFixes,\r\n\t\t\t\t\tCommandIds.applyDisableLine,\r\n\t\t\t\t\tCommandIds.applyDisableFile,\r\n\t\t\t\t\tCommandIds.openRuleDoc,\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n\r\nconnection.onInitialized(() => {\r\n\tvoid connection.client.register(DidChangeConfigurationNotification.type, undefined);\r\n\tvoid connection.client.register(DidChangeWorkspaceFoldersNotification.type, undefined);\r\n});\r\n\r\nmessageQueue.registerNotification(DidChangeConfigurationNotification.type, (_params) => {\r\n\tenvironmentChanged();\r\n});\r\n\r\nmessageQueue.registerNotification(DidChangeWorkspaceFoldersNotification.type, (_params) => {\r\n\tenvironmentChanged();\r\n});\r\n\r\nconst singleErrorHandlers: ((error: any, document: TextDocument, library: ESLintModule) => Status | undefined)[] = [\r\n\ttryHandleNoConfig,\r\n\ttryHandleConfigError,\r\n\ttryHandleMissingModule,\r\n\tshowErrorMessage\r\n];\r\n\r\nfunction validateSingle(document: TextDocument, publishDiagnostics: boolean = true): Promise<void> {\r\n\t// We validate document in a queue but open / close documents directly. So we need to deal with the\r\n\t// fact that a document might be gone from the server.\r\n\tif (!documents.get(document.uri)) {\r\n\t\treturn Promise.resolve(undefined);\r\n\t}\r\n\treturn resolveSettings(document).then(async (settings) => {\r\n\t\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait validate(document, settings, publishDiagnostics);\r\n\t\t\tconnection.sendNotification(StatusNotification.type, { uri: document.uri, state: Status.ok });\r\n\t\t} catch (err) {\r\n\t\t\t// if an exception has occurred while validating clear all errors to ensure\r\n\t\t\t// we are not showing any stale once\r\n\t\t\tconnection.sendDiagnostics({ uri: document.uri, diagnostics: [] });\r\n\t\t\tif (!settings.silent) {\r\n\t\t\t\tlet status: Status | undefined = undefined;\r\n\t\t\t\tfor (const handler of singleErrorHandlers) {\r\n\t\t\t\t\tstatus = handler(err, document, settings.library);\r\n\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tstatus = status || Status.error;\r\n\t\t\t\tconnection.sendNotification(StatusNotification.type, { uri: document.uri, state: status });\r\n\t\t\t} else {\r\n\t\t\t\tconnection.console.info(getMessage(err, document));\r\n\t\t\t\tconnection.sendNotification(StatusNotification.type, { uri: document.uri, state: Status.ok });\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction validateMany(documents: TextDocument[]): void {\r\n\tdocuments.forEach(document => {\r\n\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n\t});\r\n}\r\n\r\nfunction getMessage(err: any, document: TextDocument): string {\r\n\tlet result: string | undefined = undefined;\r\n\tif (typeof err.message === 'string' || err.message instanceof String) {\r\n\t\tresult = <string>err.message;\r\n\t\tresult = result.replace(/\\r?\\n/g, ' ');\r\n\t\tif (/^CLI: /.test(result)) {\r\n\t\t\tresult = result.substr(5);\r\n\t\t}\r\n\t} else {\r\n\t\tresult = `An unknown error occurred while validating document: ${document.uri}`;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nconst validFixTypes = new Set<string>(['problem', 'suggestion', 'layout']);\r\nasync function validate(document: TextDocument, settings: TextDocumentSettings & { library: ESLintModule }, publishDiagnostics: boolean = true): Promise<void> {\r\n\tconst newOptions: CLIOptions = Object.assign(Object.create(null), settings.options);\r\n\tlet fixTypes: Set<string> | undefined = undefined;\r\n\tif (Array.isArray(newOptions.fixTypes) && newOptions.fixTypes.length > 0) {\r\n\t\tfixTypes = new Set();\r\n\t\tfor (const item of newOptions.fixTypes) {\r\n\t\t\tif (validFixTypes.has(item)) {\r\n\t\t\t\tfixTypes.add(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (fixTypes.size === 0) {\r\n\t\t\tfixTypes = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tconst content = document.getText();\r\n\tconst uri = document.uri;\r\n\tconst file = getESLintFilePath(document, settings);\r\n\r\n\tawait withESLintClass(async (eslintClass) => {\r\n\t\tcodeActions.delete(uri);\r\n\t\tconst reportResults: ESLintDocumentReport[] = await eslintClass.lintText(content, { filePath: file, warnIgnored: settings.onIgnoredFiles !== ESLintSeverity.off });\r\n\t\tRuleMetaData.capture(eslintClass, reportResults);\r\n\t\tconst diagnostics: Diagnostic[] = [];\r\n\t\tif (reportResults && Array.isArray(reportResults) && reportResults.length > 0) {\r\n\t\t\tconst docReport = reportResults[0];\r\n\t\t\tif (docReport.messages && Array.isArray(docReport.messages)) {\r\n\t\t\t\tdocReport.messages.forEach((problem) => {\r\n\t\t\t\t\tif (problem) {\r\n\t\t\t\t\t\tconst [diagnostic, override] = makeDiagnostic(settings, problem);\r\n\t\t\t\t\t\tif (!(override === RuleSeverity.off || (settings.quiet && diagnostic.severity === DiagnosticSeverity.Warning))) {\r\n\t\t\t\t\t\t\tdiagnostics.push(diagnostic);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (fixTypes !== undefined && problem.ruleId !== undefined && problem.fix !== undefined) {\r\n\t\t\t\t\t\t\tconst type = RuleMetaData.getType(problem.ruleId);\r\n\t\t\t\t\t\t\tif (type !== undefined && fixTypes.has(type)) {\r\n\t\t\t\t\t\t\t\trecordCodeAction(document, diagnostic, problem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trecordCodeAction(document, diagnostic, problem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (publishDiagnostics) {\r\n\t\t\tconnection.sendDiagnostics({ uri, diagnostics });\r\n\t\t}\r\n\t}, settings);\r\n}\r\n\r\nfunction withESLintClass<T>(func: (eslintClass: ESLintClass) => T, settings: TextDocumentSettings & { library: ESLintModule }, options?: ESLintClassOptions | CLIOptions): T {\r\n\tconst newOptions: ESLintClassOptions | CLIOptions = options === undefined\r\n\t\t? Object.assign(Object.create(null), settings.options)\r\n\t\t: Object.assign(Object.create(null), settings.options, options);\r\n\r\n\tconst cwd = process.cwd();\r\n\ttry {\r\n\t\tif (settings.workingDirectory) {\r\n\t\t\tnewOptions.cwd = normalizeDriveLetter(settings.workingDirectory.directory);\r\n\t\t\tif (settings.workingDirectory['!cwd'] !== true && fs.existsSync(settings.workingDirectory.directory)) {\r\n\t\t\t\tprocess.chdir(settings.workingDirectory.directory);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst eslintClass = ESLintClass.newESLintClass(settings.library, newOptions, settings.useESLintClass);\r\n\t\treturn func(eslintClass);\r\n\t} finally {\r\n\t\tif (cwd !== process.cwd()) {\r\n\t\t\tprocess.chdir(cwd);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst noConfigReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\nfunction isNoConfigFoundError(error: any): boolean {\r\n\tconst candidate = error as ESLintError;\r\n\treturn candidate.messageTemplate === 'no-config-found' || candidate.message === 'No ESLint configuration found.';\r\n}\r\n\r\nfunction tryHandleNoConfig(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\tif (!isNoConfigFoundError(error)) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (!noConfigReported.has(document.uri)) {\r\n\t\tconnection.sendRequest(\r\n\t\t\tNoConfigRequest.type,\r\n\t\t\t{\r\n\t\t\t\tmessage: getMessage(error, document),\r\n\t\t\t\tdocument: {\r\n\t\t\t\t\turi: document.uri\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t).then(undefined, () => { });\r\n\t\tnoConfigReported.set(document.uri, library);\r\n\t}\r\n\treturn Status.warn;\r\n}\r\n\r\nconst configErrorReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\nfunction tryHandleConfigError(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\tif (!error.message) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tfunction handleFileName(filename: string): Status {\r\n\t\tif (!configErrorReported.has(filename)) {\r\n\t\t\tconnection.console.error(getMessage(error, document));\r\n\t\t\tif (!documents.get(URI.file(filename).toString())) {\r\n\t\t\t\tconnection.window.showInformationMessage(getMessage(error, document));\r\n\t\t\t}\r\n\t\t\tconfigErrorReported.set(filename, library);\r\n\t\t}\r\n\t\treturn Status.warn;\r\n\t}\r\n\r\n\tlet matches = /Cannot read config file:\\s+(.*)\\nError:\\s+(.*)/.exec(error.message);\r\n\tif (matches && matches.length === 3) {\r\n\t\treturn handleFileName(matches[1]);\r\n\t}\r\n\r\n\tmatches = /(.*):\\n\\s*Configuration for rule \\\"(.*)\\\" is /.exec(error.message);\r\n\tif (matches && matches.length === 3) {\r\n\t\treturn handleFileName(matches[1]);\r\n\t}\r\n\r\n\tmatches = /Cannot find module '([^']*)'\\nReferenced from:\\s+(.*)/.exec(error.message);\r\n\tif (matches && matches.length === 3) {\r\n\t\treturn handleFileName(matches[2]);\r\n\t}\r\n\r\n\treturn undefined;\r\n}\r\n\r\nconst missingModuleReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\nfunction tryHandleMissingModule(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\tif (!error.message) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tfunction handleMissingModule(plugin: string, module: string, error: ESLintError): Status {\r\n\t\tif (!missingModuleReported.has(plugin)) {\r\n\t\t\tconst fsPath = getFilePath(document);\r\n\t\t\tmissingModuleReported.set(plugin, library);\r\n\t\t\tif (error.messageTemplate === 'plugin-missing') {\r\n\t\t\t\tconnection.console.error([\r\n\t\t\t\t\t'',\r\n\t\t\t\t\t`${error.message.toString()}`,\r\n\t\t\t\t\t`Happened while validating ${fsPath ? fsPath : document.uri}`,\r\n\t\t\t\t\t`This can happen for a couple of reasons:`,\r\n\t\t\t\t\t`1. The plugin name is spelled incorrectly in an ESLint configuration file (e.g. .eslintrc).`,\r\n\t\t\t\t\t`2. If ESLint is installed globally, then make sure ${module} is installed globally as well.`,\r\n\t\t\t\t\t`3. If ESLint is installed locally, then ${module} isn't installed correctly.`,\r\n\t\t\t\t\t'',\r\n\t\t\t\t\t`Consider running eslint --debug ${fsPath ? fsPath : document.uri} from a terminal to obtain a trace about the configuration files used.`\r\n\t\t\t\t].join('\\n'));\r\n\t\t\t} else {\r\n\t\t\t\tconnection.console.error([\r\n\t\t\t\t\t`${error.message.toString()}`,\r\n\t\t\t\t\t`Happened while validating ${fsPath ? fsPath : document.uri}`\r\n\t\t\t\t].join('\\n'));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Status.warn;\r\n\t}\r\n\r\n\tconst matches = /Failed to load plugin (.*): Cannot find module (.*)/.exec(error.message);\r\n\tif (matches && matches.length === 3) {\r\n\t\treturn handleMissingModule(matches[1], matches[2], error);\r\n\t}\r\n\r\n\treturn undefined;\r\n}\r\n\r\nfunction showErrorMessage(error: any, document: TextDocument): Status {\r\n\tvoid connection.window.showErrorMessage(`ESLint: ${getMessage(error, document)}. Please see the 'ESLint' output channel for details.`, { title: 'Open Output', id: 1}).then((value) => {\r\n\t\tif (value !== undefined && value.id === 1) {\r\n\t\t\tconnection.sendNotification(ShowOutputChannel.type);\r\n\t\t}\r\n\t});\r\n\tif (Is.string(error.stack)) {\r\n\t\tconnection.console.error('ESLint stack trace:');\r\n\t\tconnection.console.error(error.stack);\r\n\t}\r\n\treturn Status.error;\r\n}\r\n\r\nmessageQueue.registerNotification(DidChangeWatchedFilesNotification.type, async (params) => {\r\n\t// A .eslintrc has change. No smartness here.\r\n\t// Simply revalidate all file.\r\n\tRuleMetaData.clear();\r\n\tnoConfigReported.clear();\r\n\tmissingModuleReported.clear();\r\n\tdocument2Settings.clear(); // config files can change plugins and parser.\r\n\truleSeverityCache.clear();\r\n\tsaveRuleConfigCache.clear();\r\n\r\n\tawait Promise.all(params.changes.map(async (change) => {\r\n\t\tconst fsPath = getFilePath(change.uri);\r\n\t\tif (fsPath === undefined || fsPath.length === 0 || isUNC(fsPath)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst dirname = path.dirname(fsPath);\r\n\t\tif (dirname) {\r\n\t\t\tconst library = configErrorReported.get(fsPath);\r\n\t\t\tif (library !== undefined) {\r\n\t\t\t\tconst eslintClass = ESLintClass.newESLintClass(library, {}, false);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait eslintClass.lintText('', { filePath: path.join(dirname, '___test___.js') });\r\n\t\t\t\t\tconfigErrorReported.delete(fsPath);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}));\r\n\tvalidateMany(documents.all());\r\n});\r\n\r\nclass Fixes {\r\n\tconstructor(private edits: Map<string, Problem>) {\r\n\t}\r\n\r\n\tpublic static overlaps(a: FixableProblem | undefined, b: FixableProblem): boolean {\r\n\t\treturn a !== undefined && a.edit.range[1] > b.edit.range[0];\r\n\t}\r\n\r\n\tpublic static sameRange(a: FixableProblem, b: FixableProblem): boolean {\r\n\t\treturn a.edit.range[0] === b.edit.range[0] && a.edit.range[1] === b.edit.range[1];\r\n\t}\r\n\r\n\tpublic isEmpty(): boolean {\r\n\t\treturn this.edits.size === 0;\r\n\t}\r\n\r\n\tpublic getDocumentVersion(): number {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\tthrow new Error('No edits recorded.');\r\n\t\t}\r\n\t\treturn this.edits.values().next().value.documentVersion;\r\n\t}\r\n\r\n\tpublic getScoped(diagnostics: Diagnostic[]): Problem[] {\r\n\t\tconst result: Problem[] = [];\r\n\t\tfor (const diagnostic of diagnostics) {\r\n\t\t\tconst key = computeKey(diagnostic);\r\n\t\t\tconst editInfo = this.edits.get(key);\r\n\t\t\tif (editInfo) {\r\n\t\t\t\tresult.push(editInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic getAllSorted(): FixableProblem[] {\r\n\t\tconst result: FixableProblem[] = [];\r\n\t\tfor (const value of this.edits.values()) {\r\n\t\t\tif (Problem.isFixable(value)) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.sort((a, b) => {\r\n\t\t\tconst d0 = a.edit.range[0] - b.edit.range[0];\r\n\t\t\tif (d0 !== 0) {\r\n\t\t\t\treturn d0;\r\n\t\t\t}\r\n\t\t\t// Both edits have now the same start offset.\r\n\r\n\t\t\t// Length of a and length of b\r\n\t\t\tconst al = a.edit.range[1] - a.edit.range[0];\r\n\t\t\tconst bl = b.edit.range[1] - b.edit.range[0];\r\n\t\t\t// Both has the same start offset and length.\r\n\t\t\tif (al === bl) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (al === 0) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (bl === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn al - bl;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getApplicable(): FixableProblem[] {\r\n\t\tconst sorted = this.getAllSorted();\r\n\t\tif (sorted.length <= 1) {\r\n\t\t\treturn sorted;\r\n\t\t}\r\n\t\tconst result: FixableProblem[] = [];\r\n\t\tlet last: FixableProblem = sorted[0];\r\n\t\tresult.push(last);\r\n\t\tfor (let i = 1; i < sorted.length; i++) {\r\n\t\t\tlet current = sorted[i];\r\n\t\t\tif (!Fixes.overlaps(last, current) && !Fixes.sameRange(last, current)) {\r\n\t\t\t\tresult.push(current);\r\n\t\t\t\tlast = current;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\ninterface RuleCodeActions {\r\n\tfixes: CodeAction[];\r\n\tsuggestions: CodeAction[];\r\n\tdisable?: CodeAction;\r\n\tfixAll?: CodeAction;\r\n\tdisableFile?: CodeAction;\r\n\tshowDocumentation?: CodeAction;\r\n}\r\n\r\nclass CodeActionResult {\r\n\tprivate _actions: Map<string, RuleCodeActions>;\r\n\tprivate _fixAll: CodeAction[] | undefined;\r\n\r\n\tpublic constructor() {\r\n\t\tthis._actions = new Map();\r\n\t}\r\n\r\n\tpublic get(ruleId: string): RuleCodeActions {\r\n\t\tlet result: RuleCodeActions | undefined = this._actions.get(ruleId);\r\n\t\tif (result === undefined) {\r\n\t\t\tresult = { fixes: [], suggestions: [] };\r\n\t\t\tthis._actions.set(ruleId, result);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic get fixAll() {\r\n\t\tif (this._fixAll === undefined) {\r\n\t\t\tthis._fixAll = [];\r\n\t\t}\r\n\t\treturn this._fixAll;\r\n\t}\r\n\r\n\tpublic all(): CodeAction[] {\r\n\t\tconst result: CodeAction[] = [];\r\n\t\tfor (const actions of this._actions.values()) {\r\n\t\t\tresult.push(...actions.fixes);\r\n\t\t\tresult.push(...actions.suggestions);\r\n\t\t\tif (actions.disable) {\r\n\t\t\t\tresult.push(actions.disable);\r\n\t\t\t}\r\n\t\t\tif (actions.fixAll) {\r\n\t\t\t\tresult.push(actions.fixAll);\r\n\t\t\t}\r\n\t\t\tif (actions.disableFile) {\r\n\t\t\t\tresult.push(actions.disableFile);\r\n\t\t\t}\r\n\t\t\tif (actions.showDocumentation) {\r\n\t\t\t\tresult.push(actions.showDocumentation);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._fixAll !== undefined) {\r\n\t\t\tresult.push(...this._fixAll);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic get length(): number {\r\n\t\tlet result: number = 0;\r\n\t\tfor (const actions of this._actions.values()) {\r\n\t\t\tresult += actions.fixes.length;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nclass Changes {\r\n\r\n\tprivate readonly values: Map<string, WorkspaceChange>;\r\n\tprivate uri: string | undefined;\r\n\tprivate version: number | undefined;\r\n\r\n\tconstructor() {\r\n\t\tthis.values = new Map();\r\n\t\tthis.uri = undefined;\r\n\t\tthis.version = undefined;\r\n\t}\r\n\r\n\tpublic clear(textDocument?: TextDocument): void {\r\n\t\tif (textDocument === undefined) {\r\n\t\t\tthis.uri = undefined;\r\n\t\t\tthis.version = undefined;\r\n\t\t} else {\r\n\t\t\tthis.uri = textDocument.uri;\r\n\t\t\tthis.version = textDocument.version;\r\n\t\t}\r\n\t\tthis.values.clear();\r\n\t}\r\n\r\n\tpublic isUsable(uri: string, version: number): boolean {\r\n\t\treturn this.uri === uri && this.version === version;\r\n\t}\r\n\r\n\tpublic set(key: string, change: WorkspaceChange): void {\r\n\t\tthis.values.set(key, change);\r\n\t}\r\n\r\n\tpublic get(key: string): WorkspaceChange | undefined {\r\n\t\treturn this.values.get(key);\r\n\t}\r\n}\r\n\r\ninterface CommandParams extends VersionedTextDocumentIdentifier {\r\n\tversion: number;\r\n\truleId?: string;\r\n\tsequence?: number;\r\n}\r\n\r\nnamespace CommandParams {\r\n\texport function create(textDocument: TextDocument, ruleId?: string, sequence?: number): CommandParams {\r\n\t\treturn { uri: textDocument.uri, version: textDocument.version, ruleId, sequence };\r\n\t}\r\n\texport function hasRuleId(value: CommandParams): value is CommandParams & { ruleId: string } {\r\n\t\treturn value.ruleId !== undefined;\r\n\t}\r\n}\r\n\r\nconst changes = new Changes();\r\nconst ESLintSourceFixAll: string = `${CodeActionKind.SourceFixAll}.eslint`;\r\n\r\nmessageQueue.registerRequest(CodeActionRequest.type, (params) => {\r\n\tconst result: CodeActionResult = new CodeActionResult();\r\n\tconst uri = params.textDocument.uri;\r\n\tconst textDocument = documents.get(uri);\r\n\tif (textDocument === undefined) {\r\n\t\tchanges.clear(textDocument);\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tfunction createCodeAction(title: string, kind: string, commandId: string, arg: CommandParams, diagnostic?: Diagnostic): CodeAction {\r\n\t\tconst command = Command.create(title, commandId, arg);\r\n\t\tconst action = CodeAction.create(\r\n\t\t\ttitle,\r\n\t\t\tcommand,\r\n\t\t\tkind\r\n\t\t);\r\n\t\tif (diagnostic !== undefined) {\r\n\t\t\taction.diagnostics = [diagnostic];\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tfunction createDisableLineTextEdit(editInfo: Problem, indentationText: string): TextEdit {\r\n\t\treturn TextEdit.insert(Position.create(editInfo.line - 1, 0), `${indentationText}${getLineComment(textDocument!.languageId)} eslint-disable-next-line ${editInfo.ruleId}${EOL}`);\r\n\t}\r\n\r\n\tfunction createDisableSameLineTextEdit(editInfo: Problem): TextEdit {\r\n\t\t// Todo@dbaeumer Use uinteger.MAX_VALUE instead.\r\n\t\treturn TextEdit.insert(Position.create(editInfo.line - 1, 2147483647), ` ${getLineComment(textDocument!.languageId)} eslint-disable-line ${editInfo.ruleId}`);\r\n\t}\r\n\r\n\tfunction createDisableFileTextEdit(editInfo: Problem): TextEdit {\r\n\t\t// If firts line contains a shebang, insert on the next line instead.\r\n\t\tconst shebang = textDocument?.getText(Range.create(Position.create(0, 0), Position.create(0, 2)));\r\n\t\tconst line = shebang === '#!' ? 1 : 0;\r\n\t\tconst block = getBlockComment(textDocument!.languageId);\r\n\t\treturn TextEdit.insert(Position.create(line, 0), `${block[0]} eslint-disable ${editInfo.ruleId} ${block[1]}${EOL}`);\r\n\t}\r\n\r\n\tfunction getLastEdit(array: FixableProblem[]): FixableProblem | undefined {\r\n\t\tconst length = array.length;\r\n\t\tif (length === 0) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn array[length - 1];\r\n\t}\r\n\r\n\treturn resolveSettings(textDocument).then(async (settings): Promise<CodeAction[]> => {\r\n\t\t// The file is not validated at all or we couldn't load an eslint library for it.\r\n\t\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\treturn result.all();\r\n\t\t}\r\n\r\n\t\tconst problems = codeActions.get(uri);\r\n\t\t// We validate on type and have no problems ==> nothing to fix.\r\n\t\tif (problems === undefined && settings.run === 'onType') {\r\n\t\t\treturn result.all();\r\n\t\t}\r\n\r\n\t\tconst only: string | undefined = params.context.only !== undefined && params.context.only.length > 0 ? params.context.only[0] : undefined;\r\n\t\tconst isSource = only === CodeActionKind.Source;\r\n\t\tconst isSourceFixAll = (only === ESLintSourceFixAll || only === CodeActionKind.SourceFixAll);\r\n\t\tif (isSourceFixAll || isSource) {\r\n\t\t\tif (isSourceFixAll && settings.codeActionOnSave.enable) {\r\n\t\t\t\tconst textDocumentIdentifer: VersionedTextDocumentIdentifier = { uri: textDocument.uri, version: textDocument.version };\r\n\t\t\t\tconst edits = await computeAllFixes(textDocumentIdentifer, AllFixesMode.onSave);\r\n\t\t\t\tif (edits !== undefined) {\r\n\t\t\t\t\tresult.fixAll.push(CodeAction.create(\r\n\t\t\t\t\t\t`Fix all ESLint auto-fixable problems`,\r\n\t\t\t\t\t\t{ documentChanges: [ TextDocumentEdit.create(textDocumentIdentifer, edits )]},\r\n\t\t\t\t\t\tESLintSourceFixAll\r\n\t\t\t\t\t));\r\n\t\t\t\t}\r\n\t\t\t} else if (isSource) {\r\n\t\t\t\tresult.fixAll.push(createCodeAction(\r\n\t\t\t\t\t`Fix all ESLint auto-fixable problems`,\r\n\t\t\t\t\tCodeActionKind.Source,\r\n\t\t\t\t\tCommandIds.applyAllFixes,\r\n\t\t\t\t\tCommandParams.create(textDocument)\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t\treturn result.all();\r\n\t\t}\r\n\r\n\t\tif (problems === undefined) {\r\n\t\t\treturn result.all();\r\n\t\t}\r\n\r\n\t\tconst fixes = new Fixes(problems);\r\n\t\tif (fixes.isEmpty()) {\r\n\t\t\treturn result.all();\r\n\t\t}\r\n\r\n\t\tlet documentVersion: number = -1;\r\n\t\tconst allFixableRuleIds: string[] = [];\r\n\t\tconst kind: CodeActionKind = only ?? CodeActionKind.QuickFix;\r\n\r\n\t\tfor (const editInfo of fixes.getScoped(params.context.diagnostics)) {\r\n\t\t\tdocumentVersion = editInfo.documentVersion;\r\n\t\t\tconst ruleId = editInfo.ruleId;\r\n\t\t\tallFixableRuleIds.push(ruleId);\r\n\r\n\t\t\tif (Problem.isFixable(editInfo)) {\r\n\t\t\t\tconst workspaceChange = new WorkspaceChange();\r\n\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(FixableProblem.createTextEdit(textDocument, editInfo));\r\n\t\t\t\tchanges.set(`${CommandIds.applySingleFix}:${ruleId}`, workspaceChange);\r\n\t\t\t\tconst action = createCodeAction(\r\n\t\t\t\t\teditInfo.label,\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tCommandIds.applySingleFix,\r\n\t\t\t\t\tCommandParams.create(textDocument, ruleId),\r\n\t\t\t\t\teditInfo.diagnostic\r\n\t\t\t\t);\r\n\t\t\t\taction.isPreferred = true;\r\n\t\t\t\tresult.get(ruleId).fixes.push(action);\r\n\t\t\t}\r\n\t\t\tif (Problem.hasSuggestions(editInfo)) {\r\n\t\t\t\teditInfo.suggestions.forEach((suggestion, suggestionSequence) => {\r\n\t\t\t\t\tconst workspaceChange = new WorkspaceChange();\r\n\t\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(SuggestionsProblem.createTextEdit(textDocument, suggestion));\r\n\t\t\t\t\tchanges.set(`${CommandIds.applySuggestion}:${ruleId}:${suggestionSequence}`, workspaceChange);\r\n\t\t\t\t\tconst action = createCodeAction(\r\n\t\t\t\t\t\t`${suggestion.desc} (${editInfo.ruleId})`,\r\n\t\t\t\t\t\tCodeActionKind.QuickFix,\r\n\t\t\t\t\t\tCommandIds.applySuggestion,\r\n\t\t\t\t\t\tCommandParams.create(textDocument, ruleId, suggestionSequence),\r\n\t\t\t\t\t\teditInfo.diagnostic\r\n\t\t\t\t\t);\r\n\t\t\t\t\tresult.get(ruleId).suggestions.push(action);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (settings.codeAction.disableRuleComment.enable) {\r\n\t\t\t\tlet workspaceChange = new WorkspaceChange();\r\n\t\t\t\tif (settings.codeAction.disableRuleComment.location === 'sameLine') {\r\n\t\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableSameLineTextEdit(editInfo));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Todo@dbaeumer Use uinteger.MAX_VALUE instead.\r\n\t\t\t\t\tconst lineText = textDocument.getText(Range.create(Position.create(editInfo.line - 1, 0), Position.create(editInfo.line - 1, 2147483647)));\r\n\t\t\t\t\tconst matches = /^([ \\t]*)/.exec(lineText);\r\n\t\t\t\t\tconst indentationText = matches !== null && matches.length > 0 ? matches[1] : '';\r\n\t\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableLineTextEdit(editInfo, indentationText));\r\n\t\t\t\t}\r\n\t\t\t\tchanges.set(`${CommandIds.applyDisableLine}:${ruleId}`, workspaceChange);\r\n\t\t\t\tresult.get(ruleId).disable = createCodeAction(\r\n\t\t\t\t\t`Disable ${ruleId} for this line`,\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tCommandIds.applyDisableLine,\r\n\t\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (result.get(ruleId).disableFile === undefined) {\r\n\t\t\t\t\tworkspaceChange = new WorkspaceChange();\r\n\t\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableFileTextEdit(editInfo));\r\n\t\t\t\t\tchanges.set(`${CommandIds.applyDisableFile}:${ruleId}`, workspaceChange);\r\n\t\t\t\t\tresult.get(ruleId).disableFile = createCodeAction(\r\n\t\t\t\t\t\t`Disable ${ruleId} for the entire file`,\r\n\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\tCommandIds.applyDisableFile,\r\n\t\t\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (settings.codeAction.showDocumentation.enable && result.get(ruleId).showDocumentation === undefined) {\r\n\t\t\t\tif (RuleMetaData.hasRuleId(ruleId)) {\r\n\t\t\t\t\tresult.get(ruleId).showDocumentation = createCodeAction(\r\n\t\t\t\t\t\t`Show documentation for ${ruleId}`,\r\n\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\tCommandIds.openRuleDoc,\r\n\t\t\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (result.length > 0) {\r\n\t\t\tconst sameProblems: Map<string, FixableProblem[]> = new Map<string, FixableProblem[]>(allFixableRuleIds.map<[string, FixableProblem[]]>(s => [s, []]));\r\n\r\n\t\t\tfor (const editInfo of fixes.getAllSorted()) {\r\n\t\t\t\tif (documentVersion === -1) {\r\n\t\t\t\t\tdocumentVersion = editInfo.documentVersion;\r\n\t\t\t\t}\r\n\t\t\t\tif (sameProblems.has(editInfo.ruleId)) {\r\n\t\t\t\t\tconst same = sameProblems.get(editInfo.ruleId)!;\r\n\t\t\t\t\tif (!Fixes.overlaps(getLastEdit(same), editInfo)) {\r\n\t\t\t\t\t\tsame.push(editInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsameProblems.forEach((same, ruleId) => {\r\n\t\t\t\tif (same.length > 1) {\r\n\t\t\t\t\tconst sameFixes: WorkspaceChange = new WorkspaceChange();\r\n\t\t\t\t\tconst sameTextChange = sameFixes.getTextEditChange({ uri, version: documentVersion });\r\n\t\t\t\t\tsame.map(fix => FixableProblem.createTextEdit(textDocument, fix)).forEach(edit => sameTextChange.add(edit));\r\n\t\t\t\t\tchanges.set(CommandIds.applySameFixes, sameFixes);\r\n\t\t\t\t\tresult.get(ruleId).fixAll = createCodeAction(\r\n\t\t\t\t\t\t`Fix all ${ruleId} problems`,\r\n\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\tCommandIds.applySameFixes,\r\n\t\t\t\t\t\tCommandParams.create(textDocument)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tresult.fixAll.push(createCodeAction(\r\n\t\t\t\t`Fix all auto-fixable problems`,\r\n\t\t\t\tkind,\r\n\t\t\t\tCommandIds.applyAllFixes,\r\n\t\t\t\tCommandParams.create(textDocument)\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn result.all();\r\n\t});\r\n}, (params): number | undefined => {\r\n\tconst document = documents.get(params.textDocument.uri);\r\n\treturn document !== undefined ? document.version : undefined;\r\n});\r\n\r\nenum AllFixesMode {\r\n\tonSave = 'onsave',\r\n\tformat = 'format',\r\n\tcommand = 'command'\r\n}\r\n\r\nasync function computeAllFixes(identifier: VersionedTextDocumentIdentifier, mode: AllFixesMode): Promise<TextEdit[] | undefined> {\r\n\tconst uri = identifier.uri;\r\n\tconst textDocument = documents.get(uri)!;\r\n\tif (textDocument === undefined || identifier.version !== textDocument.version) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tconst settings = await resolveSettings(textDocument);\r\n\r\n\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings) || (mode === AllFixesMode.format && !settings.format)) {\r\n\t\treturn [];\r\n\t}\r\n\tconst filePath = getFilePath(textDocument);\r\n\tconst problems = codeActions.get(uri);\r\n\tconst originalContent = textDocument.getText();\r\n\tlet start = Date.now();\r\n\t// Only use known fixes when running in onSave mode. See https://github.com/microsoft/vscode-eslint/issues/871\r\n\t// for details\r\n\tif (mode === AllFixesMode.onSave && settings.codeActionOnSave.mode === CodeActionsOnSaveMode.problems) {\r\n\t\tconst result = problems !== undefined && problems.size > 0\r\n\t\t\t? new Fixes(problems).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix))\r\n\t\t\t: [];\r\n\t\tconnection.tracer.log(`Computing all fixes took: ${Date.now() - start} ms.`);\r\n\t\treturn result;\r\n\t} else {\r\n\t\tconst saveConfig = filePath !== undefined && mode === AllFixesMode.onSave ? await getSaveRuleConfig(filePath, settings) : undefined;\r\n\t\tconst offRules = saveConfig?.offRules;\r\n\t\tconst onRules = saveConfig?.onRules;\r\n\t\tlet overrideConfig: Required<ConfigData> | undefined;\r\n\t\tif (offRules !== undefined) {\r\n\t\t\toverrideConfig = { rules: Object.create(null) };\r\n\t\t\tfor (const ruleId of offRules) {\r\n\t\t\t\toverrideConfig.rules[ruleId] = 'off';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn withESLintClass(async (eslintClass) => {\r\n\t\t\tconst result: TextEdit[] = [];\r\n\t\t\tlet fixes: TextEdit[] | undefined;\r\n\t\t\tif (problems !== undefined && problems.size > 0) {\r\n\t\t\t\t// We have override rules that turn rules off. Filter the fixes for these rules.\r\n\t\t\t\tif (offRules !== undefined) {\r\n\t\t\t\t\tconst filtered: typeof problems = new Map();\r\n\t\t\t\t\tfor (const [key, problem] of problems) {\r\n\t\t\t\t\t\tif (onRules?.has(problem.ruleId)) {\r\n\t\t\t\t\t\t\tfiltered.set(key, problem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfixes = filtered.size > 0 ? new Fixes(filtered).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix)) : undefined;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixes = new Fixes(problems).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst content = fixes !== undefined\r\n\t\t\t\t? TextDocument.applyEdits(textDocument, fixes)\r\n\t\t\t\t: originalContent;\r\n\t\t\tconst reportResults = await eslintClass.lintText(content, { filePath });\r\n\t\t\tconnection.tracer.log(`Computing all fixes took: ${Date.now() - start} ms.`);\r\n\t\t\tif (Array.isArray(reportResults) && reportResults.length === 1 && reportResults[0].output !== undefined) {\r\n\t\t\t\tconst fixedContent = reportResults[0].output;\r\n\t\t\t\tstart = Date.now();\r\n\t\t\t\tconst diffs = stringDiff(originalContent, fixedContent, false);\r\n\t\t\t\tconnection.tracer.log(`Computing minimal edits took: ${Date.now() - start} ms.`);\r\n\t\t\t\tfor (const diff of diffs) {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\trange: {\r\n\t\t\t\t\t\t\tstart: textDocument.positionAt(diff.originalStart),\r\n\t\t\t\t\t\t\tend: textDocument.positionAt(diff.originalStart + diff.originalLength)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnewText: fixedContent.substr(diff.modifiedStart, diff.modifiedLength)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (fixes !== undefined) {\r\n\t\t\t\tresult.push(...fixes);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}, settings, overrideConfig !== undefined ? { fix: true, overrideConfig } : { fix: true });\r\n\t}\r\n}\r\n\r\nmessageQueue.registerRequest(ExecuteCommandRequest.type, async (params) => {\r\n\tlet workspaceChange: WorkspaceChange | undefined;\r\n\tconst commandParams: CommandParams = params.arguments![0];\r\n\tif (params.command === CommandIds.applyAllFixes) {\r\n\t\tconst edits = await computeAllFixes(commandParams, AllFixesMode.command);\r\n\t\tif (edits !== undefined) {\r\n\t\t\tworkspaceChange = new WorkspaceChange();\r\n\t\t\tconst textChange = workspaceChange.getTextEditChange(commandParams);\r\n\t\t\tedits.forEach(edit => textChange.add(edit));\r\n\t\t}\r\n\t} else {\r\n\t\tif ([CommandIds.applySingleFix, CommandIds.applyDisableLine, CommandIds.applyDisableFile].indexOf(params.command) !== -1) {\r\n\t\t\tworkspaceChange = changes.get(`${params.command}:${commandParams.ruleId}`);\r\n\t\t} else if ([CommandIds.applySuggestion].indexOf(params.command) !== -1) {\r\n\t\t\tworkspaceChange = changes.get(`${params.command}:${commandParams.ruleId}:${commandParams.sequence}`);\r\n\t\t} else if (params.command === CommandIds.openRuleDoc && CommandParams.hasRuleId(commandParams)) {\r\n\t\t\tconst url = RuleMetaData.getUrl(commandParams.ruleId);\r\n\t\t\tif (url) {\r\n\t\t\t\tvoid connection.sendRequest(OpenESLintDocRequest.type, { url });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tworkspaceChange = changes.get(params.command);\r\n\t\t}\r\n\t}\r\n\r\n\tif (workspaceChange === undefined) {\r\n\t\treturn {};\r\n\t}\r\n\treturn connection.workspace.applyEdit(workspaceChange.edit).then((response) => {\r\n\t\tif (!response.applied) {\r\n\t\t\tconnection.console.error(`Failed to apply command: ${params.command}`);\r\n\t\t}\r\n\t\treturn {};\r\n\t}, () => {\r\n\t\tconnection.console.error(`Failed to apply command: ${params.command}`);\r\n\t});\r\n}, (params): number | undefined => {\r\n\tconst commandParam: CommandParams = params.arguments![0];\r\n\tif (changes.isUsable(commandParam.uri, commandParam.version)) {\r\n\t\treturn commandParam.version;\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\n\r\nmessageQueue.registerRequest(DocumentFormattingRequest.type, (params) => {\r\n\tconst textDocument = documents.get(params.textDocument.uri);\r\n\tif (textDocument === undefined) {\r\n\t\treturn [];\r\n\t}\r\n\treturn computeAllFixes({ uri: textDocument.uri, version: textDocument.version }, AllFixesMode.format);\r\n}, (params) => {\r\n\tconst document = documents.get(params.textDocument.uri);\r\n\treturn document !== undefined ? document.version : undefined;\r\n});\r\nconnection.listen();\r\n"],"names":["original","modified","pretty","LcsDiff","StringDiffSequence","ComputeDiff","changes","constructor","source","getElements","this","characters","Int32Array","length","i","len","charCodeAt","DiffChange","originalStart","originalLength","modifiedStart","modifiedLength","getOriginalEnd","getModifiedEnd","Debug","condition","message","Error","MyArray","sourceArray","sourceIndex","destinationArray","destinationIndex","DiffChangeHelper","m_changes","m_originalStart","m_modifiedStart","m_originalCount","m_modifiedCount","MarkNextChange","push","AddOriginalElement","originalIndex","modifiedIndex","Math","min","AddModifiedElement","getChanges","getReverseChanges","reverse","originalSequence","modifiedSequence","continueProcessingPredicate","ContinueProcessingPredicate","originalStringElements","originalElementsOrHash","originalHasStrings","_getElements","modifiedStringElements","modifiedElementsOrHash","modifiedHasStrings","_hasStrings","_originalStringElements","_originalElementsOrHash","_modifiedStringElements","_modifiedElementsOrHash","m_forwardHistory","m_reverseHistory","sequence","elements","ElementsAreEqual","newIndex","OriginalElementsAreEqual","index1","index2","ModifiedElementsAreEqual","_ComputeDiff","originalEnd","modifiedEnd","quitEarlyArr","ComputeDiffRecursive","PrettifyChanges","quitEarly","Assert","midOriginalArr","midModifiedArr","result","ComputeRecursionPoint","midOriginal","midModified","leftChanges","rightChanges","ConcatenateChanges","WALKTRACE","diagonalForwardBase","diagonalForwardStart","diagonalForwardEnd","diagonalForwardOffset","diagonalReverseBase","diagonalReverseStart","diagonalReverseEnd","diagonalReverseOffset","forwardPoints","reversePoints","deltaIsEven","forwardChanges","reverseChanges","changeHelper","diagonalMin","diagonalMax","diagonalRelative","lastOriginalIndex","historyIndex","diagonal","originalStartPoint","modifiedStartPoint","lastForwardChange","max","maxDifferences","numDiagonals","numDifferences","furthestOriginalIndex","furthestModifiedIndex","ClipDiagonalBound","tempOriginalIndex","abs","matchLengthOfLongest","temp","Copy2","change","originalStop","modifiedStop","checkOriginal","checkModified","mergedChangeArr","ChangesOverlap","splice","prevChange","bestDelta","bestScore","_boundaryScore","delta","score","_OriginalIsBoundary","index","test","_OriginalRegionIsBoundary","_ModifiedIsBoundary","_ModifiedRegionIsBoundary","left","right","Array","Copy","diagonalBaseIndex","diffEven","Touch","None","First","AsOld","Last","AsNew","LinkedMap","_map","Map","_head","undefined","_tail","_size","_state","clear","isEmpty","value","has","key","get","touch","item","set","next","previous","addItemLast","addItemFirst","delete","remove","removeItem","shift","forEach","callbackfn","thisArg","state","current","bind","keys","map","iterator","Symbol","done","values","entries","toStringTag","trimOld","newSize","size","currentSize","toJSON","data","fromJSON","limit","ratio","super","_limit","_ratio","checkTrim","peek","round","Object","defineProperty","exports","ConnectionErrors","LogTraceNotification","SetTraceNotification","TraceFormat","Trace","ProgressType","createMessageConnection","NullLogger","ConnectionOptions","ConnectionStrategy","WriteableStreamMessageWriter","AbstractMessageWriter","MessageWriter","ReadableStreamMessageReader","AbstractMessageReader","MessageReader","CancellationToken","CancellationTokenSource","Emitter","Event","Disposable","LRUCache","ParameterStructures","NotificationType9","NotificationType8","NotificationType7","NotificationType6","NotificationType5","NotificationType4","NotificationType3","NotificationType2","NotificationType1","NotificationType0","NotificationType","ErrorCodes","ResponseError","RequestType9","RequestType8","RequestType7","RequestType6","RequestType5","RequestType4","RequestType3","RequestType2","RequestType1","RequestType0","RequestType","RAL","CancellationStrategy","CancellationSenderStrategy","CancellationReceiverStrategy","ConnectionError","messages_1","enumerable","linkedMap_1","disposable_1","events_1","cancellation_1","messageReader_1","messageWriter_1","connection_1","ral_1","default","Is","freeze","isCancellationRequested","onCancellationRequested","Cancelled","is","candidate","boolean","shortcutEvent","callback","context","handle","timer","setTimeout","dispose","MutableToken","_isCancelled","cancel","_emitter","fire","event","_token","CancelNotification","ProgressNotification","StarRequestHandler","ConnectionState","type","func","error","warn","info","log","fromString","string","Off","toLowerCase","Messages","Verbose","toString","JSON","Text","code","setPrototypeOf","prototype","cancelUndispatched","Message","createCancellationTokenSource","_","sendCancellation","conn","id","sendNotification","cleanup","receiver","sender","cancellationStrategy","connectionStrategy","messageReader","messageWriter","_logger","options","logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","version","starRequestHandler","requestHandlers","create","starNotificationHandler","notificationHandlers","progressHandlers","tracer","messageQueue","responsePromises","knownCanceledRequests","Set","requestTokens","trace","traceFormat","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","setImmediate","isRequestMessage","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","write","catch","replyError","params","stringify","logLSPMessage","traceReceivedRequest","element","requestHandler","handler","Date","now","tokenKey","String","cancellationSource","handlerResult","numberOfParams","InvalidParams","token","isArray","parameterStructures","byName","byPosition","promise","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","cancelId","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","toCancel","strategy","response","cancellationToken","add","queue","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","nullToUndefined","isNamedParam","computeSingleParam","auto","computeMessageParams","connection","args","messageParams","first","paramStart","paramEnd","slice","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","last","disposable","p","Promise","r","traceSendingRequest","e","MessageWriteError","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","end","listen","AlreadyListening","throwIfListening","inspect","console","verbose","_disposable","CallbackList","bucket","_callbacks","_contexts","foundCallbackWithDifferentContext","invoke","ret","callbacks","contexts","apply","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","_noop","onLastListenerRemove","call","array","stringArray","Number","every","elem","_a","_b","AbstractMessageBuffer","encoding","_encoding","_chunks","_totalLength","append","chunk","toAppend","byteLength","tryReadHeaders","chunkIndex","offset","chunkBytesRead","row","buffer","_read","headers","split","header","indexOf","substr","trim","tryReadBody","byteCount","emptyBuffer","asNative","allocNative","resultOffset","chunkPart","ResolvedMessageReaderOptions","onPartialMessage","partialMessageEmitter","fireError","asError","fireClose","firePartialMessage","fromOptions","charset","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","name","decoder","applicationJson","readable","messageBuffer","_partialMessageTimeout","nextMessageLength","messageToken","timeout","partialMessageTimer","onData","contentLength","parseInt","isNaN","body","setPartialMessageTimer","clearPartialMessageTimer","decode","msg","waitingTime","semaphore_1","ResolvedMessageWriterOptions","count","contentTypeEncoder","encoder","contentEncoder","writable","errorCount","writeSemaphore","Semaphore","lock","async","encode","doWrite","join","handleError","AbstractMessageSignature","ParseError","InvalidRequest","jsonrpcReservedErrorRangeStart","serverErrorStart","MessageReadError","ServerNotInitialized","UnknownErrorCode","jsonrpcReservedErrorRangeEnd","serverErrorEnd","kind","_parameterStructures","_ral","install","ral","capacity","_capacity","_active","_waiting","thunk","runNext","doRunNext","err","__createBinding","o","m","k","k2","__exportStar","hasOwnProperty","createServerSocketTransport","createClientSocketTransport","createServerPipeTransport","createClientPipeTransport","generateRandomPipeName","StreamMessageWriter","StreamMessageReader","SocketMessageWriter","SocketMessageReader","IPCMessageWriter","IPCMessageReader","ril_1","api_1","path","os","crypto_1","net_1","process","eventEmitter","on","off","send","socket","stream","asReadableStream","asWritableStream","destroy","readble","XDG_RUNTIME_DIR","env","safeIpcPathLengths","randomSuffix","randomBytes","platform","tmpdir","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createConnection","port","input","output","reader","read","addListener","isReadableStream","writer","isWritableStream","util_1","messageBuffer_1","MessageBuffer","Buffer","from","TextDecoder","allocUnsafe","ReadableStreamWrapper","onEnd","WritableStreamWrapper","_ril","parse","ms","clearTimeout","clearImmediate","setInterval","clearInterval","RIL","module","Proposed","LSPErrorCodes","createProtocolConnection","lspReservedErrorRangeStart","RequestFailed","ServerCancelled","ContentModified","RequestCancelled","lspReservedErrorRangeEnd","diag","typeh","DiagnosticServerCancellationData","DocumentDiagnosticReportKind","DocumentDiagnosticRequest","WorkspaceDiagnosticRequest","DiagnosticRefreshRequest","TypeHierarchyPrepareRequest","TypeHierarchySupertypesRequest","TypeHierarchySubtypesRequest","vscode_jsonrpc_1","ProtocolNotificationType","ProtocolNotificationType0","ProtocolRequestType","ProtocolRequestType0","RegistrationType","retriggerRequest","partialResult","CallHierarchyOutgoingCallsRequest","CallHierarchyIncomingCallsRequest","CallHierarchyPrepareRequest","ColorPresentationRequest","DocumentColorRequest","ConfigurationRequest","DeclarationRequest","WillDeleteFilesRequest","DidDeleteFilesNotification","DidRenameFilesNotification","WillRenameFilesRequest","DidCreateFilesNotification","WillCreateFilesRequest","FileOperationPatternKind","file","folder","FoldingRangeRequest","FoldingRangeKind","ImplementationRequest","DocumentLinkRequest","CodeLensRefreshRequest","CodeLensResolveRequest","CodeLensRequest","WorkspaceSymbolRequest","CodeActionResolveRequest","CodeActionRequest","DocumentSymbolRequest","DocumentHighlightRequest","ReferencesRequest","DefinitionRequest","SignatureHelpRequest","SignatureHelpTriggerKind","HoverRequest","CompletionResolveRequest","CompletionRequest","CompletionTriggerKind","PublishDiagnosticsNotification","WatchKind","FileChangeType","DidChangeWatchedFilesNotification","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","TextDocumentSaveReason","DidSaveTextDocumentNotification","DidCloseTextDocumentNotification","DidChangeTextDocumentNotification","TextDocumentContentChangeEvent","DidOpenTextDocumentNotification","TextDocumentSyncKind","TelemetryEventNotification","LogMessageNotification","ShowMessageRequest","ShowMessageNotification","MessageType","DidChangeConfigurationNotification","ExitNotification","ShutdownRequest","InitializedNotification","InitializeError","InitializeRequest","WorkDoneProgressOptions","TextDocumentRegistrationOptions","StaticRegistrationOptions","FailureHandlingKind","ResourceOperationKind","UnregistrationRequest","RegistrationRequest","DocumentSelector","DocumentFilter","MonikerRequest","MonikerKind","UniquenessLevel","LinkedEditingRangeRequest","ShowDocumentRequest","SemanticTokensRegistrationType","SemanticTokensRefreshRequest","SemanticTokensRangeRequest","SemanticTokensDeltaRequest","SemanticTokensRequest","TokenFormat","WorkDoneProgressCancelNotification","WorkDoneProgressCreateRequest","WorkDoneProgress","SelectionRangeRequest","DidChangeWorkspaceFoldersNotification","WorkspaceFoldersRequest","TypeDefinitionRequest","ApplyWorkspaceEditRequest","ExecuteCommandRequest","PrepareRenameRequest","RenameRequest","PrepareSupportDefaultBehavior","DocumentOnTypeFormattingRequest","DocumentRangeFormattingRequest","DocumentFormattingRequest","DocumentLinkResolveRequest","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","protocol_callHierarchy_1","protocol_semanticTokens_1","protocol_showDocument_1","protocol_linkedEditingRange_1","protocol_fileOperations_1","protocol_moniker_1","language","scheme","pattern","Create","Rename","Delete","Abort","Transactional","TextOnlyTransactional","Undo","hasId","documentSelector","objectLiteral","workDoneProgress","hasWorkDoneProgress","unknownProtocolVersion","Warning","Info","Log","Full","Incremental","isIncremental","text","range","rangeLength","isFull","Manual","AfterDelay","FocusOut","Created","Changed","Deleted","Change","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","ContentChange","Identifier","Relative","typedArray","check","node_1","TextDocument","__spreadArray","to","pack","arguments","ar","l","concat","FullTextDocument","uri","languageId","content","_uri","_languageId","_version","_content","_lineOffsets","configurable","getText","start","offsetAt","substring","update","_i","changes_1","getWellformedRange","startOffset","endOffset","startLine","line","endLine","lineOffsets","addedLineOffsets","computeLineOffsets","diff","getLineOffsets","positionAt","low","high","character","mid","floor","position","lineOffset","nextLineOffset","mergeSort","compare","leftIdx","rightIdx","isAtLineStart","textOffset","ch","getWellformedEdit","textEdit","newText","document","applyEdits","edits","lastModifiedOffset","spans","sortedEdits_1","a","b","integer","uinteger","Position","Range","Location","LocationLink","Color","ColorInformation","ColorPresentation","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","DiagnosticTag","CodeDescription","Diagnostic","Command","TextEdit","ChangeAnnotation","ChangeAnnotationIdentifier","AnnotatedTextEdit","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","MIN_VALUE","MAX_VALUE","one","two","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","numberRange","color","label","additionalTextEdits","startCharacter","endCharacter","location","Information","Hint","Unnecessary","Deprecated","href","severity","relatedInformation","codeDescription","title","command","replace","insert","del","needsConfirmation","description","annotation","annotationId","textDocument","OptionalVersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","documentChanges","TextDocumentIdentifier","VersionedTextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItemTag","InsertReplaceEdit","InsertTextMode","CompletionItemLabelDetails","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolTag","SymbolInformation","DocumentSymbol","CodeActionKind","CodeActionContext","CodeAction","CodeLens","FormattingOptions","DocumentLink","SelectionRange","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","TextEditChangeImpl","changeAnnotations","edit","assertChangeAnnotations","manage","all","ChangeAnnotations","annotations","_annotations","_counter","idOrAnnotation","nextId","WorkspaceChange","workspaceEdit","_this","_textEditChanges","_workspaceEdit","_changeAnnotations","textEditChange","initDocumentChanges","getTextEditChange","textDocumentEdit","initChanges","createFile","optionsOrAnnotation","operation","renameFile","deleteFile","PlainText","Markdown","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Operator","TypeParameter","asIs","adjustIndentation","detail","items","isIncomplete","fromPlainText","plainText","contents","documentation","parameters","Read","Write","Namespace","Package","Boolean","Key","Null","containerName","selectionRange","children","deprecated","tags","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","diagnostics","only","kindOrCommandOrEdit","checkKind","isPreferred","tabSize","insertSpaces","target","parent","resultId","EOL","lineCount","sortedEdits","isLineStart","charAt","ProposedFeatures","SemanticTokensBuilder","semanticTokens_1","proposed_diagnostic_1","__brand","languages","DiagnosticFeature","CallHierarchyFeature","vscode_languageserver_protocol_1","Base","onPrepare","attachWorkDoneProgress","onIncomingCalls","attachPartialResultProgress","onOutgoingCalls","ConfigurationFeature","getConfiguration","arg","_getConfiguration","section","FileOperationsFeature","onDidCreateFiles","onDidRenameFiles","onDidDeleteFiles","onWillCreateFiles","onWillRenameFiles","onWillDeleteFiles","LinkedEditingRangeFeature","onLinkedEditingRange","MonikerFeature","attachPartialResult","ProgressFeature","attachWorkDone","uuid_1","WorkDoneProgressReporterImpl","_connection","Instances","begin","percentage","cancellable","report","arg0","arg1","WorkDoneProgressServerReporterImpl","_source","NullProgressReporter","NullProgressServerReporter","ResultProgress","workDoneToken","_progressSupported","initialize","capabilities","window","progress","createWorkDoneProgress","generateUuid","ResultProgressReporterImpl","partialResultToken","refresh","onWorkspace","TypeHierarchyFeature","onSupertypes","onSubtypes","SemanticTokensDiff","SemanticTokensFeature","onDelta","onRange","computeDiff","startIndex","originalEndIndex","modifiedEndIndex","deleteCount","newData","_prevData","_id","_prevLine","_prevChar","_data","_dataLen","char","tokenType","tokenModifiers","pushLine","pushChar","previousResult","build","canBuildEdits","buildEdits","combineFeatures","combineLanguagesFeatures","combineWorkspaceFeatures","combineWindowFeatures","combineClientFeatures","combineTracerFeatures","combineTelemetryFeatures","combineConsoleFeatures","_LanguagesImpl","BulkUnregistration","BulkRegistration","ErrorMessageTracker","TextDocuments","UUID","progress_1","configuration_1","workspaceFolders_1","callHierarchy_1","showDocument_1","fileOperations_1","linkedEditingRange_1","moniker_1","proposed_typeHierarchy_1","null2Undefined","configuration","_documents","_configuration","_onDidChangeContent","_onDidOpen","_onDidClose","_onDidSave","_onWillSave","onWillSaveWaitUntil","_willSaveWaitUntil","__textDocumentSync","onDidOpenTextDocument","td","toFire","onDidChangeTextDocument","contentChanges","onDidCloseTextDocument","onWillSaveTextDocument","reason","onWillSaveTextDocumentWaitUntil","onDidSaveTextDocument","_messages","sendErrors","showErrorMessage","RemoteConsoleImpl","rawAttach","_rawConnection","attach","fillServerCapabilities","_capabilities","RemoteWindowImpl","ShowDocumentFeature","actions","showWarningMessage","showInformationMessage","BulkRegistrationImpl","_registrations","_registered","registerOptions","asRegistrationParams","registrations","BulkUnregistrationImpl","unregistrations","_unregistrations","unregistration","unregisterations","disposeSingle","_error","RemoteClientImpl","register","typeOrRegistrations","registerOptionsOrType","registerMany","registerSingle1","registerSingle2","isAttached","_result","unregisterSingle","registration","RemoteWorkspaceImpl","WorkspaceFoldersFeature","applyEdit","paramOrEdit","TracerImpl","_trace","TelemetryImpl","logEvent","LanguagesImpl","combine","telemetry","client","workspace","connectionFactory","watchDog","factories","remoteWindow","allRemotes","asPromise","thenable","resolved","shutdownHandler","initializeHandler","exitHandler","protocolConnection","onInitialize","onInitialized","onShutdown","onExit","onDidChangeConfiguration","onDidChangeWatchedFiles","sendDiagnostics","onHover","onCompletion","onCompletionResolve","onSignatureHelp","onDeclaration","onDefinition","onTypeDefinition","onImplementation","onReferences","onDocumentHighlight","onDocumentSymbol","onWorkspaceSymbol","onCodeAction","onCodeActionResolve","onCodeLens","onCodeLensResolve","onDocumentFormatting","onDocumentRangeFormatting","onDocumentOnTypeFormatting","onRenameRequest","onPrepareRename","onDocumentLinks","onDocumentLinkResolve","onDocumentColor","onColorPresentation","onFoldingRanges","onSelectionRanges","onExecuteCommand","remote","textDocumentSync","shutdownReceived","exit","showDocument","isUUID","v4","empty","ValueUUID","asHex","equals","other","V4UUID","_randomHex","_oneOf","_timeHighBits","random","_chars","_UUIDPattern","_notificationIsAutoRegistered","workspaceCapabilities","workspaceFolders","_onDidChangeWorkspaceFolders","changeNotifications","getWorkspaceFolders","_unregistration","resolveModulePath","FileSystem","resolveGlobalYarnPath","resolveGlobalNodePath","uriToFilePath","url","fs","child_process_1","isWindows","moduleName","nodePath","cwd","app","newEnv","existsSync","delimiter","cp","fork","execArgv","pid","c","s","npmCommand","shell","stdout","spawnSync","prefix","parsed","protocol","segments","decodeURIComponent","second","normalize","yarnCommand","results","stderr","lines","yarn","_isCaseSensitive","isCaseSensitive","__filename","toUpperCase","isParent","child","workspaceRoot","isAbsolute","Files","server_1","fm","exitTimer","_shutdownReceived","argName","runTimer","processId","kill","ex","argv","setupExitTimer","arg2","arg3","arg4","stdin","transport","commandLineMessage","inputStream","_createConnection","LIB","t","TypeError","n","h","lastIndexOf","relative","f","u","_makeLong","dirname","basename","extname","format","dir","root","base","ext","sep","win32","posix","d","URI","g","Utils","O","navigator","userAgent","__proto__","authority","query","fragment","isUri","fsPath","with","C","v","exec","x","A","revive","_formatted","external","_fsPath","_sep","$mid","y","encodeURIComponent","fromCharCode","w","match","P","j","U","joinPath","resolvePath","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","obj","prop","CommandIds","Status","StatusNotification","NoConfigRequest","NoESLintLibraryRequest","OpenESLintDocRequest","ProbeFailedRequest","ShowOutputChannel","ModeEnum","ModeItem","DirectoryItem","Validate","ESLintSeverity","CodeActionsOnSaveMode","RuleSeverity","TextDocumentSettings","RuleData","ESLintModule","ESLintClass","CLIEngine","RuleMetaData","nullOrUndefined","applySingleFix","applySuggestion","applySameFixes","applyAllFixes","applyDisableLine","applyDisableFile","openRuleDoc","mode","directory","hasLibrary","settings","library","hasMetaType","hasESLintClass","ESLint","hasCLIEngine","newESLintClass","newOptions","useESLintClass","ESLintClassEmulator","hasRule","getRules","cli","executeOnText","filePath","warnIgnored","isPathIgnored","getRulesMetaForResults","_results","rules","rule","meta","getConfigForFile","handled","ruleId2Meta","capture","eslint","reports","rulesMetaData","isCLIEngine","toHandle","filter","docs","getUrl","ruleId","getType","hasRuleId","ruleSeverityCache","asteriskMatches","matcher","startsWith","RegExp","saveRuleConfigCache","isOff","matchers","Problem","FixableProblem","SuggestionsProblem","computeKey","diagnostic","hash","crypto","createHash","digest","isFixable","problem","hasSuggestions","suggestions","createTextEdit","editInfo","suggestion","fix","codeActions","recordCodeAction","documentVersion","adjustSeverityForOverride","severityOverride","downgrade","convertSeverityToDiagnostic","upgrade","isUNC","pos","normalizePath","getFilePath","documentOrUri","getUri","realpath","realpathSync","native","getFileSystemPath","exitCalled","nodeExit","stack","documents","_globalPaths","cache","npm","pnpm","execSync","languageId2Config","lineComment","blockComment","getLineComment","languageId2ParserRegExp","typescript","babelESLint","languageId2ParserOptions","regExps","parsers","parserRegExps","languageId2PluginName","defaultLanguageIds","path2Library","document2Settings","projectFolderIndicators","getESLintFilePath","workspaceFolder","workspacePath","resolveSettings","resultPromise","scopeUri","assign","silent","resolvedGlobalPackageManagerPath","workingDirectory","validate","packageManager","pm","globalPathGet","workspaceFolderPath","hasUserDefinedWorkingDirectories","workingDirectoryConfig","outer","findWorkingDirectory","moduleResolveWorkingDirectory","probe","libraryPath","loadNodeModule","pluginName","parserOptions","eslintConfig","withESLintClass","eslintClass","calculateConfigForFile","parser","regExp","eslintConfigParserOptionsParser","some","parserRegExp","plugins","Uri","isFile","formatterRegistrations","Request","Thenable","registerRequest","versionProvider","trigger","registerNotification","addNotificationMessage","processQueue","ValidateNotification","environmentChanged","publishDiagnostics","fixTypes","validFixTypes","reportResults","lintText","onIgnoredFiles","docReport","messages","override","startChar","column","endChar","endColumn","customizations","customization","getSeverityOverride","rulesCustomizations","makeDiagnostic","quiet","ok","getMessage","status","singleErrorHandlers","validateSingle","_params","_cancel","syncKind","onDidOpen","run","onDidChangeContent","onDidSave","onDidClose","unregister","openClose","willSaveWaitUntil","save","includeText","supported","codeActionProvider","codeActionKinds","executeCommandProvider","commands","messageTemplate","isNoConfigFoundError","noConfigReported","handleFileName","filename","configErrorReported","matches","plugin","missingModuleReported","handleMissingModule","normalizeDriveLetter","chdir","validateMany","Fixes","getDocumentVersion","getScoped","getAllSorted","sort","d0","al","bl","getApplicable","sorted","overlaps","sameRange","CodeActionResult","_actions","fixes","_fixAll","disable","fixAll","disableFile","showDocumentation","CommandParams","isUsable","ESLintSourceFixAll","AllFixesMode","computeAllFixes","identifier","problems","originalContent","onSave","codeActionOnSave","saveConfig","config","offRules","onRules","getSaveRuleConfig","overrideConfig","filtered","fixedContent","diffs","stringDiff","createCodeAction","commandId","action","createDisableLineTextEdit","indentationText","createDisableSameLineTextEdit","createDisableFileTextEdit","shebang","block","getLastEdit","isSource","isSourceFixAll","enable","textDocumentIdentifer","allFixableRuleIds","workspaceChange","suggestionSequence","desc","codeAction","disableRuleComment","lineText","sameProblems","same","sameFixes","sameTextChange","commandParams","textChange","applied","commandParam"],"sourceRoot":""}