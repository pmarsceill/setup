"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ruby_spawn_1 = require("ruby-spawn");
var commonOptions = function (workspace) {
    var opts = {};
    if (workspace) {
        opts['cwd'] = workspace;
    }
    return opts;
};
function solargraphCommand(args, configuration) {
    let cmd = [];
    if (configuration.useBundler && configuration.workspace) {
        cmd.push(configuration.bundlerPath, 'exec', 'solargraph');
    }
    else {
        cmd.push(configuration.commandPath);
    }
    var env = commonOptions(configuration.workspace);
    return ruby_spawn_1.rubySpawn(cmd.shift(), cmd.concat(args), env, true);
}
exports.solargraphCommand = solargraphCommand;
function gemCommand(args, configuration) {
    let cmd = [];
    if (configuration.useBundler && configuration.workspace) {
        cmd.push(configuration.bundlerPath, 'exec');
    }
    cmd.push('gem');
    var env = commonOptions(configuration.workspace);
    return ruby_spawn_1.rubySpawn(cmd.shift(), cmd.concat(args), env, true);
}
exports.gemCommand = gemCommand;
function yardCommand(args, configuration) {
    let cmd = [];
    if (configuration.useBundler && configuration.workspace) {
        cmd.push(configuration.bundlerPath, 'exec');
    }
    cmd.push('yard');
    var env = commonOptions(configuration.workspace);
    return ruby_spawn_1.rubySpawn(cmd.shift(), cmd.concat(args), env, true);
}
exports.yardCommand = yardCommand;
//# sourceMappingURL=commands.js.map