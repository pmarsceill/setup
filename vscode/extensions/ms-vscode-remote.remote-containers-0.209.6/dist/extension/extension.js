/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var AV=Object.create;var rl=Object.defineProperty,TV=Object.defineProperties,RV=Object.getOwnPropertyDescriptor,DV=Object.getOwnPropertyDescriptors,OV=Object.getOwnPropertyNames,u0=Object.getOwnPropertySymbols,NV=Object.getPrototypeOf,d0=Object.prototype.hasOwnProperty,LV=Object.prototype.propertyIsEnumerable;var f0=(t,e,r)=>e in t?rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G=(t,e)=>{for(var r in e||(e={}))d0.call(e,r)&&f0(t,r,e[r]);if(u0)for(var r of u0(e))LV.call(e,r)&&f0(t,r,e[r]);return t},se=(t,e)=>TV(t,DV(e)),p0=t=>rl(t,"__esModule",{value:!0});var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),FV=(t,e)=>{p0(t);for(var r in e)rl(t,r,{get:e[r],enumerable:!0})},MV=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of OV(e))!d0.call(t,n)&&n!=="default"&&rl(t,n,{get:()=>e[n],enumerable:!(r=RV(e,n))||r.enumerable});return t},K=t=>MV(p0(rl(t!=null?AV(NV(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var va=I((nle,A0)=>{"use strict";var I0=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);A0.exports=t=>t?Object.keys(t).map(e=>[I0.has(e)?I0.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var R0=I((ile,T0)=>{"use strict";T0.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var al=I((ole,D0)=>{"use strict";D0.exports=He;He.Node=ls;He.create=He;function He(t){var e=this;if(e instanceof He||(e=new He),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}He.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};He.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};He.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};He.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)YV(this,arguments[t]);return this.length};He.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)JV(this,arguments[t]);return this.length};He.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};He.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};He.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};He.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};He.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};He.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};He.prototype.map=function(t,e){e=e||this;for(var r=new He,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};He.prototype.mapReverse=function(t,e){e=e||this;for(var r=new He,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};He.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};He.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};He.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};He.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};He.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new He;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};He.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new He;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};He.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=KV(this,i,r[n]);return o};He.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function KV(t,e,r){var n=e===t.head?new ls(r,null,e,t):new ls(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function YV(t,e){t.tail=new ls(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function JV(t,e){t.head=new ls(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ls(t,e,r,n){if(!(this instanceof ls))return new ls(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{R0()(He)}catch{}});var ya=I((sle,U0)=>{"use strict";var QV=require("events"),O0=require("stream"),cl=al(),N0=require("string_decoder").StringDecoder,yi=Symbol("EOF"),ll=Symbol("maybeEmitEnd"),Ki=Symbol("emittedEnd"),Gd=Symbol("emittingEnd"),Wd=Symbol("closed"),L0=Symbol("read"),Kg=Symbol("flush"),F0=Symbol("flushChunk"),gr=Symbol("encoding"),wi=Symbol("decoder"),zd=Symbol("flowing"),ul=Symbol("paused"),dl=Symbol("resume"),lr=Symbol("bufferLength"),M0=Symbol("bufferPush"),Yg=Symbol("bufferShift"),Qt=Symbol("objectMode"),Xt=Symbol("destroyed"),q0=global._MP_NO_ITERATOR_SYMBOLS_!=="1",XV=q0&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),ZV=q0&&Symbol.iterator||Symbol("iterator not implemented"),$0=t=>t==="end"||t==="finish"||t==="prefinish",e3=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,t3=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);U0.exports=class j0 extends O0{constructor(e){super();this[zd]=!1,this[ul]=!1,this.pipes=new cl,this.buffer=new cl,this[Qt]=e&&e.objectMode||!1,this[Qt]?this[gr]=null:this[gr]=e&&e.encoding||null,this[gr]==="buffer"&&(this[gr]=null),this[wi]=this[gr]?new N0(this[gr]):null,this[yi]=!1,this[Ki]=!1,this[Gd]=!1,this[Wd]=!1,this.writable=!0,this.readable=!0,this[lr]=0,this[Xt]=!1}get bufferLength(){return this[lr]}get encoding(){return this[gr]}set encoding(e){if(this[Qt])throw new Error("cannot set encoding in objectMode");if(this[gr]&&e!==this[gr]&&(this[wi]&&this[wi].lastNeed||this[lr]))throw new Error("cannot change encoding");this[gr]!==e&&(this[wi]=e?new N0(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[wi].write(r)))),this[gr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Qt]}set objectMode(e){this[Qt]=this[Qt]||!!e}write(e,r,n){if(this[yi])throw new Error("write after end");return this[Xt]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Qt]&&!Buffer.isBuffer(e)&&(t3(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e3(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[lr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[Qt]&&!(r===this[gr]&&!this[wi].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[gr]&&(e=this[wi].write(e)),this.flowing?(this[lr]!==0&&this[Kg](!0),this.emit("data",e)):this[M0](e),this[lr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Xt])return null;try{return this[lr]===0||e===0||e>this[lr]?null:(this[Qt]&&(e=null),this.buffer.length>1&&!this[Qt]&&(this.encoding?this.buffer=new cl([Array.from(this.buffer).join("")]):this.buffer=new cl([Buffer.concat(Array.from(this.buffer),this[lr])])),this[L0](e||null,this.buffer.head.value))}finally{this[ll]()}}[L0](e,r){return e===r.length||e===null?this[Yg]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[lr]-=e),this.emit("data",r),!this.buffer.length&&!this[yi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[yi]=!0,this.writable=!1,(this.flowing||!this[ul])&&this[ll](),this}[dl](){this[Xt]||(this[ul]=!1,this[zd]=!0,this.emit("resume"),this.buffer.length?this[Kg]():this[yi]?this[ll]():this.emit("drain"))}resume(){return this[dl]()}pause(){this[zd]=!1,this[ul]=!0}get destroyed(){return this[Xt]}get flowing(){return this[zd]}get paused(){return this[ul]}[M0](e){return this[Qt]?this[lr]+=1:this[lr]+=e.length,this.buffer.push(e)}[Yg](){return this.buffer.length&&(this[Qt]?this[lr]-=1:this[lr]-=this.buffer.head.value.length),this.buffer.shift()}[Kg](e){do;while(this[F0](this[Yg]()));!e&&!this.buffer.length&&!this[yi]&&this.emit("drain")}[F0](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Xt])return;let n=this[Ki];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[dl]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[dl](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[dl]():$0(e)&&this[Ki]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Ki]}[ll](){!this[Gd]&&!this[Ki]&&!this[Xt]&&this.buffer.length===0&&this[yi]&&(this[Gd]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Wd]&&this.emit("close"),this[Gd]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Xt&&this[Xt])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Ki]===!0)return;this[Ki]=!0,this.readable=!1,this[wi]&&(r=this[wi].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[Wd]=!0,!this[Ki]&&!this[Xt]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{$0(e)?this.removeAllListeners(e):this[ll]()}}collect(){let e=[];this[Qt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Qt]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Qt]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Qt]?Promise.reject(new Error("cannot concat in objectMode")):this[gr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Xt,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[XV](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[yi])return Promise.resolve({done:!0});let n=null,i=null,o=l=>{this.removeListener("data",s),this.removeListener("end",a),i(l)},s=l=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[yi]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Xt,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[ZV](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Xt]?(e?this.emit("error",e):this.emit(Xt),this):(this[Xt]=!0,this.buffer=new cl,this[lr]=0,typeof this.close=="function"&&!this[Wd]&&this.close(),e?this.emit("error",e):this.emit(Xt),this)}static isStream(e){return!!e&&(e instanceof j0||e instanceof O0||e instanceof QV&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var H0=I((ale,B0)=>{var r3=require("zlib").constants||{ZLIB_VERNUM:4736};B0.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},r3))});var iv=I(Or=>{"use strict";var Jg=require("assert"),Yi=require("buffer").Buffer,V0=require("zlib"),us=Or.constants=H0(),n3=ya(),G0=Yi.concat,ds=Symbol("_superWrite"),fl=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},i3=Symbol("opts"),pl=Symbol("flushFlag"),W0=Symbol("finishFlushFlag"),Qg=Symbol("fullFlushFlag"),rt=Symbol("handle"),Kd=Symbol("onError"),wa=Symbol("sawError"),Xg=Symbol("level"),Zg=Symbol("strategy"),ev=Symbol("ended"),cle=Symbol("_defaultFullFlush"),tv=class extends n3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[wa]=!1,this[ev]=!1,this[i3]=e,this[pl]=e.flush,this[W0]=e.finishFlush;try{this[rt]=new V0[r](e)}catch(n){throw new fl(n)}this[Kd]=n=>{this[wa]||(this[wa]=!0,this.close(),this.emit("error",n))},this[rt].on("error",n=>this[Kd](new fl(n))),this.once("end",()=>this.close)}close(){this[rt]&&(this[rt].close(),this[rt]=null,this.emit("close"))}reset(){if(!this[wa])return Jg(this[rt],"zlib binding closed"),this[rt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Qg]),this.write(Object.assign(Yi.alloc(0),{[pl]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[W0]),this[ev]=!0,super.end(null,null,n)}get ended(){return this[ev]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Yi.from(e,r)),this[wa])return;Jg(this[rt],"zlib binding closed");let i=this[rt]._handle,o=i.close;i.close=()=>{};let s=this[rt].close;this[rt].close=()=>{},Yi.concat=l=>l;let a;try{let l=typeof e[pl]=="number"?e[pl]:this[pl];a=this[rt]._processChunk(e,l),Yi.concat=G0}catch(l){Yi.concat=G0,this[Kd](new fl(l))}finally{this[rt]&&(this[rt]._handle=i,i.close=o,this[rt].close=s,this[rt].removeAllListeners("error"))}this[rt]&&this[rt].on("error",l=>this[Kd](new fl(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[ds](Yi.from(a[0]));for(let l=1;l<a.length;l++)c=this[ds](a[l])}else c=this[ds](Yi.from(a));return n&&n(),c}[ds](e){return super.write(e)}},Ji=class extends tv{constructor(e,r){e=e||{},e.flush=e.flush||us.Z_NO_FLUSH,e.finishFlush=e.finishFlush||us.Z_FINISH;super(e,r);this[Qg]=us.Z_FULL_FLUSH,this[Xg]=e.level,this[Zg]=e.strategy}params(e,r){if(!this[wa]){if(!this[rt])throw new Error("cannot switch params when binding is closed");if(!this[rt].params)throw new Error("not supported in this implementation");if(this[Xg]!==e||this[Zg]!==r){this.flush(us.Z_SYNC_FLUSH),Jg(this[rt],"zlib binding closed");let n=this[rt].flush;this[rt].flush=(i,o)=>{this.flush(i),o()};try{this[rt].params(e,r)}finally{this[rt].flush=n}this[rt]&&(this[Xg]=e,this[Zg]=r)}}}},z0=class extends Ji{constructor(e){super(e,"Deflate")}},K0=class extends Ji{constructor(e){super(e,"Inflate")}},rv=Symbol("_portable"),Y0=class extends Ji{constructor(e){super(e,"Gzip");this[rv]=e&&!!e.portable}[ds](e){return this[rv]?(this[rv]=!1,e[9]=255,super[ds](e)):super[ds](e)}},J0=class extends Ji{constructor(e){super(e,"Gunzip")}},Q0=class extends Ji{constructor(e){super(e,"DeflateRaw")}},X0=class extends Ji{constructor(e){super(e,"InflateRaw")}},Z0=class extends Ji{constructor(e){super(e,"Unzip")}},nv=class extends tv{constructor(e,r){e=e||{},e.flush=e.flush||us.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||us.BROTLI_OPERATION_FINISH;super(e,r);this[Qg]=us.BROTLI_OPERATION_FLUSH}},eS=class extends nv{constructor(e){super(e,"BrotliCompress")}},tS=class extends nv{constructor(e){super(e,"BrotliDecompress")}};Or.Deflate=z0;Or.Inflate=K0;Or.Gzip=Y0;Or.Gunzip=J0;Or.DeflateRaw=Q0;Or.InflateRaw=X0;Or.Unzip=Z0;typeof V0.BrotliCompress=="function"?(Or.BrotliCompress=eS,Or.BrotliDecompress=tS):Or.BrotliCompress=Or.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Ca=I((ule,rS)=>{var o3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;rS.exports=o3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Yd=I((fle,nS)=>{"use strict";var s3=ya(),ov=Ca(),sv=Symbol("slurp");nS.exports=class extends s3{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=ov(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=ov(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[sv](r),n&&this[sv](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[sv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?ov(e[n]):e[n])}}});var av=I(Jd=>{"use strict";Jd.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Jd.code=new Map(Array.from(Jd.name).map(t=>[t[1],t[0]]))});var aS=I((hle,sS)=>{"use strict";var a3=(t,e)=>{if(Number.isSafeInteger(t))t<0?l3(t,e):c3(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},c3=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},l3=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=iS(i):i===0?e[n-1]=0:(r=!0,e[n-1]=oS(i))}},u3=t=>{let e=t[0],r=e===128?f3(t.slice(1,t.length)):e===255?d3(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},d3=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=iS(o):o===0?s=o:(n=!0,s=oS(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},f3=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},iS=t=>(255^t)&255,oS=t=>(255^t)+1&255;sS.exports={encode:a3,parse:u3}});var Ea=I((mle,uS)=>{"use strict";var cv=av(),ba=require("path").posix,cS=aS(),lv=Symbol("slurp"),Nr=Symbol("type"),lS=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Nr]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=fs(e,r,100),this.mode=Qi(e,r+100,8),this.uid=Qi(e,r+108,8),this.gid=Qi(e,r+116,8),this.size=Qi(e,r+124,12),this.mtime=uv(e,r+136,12),this.cksum=Qi(e,r+148,12),this[lv](n),this[lv](i,!0),this[Nr]=fs(e,r+156,1),this[Nr]===""&&(this[Nr]="0"),this[Nr]==="0"&&this.path.substr(-1)==="/"&&(this[Nr]="5"),this[Nr]==="5"&&(this.size=0),this.linkpath=fs(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=fs(e,r+265,32),this.gname=fs(e,r+297,32),this.devmaj=Qi(e,r+329,8),this.devmin=Qi(e,r+337,8),e[r+475]!==0){let s=fs(e,r+345,155);this.path=s+"/"+this.path}else{let s=fs(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=uv(e,r+476,12),this.ctime=uv(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[lv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=p3(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=ps(e,r,100,o)||this.needPax,this.needPax=Xi(e,r+100,8,this.mode)||this.needPax,this.needPax=Xi(e,r+108,8,this.uid)||this.needPax,this.needPax=Xi(e,r+116,8,this.gid)||this.needPax,this.needPax=Xi(e,r+124,12,this.size)||this.needPax,this.needPax=dv(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Nr].charCodeAt(0),this.needPax=ps(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=ps(e,r+265,32,this.uname)||this.needPax,this.needPax=ps(e,r+297,32,this.gname)||this.needPax,this.needPax=Xi(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Xi(e,r+337,8,this.devmin)||this.needPax,this.needPax=ps(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=ps(e,r+345,155,s)||this.needPax:(this.needPax=ps(e,r+345,130,s)||this.needPax,this.needPax=dv(e,r+476,12,this.atime)||this.needPax,this.needPax=dv(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,Xi(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return cv.name.get(this[Nr])||this[Nr]}get typeKey(){return this[Nr]}set type(e){cv.code.has(e)?this[Nr]=cv.code.get(e):this[Nr]=e}},p3=(t,e)=>{let r=100,n=t,i="",o,s=ba.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=ba.dirname(n),n=ba.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=ba.join(ba.basename(i),n),i=ba.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},fs=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),uv=(t,e,r)=>h3(Qi(t,e,r)),h3=t=>t===null?null:new Date(t*1e3),Qi=(t,e,r)=>t[e]&128?cS.parse(t.slice(e,e+r)):g3(t,e,r),m3=t=>isNaN(t)?null:t,g3=(t,e,r)=>m3(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),v3={12:8589934591,8:2097151},Xi=(t,e,r,n)=>n===null?!1:n>v3[r]||n<0?(cS.encode(n,t.slice(e,e+r)),!0):(y3(t,e,r,n),!1),y3=(t,e,r,n)=>t.write(w3(n,r),e,r,"ascii"),w3=(t,e)=>C3(Math.floor(t).toString(8),e),C3=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",dv=(t,e,r,n)=>n===null?!1:Xi(t,e,r,n.getTime()/1e3),b3=new Array(156).join("\0"),ps=(t,e,r,n)=>n===null?!1:(t.write(n+b3,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);uS.exports=lS});var Xd=I((gle,dS)=>{"use strict";var E3=Ea(),_3=require("path"),Qd=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new E3({path:("PaxHeader/"+_3.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};Qd.parse=(t,e,r)=>new Qd(S3(x3(t),e),r);var S3=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,x3=t=>t.replace(/\n$/,"").split(`
`).reduce(P3,Object.create(null)),P3=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};dS.exports=Qd});var _a=I((vle,fS)=>{fS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var Zd=I((yle,pS)=>{"use strict";pS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var pv=I((wle,hS)=>{"use strict";var ef=["|","<",">","?",":"],fv=ef.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),k3=new Map(ef.map((t,e)=>[t,fv[e]])),I3=new Map(fv.map((t,e)=>[t,ef[e]]));hS.exports={encode:t=>ef.reduce((e,r)=>e.split(r).join(k3.get(r)),t),decode:t=>fv.reduce((e,r)=>e.split(r).join(I3.get(r)),t)}});var hv=I((Cle,gS)=>{var{isAbsolute:A3,parse:mS}=require("path").win32;gS.exports=t=>{let e="",r=mS(t);for(;A3(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=mS(t)}return[e,t]}});var yS=I((ble,vS)=>{"use strict";vS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var _v=I((Sle,OS)=>{"use strict";var wS=ya(),CS=Xd(),bS=Ea(),Gn=require("fs"),ES=require("path"),Wn=Ca(),T3=_a(),_S=(t,e)=>e?(t=Wn(t).replace(/^\.(\/|$)/,""),T3(e)+"/"+t):Wn(t),R3=16*1024*1024,SS=Symbol("process"),xS=Symbol("file"),PS=Symbol("directory"),mv=Symbol("symlink"),kS=Symbol("hardlink"),hl=Symbol("header"),tf=Symbol("read"),gv=Symbol("lstat"),rf=Symbol("onlstat"),vv=Symbol("onread"),yv=Symbol("onreadlink"),wv=Symbol("openfile"),Cv=Symbol("onopenfile"),Zi=Symbol("close"),nf=Symbol("mode"),bv=Symbol("awaitDrain"),Ev=Symbol("ondrain"),zn=Symbol("prefix"),IS=Symbol("hadError"),AS=Zd(),D3=pv(),TS=hv(),RS=yS(),of=AS(class extends wS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Wn(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||R3,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Wn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Wn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=TS(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=D3.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Wn(r.absolute||ES.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[rf](this.statCache.get(this.absolute)):this[gv]()}emit(e,...r){return e==="error"&&(this[IS]=!0),super.emit(e,...r)}[gv](){Gn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[rf](r)})}[rf](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=N3(e),this.emit("stat",e),this[SS]()}[SS](){switch(this.type){case"File":return this[xS]();case"Directory":return this[PS]();case"SymbolicLink":return this[mv]();default:return this.end()}}[nf](e){return RS(e,this.type==="Directory",this.portable)}[zn](e){return _S(e,this.prefix)}[hl](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new bS({path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,mode:this[nf](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new CS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[PS](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[hl](),this.end()}[mv](){Gn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[yv](r)})}[yv](e){this.linkpath=Wn(e),this[hl](),this.end()}[kS](e){this.type="Link",this.linkpath=Wn(ES.relative(this.cwd,e)),this.stat.size=0,this[hl](),this.end()}[xS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[kS](r)}this.linkCache.set(e,this.absolute)}if(this[hl](),this.stat.size===0)return this.end();this[wv]()}[wv](){Gn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[Cv](r)})}[Cv](e){if(this.fd=e,this[IS])return this[Zi]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[tf]()}[tf](){let{fd:e,buf:r,offset:n,length:i,pos:o}=this;Gn.read(e,r,n,i,o,(s,a)=>{if(s)return this[Zi](()=>this.emit("error",s));this[vv](a)})}[Zi](e){Gn.close(this.fd,e)}[vv](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Zi](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Zi](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Ev]():this[bv](()=>this[Ev]())}[bv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Ev](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Zi](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[tf]()}}),DS=class extends of{[gv](){this[rf](Gn.lstatSync(this.absolute))}[mv](){this[yv](Gn.readlinkSync(this.absolute))}[wv](){this[Cv](Gn.openSync(this.absolute,"r"))}[tf](){let e=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=Gn.readSync(r,n,i,o,s);this[vv](a),e=!1}finally{if(e)try{this[Zi](()=>{})}catch{}}}[bv](e){e()}[Zi](e){Gn.closeSync(this.fd),e()}},O3=AS(class extends wS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Wn(e.path),this.mode=this[nf](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Wn(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=TS(this.path);i&&(this.path=o,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new bS({path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new CS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[zn](e){return _S(e,this.prefix)}[nf](e){return RS(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});of.Sync=DS;of.Tar=O3;var N3=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";OS.exports=of});var pf=I((Ple,US)=>{"use strict";var Sv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},L3=ya(),F3=iv(),M3=Yd(),xv=_v(),q3=xv.Sync,$3=xv.Tar,j3=al(),NS=Buffer.alloc(1024),sf=Symbol("onStat"),af=Symbol("ended"),Kn=Symbol("queue"),Sa=Symbol("current"),hs=Symbol("process"),cf=Symbol("processing"),LS=Symbol("processJob"),Yn=Symbol("jobs"),Pv=Symbol("jobDone"),lf=Symbol("addFSEntry"),FS=Symbol("addTarEntry"),kv=Symbol("stat"),Iv=Symbol("readdir"),uf=Symbol("onreaddir"),df=Symbol("pipe"),MS=Symbol("entry"),Av=Symbol("entryOpt"),Tv=Symbol("writeEntryClass"),qS=Symbol("write"),Rv=Symbol("ondrain"),ff=require("fs"),$S=require("path"),U3=Zd(),Dv=Ca(),Ov=U3(class extends L3{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Dv(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Tv]=xv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new F3.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[Rv]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[Rv]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Kn]=new j3,this[Yn]=0,this.jobs=+e.jobs||4,this[cf]=!1,this[af]=!1}[qS](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[af]=!0,this[hs](),this}write(e){if(this[af])throw new Error("write after end");return e instanceof M3?this[FS](e):this[lf](e),this.flowing}[FS](e){let r=Dv($S.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Sv(e.path,r,!1);n.entry=new $3(e,this[Av](n)),n.entry.on("end",i=>this[Pv](n)),this[Yn]+=1,this[Kn].push(n)}this[hs]()}[lf](e){let r=Dv($S.resolve(this.cwd,e));this[Kn].push(new Sv(e,r)),this[hs]()}[kv](e){e.pending=!0,this[Yn]+=1;let r=this.follow?"stat":"lstat";ff[r](e.absolute,(n,i)=>{e.pending=!1,this[Yn]-=1,n?this.emit("error",n):this[sf](e,i)})}[sf](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[hs]()}[Iv](e){e.pending=!0,this[Yn]+=1,ff.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Yn]-=1,r)return this.emit("error",r);this[uf](e,n)})}[uf](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[hs]()}[hs](){if(!this[cf]){this[cf]=!0;for(let e=this[Kn].head;e!==null&&this[Yn]<this.jobs;e=e.next)if(this[LS](e.value),e.value.ignore){let r=e.next;this[Kn].removeNode(e),e.next=r}this[cf]=!1,this[af]&&!this[Kn].length&&this[Yn]===0&&(this.zip?this.zip.end(NS):(super.write(NS),super.end()))}}get[Sa](){return this[Kn]&&this[Kn].head&&this[Kn].head.value}[Pv](e){this[Kn].shift(),this[Yn]-=1,this[hs]()}[LS](e){if(!e.pending){if(e.entry){e===this[Sa]&&!e.piped&&this[df](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[sf](e,this.statCache.get(e.absolute)):this[kv](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[uf](e,this.readdirCache.get(e.absolute)):this[Iv](e),!e.readdir))){if(e.entry=this[MS](e),!e.entry){e.ignore=!0;return}e===this[Sa]&&!e.piped&&this[df](e)}}}[Av](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[MS](e){this[Yn]+=1;try{return new this[Tv](e.path,this[Av](e)).on("end",()=>this[Pv](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[Rv](){this[Sa]&&this[Sa].entry&&this[Sa].entry.resume()}[df](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[lf](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),jS=class extends Ov{constructor(e){super(e);this[Tv]=q3}pause(){}resume(){}[kv](e){let r=this.follow?"statSync":"lstatSync";this[sf](e,ff[r](e.absolute))}[Iv](e,r){this[uf](e,ff.readdirSync(e.absolute))}[df](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[lf](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[qS](i)})}};Ov.Sync=jS;US.exports=Ov});var Da=I(gl=>{"use strict";var B3=ya(),H3=require("events").EventEmitter,vr=require("fs"),Nv=vr.writev;if(!Nv){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Nv=(r,n,i,o)=>{let s=(c,l)=>o(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var xa=Symbol("_autoClose"),bn=Symbol("_close"),ml=Symbol("_ended"),Qe=Symbol("_fd"),BS=Symbol("_finished"),eo=Symbol("_flags"),Lv=Symbol("_flush"),Fv=Symbol("_handleChunk"),Mv=Symbol("_makeBuf"),hf=Symbol("_mode"),mf=Symbol("_needDrain"),Pa=Symbol("_onerror"),ka=Symbol("_onopen"),qv=Symbol("_onread"),Ia=Symbol("_onwrite"),to=Symbol("_open"),Ci=Symbol("_path"),ms=Symbol("_pos"),Jn=Symbol("_queue"),Aa=Symbol("_read"),HS=Symbol("_readSize"),ro=Symbol("_reading"),gf=Symbol("_remain"),VS=Symbol("_size"),vf=Symbol("_write"),Ta=Symbol("_writing"),yf=Symbol("_defaultFlag"),Ra=Symbol("_errored"),$v=class extends B3{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ra]=!1,this[Qe]=typeof r.fd=="number"?r.fd:null,this[Ci]=e,this[HS]=r.readSize||16*1024*1024,this[ro]=!1,this[VS]=typeof r.size=="number"?r.size:1/0,this[gf]=this[VS],this[xa]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Qe]=="number"?this[Aa]():this[to]()}get fd(){return this[Qe]}get path(){return this[Ci]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[to](){vr.open(this[Ci],"r",(e,r)=>this[ka](e,r))}[ka](e,r){e?this[Pa](e):(this[Qe]=r,this.emit("open",r),this[Aa]())}[Mv](){return Buffer.allocUnsafe(Math.min(this[HS],this[gf]))}[Aa](){if(!this[ro]){this[ro]=!0;let e=this[Mv]();if(e.length===0)return process.nextTick(()=>this[qv](null,0,e));vr.read(this[Qe],e,0,e.length,null,(r,n,i)=>this[qv](r,n,i))}}[qv](e,r,n){this[ro]=!1,e?this[Pa](e):this[Fv](r,n)&&this[Aa]()}[bn](){if(this[xa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,vr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Pa](e){this[ro]=!0,this[bn](),this.emit("error",e)}[Fv](e,r){let n=!1;return this[gf]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[gf]<=0)&&(n=!1,this[bn](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Qe]=="number"&&this[Aa]();break;case"error":return this[Ra]?void 0:(this[Ra]=!0,super.emit(e,r));default:return super.emit(e,r)}}},GS=class extends $v{[to](){let e=!0;try{this[ka](null,vr.openSync(this[Ci],"r")),e=!1}finally{e&&this[bn]()}}[Aa](){let e=!0;try{if(!this[ro]){this[ro]=!0;do{let r=this[Mv](),n=r.length===0?0:vr.readSync(this[Qe],r,0,r.length,null);if(!this[Fv](n,r))break}while(!0);this[ro]=!1}e=!1}finally{e&&this[bn]()}}[bn](){if(this[xa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,vr.closeSync(e),this.emit("close")}}},jv=class extends H3{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Ra]=!1,this[Ta]=!1,this[ml]=!1,this[mf]=!1,this[Jn]=[],this[Ci]=e,this[Qe]=typeof r.fd=="number"?r.fd:null,this[hf]=r.mode===void 0?438:r.mode,this[ms]=typeof r.start=="number"?r.start:null,this[xa]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[ms]!==null?"r+":"w";this[yf]=r.flags===void 0,this[eo]=this[yf]?n:r.flags,this[Qe]===null&&this[to]()}emit(e,r){if(e==="error"){if(this[Ra])return;this[Ra]=!0}return super.emit(e,r)}get fd(){return this[Qe]}get path(){return this[Ci]}[Pa](e){this[bn](),this[Ta]=!0,this.emit("error",e)}[to](){vr.open(this[Ci],this[eo],this[hf],(e,r)=>this[ka](e,r))}[ka](e,r){this[yf]&&this[eo]==="r+"&&e&&e.code==="ENOENT"?(this[eo]="w",this[to]()):e?this[Pa](e):(this[Qe]=r,this.emit("open",r),this[Lv]())}end(e,r){return e&&this.write(e,r),this[ml]=!0,!this[Ta]&&!this[Jn].length&&typeof this[Qe]=="number"&&this[Ia](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[ml]?(this.emit("error",new Error("write() after end()")),!1):this[Qe]===null||this[Ta]||this[Jn].length?(this[Jn].push(e),this[mf]=!0,!1):(this[Ta]=!0,this[vf](e),!0)}[vf](e){vr.write(this[Qe],e,0,e.length,this[ms],(r,n)=>this[Ia](r,n))}[Ia](e,r){e?this[Pa](e):(this[ms]!==null&&(this[ms]+=r),this[Jn].length?this[Lv]():(this[Ta]=!1,this[ml]&&!this[BS]?(this[BS]=!0,this[bn](),this.emit("finish")):this[mf]&&(this[mf]=!1,this.emit("drain"))))}[Lv](){if(this[Jn].length===0)this[ml]&&this[Ia](null,0);else if(this[Jn].length===1)this[vf](this[Jn].pop());else{let e=this[Jn];this[Jn]=[],Nv(this[Qe],e,this[ms],(r,n)=>this[Ia](r,n))}}[bn](){if(this[xa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,vr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},WS=class extends jv{[to](){let e;if(this[yf]&&this[eo]==="r+")try{e=vr.openSync(this[Ci],this[eo],this[hf])}catch(r){if(r.code==="ENOENT")return this[eo]="w",this[to]();throw r}else e=vr.openSync(this[Ci],this[eo],this[hf]);this[ka](null,e)}[bn](){if(this[xa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,vr.closeSync(e),this.emit("close")}}[vf](e){let r=!0;try{this[Ia](null,vr.writeSync(this[Qe],e,0,e.length,this[ms])),r=!1}finally{if(r)try{this[bn]()}catch{}}}};gl.ReadStream=$v;gl.ReadStreamSync=GS;gl.WriteStream=jv;gl.WriteStreamSync=WS});var xf=I((Ale,ZS)=>{"use strict";var V3=Zd(),G3=Ea(),W3=require("events"),z3=al(),K3=1024*1024,Y3=Yd(),zS=Xd(),J3=iv(),Uv=Buffer.from([31,139]),Yr=Symbol("state"),gs=Symbol("writeEntry"),bi=Symbol("readEntry"),Bv=Symbol("nextEntry"),KS=Symbol("processEntry"),Jr=Symbol("extendedHeader"),vl=Symbol("globalExtendedHeader"),no=Symbol("meta"),YS=Symbol("emitMeta"),nt=Symbol("buffer"),Ei=Symbol("queue"),vs=Symbol("ended"),JS=Symbol("emittedEnd"),ys=Symbol("emit"),yr=Symbol("unzip"),wf=Symbol("consumeChunk"),Cf=Symbol("consumeChunkSub"),Hv=Symbol("consumeBody"),QS=Symbol("consumeMeta"),XS=Symbol("consumeHeader"),bf=Symbol("consuming"),Vv=Symbol("bufferConcat"),Gv=Symbol("maybeEnd"),yl=Symbol("writing"),io=Symbol("aborted"),Ef=Symbol("onDone"),ws=Symbol("sawValidEntry"),_f=Symbol("sawNullBlock"),Sf=Symbol("sawEOF"),Q3=t=>!0;ZS.exports=V3(class extends W3{constructor(e){e=e||{};super(e);this.file=e.file||"",this[ws]=null,this.on(Ef,r=>{(this[Yr]==="begin"||this[ws]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Ef,e.ondone):this.on(Ef,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||K3,this.filter=typeof e.filter=="function"?e.filter:Q3,this.writable=!0,this.readable=!1,this[Ei]=new z3,this[nt]=null,this[bi]=null,this[gs]=null,this[Yr]="begin",this[no]="",this[Jr]=null,this[vl]=null,this[vs]=!1,this[yr]=null,this[io]=!1,this[_f]=!1,this[Sf]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[XS](e,r){this[ws]===null&&(this[ws]=!1);let n;try{n=new G3(e,r,this[Jr],this[vl])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[_f]?(this[Sf]=!0,this[Yr]==="begin"&&(this[Yr]="header"),this[ys]("eof")):(this[_f]=!0,this[ys]("nullBlock"));else if(this[_f]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[gs]=new Y3(n,this[Jr],this[vl]);if(!this[ws])if(o.remain){let s=()=>{o.invalid||(this[ws]=!0)};o.on("end",s)}else this[ws]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[ys]("ignoredEntry",o),this[Yr]="ignore",o.resume()):o.size>0&&(this[no]="",o.on("data",s=>this[no]+=s),this[Yr]="meta"):(this[Jr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[ys]("ignoredEntry",o),this[Yr]=o.remain?"ignore":"header",o.resume()):(o.remain?this[Yr]="body":(this[Yr]="header",o.end()),this[bi]?this[Ei].push(o):(this[Ei].push(o),this[Bv]())))}}}[KS](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[bi]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Bv]()),r=!1)):(this[bi]=null,r=!1),r}[Bv](){do;while(this[KS](this[Ei].shift()));if(!this[Ei].length){let e=this[bi];!e||e.flowing||e.size===e.remain?this[yl]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Hv](e,r){let n=this[gs],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[Yr]="header",this[gs]=null,n.end()),o.length}[QS](e,r){let n=this[gs],i=this[Hv](e,r);return this[gs]||this[YS](n),i}[ys](e,r,n){!this[Ei].length&&!this[bi]?this.emit(e,r,n):this[Ei].push([e,r,n])}[YS](e){switch(this[ys]("meta",this[no]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Jr]=zS.parse(this[no],this[Jr],!1);break;case"GlobalExtendedHeader":this[vl]=zS.parse(this[no],this[vl],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Jr]=this[Jr]||Object.create(null),this[Jr].path=this[no].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Jr]=this[Jr]||Object.create(null),this[Jr].linkpath=this[no].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[io]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[io])return;if(this[yr]===null&&e){if(this[nt]&&(e=Buffer.concat([this[nt],e]),this[nt]=null),e.length<Uv.length)return this[nt]=e,!0;for(let n=0;this[yr]===null&&n<Uv.length;n++)e[n]!==Uv[n]&&(this[yr]=!1);if(this[yr]===null){let n=this[vs];this[vs]=!1,this[yr]=new J3.Unzip,this[yr].on("data",o=>this[wf](o)),this[yr].on("error",o=>this.abort(o)),this[yr].on("end",o=>{this[vs]=!0,this[wf]()}),this[yl]=!0;let i=this[yr][n?"end":"write"](e);return this[yl]=!1,i}}this[yl]=!0,this[yr]?this[yr].write(e):this[wf](e),this[yl]=!1;let r=this[Ei].length?!1:this[bi]?this[bi].flowing:!0;return!r&&!this[Ei].length&&this[bi].once("drain",n=>this.emit("drain")),r}[Vv](e){e&&!this[io]&&(this[nt]=this[nt]?Buffer.concat([this[nt],e]):e)}[Gv](){if(this[vs]&&!this[JS]&&!this[io]&&!this[bf]){this[JS]=!0;let e=this[gs];if(e&&e.blockRemain){let r=this[nt]?this[nt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[nt]&&e.write(this[nt]),e.end()}this[ys](Ef)}}[wf](e){if(this[bf])this[Vv](e);else if(!e&&!this[nt])this[Gv]();else{if(this[bf]=!0,this[nt]){this[Vv](e);let r=this[nt];this[nt]=null,this[Cf](r)}else this[Cf](e);for(;this[nt]&&this[nt].length>=512&&!this[io]&&!this[Sf];){let r=this[nt];this[nt]=null,this[Cf](r)}this[bf]=!1}(!this[nt]||this[vs])&&this[Gv]()}[Cf](e){let r=0,n=e.length;for(;r+512<=n&&!this[io]&&!this[Sf];)switch(this[Yr]){case"begin":case"header":this[XS](e,r),r+=512;break;case"ignore":case"body":r+=this[Hv](e,r);break;case"meta":r+=this[QS](e,r);break;default:throw new Error("invalid state: "+this[Yr])}r<n&&(this[nt]?this[nt]=Buffer.concat([e.slice(r),this[nt]]):this[nt]=e.slice(r))}end(e){this[io]||(this[yr]?this[yr].end(e):(this[vs]=!0,this.write(e)))}})});var Pf=I((Tle,nx)=>{"use strict";var X3=va(),ex=xf(),Oa=require("fs"),Z3=Da(),tx=require("path"),Wv=_a();nx.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=X3(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&tG(n,e),n.noResume||eG(n),n.file&&n.sync?rG(n):n.file?nG(n,r):rx(n)};var eG=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},tG=(t,e)=>{let r=new Map(e.map(o=>[Wv(o),!0])),n=t.filter,i=(o,s)=>{let a=s||tx.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(tx.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(Wv(o)):o=>i(Wv(o))},rG=t=>{let e=rx(t),r=t.file,n=!0,i;try{let o=Oa.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(Oa.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=Oa.openSync(r,"r");a<o.size;){let l=Oa.readSync(i,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{Oa.closeSync(i)}catch{}}},nG=(t,e)=>{let r=new ex(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Oa.stat(i,(c,l)=>{if(c)a(c);else{let u=new Z3.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},rx=t=>new ex(t)});var lx=I((Rle,cx)=>{"use strict";var iG=va(),kf=pf(),ix=Da(),ox=Pf(),sx=require("path");cx.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=iG(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?oG(n,e):n.file?sG(n,e,r):n.sync?aG(n,e):cG(n,e)};var oG=(t,e)=>{let r=new kf.Sync(t),n=new ix.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),ax(r,e)},sG=(t,e,r)=>{let n=new kf(t),i=new ix.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return zv(n,e),r?o.then(r,r):o},ax=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?ox({file:sx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},zv=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return ox({file:sx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>zv(t,e));t.add(r)}t.end()},aG=(t,e)=>{let r=new kf.Sync(t);return ax(r,e),r},cG=(t,e)=>{let r=new kf(t);return zv(r,e),r}});var Kv=I((Dle,gx)=>{"use strict";var lG=va(),ux=pf(),Lr=require("fs"),dx=Da(),fx=Pf(),px=require("path"),hx=Ea();gx.exports=(t,e,r)=>{let n=lG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?uG(n,e):fG(n,e,r)};var uG=(t,e)=>{let r=new ux.Sync(t),n=!0,i,o;try{try{i=Lr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=Lr.openSync(t.file,"w+");else throw c}let s=Lr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let u=0,d=0;u<512;u+=d){if(d=Lr.readSync(i,a,u,a.length-u,o+u),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new hx(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(o+l+512>s.size)break;o+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,dG(t,r,o,i,e)}finally{if(n)try{Lr.closeSync(i)}catch{}}},dG=(t,e,r,n,i)=>{let o=new dx.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),pG(e,i)},fG=(t,e,r)=>{e=Array.from(e);let n=new ux(t),i=(s,a,c)=>{let l=(h,m)=>{h?Lr.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let d=0,f=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(d+=m,d<512&&m)return Lr.read(s,f,d,f.length-d,u+d,p);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(d<512)return l(null,u);let g=new hx(f);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),d=0,Lr.read(s,f,0,512,u,p)};Lr.read(s,f,0,512,u,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,d)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Lr.open(t.file,c,l);if(u)return a(u);Lr.fstat(d,(f,p)=>{if(f)return Lr.close(d,()=>a(f));i(d,p.size,(h,m)=>{if(h)return a(h);let g=new dx.WriteStream(t.file,{fd:d,start:m});n.pipe(g),g.on("error",a),g.on("close",s),mx(n,e)})})};Lr.open(t.file,c,l)});return r?o.then(r,r):o},pG=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?fx({file:px.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},mx=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return fx({file:px.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>mx(t,e));t.add(r)}t.end()}});var yx=I((Ole,vx)=>{"use strict";var hG=va(),mG=Kv();vx.exports=(t,e,r)=>{let n=hG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),gG(n),mG(n,e,r)};var gG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var bx=I((Nle,Cx)=>{var{promisify:wx}=require("util"),oo=require("fs"),vG=t=>{if(!t)t={mode:511,fs:oo};else if(typeof t=="object")t=G({mode:511,fs:oo},t);else if(typeof t=="number")t={mode:t,fs:oo};else if(typeof t=="string")t={mode:parseInt(t,8),fs:oo};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||oo.mkdir,t.mkdirAsync=wx(t.mkdir),t.stat=t.stat||t.fs.stat||oo.stat,t.statAsync=wx(t.stat),t.statSync=t.statSync||t.fs.statSync||oo.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||oo.mkdirSync,t};Cx.exports=vG});var _x=I((Lle,Ex)=>{var yG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:wG,parse:CG}=require("path"),bG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=wG(t),yG==="win32"){let e=/[*|"<>?:]/,{root:r}=CG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};Ex.exports=bG});var Ix=I((Fle,kx)=>{var{dirname:Sx}=require("path"),xx=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?xx(t,Sx(e),e):void 0),Px=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?Px(t,Sx(e),e):void 0}};kx.exports={findMade:xx,findMadeSync:Px}});var Qv=I((Mle,Tx)=>{var{dirname:Ax}=require("path"),Yv=(t,e,r)=>{e.recursive=!1;let n=Ax(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return Yv(n,e).then(o=>Yv(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},Jv=(t,e,r)=>{let n=Ax(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return Jv(t,e,Jv(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};Tx.exports={mkdirpManual:Yv,mkdirpManualSync:Jv}});var Ox=I((qle,Dx)=>{var{dirname:Rx}=require("path"),{findMade:EG,findMadeSync:_G}=Ix(),{mkdirpManual:SG,mkdirpManualSync:xG}=Qv(),PG=(t,e)=>(e.recursive=!0,Rx(t)===t?e.mkdirAsync(t,e):EG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return SG(t,e);throw i}))),kG=(t,e)=>{if(e.recursive=!0,Rx(t)===t)return e.mkdirSync(t,e);let n=_G(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return xG(t,e);throw i}};Dx.exports={mkdirpNative:PG,mkdirpNativeSync:kG}});var Mx=I(($le,Fx)=>{var Nx=require("fs"),IG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Xv=IG.replace(/^v/,"").split("."),Lx=+Xv[0]>10||+Xv[0]==10&&+Xv[1]>=12,AG=Lx?t=>t.mkdir===Nx.mkdir:()=>!1,TG=Lx?t=>t.mkdirSync===Nx.mkdirSync:()=>!1;Fx.exports={useNative:AG,useNativeSync:TG}});var Hx=I((jle,Bx)=>{var Na=bx(),La=_x(),{mkdirpNative:qx,mkdirpNativeSync:$x}=Ox(),{mkdirpManual:jx,mkdirpManualSync:Ux}=Qv(),{useNative:RG,useNativeSync:DG}=Mx(),Fa=(t,e)=>(t=La(t),e=Na(e),RG(e)?qx(t,e):jx(t,e)),OG=(t,e)=>(t=La(t),e=Na(e),DG(e)?$x(t,e):Ux(t,e));Fa.sync=OG;Fa.native=(t,e)=>qx(La(t),Na(e));Fa.manual=(t,e)=>jx(La(t),Na(e));Fa.nativeSync=(t,e)=>$x(La(t),Na(e));Fa.manualSync=(t,e)=>Ux(La(t),Na(e));Bx.exports=Fa});var Jx=I((Ule,Yx)=>{"use strict";var Qr=require("fs"),Cs=require("path"),NG=Qr.lchown?"lchown":"chown",LG=Qr.lchownSync?"lchownSync":"chownSync",Vx=Qr.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Gx=(t,e,r)=>{try{return Qr[LG](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},FG=(t,e,r)=>{try{return Qr.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},MG=Vx?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Qr.chown(t,e,r,n)}:(t,e,r,n)=>n,Zv=Vx?(t,e,r)=>{try{return Gx(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;FG(t,e,r)}}:(t,e,r)=>Gx(t,e,r),qG=process.version,Wx=(t,e,r)=>Qr.readdir(t,e,r),$G=(t,e)=>Qr.readdirSync(t,e);/^v4\./.test(qG)&&(Wx=(t,e,r)=>Qr.readdir(t,r));var If=(t,e,r,n)=>{Qr[NG](t,e,r,MG(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},zx=(t,e,r,n,i)=>{if(typeof e=="string")return Qr.lstat(Cs.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,zx(t,s,r,n,i)});if(e.isDirectory())ey(Cs.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=Cs.resolve(t,e.name);If(s,r,n,i)});else{let o=Cs.resolve(t,e.name);If(o,r,n,i)}},ey=(t,e,r,n)=>{Wx(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return If(t,e,r,n);let s=o.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return If(t,e,r,n)}};o.forEach(l=>zx(t,l,e,r,c))})},jG=(t,e,r,n)=>{if(typeof e=="string")try{let i=Qr.lstatSync(Cs.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&Kx(Cs.resolve(t,e.name),r,n),Zv(Cs.resolve(t,e.name),r,n)},Kx=(t,e,r)=>{let n;try{n=$G(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Zv(t,e,r);throw i}return n&&n.length&&n.forEach(i=>jG(t,i,e,r)),Zv(t,e,r)};Yx.exports=ey;ey.sync=Kx});var eP=I((Ble,ny)=>{"use strict";var Qx=Hx(),Xr=require("fs"),Af=require("path"),Xx=Jx(),En=Ca(),ty=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},ry=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},Tf=(t,e)=>t.get(En(e)),wl=(t,e,r)=>t.set(En(e),r),UG=(t,e)=>{Xr.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new ry(t,r&&r.code||"ENOTDIR")),e(r)})};ny.exports=(t,e,r)=>{t=En(t);let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,f=En(e.cwd),p=(g,v)=>{g?r(g):(wl(d,t,!0),v&&c?Xx(v,s,a,w=>p(w)):o?Xr.chmod(t,i,r):r())};if(d&&Tf(d,t)===!0)return p();if(t===f)return UG(t,p);if(l)return Qx(t,{mode:i}).then(g=>p(null,g),p);let m=En(Af.relative(f,t)).split("/");Rf(f,m,i,d,u,f,null,p)};var Rf=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=En(Af.resolve(t+"/"+c));if(Tf(n,l))return Rf(l,e,r,n,i,o,s,a);Xr.mkdir(l,r,Zx(l,e,r,n,i,o,s,a))},Zx=(t,e,r,n,i,o,s,a)=>c=>{c?Xr.lstat(t,(l,u)=>{if(l)l.path=l.path&&En(l.path),a(l);else if(u.isDirectory())Rf(t,e,r,n,i,o,s,a);else if(i)Xr.unlink(t,d=>{if(d)return a(d);Xr.mkdir(t,r,Zx(t,e,r,n,i,o,s,a))});else{if(u.isSymbolicLink())return a(new ty(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,Rf(t,e,r,n,i,o,s,a))},BG=t=>{let e=!1,r="ENOTDIR";try{e=Xr.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new ry(t,r)}};ny.exports.sync=(t,e)=>{t=En(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=En(e.cwd),f=g=>{wl(u,t,!0),g&&a&&Xx.sync(g,o,s),i&&Xr.chmodSync(t,n)};if(u&&Tf(u,t)===!0)return f();if(t===d)return BG(d),f();if(c)return f(Qx.sync(t,n));let h=En(Af.relative(d,t)).split("/"),m=null;for(let g=h.shift(),v=d;g&&(v+="/"+g);g=h.shift())if(v=En(Af.resolve(v)),!Tf(u,v))try{Xr.mkdirSync(v,n),m=m||v,wl(u,v,!0)}catch{let C=Xr.lstatSync(v);if(C.isDirectory()){wl(u,v,!0);continue}else if(l){Xr.unlinkSync(v),Xr.mkdirSync(v,n),m=m||v,wl(u,v,!0);continue}else if(C.isSymbolicLink())return new ty(v,v+"/"+h.join("/"))}return f(m)}});var oy=I((Hle,tP)=>{var iy=Object.create(null),{hasOwnProperty:HG}=Object.prototype;tP.exports=t=>(HG.call(iy,t)||(iy[t]=t.normalize("NFKD")),iy[t])});var oP=I((Vle,iP)=>{var rP=require("assert"),VG=oy(),GG=_a(),{join:nP}=require("path"),WG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,zG=WG==="win32";iP.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=nP(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(d=>t.get(d)),dirs:[...u.dirs].map(d=>t.get(d))}},o=l=>{let{paths:u,dirs:d}=i(l);return u.every(f=>f[0]===l)&&d.every(f=>f[0]instanceof Set&&f[0].has(l))},s=l=>n.has(l)||!o(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:d}=e.get(l),f=new Set;return u.forEach(p=>{let h=t.get(p);rP.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?f.add(h[0]):h[0].forEach(m=>f.add(m)))}),d.forEach(p=>{let h=t.get(p);rP(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),f.add(h[0])):h[0].delete(l)}),n.delete(l),f.forEach(p=>s(p)),!0};return{check:o,reserve:(l,u)=>{l=zG?["win32 parallelization disabled"]:l.map(f=>VG(GG(nP(f))).toLowerCase());let d=new Set(l.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(u,{dirs:d,paths:l}),l.forEach(f=>{let p=t.get(f);p?p.push(u):t.set(f,[u])}),d.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(f,[new Set([u])])}),s(u)}}}});var cP=I((Gle,aP)=>{var KG=process.env.__FAKE_PLATFORM__||process.platform,YG=KG==="win32",JG=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:QG,O_TRUNC:XG,O_WRONLY:ZG,UV_FS_O_FILEMAP:sP=0}=JG.constants,eW=YG&&!!sP,tW=512*1024,rW=sP|XG|QG|ZG;aP.exports=eW?t=>t<tW?rW:"w":()=>"w"});var py=I((Wle,_P)=>{"use strict";var nW=require("assert"),iW=xf(),Ve=require("fs"),oW=Da(),_i=require("path"),lP=eP(),uP=pv(),sW=oP(),aW=hv(),Fr=Ca(),cW=_a(),lW=oy(),dP=Symbol("onEntry"),sy=Symbol("checkFs"),fP=Symbol("checkFs2"),Df=Symbol("pruneCache"),ay=Symbol("isReusable"),Zr=Symbol("makeFs"),cy=Symbol("file"),ly=Symbol("directory"),Of=Symbol("link"),pP=Symbol("symlink"),hP=Symbol("hardlink"),mP=Symbol("unsupported"),gP=Symbol("checkPath"),so=Symbol("mkdir"),Zt=Symbol("onError"),Nf=Symbol("pending"),vP=Symbol("pend"),Ma=Symbol("unpend"),uy=Symbol("ended"),dy=Symbol("maybeClose"),fy=Symbol("skip"),Cl=Symbol("doChown"),bl=Symbol("uid"),El=Symbol("gid"),_l=Symbol("checkedCwd"),yP=require("crypto"),wP=cP(),uW=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Sl=uW==="win32",dW=(t,e)=>{if(!Sl)return Ve.unlink(t,e);let r=t+".DELETE."+yP.randomBytes(16).toString("hex");Ve.rename(t,r,n=>{if(n)return e(n);Ve.unlink(r,e)})},fW=t=>{if(!Sl)return Ve.unlinkSync(t);let e=t+".DELETE."+yP.randomBytes(16).toString("hex");Ve.renameSync(t,e),Ve.unlinkSync(e)},CP=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,bP=t=>lW(cW(Fr(t))).toLowerCase(),pW=(t,e)=>{e=bP(e);for(let r of t.keys()){let n=bP(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},hW=t=>{for(let e of t.keys())t.delete(e)},Lf=class extends iW{constructor(e){e||(e={}),e.ondone=r=>{this[uy]=!0,this[dy]()};super(e);if(this[_l]=!1,this.reservations=sW(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Nf]=0,this[uy]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Sl,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Fr(_i.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[dP](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[dy](){this[uy]&&this[Nf]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[gP](e){if(this.strip){let r=Fr(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Fr(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Fr(e.path),n=r.split("/");if(n.includes("..")||Sl&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,o]=aW(r);i&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(_i.isAbsolute(e.path)?e.absolute=Fr(_i.resolve(e.path)):e.absolute=Fr(_i.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Fr(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=_i.win32.parse(e.absolute);e.absolute=r+uP.encode(e.absolute.substr(r.length));let{root:n}=_i.win32.parse(e.path);e.path=n+uP.encode(e.path.substr(n.length))}return!0}[dP](e){if(!this[gP](e))return e.resume();switch(nW.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[sy](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[mP](e)}}[Zt](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Ma](),r.resume())}[so](e,r,n){lP(Fr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Cl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[bl](e){return CP(this.uid,e.uid,this.processUid)}[El](e){return CP(this.gid,e.gid,this.processGid)}[cy](e,r){let n=e.mode&4095||this.fmode,i=new oW.WriteStream(e.absolute,{flags:wP(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Ve.close(i.fd,()=>{}),i.write=()=>!0,this[Zt](c,e),r()});let o=1,s=c=>{if(c){i.fd&&Ve.close(i.fd,()=>{}),this[Zt](c,e),r();return}--o==0&&Ve.close(i.fd,l=>{l?this[Zt](l,e):this[Ma](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){o++;let d=e.atime||new Date,f=e.mtime;Ve.futimes(u,d,f,p=>p?Ve.utimes(l,d,f,h=>s(h&&p)):s())}if(this[Cl](e)){o++;let d=this[bl](e),f=this[El](e);Ve.fchown(u,d,f,p=>p?Ve.chown(l,d,f,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Zt](c,e),r()}),e.pipe(a)),a.pipe(i)}[ly](e,r){let n=e.mode&4095||this.dmode;this[so](e.absolute,n,i=>{if(i){this[Zt](i,e),r();return}let o=1,s=a=>{--o==0&&(r(),this[Ma](),e.resume())};e.mtime&&!this.noMtime&&(o++,Ve.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Cl](e)&&(o++,Ve.chown(e.absolute,this[bl](e),this[El](e),s)),s()})}[mP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[pP](e,r){this[Of](e,e.linkpath,"symlink",r)}[hP](e,r){let n=Fr(_i.resolve(this.cwd,e.linkpath));this[Of](e,n,"link",r)}[vP](){this[Nf]++}[Ma](){this[Nf]--,this[dy]()}[fy](e){this[Ma](),e.resume()}[ay](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Sl}[sy](e){this[vP]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[fP](e,n))}[Df](e){e.type==="SymbolicLink"?hW(this.dirCache):e.type!=="Directory"&&pW(this.dirCache,e.absolute)}[fP](e,r){this[Df](e);let n=a=>{this[Df](e),r(a)},i=()=>{this[so](this.cwd,this.dmode,a=>{if(a){this[Zt](a,e),n();return}this[_l]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=Fr(_i.dirname(e.absolute));if(a!==this.cwd)return this[so](a,this.dmode,c=>{if(c){this[Zt](c,e),n();return}s()})}s()},s=()=>{Ve.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[fy](e),n();return}if(a||this[ay](e,c))return this[Zr](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[Zr](d,e,n);return l?Ve.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Ve.rmdir(e.absolute,l=>this[Zr](l,e,n))}if(e.absolute===this.cwd)return this[Zr](null,e,n);dW(e.absolute,l=>this[Zr](l,e,n))})};this[_l]?o():i()}[Zr](e,r,n){if(e){this[Zt](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[cy](r,n);case"Link":return this[hP](r,n);case"SymbolicLink":return this[pP](r,n);case"Directory":case"GNUDumpDir":return this[ly](r,n)}}[Of](e,r,n,i){Ve[n](r,e.absolute,o=>{o?this[Zt](o,e):(this[Ma](),e.resume()),i()})}},Ff=t=>{try{return[null,t()]}catch(e){return[e,null]}},EP=class extends Lf{[Zr](e,r){return super[Zr](e,r,()=>{})}[sy](e){if(this[Df](e),!this[_l]){let o=this[so](this.cwd,this.dmode);if(o)return this[Zt](o,e);this[_l]=!0}if(e.absolute!==this.cwd){let o=Fr(_i.dirname(e.absolute));if(o!==this.cwd){let s=this[so](o,this.dmode);if(s)return this[Zt](s,e)}}let[r,n]=Ff(()=>Ve.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[fy](e);if(r||this[ay](e,n))return this[Zr](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?Ff(()=>{Ve.chmodSync(e.absolute,e.mode)}):[];return this[Zr](a,e)}let[o]=Ff(()=>Ve.rmdirSync(e.absolute));this[Zr](o,e)}let[i]=e.absolute===this.cwd?[]:Ff(()=>fW(e.absolute));this[Zr](i,e)}[cy](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Ve.closeSync(o)}catch(l){c=l}(a||c)&&this[Zt](a||c,e),r()},o;try{o=Ve.openSync(e.absolute,wP(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Zt](a,e)),e.pipe(s)),s.on("data",a=>{try{Ve.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Ve.futimesSync(o,l,u)}catch(d){try{Ve.utimesSync(e.absolute,l,u)}catch{c=d}}}if(this[Cl](e)){let l=this[bl](e),u=this[El](e);try{Ve.fchownSync(o,l,u)}catch(d){try{Ve.chownSync(e.absolute,l,u)}catch{c=c||d}}}i(c)})}[ly](e,r){let n=e.mode&4095||this.dmode,i=this[so](e.absolute,n);if(i){this[Zt](i,e),r();return}if(e.mtime&&!this.noMtime)try{Ve.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Cl](e))try{Ve.chownSync(e.absolute,this[bl](e),this[El](e))}catch{}r(),e.resume()}[so](e,r){try{return lP.sync(Fr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Of](e,r,n,i){try{Ve[n+"Sync"](r,e.absolute),i(),e.resume()}catch(o){return this[Zt](o,e)}}};Lf.Sync=EP;_P.exports=Lf});var IP=I((zle,kP)=>{"use strict";var mW=va(),Mf=py(),SP=require("fs"),xP=Da(),PP=require("path"),hy=_a();kP.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=mW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&gW(n,e),n.file&&n.sync?vW(n):n.file?yW(n,r):n.sync?wW(n):CW(n)};var gW=(t,e)=>{let r=new Map(e.map(o=>[hy(o),!0])),n=t.filter,i=(o,s)=>{let a=s||PP.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(PP.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(hy(o)):o=>i(hy(o))},vW=t=>{let e=new Mf.Sync(t),r=t.file,n=SP.statSync(r),i=t.maxReadSize||16*1024*1024;new xP.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},yW=(t,e)=>{let r=new Mf(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),SP.stat(i,(c,l)=>{if(c)a(c);else{let u=new xP.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},wW=t=>new Mf.Sync(t),CW=t=>new Mf(t)});var qa=I(Rt=>{"use strict";Rt.c=Rt.create=lx();Rt.r=Rt.replace=Kv();Rt.t=Rt.list=Pf();Rt.u=Rt.update=yx();Rt.x=Rt.extract=IP();Rt.Pack=pf();Rt.Unpack=py();Rt.Parse=xf();Rt.ReadEntry=Yd();Rt.WriteEntry=_v();Rt.Header=Ea();Rt.Pax=Xd();Rt.types=av()});var TP=I((Yle,AP)=>{var $a=1e3,ja=$a*60,Ua=ja*60,bs=Ua*24,bW=bs*7,EW=bs*365.25;AP.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return _W(t);if(r==="number"&&isFinite(t))return e.long?xW(t):SW(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function _W(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*EW;case"weeks":case"week":case"w":return r*bW;case"days":case"day":case"d":return r*bs;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ua;case"minutes":case"minute":case"mins":case"min":case"m":return r*ja;case"seconds":case"second":case"secs":case"sec":case"s":return r*$a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function SW(t){var e=Math.abs(t);return e>=bs?Math.round(t/bs)+"d":e>=Ua?Math.round(t/Ua)+"h":e>=ja?Math.round(t/ja)+"m":e>=$a?Math.round(t/$a)+"s":t+"ms"}function xW(t){var e=Math.abs(t);return e>=bs?qf(t,e,bs,"day"):e>=Ua?qf(t,e,Ua,"hour"):e>=ja?qf(t,e,ja,"minute"):e>=$a?qf(t,e,$a,"second"):t+" ms"}function qf(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var my=I((Jle,RP)=>{function PW(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=TP(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(d||g);m.diff=v,m.prev=d,m.curr=g,d=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let w=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(b,_)=>{if(b==="%%")return"%";w++;let P=r.formatters[_];if(typeof P=="function"){let x=h[w];b=P.call(m,x),h.splice(w,1),w--}return b}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(u):f,set:h=>{f=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+u);return f.log=this.log,f}function i(u){r.save(u),r.names=[],r.skips=[];let d,f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}RP.exports=PW});var DP=I((Mr,$f)=>{Mr.formatArgs=IW;Mr.save=AW;Mr.load=TW;Mr.useColors=kW;Mr.storage=RW();Mr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Mr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function kW(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function IW(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+$f.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Mr.log=console.debug||console.log||(()=>{});function AW(t){try{t?Mr.storage.setItem("debug",t):Mr.storage.removeItem("debug")}catch{}}function TW(){let t;try{t=Mr.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function RW(){try{return localStorage}catch{}}$f.exports=my()(Mr);var{formatters:DW}=$f.exports;DW.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var NP=I((Qle,OP)=>{"use strict";OP.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var MP=I((Xle,FP)=>{"use strict";var OW=require("os"),LP=require("tty"),en=NP(),{env:Ft}=process,jf;en("no-color")||en("no-colors")||en("color=false")||en("color=never")?jf=0:(en("color")||en("colors")||en("color=true")||en("color=always"))&&(jf=1);function NW(){if("FORCE_COLOR"in Ft)return Ft.FORCE_COLOR==="true"?1:Ft.FORCE_COLOR==="false"?0:Ft.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Ft.FORCE_COLOR,10),3)}function LW(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function FW(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=NW();n!==void 0&&(jf=n);let i=r?jf:n;if(i===0)return 0;if(r){if(en("color=16m")||en("color=full")||en("color=truecolor"))return 3;if(en("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(Ft.TERM==="dumb")return o;if(process.platform==="win32"){let s=OW.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Ft)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Ft)||Ft.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Ft)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ft.TEAMCITY_VERSION)?1:0;if(Ft.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ft){let s=Number.parseInt((Ft.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ft.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ft.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ft.TERM)||"COLORTERM"in Ft?1:o}function gy(t,e={}){let r=FW(t,G({streamIsTTY:t&&t.isTTY},e));return LW(r)}FP.exports={supportsColor:gy,stdout:gy({isTTY:LP.isatty(1)}),stderr:gy({isTTY:LP.isatty(2)})}});var $P=I((Ht,Bf)=>{var MW=require("tty"),Uf=require("util");Ht.init=VW;Ht.log=UW;Ht.formatArgs=$W;Ht.save=BW;Ht.load=HW;Ht.useColors=qW;Ht.destroy=Uf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ht.colors=[6,2,3,4,5,1];try{let t=MP();t&&(t.stderr||t).level>=2&&(Ht.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ht.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function qW(){return"colors"in Ht.inspectOpts?Boolean(Ht.inspectOpts.colors):MW.isatty(process.stderr.fd)}function $W(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Bf.exports.humanize(this.diff)+"[0m")}else t[0]=jW()+e+" "+t[0]}function jW(){return Ht.inspectOpts.hideDate?"":new Date().toISOString()+" "}function UW(...t){return process.stderr.write(Uf.format(...t)+`
`)}function BW(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function HW(){return process.env.DEBUG}function VW(t){t.inspectOpts={};let e=Object.keys(Ht.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ht.inspectOpts[e[r]]}Bf.exports=my()(Ht);var{formatters:qP}=Bf.exports;qP.o=function(t){return this.inspectOpts.colors=this.useColors,Uf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};qP.O=function(t){return this.inspectOpts.colors=this.useColors,Uf.inspect(t,this.inspectOpts)}});var yy=I((Zle,vy)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?vy.exports=DP():vy.exports=$P()});var UP=I((eue,jP)=>{var xl;jP.exports=function(){if(!xl){try{xl=yy()("follow-redirects")}catch{}typeof xl!="function"&&(xl=function(){})}xl.apply(null,arguments)}});var Vf=I((tue,Ey)=>{var Es=require("url"),wy=Es.URL,GW=require("http"),WW=require("https"),BP=require("stream").Writable,zW=require("assert"),HP=UP(),_s=["abort","aborted","connect","error","socket","timeout"],Cy=Object.create(null);_s.forEach(function(t){Cy[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var VP=Hf("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),KW=Hf("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),YW=Hf("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),JW=Hf("ERR_STREAM_WRITE_AFTER_END","write after end");function qr(t,e){BP.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}qr.prototype=Object.create(BP.prototype);qr.prototype.abort=function(){zP(this._currentRequest),this.emit("abort")};qr.prototype.write=function(t,e,r){if(this._ending)throw new JW;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new YW),this.abort())};qr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};qr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};qr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};qr.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){qr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(qr.prototype,t,{get:function(){return this._currentRequest[t]}})});qr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};qr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Es.format(this._options),n._redirectable=this;for(var i=0;i<_s.length;i++)n.on(_s[i],Cy[_s[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};qr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(zP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new KW);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],by(/^content-/i,this._options.headers));var n=by(/^host$/i,this._options.headers),i=Es.parse(this._currentUrl),o=n||i.host,s=/^\w+:/.test(r)?this._currentUrl:Es.format(Object.assign(i,{host:o})),a;try{a=Es.resolve(s,r)}catch(u){this.emit("error",new VP(u));return}HP("redirecting to",a),this._isRedirect=!0;var c=Es.parse(a);if(Object.assign(this._options,c),c.host===o||XW(c.host,o)||by(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new VP(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function GP(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=WP(new wy(f))}catch{l=Es.parse(f)}}else wy&&l instanceof wy?l=WP(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,zW.equal(u.protocol,i,"protocol mismatch"),HP("options",u),new qr(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function QW(){}function WP(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function by(t,e){var r;for(var n in e)t.test(n)&&(r=e[n].toString().trim(),delete e[n]);return r}function Hf(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function zP(t){for(var e=0;e<_s.length;e++)t.removeListener(_s[e],Cy[_s[e]]);t.on("error",QW),t.abort()}function XW(t,e){let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}Ey.exports=GP({http:GW,https:WW});Ey.exports.wrap=GP});var Py=I((Sue,ok)=>{ok.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Qf=I((xue,ak)=>{"use strict";var sk=Py();ak.exports=function(e,r){if(!e)return function(i,o){return i?sk(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return sk(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var lk=I((Pue,ck)=>{"use strict";var oz=Qf();ck.exports=function(t){return oz(Object.keys(t))}});var ky=I((kue,uk)=>{"use strict";var sz=Py();uk.exports=function(e,r){return function(n,i){if(n)return sz(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var fk=I((Iue,dk)=>{"use strict";dk.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var hk=I((Aue,pk)=>{"use strict";pk.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var gk=I((Tue,mk)=>{"use strict";mk.exports=function(){return function(e,r){r(!0)}}});var yk=I((Rue,vk)=>{"use strict";vk.exports=function(e){return function(r,n){n(e)}}});var Ck=I((Due,wk)=>{"use strict";wk.exports={keys:lk(),once:ky(),values:Qf(),count:fk(),infinite:hk(),empty:gk(),error:yk()}});var Ha=I((Oue,bk)=>{"use strict";bk.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var _k=I((Nue,Ek)=>{"use strict";var az=Ha();Ek.exports=function(e){return az(null,e)}});var xk=I((Lue,Sk)=>{"use strict";var cz=Ha();Sk.exports=function(e){return cz(function(r){console.log(r)},e)}});var Va=I((Fue,Pk)=>{Pk.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var Ak=I((Mue,Ik)=>{"use strict";function kk(t){return t}var lz=Va(),uz=Ha();Ik.exports=function(e,r){var n=!1;return r?e=lz(e)||kk:(r=e,e=kk),uz(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var Xf=I((que,Tk)=>{"use strict";var dz=Ha();Tk.exports=function(e,r,n){n||(n=r,r=null);var i=dz(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var Dk=I(($ue,Rk)=>{"use strict";var fz=Xf();Rk.exports=function(e){return fz(function(r,n){return r.push(n),r},[],e)}});var Nk=I((jue,Ok)=>{"use strict";var pz=Xf();Ok.exports=function(e){return pz(function(r,n){return r+n},"",e)}});var Fk=I((Uue,Lk)=>{"use strict";Lk.exports={drain:Ha(),onEnd:_k(),log:xk(),find:Ak(),reduce:Xf(),collect:Dk(),concat:Nk()}});var qk=I((Bue,Mk)=>{"use strict";function hz(t){return t}var mz=Va();Mk.exports=function(e){return e?(e=mz(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):hz}});var jk=I((Hue,$k)=>{"use strict";function gz(t){return t}var vz=Va();$k.exports=function(e){if(!e)return gz;e=vz(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(l){r?n=c:c(a)}):o(a,function(l){c(a)})):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n&&n(i)):d?s(d,c):c(null,f)}))})}}}});var Iy=I((Vue,Uk)=>{var yz=Va();function wz(t){return t}Uk.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:yz(e)||wz}});var Zf=I((Gue,Bk)=>{"use strict";var Cz=Iy();Bk.exports=function(e){return e=Cz(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var Vk=I((Wue,Hk)=>{"use strict";var bz=Iy(),Ez=Zf();Hk.exports=function(e){return e=bz(e),Ez(function(r){return!e(r)})}});var Wk=I((zue,Gk)=>{"use strict";Gk.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var Kk=I((Kue,zk)=>{"use strict";zk.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var Ay=I((Yue,Yk)=>{"use strict";function _z(t){return t}var Sz=Va(),xz=Zf();Yk.exports=function(e,r){e=Sz(e)||_z;var n={};return xz(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var Qk=I((Jue,Jk)=>{"use strict";var Pz=Ay();Jk.exports=function(e){return Pz(e,!0)}});var Zk=I((Que,Xk)=>{"use strict";var kz=Qf(),Iz=ky();Xk.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=kz(c):typeof c!="function"&&(c=Iz(c)),r=c,o()})}}}}});var tI=I((Xue,eI)=>{"use strict";eI.exports={map:qk(),asyncMap:jk(),filter:Zf(),filterNot:Vk(),through:Wk(),take:Kk(),unique:Ay(),nonUnique:Qk(),flatten:Zk()}});var Ty=I((Zue,rI)=>{"use strict";rI.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var ep=I((Ps,sI)=>{"use strict";var nI=Ck(),iI=Fk(),oI=tI();Ps=sI.exports=Ty();Ps.pull=Ps;for(Sn in nI)Ps[Sn]=nI[Sn];var Sn;for(Sn in oI)Ps[Sn]=oI[Sn];var Sn;for(Sn in iI)Ps[Sn]=iI[Sn];var Sn});var Wy=I((Ude,SI)=>{var jde=SI.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var PI=I((Bde,xI)=>{var Gz=Wy();xI.exports=function(t,e){return function(r){var n=[],i,o;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(i=!0,s(null)),l=="error"&&(o=u)},queue:s},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,Gz(function d(f){if(!!c)if(u=c,o)c=null,u(o);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,f();if(i=i||h)e.call(a);else if(m!==null&&(t.call(a,m),o||i))return r(o||i,function(){c=null,u(o||i)});f(d)})})}}}});var II=I((Hde,kI)=>{kI.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var DI=I((Vde,RI)=>{"use strict";var Wz=II();function zz(t){return Number.isFinite(t)}function AI(t){return typeof t=="function"}function TI(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}RI.exports=function(t){var e=[],r,n,i=!1,o=Wz(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var f=e.shift();f.cb(null,o.get(f.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function u(){var f=l();f&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,l();o.add(h),u()}))}function d(f){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=TI(f,t),r=f,u()}return d.abort=function(f,p){c=f||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,h){if(AI(p)&&(h=p,p=t),AI(h))e.push({length:zz(f)?f:null,cb:h}),u();else return a=!0,function(m,g){if(i||o.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else TI(r,p)(m,function(v,w){g(v,w)})}},d}});var VI=I((Rs,HI)=>{var Kz=PI(),Yz=DI(),OI=0,NI=1,LI=2,FI="GOODBYE",Jz=Buffer.isBuffer;function MI(t){return typeof t=="string"}function qI(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return MI(t)&&t===FI?(e.fill(0),[e,null]):(MI(n)?(r=NI,n=Buffer.from(n,"utf-8")):Jz(n)?r=OI:(r=LI,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function $I(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function jI(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(OI===e.type)e.value=t;else if(NI===e.type)e.value=t.toString();else if(LI===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function UI(){return Kz(function(t){var e=qI(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function BI(){var t=Yz(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=$I(s);if(a.length===0)return e=!0,i(null,FI);t.read(a.length,function(c,l){if(c)return i(c);try{jI(l,a)}catch(u){return i(u)}i(null,a)})})}}}Rs=HI.exports=function(t){return{source:UI()(t.source),sink:function(e){return t.sink(BI()(e))}}};Rs.encodePair=qI;Rs.decodeHead=$I;Rs.decodeBody=jI;Rs.encode=UI;Rs.decode=BI});var zI=I((Gde,WI)=>{function Hl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}WI.exports=function(t){return new rn(t)};function rn(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}rn.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};rn.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};rn.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new Vl(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};rn.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};rn.prototype.destroy=function(t){t=t||Hl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};rn.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=GI)};function GI(t){console.error("packet-stream asked to read after closed",t)}rn.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};rn.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};rn.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};rn.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:Hl(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Hl(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};rn.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new Vl(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function Vl(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}Vl.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Hl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};Vl.prototype.end=function(t){this.write(null,Hl(t||!0))};Vl.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=GI,this._ps=null)}});var YI=I((Wde,Gl)=>{"use strict";var Qz=ep();function Xz(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function zy(t,e){let r=[],n=!1,i,o,s=Xz((a,c)=>{e&&e(a,c),t=null,e=null,i=null,o&&o(a||!0,()=>{})});return t.read=function(a,c){if(n=n||c,i){let l=i;i=null,l(n,a)}else n||r.push(a);n&&s(n!==!0?n:null)},{source(a,c){a?(t&&t.write(null,a),c(a),s(a!==!0?a:null)):r.length?c(null,r.shift()):n?c(n):i=c},sink(a){if(n)return o=null,a(n,()=>{});o=a,Qz.drain(c=>{if(n)return!1;t.write(c)},c=>{t&&!t.writeEnd&&t.write(null,c||!0),s&&s(c)})(a)}}}function KI(t,e){return zy(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function Zz(t){return KI(t).source}function e4(t,e){return KI(t,e).sink}Gl.exports=zy;Gl.exports.source=Zz;Gl.exports.sink=e4;Gl.exports.duplex=zy});var QI=I((zde,JI)=>{JI.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var Ky=I((Kde,XI)=>{XI.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var lp=I((Yde,eA)=>{"use strict";var ZI=Ky();eA.exports=function(e,r){if(!e)return function(i,o){return i?ZI(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return ZI(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var rA=I((Jde,tA)=>{"use strict";var t4=lp();tA.exports=function(t){return t4(Object.keys(t))}});var Yy=I((Qde,nA)=>{"use strict";var r4=Ky();nA.exports=function(e,r){return function(n,i){if(n)return r4(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var oA=I((Xde,iA)=>{"use strict";iA.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var aA=I((Zde,sA)=>{"use strict";sA.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var lA=I((efe,cA)=>{"use strict";cA.exports=function(){return function(e,r){r(!0)}}});var dA=I((tfe,uA)=>{"use strict";uA.exports=function(e){return function(r,n){n(e)}}});var pA=I((rfe,fA)=>{"use strict";fA.exports={keys:rA(),once:Yy(),values:lp(),count:oA(),infinite:aA(),empty:lA(),error:dA()}});var Ya=I((nfe,hA)=>{"use strict";hA.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var gA=I((ife,mA)=>{"use strict";var n4=Ya();mA.exports=function(e){return n4(null,e)}});var yA=I((ofe,vA)=>{"use strict";var i4=Ya();vA.exports=function(e){return i4(function(r){console.log(r)},e)}});var Ja=I((sfe,wA)=>{wA.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var EA=I((afe,bA)=>{"use strict";function CA(t){return t}var o4=Ja(),s4=Ya();bA.exports=function(e,r){var n=!1;return r?e=o4(e)||CA:(r=e,e=CA),s4(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var up=I((cfe,_A)=>{"use strict";var a4=Ya();_A.exports=function(e,r,n){n||(n=r,r=null);var i=a4(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var xA=I((lfe,SA)=>{"use strict";var c4=up();SA.exports=function(e){return c4(function(r,n){return r.push(n),r},[],e)}});var kA=I((ufe,PA)=>{"use strict";var l4=up();PA.exports=function(e){return l4(function(r,n){return r+n},"",e)}});var AA=I((dfe,IA)=>{"use strict";IA.exports={drain:Ya(),onEnd:gA(),log:yA(),find:EA(),reduce:up(),collect:xA(),concat:kA()}});var RA=I((ffe,TA)=>{"use strict";function u4(t){return t}var d4=Ja();TA.exports=function(e){return e?(e=d4(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):u4}});var OA=I((pfe,DA)=>{"use strict";function f4(t){return t}var p4=Ja();DA.exports=function(e){if(!e)return f4;e=p4(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n(i)):d?s(d,c):c(null,f)}))})}}}});var Jy=I((hfe,NA)=>{var h4=Ja();function m4(t){return t}NA.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:h4(e)||m4}});var dp=I((mfe,LA)=>{"use strict";var g4=Jy();LA.exports=function(e){return e=g4(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var MA=I((gfe,FA)=>{"use strict";var v4=Jy(),y4=dp();FA.exports=function(e){return e=v4(e),y4(function(r){return!e(r)})}});var $A=I((vfe,qA)=>{"use strict";qA.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var UA=I((yfe,jA)=>{"use strict";jA.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var Qy=I((wfe,BA)=>{"use strict";function w4(t){return t}var C4=Ja(),b4=dp();BA.exports=function(e,r){e=C4(e)||w4;var n={};return b4(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var VA=I((Cfe,HA)=>{"use strict";var E4=Qy();HA.exports=function(e){return E4(e,!0)}});var WA=I((bfe,GA)=>{"use strict";var _4=lp(),S4=Yy();GA.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=_4(c):typeof c!="function"&&(c=S4(c)),r=c,o()})}}}}});var KA=I((Efe,zA)=>{"use strict";zA.exports={map:RA(),asyncMap:OA(),filter:dp(),filterNot:MA(),through:$A(),take:UA(),unique:Qy(),nonUnique:VA(),flatten:WA()}});var JA=I((_fe,YA)=>{"use strict";YA.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var tT=I((Wl,eT)=>{"use strict";var QA=pA(),XA=AA(),ZA=KA();Wl=eT.exports=JA();for(xn in QA)Wl[xn]=QA[xn];var xn;for(xn in ZA)Wl[xn]=ZA[xn];var xn;for(xn in XA)Wl[xn]=XA[xn];var xn});var nT=I((Sfe,rT)=>{var x4=QI(),Xy=tT();rT.exports=function(t,e){e=e||"GOODBYE";var r=x4(e);return{source:Xy(t.source,r),sink:Xy(Xy.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var zl=I(Pn=>{"use strict";var fp=ep();function P4(t){return t?Object.keys(t).length===0:!0}Pn.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};Pn.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};Pn.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function k4(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function I4(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;P4(n[o])&&delete n[o]})(t,0)}function A4(t,e){for(let r in e)t[r]=e[r];return t}Pn.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return A4(k4(e,r),n)};Pn.unmount=function(e,r){return I4(e,r)};var pp=t=>t==="source",hp=t=>t==="sink",iT=t=>t==="duplex",T4=t=>t==="sync",R4=t=>t==="async",oT=t=>T4(t)||R4(t),D4=t=>pp(t)||hp(t)||iT(t);Pn.isRequest=oT;Pn.isStream=D4;function Zy(t){return function(e){e(t||!0,()=>{})}}function sT(t){return{source:fp.error(t),sink:Zy(t)}}Pn.errorAsStream=function(e,r){return pp(e)?fp.error(r):hp(e)?Zy(r):sT(r)};Pn.errorAsStreamOrCb=function(e,r,n){return oT(e)?n(r):pp(e)?fp.error(r):hp(e)?Zy(r):n(r),sT(r)};Pn.pipeToStream=function(e,r,n){pp(e)?r(n):hp(e)?n(r):iT(e)&&fp(r,n,r)}});var ew=I((kfe,cT)=>{function aT(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function O4(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var Pfe=cT.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=O4(aT(r).slice(1),aT(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var dT=I((Ife,uT)=>{"use strict";var N4=zI(),tw=YI(),L4=nT(),Qa=zl(),lT=ew();uT.exports=function(e,r,n){let i=N4({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,d=!1;l.push((f,p)=>{d=!0,u=!0,a(f,p)});try{e("async",c,l)}catch(f){if(u||d)throw lT(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:d,args:f}=c,p,h;if(s.read=null,!Qa.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{h=e(d,u,f)}catch(v){p=v}let g=tw[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return Qa.pipeToStream(d,g,p?Qa.errorAsStream(d,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=L4(tw(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,l){if(a==="emit")return i.message(c);if(!(Qa.isRequest(s)||Qa.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(Qa.isRequest(s))return i.request({name:a,args:c},l);let u=i.stream(),d=tw[s](u,l);return u.write({name:a,args:c,type:s}),d},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw lT(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var pT=I((Afe,fT)=>{"use strict";var F4=ew(),M4=zl();function rw(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=rw({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function q4(t){if(t)throw F4(t,"callback not provided")}function $4(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:q4;if(typeof c=="function"){let l;try{l=r(o,s,a,c)}catch(u){return M4.errorAsStreamOrCb(o,u,c)}return l}else return new Promise((l,u)=>{r(o,s,a,(d,f)=>{d?u(d):l(f)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);rw(t,s,null,i),n(null,s,t)}]):rw(t,e,null,i),t}fT.exports=$4});var gT=I((Tfe,mT)=>{"use strict";var mp=zl();function hT(t){return Array.isArray(t)?t:t.split(".")}function j4(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}mT.exports=function(e){if(j4(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)mp.set(r,hT(s),!0)}else r=null;if(o.deny)for(let s of o.deny)mp.set(n,hT(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!mp.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&mp.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var yT=I((Rfe,vT)=>{"use strict";var U4=gT(),nw=zl();vT.exports=function(e,r,n){n=U4(n);function i(s,a){return s===nw.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let l=c.pop(),u;try{u=nw.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return nw.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return o.call(this,a,c,l)}}});var bT=I((Dfe,CT)=>{"use strict";var B4=VI(),H4=require("events").EventEmitter,V4=dT(),G4=pT(),W4=yT();function wT(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new H4;o||(o=B4);let l,u={_emit(f,p){return c&&c._emit(f,p),u},id:n},d=V4(W4(r,e,i).bind(u),o,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(f)}});if(G4(c,t,(f,p,h,m)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let f=!0;c.createStream=p=>{if(l=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}CT.exports=function(t,e,r){return arguments.length>3?wT.apply(this,arguments):function(n,i,o){return wT(t,e,n,o,i,r,!0)}}});var xT=I((xi,ST)=>{var Ofe=Ty(),z4=Wy();function ET(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function _T(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){z4(function(u){t(null,function(d,f){if(n=n||d,d===!0)return e._isStdio?s():e.end();if(n=n||d)return ET(e),s(n);if(e._isStdio)e.write(f,function(){u()});else{var p=e.write(f);p===!1?e.once("drain",u):u()}})})})}function K4(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function gp(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),ET(t)}else r.push(c),s()}}var Y4=gp,vp=function(t,e){return function(r){return _T(r,t,e)}},yp=function(t){return gp(t)};xi=ST.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return _T(r,t,e),gp(t)}:vp(t,e):yp(t)};xi.sink=vp;xi.source=yp;xi.read=Y4;xi.read1=gp;xi.read2=K4;xi.duplex=function(t,e){return{source:yp(t),sink:vp(t,e)}};xi.transform=function(t){return function(e){var r=yp(t);return vp(t)(e),r}}});var kT=I((Nfe,wp)=>{var J4=require("stream");wp.exports=iw;wp.exports.source=function(t){return iw(null,t)};wp.exports.sink=function(t){return iw(t,null)};var PT=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function iw(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new J4;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?m():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((i=i||g)?v(i):r.push(v),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,f=!1;if(s.sink=function(g){e=g,PT(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&PT(s.resume.bind(s)),w};var h=s.pipe.bind(s);s.pipe=function(g,v){var w=h(g,v);return s.paused&&s.resume(),w}}function m(){if(d=!1,!(!e||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");f=!0,e(null,function g(v,w){f=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(w),d=!0):v&&(i=v)!==!0?s.emit("error",v):(i=i||v)?s.emit("end"):(s.emit("data",w),f=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var AT=I((Lfe,IT)=>{IT.exports=Q4;function Q4(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function o(d,f){d&&(n=d,i&&u(n)),i=f,l()}var s;function a(d){s=s||d||!0,l()}function c(d){if(!s){if(i){u(n,d);return}r.push(d)}}if(t)return{push:c,end:a,source:o,buffer:r};return o.push=c,o.end=a,o.buffer=r,o;function l(){!i||(n?u(n):!r.length&&s?u(s):r.length&&u(null,r.shift()))}function u(d,f){var p=i;if(d&&e){var h=e;e=null,h(d===!0?null:d)}i=null,p(d,f)}}});var pw=I((spe,MT)=>{"use strict";var LT=require("child_process"),c6=1024*1024,FT={exec(t,e){LT.exec(t,{maxBuffer:2*c6,windowsHide:!0},e)},spawn(t,e,r){return LT.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=FT.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n|\n|\r)/).filter(o=>o.trim().length>0),r=e.shift().trim().match(/(\w+\s*)/g);if(!r)return[];let n=[],i=r.map((o,s)=>{let a=[];return s===0?(a[0]=0,a[1]=o.length):(a[0]=n[s-1][1],a[1]=a[0]+o.length),n.push(a),o.trim()});return n[n.length-1][1]=1/0,e.map(o=>{let s={};return n.forEach((a,c)=>{let l=i[c],u=o.substring(a[0],a[1]).trim();s[l]=u}),s})}};MT.exports=FT});var $T=I((ape,qT)=>{"use strict";var l6=require("os"),Pp=require("fs"),nn=pw(),u6=t=>new Promise((e,r)=>{Pp.existsSync(t)?e():Pp.mkdir(t,n=>{n?r(n):e()})}),hw={darwin(t){return new Promise((e,r)=>{nn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=nn.stripLine(i.toString(),2),a=nn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";nn.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=nn.stripLine(o.toString(),2),l=nn.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);if(d&&d[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{nn.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=nn.stripLine(i.toString(),4),a=nn.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=l6.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';u6(n).then(()=>{nn.exec(o,()=>{Pp.readFile(i,"utf8",(s,a)=>{if(Pp.unlink(i,()=>{}),s)r(s);else{a=nn.stripLine(a,2);let c=nn.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function d6(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in hw))return n(new Error(`platform ${e} is unsupported`));let i=hw[e];typeof i=="string"&&(i=hw[i]),i(t).then(r,n)})}qT.exports=d6});var HT=I((cpe,BT)=>{"use strict";var kp=require("path"),lo=pw();function mw(t,e){return e?t&&t.match?t.match(e):!1:!0}function jT(t){let e=t.split(kp.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(kp.sep)}function UT(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return kp.basename(t.substring(0,e))}return kp.basename(t)}var gw={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",lo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=lo.stripLine(o.toString(),1),l=lo.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?mw(u[4],t.name):!!u[0]).map(u=>{let d=String(u[4]),f=jT(d);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:UT(f),bin:f,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="WMIC path win32_process get Name,Processid,ParentProcessId,Commandline,ExecutablePath",i=[],o=lo.spawn("cmd",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=lo.parseTable(i.join(`
`)).filter(c=>"pid"in t?c.ProcessId===String(t.pid):t.name?t.strict?c.Name===t.name||c.Name.endsWith(".exe")&&c.Name.slice(0,-4)===t.name:mw(c.CommandLine||c.Name,t.name):!0).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name,cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";lo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=lo.stripLine(o.toString(),1),l=lo.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?mw(u[1],t.name):!!u[0]).map(u=>{let d=String(u[1]),f=jT(d);return{pid:parseInt(u[0],10),name:UT(f),bin:f,cmd:d}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function f6(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in gw))return n(new Error(`platform ${e} is unsupported`));let i=gw[e];typeof i=="string"&&(i=gw[i]),i(t).then(r,n)})}BT.exports=f6});var WT=I((lpe,GT)=>{"use strict";var p6=$T(),VT=HT(),vw={port(t,e){return p6(t,e).then(r=>vw.pid(r,e),()=>[])},pid(t,e){return VT({pid:t,strict:e})},name(t,e){return VT({name:t,strict:e})}};function h6(t,e,r){return new Promise((n,i)=>{t in vw?t==="pid"&&typeof e!="number"?i(new Error("pid must be a number")):t==="port"&&typeof e!="number"?i(new Error("port must be a number")):vw[t](e,r).then(n,i):i(new Error(`do not support find by "${t}"`))})}GT.exports=h6});var KT=I((upe,zT)=>{"use strict";zT.exports=WT()});var uu=I((Bhe,_D)=>{var PY="2.0.0",kY=256,IY=Number.MAX_SAFE_INTEGER||9007199254740991,AY=16;_D.exports={SEMVER_SPEC_VERSION:PY,MAX_LENGTH:kY,MAX_SAFE_INTEGER:IY,MAX_SAFE_COMPONENT_LENGTH:AY}});var du=I((Hhe,SD)=>{var TY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};SD.exports=TY});var qs=I((bo,xD)=>{var{MAX_SAFE_COMPONENT_LENGTH:Yw}=uu(),RY=du();bo=xD.exports={};var DY=bo.re=[],de=bo.src=[],fe=bo.t={},OY=0,Ie=(t,e,r)=>{let n=OY++;RY(n,e),fe[t]=n,de[n]=e,DY[n]=new RegExp(e,r?"g":void 0)};Ie("NUMERICIDENTIFIER","0|[1-9]\\d*");Ie("NUMERICIDENTIFIERLOOSE","[0-9]+");Ie("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ie("MAINVERSION",`(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})`);Ie("MAINVERSIONLOOSE",`(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})`);Ie("PRERELEASEIDENTIFIER",`(?:${de[fe.NUMERICIDENTIFIER]}|${de[fe.NONNUMERICIDENTIFIER]})`);Ie("PRERELEASEIDENTIFIERLOOSE",`(?:${de[fe.NUMERICIDENTIFIERLOOSE]}|${de[fe.NONNUMERICIDENTIFIER]})`);Ie("PRERELEASE",`(?:-(${de[fe.PRERELEASEIDENTIFIER]}(?:\\.${de[fe.PRERELEASEIDENTIFIER]})*))`);Ie("PRERELEASELOOSE",`(?:-?(${de[fe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${de[fe.PRERELEASEIDENTIFIERLOOSE]})*))`);Ie("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ie("BUILD",`(?:\\+(${de[fe.BUILDIDENTIFIER]}(?:\\.${de[fe.BUILDIDENTIFIER]})*))`);Ie("FULLPLAIN",`v?${de[fe.MAINVERSION]}${de[fe.PRERELEASE]}?${de[fe.BUILD]}?`);Ie("FULL",`^${de[fe.FULLPLAIN]}$`);Ie("LOOSEPLAIN",`[v=\\s]*${de[fe.MAINVERSIONLOOSE]}${de[fe.PRERELEASELOOSE]}?${de[fe.BUILD]}?`);Ie("LOOSE",`^${de[fe.LOOSEPLAIN]}$`);Ie("GTLT","((?:<|>)?=?)");Ie("XRANGEIDENTIFIERLOOSE",`${de[fe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ie("XRANGEIDENTIFIER",`${de[fe.NUMERICIDENTIFIER]}|x|X|\\*`);Ie("XRANGEPLAIN",`[v=\\s]*(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:${de[fe.PRERELEASE]})?${de[fe.BUILD]}?)?)?`);Ie("XRANGEPLAINLOOSE",`[v=\\s]*(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:${de[fe.PRERELEASELOOSE]})?${de[fe.BUILD]}?)?)?`);Ie("XRANGE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAIN]}$`);Ie("XRANGELOOSE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAINLOOSE]}$`);Ie("COERCE",`(^|[^\\d])(\\d{1,${Yw}})(?:\\.(\\d{1,${Yw}}))?(?:\\.(\\d{1,${Yw}}))?(?:$|[^\\d])`);Ie("COERCERTL",de[fe.COERCE],!0);Ie("LONETILDE","(?:~>?)");Ie("TILDETRIM",`(\\s*)${de[fe.LONETILDE]}\\s+`,!0);bo.tildeTrimReplace="$1~";Ie("TILDE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAIN]}$`);Ie("TILDELOOSE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAINLOOSE]}$`);Ie("LONECARET","(?:\\^)");Ie("CARETTRIM",`(\\s*)${de[fe.LONECARET]}\\s+`,!0);bo.caretTrimReplace="$1^";Ie("CARET",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAIN]}$`);Ie("CARETLOOSE",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAINLOOSE]}$`);Ie("COMPARATORLOOSE",`^${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]})$|^$`);Ie("COMPARATOR",`^${de[fe.GTLT]}\\s*(${de[fe.FULLPLAIN]})$|^$`);Ie("COMPARATORTRIM",`(\\s*)${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]}|${de[fe.XRANGEPLAIN]})`,!0);bo.comparatorTrimReplace="$1$2$3";Ie("HYPHENRANGE",`^\\s*(${de[fe.XRANGEPLAIN]})\\s+-\\s+(${de[fe.XRANGEPLAIN]})\\s*$`);Ie("HYPHENRANGELOOSE",`^\\s*(${de[fe.XRANGEPLAINLOOSE]})\\s+-\\s+(${de[fe.XRANGEPLAINLOOSE]})\\s*$`);Ie("STAR","(<|>)?=?\\s*\\*");Ie("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ie("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var fu=I((Vhe,PD)=>{var NY=["includePrerelease","loose","rtl"],LY=t=>t?typeof t!="object"?{loose:!0}:NY.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};PD.exports=LY});var Qp=I((Ghe,AD)=>{var kD=/^[0-9]+$/,ID=(t,e)=>{let r=kD.test(t),n=kD.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},FY=(t,e)=>ID(e,t);AD.exports={compareIdentifiers:ID,rcompareIdentifiers:FY}});var ir=I((Whe,OD)=>{var Xp=du(),{MAX_LENGTH:TD,MAX_SAFE_INTEGER:Zp}=uu(),{re:RD,t:DD}=qs(),MY=fu(),{compareIdentifiers:pu}=Qp(),sn=class{constructor(e,r){if(r=MY(r),e instanceof sn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>TD)throw new TypeError(`version is longer than ${TD} characters`);Xp("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?RD[DD.LOOSE]:RD[DD.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Zp||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Zp||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Zp||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Zp)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Xp("SemVer.compare",this.version,this.options,e),!(e instanceof sn)){if(typeof e=="string"&&e===this.version)return 0;e=new sn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof sn||(e=new sn(e,this.options)),pu(this.major,e.major)||pu(this.minor,e.minor)||pu(this.patch,e.patch)}comparePre(e){if(e instanceof sn||(e=new sn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Xp("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return pu(n,i)}while(++r)}compareBuild(e){e instanceof sn||(e=new sn(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Xp("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return pu(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};OD.exports=sn});var $s=I((zhe,MD)=>{var{MAX_LENGTH:qY}=uu(),{re:ND,t:LD}=qs(),FD=ir(),$Y=fu(),jY=(t,e)=>{if(e=$Y(e),t instanceof FD)return t;if(typeof t!="string"||t.length>qY||!(e.loose?ND[LD.LOOSE]:ND[LD.FULL]).test(t))return null;try{return new FD(t,e)}catch{return null}};MD.exports=jY});var $D=I((Khe,qD)=>{var UY=$s(),BY=(t,e)=>{let r=UY(t,e);return r?r.version:null};qD.exports=BY});var UD=I((Yhe,jD)=>{var HY=$s(),VY=(t,e)=>{let r=HY(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};jD.exports=VY});var HD=I((Jhe,BD)=>{var GY=ir(),WY=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new GY(t,r).inc(e,n).version}catch{return null}};BD.exports=WY});var an=I((Qhe,GD)=>{var VD=ir(),zY=(t,e,r)=>new VD(t,r).compare(new VD(e,r));GD.exports=zY});var eh=I((Xhe,WD)=>{var KY=an(),YY=(t,e,r)=>KY(t,e,r)===0;WD.exports=YY});var YD=I((Zhe,KD)=>{var zD=$s(),JY=eh(),QY=(t,e)=>{if(JY(t,e))return null;{let r=zD(t),n=zD(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};KD.exports=QY});var QD=I((eme,JD)=>{var XY=ir(),ZY=(t,e)=>new XY(t,e).major;JD.exports=ZY});var ZD=I((tme,XD)=>{var e8=ir(),t8=(t,e)=>new e8(t,e).minor;XD.exports=t8});var tO=I((rme,eO)=>{var r8=ir(),n8=(t,e)=>new r8(t,e).patch;eO.exports=n8});var nO=I((nme,rO)=>{var i8=$s(),o8=(t,e)=>{let r=i8(t,e);return r&&r.prerelease.length?r.prerelease:null};rO.exports=o8});var oO=I((ime,iO)=>{var s8=an(),a8=(t,e,r)=>s8(e,t,r);iO.exports=a8});var aO=I((ome,sO)=>{var c8=an(),l8=(t,e)=>c8(t,e,!0);sO.exports=l8});var th=I((sme,lO)=>{var cO=ir(),u8=(t,e,r)=>{let n=new cO(t,r),i=new cO(e,r);return n.compare(i)||n.compareBuild(i)};lO.exports=u8});var dO=I((ame,uO)=>{var d8=th(),f8=(t,e)=>t.sort((r,n)=>d8(r,n,e));uO.exports=f8});var pO=I((cme,fO)=>{var p8=th(),h8=(t,e)=>t.sort((r,n)=>p8(n,r,e));fO.exports=h8});var hu=I((lme,hO)=>{var m8=an(),g8=(t,e,r)=>m8(t,e,r)>0;hO.exports=g8});var rh=I((ume,mO)=>{var v8=an(),y8=(t,e,r)=>v8(t,e,r)<0;mO.exports=y8});var Jw=I((dme,gO)=>{var w8=an(),C8=(t,e,r)=>w8(t,e,r)!==0;gO.exports=C8});var nh=I((fme,vO)=>{var b8=an(),E8=(t,e,r)=>b8(t,e,r)>=0;vO.exports=E8});var ih=I((pme,yO)=>{var _8=an(),S8=(t,e,r)=>_8(t,e,r)<=0;yO.exports=S8});var Qw=I((hme,wO)=>{var x8=eh(),P8=Jw(),k8=hu(),I8=nh(),A8=rh(),T8=ih(),R8=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return x8(t,r,n);case"!=":return P8(t,r,n);case">":return k8(t,r,n);case">=":return I8(t,r,n);case"<":return A8(t,r,n);case"<=":return T8(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};wO.exports=R8});var bO=I((mme,CO)=>{var D8=ir(),O8=$s(),{re:oh,t:sh}=qs(),N8=(t,e)=>{if(t instanceof D8)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(oh[sh.COERCE]);else{let n;for(;(n=oh[sh.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),oh[sh.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;oh[sh.COERCERTL].lastIndex=-1}return r===null?null:O8(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};CO.exports=N8});var IO=I((gme,kO)=>{"use strict";var L8=al(),js=Symbol("max"),Di=Symbol("length"),ac=Symbol("lengthCalculator"),mu=Symbol("allowStale"),Us=Symbol("maxAge"),Oi=Symbol("dispose"),EO=Symbol("noDisposeOnSet"),jt=Symbol("lruList"),An=Symbol("cache"),_O=Symbol("updateAgeOnGet"),Xw=()=>1,SO=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[js]=e.max||1/0,n=e.length||Xw;if(this[ac]=typeof n!="function"?Xw:n,this[mu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Us]=e.maxAge||0,this[Oi]=e.dispose,this[EO]=e.noDisposeOnSet||!1,this[_O]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[js]=e||1/0,gu(this)}get max(){return this[js]}set allowStale(e){this[mu]=!!e}get allowStale(){return this[mu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Us]=e,gu(this)}get maxAge(){return this[Us]}set lengthCalculator(e){typeof e!="function"&&(e=Xw),e!==this[ac]&&(this[ac]=e,this[Di]=0,this[jt].forEach(r=>{r.length=this[ac](r.value,r.key),this[Di]+=r.length})),gu(this)}get lengthCalculator(){return this[ac]}get length(){return this[Di]}get itemCount(){return this[jt].length}rforEach(e,r){r=r||this;for(let n=this[jt].tail;n!==null;){let i=n.prev;PO(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[jt].head;n!==null;){let i=n.next;PO(this,e,n,r),n=i}}keys(){return this[jt].toArray().map(e=>e.key)}values(){return this[jt].toArray().map(e=>e.value)}reset(){this[Oi]&&this[jt]&&this[jt].length&&this[jt].forEach(e=>this[Oi](e.key,e.value)),this[An]=new Map,this[jt]=new L8,this[Di]=0}dump(){return this[jt].map(e=>ah(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[jt]}set(e,r,n){if(n=n||this[Us],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[ac](r,e);if(this[An].has(e)){if(o>this[js])return cc(this,this[An].get(e)),!1;let c=this[An].get(e).value;return this[Oi]&&(this[EO]||this[Oi](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Di]+=o-c.length,c.length=o,this.get(e),gu(this),!0}let s=new xO(e,r,o,i,n);return s.length>this[js]?(this[Oi]&&this[Oi](e,r),!1):(this[Di]+=s.length,this[jt].unshift(s),this[An].set(e,this[jt].head),gu(this),!0)}has(e){if(!this[An].has(e))return!1;let r=this[An].get(e).value;return!ah(this,r)}get(e){return Zw(this,e,!0)}peek(e){return Zw(this,e,!1)}pop(){let e=this[jt].tail;return e?(cc(this,e),e.value):null}del(e){cc(this,this[An].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[An].forEach((e,r)=>Zw(this,r,!1))}},Zw=(t,e,r)=>{let n=t[An].get(e);if(n){let i=n.value;if(ah(t,i)){if(cc(t,n),!t[mu])return}else r&&(t[_O]&&(n.value.now=Date.now()),t[jt].unshiftNode(n));return i.value}},ah=(t,e)=>{if(!e||!e.maxAge&&!t[Us])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Us]&&r>t[Us]},gu=t=>{if(t[Di]>t[js])for(let e=t[jt].tail;t[Di]>t[js]&&e!==null;){let r=e.prev;cc(t,e),e=r}},cc=(t,e)=>{if(e){let r=e.value;t[Oi]&&t[Oi](r.key,r.value),t[Di]-=r.length,t[An].delete(r.key),t[jt].removeNode(e)}},xO=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},PO=(t,e,r,n)=>{let i=r.value;ah(t,i)&&(cc(t,r),t[mu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};kO.exports=SO});var cn=I((vme,DO)=>{var lc=class{constructor(e,r){if(r=M8(r),e instanceof lc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new lc(e.raw,r);if(e instanceof eC)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!TO(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&B8(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=AO.get(n);if(i)return i;let o=this.options.loose,s=o?or[Gt.HYPHENRANGELOOSE]:or[Gt.HYPHENRANGE];e=e.replace(s,X8(this.options.includePrerelease)),Ct("hyphen replace",e),e=e.replace(or[Gt.COMPARATORTRIM],$8),Ct("comparator trim",e,or[Gt.COMPARATORTRIM]),e=e.replace(or[Gt.TILDETRIM],j8),e=e.replace(or[Gt.CARETTRIM],U8),e=e.split(/\s+/).join(" ");let a=o?or[Gt.COMPARATORLOOSE]:or[Gt.COMPARATOR],c=e.split(" ").map(f=>H8(f,this.options)).join(" ").split(/\s+/).map(f=>Q8(f,this.options)).filter(this.options.loose?f=>!!f.match(a):()=>!0).map(f=>new eC(f,this.options)),l=c.length,u=new Map;for(let f of c){if(TO(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return AO.set(n,d),d}intersects(e,r){if(!(e instanceof lc))throw new TypeError("a Range is required");return this.set.some(n=>RO(n,r)&&e.set.some(i=>RO(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new q8(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Z8(this.set[r],e,this.options))return!0;return!1}};DO.exports=lc;var F8=IO(),AO=new F8({max:1e3}),M8=fu(),eC=vu(),Ct=du(),q8=ir(),{re:or,t:Gt,comparatorTrimReplace:$8,tildeTrimReplace:j8,caretTrimReplace:U8}=qs(),TO=t=>t.value==="<0.0.0-0",B8=t=>t.value==="",RO=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},H8=(t,e)=>(Ct("comp",t,e),t=W8(t,e),Ct("caret",t),t=V8(t,e),Ct("tildes",t),t=K8(t,e),Ct("xrange",t),t=J8(t,e),Ct("stars",t),t),fr=t=>!t||t.toLowerCase()==="x"||t==="*",V8=(t,e)=>t.trim().split(/\s+/).map(r=>G8(r,e)).join(" "),G8=(t,e)=>{let r=e.loose?or[Gt.TILDELOOSE]:or[Gt.TILDE];return t.replace(r,(n,i,o,s,a)=>{Ct("tilde",t,n,i,o,s,a);let c;return fr(i)?c="":fr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:fr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ct("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ct("tilde return",c),c})},W8=(t,e)=>t.trim().split(/\s+/).map(r=>z8(r,e)).join(" "),z8=(t,e)=>{Ct("caret",t,e);let r=e.loose?or[Gt.CARETLOOSE]:or[Gt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Ct("caret",t,i,o,s,a,c);let l;return fr(o)?l="":fr(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:fr(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Ct("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ct("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ct("caret return",l),l})},K8=(t,e)=>(Ct("replaceXRanges",t,e),t.split(/\s+/).map(r=>Y8(r,e)).join(" ")),Y8=(t,e)=>{t=t.trim();let r=e.loose?or[Gt.XRANGELOOSE]:or[Gt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Ct("xRange",t,n,i,o,s,a,c);let l=fr(o),u=l||fr(s),d=u||fr(a),f=d;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ct("xRange return",n),n})},J8=(t,e)=>(Ct("replaceStars",t,e),t.trim().replace(or[Gt.STAR],"")),Q8=(t,e)=>(Ct("replaceGTE0",t,e),t.trim().replace(or[e.includePrerelease?Gt.GTE0PRE:Gt.GTE0],"")),X8=t=>(e,r,n,i,o,s,a,c,l,u,d,f,p)=>(fr(n)?r="":fr(i)?r=`>=${n}.0.0${t?"-0":""}`:fr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,fr(l)?c="":fr(u)?c=`<${+l+1}.0.0-0`:fr(d)?c=`<${l}.${+u+1}.0-0`:f?c=`<=${l}.${u}.${d}-${f}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Z8=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ct(t[n].semver),t[n].semver!==eC.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var vu=I((yme,MO)=>{var yu=Symbol("SemVer ANY"),wu=class{static get ANY(){return yu}constructor(e,r){if(r=e5(r),e instanceof wu){if(e.loose===!!r.loose)return e;e=e.value}rC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===yu?this.value="":this.value=this.operator+this.semver.version,rC("comp",this)}parse(e){let r=this.options.loose?OO[NO.COMPARATORLOOSE]:OO[NO.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new LO(n[2],this.options.loose):this.semver=yu}toString(){return this.value}test(e){if(rC("Comparator.test",e,this.options.loose),this.semver===yu||e===yu)return!0;if(typeof e=="string")try{e=new LO(e,this.options)}catch{return!1}return tC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof wu))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new FO(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new FO(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=tC(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=tC(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};MO.exports=wu;var e5=fu(),{re:OO,t:NO}=qs(),tC=Qw(),rC=du(),LO=ir(),FO=cn()});var Cu=I((wme,qO)=>{var t5=cn(),r5=(t,e,r)=>{try{e=new t5(e,r)}catch{return!1}return e.test(t)};qO.exports=r5});var jO=I((Cme,$O)=>{var n5=cn(),i5=(t,e)=>new n5(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));$O.exports=i5});var BO=I((bme,UO)=>{var o5=ir(),s5=cn(),a5=(t,e,r)=>{let n=null,i=null,o=null;try{o=new s5(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new o5(n,r))}),n};UO.exports=a5});var VO=I((Eme,HO)=>{var c5=ir(),l5=cn(),u5=(t,e,r)=>{let n=null,i=null,o=null;try{o=new l5(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new c5(n,r))}),n};HO.exports=u5});var zO=I((_me,WO)=>{var nC=ir(),d5=cn(),GO=hu(),f5=(t,e)=>{t=new d5(t,e);let r=new nC("0.0.0");if(t.test(r)||(r=new nC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new nC(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||GO(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||GO(r,o))&&(r=o)}return r&&t.test(r)?r:null};WO.exports=f5});var YO=I((Sme,KO)=>{var p5=cn(),h5=(t,e)=>{try{return new p5(t,e).range||"*"}catch{return null}};KO.exports=h5});var ch=I((xme,ZO)=>{var m5=ir(),JO=vu(),{ANY:g5}=JO,v5=cn(),y5=Cu(),QO=hu(),XO=rh(),w5=ih(),C5=nh(),b5=(t,e,r,n)=>{t=new m5(t,n),e=new v5(e,n);let i,o,s,a,c;switch(r){case">":i=QO,o=w5,s=XO,a=">",c=">=";break;case"<":i=XO,o=C5,s=QO,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(y5(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,f=null;if(u.forEach(p=>{p.semver===g5&&(p=new JO(">=0.0.0")),d=d||p,f=f||p,i(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};ZO.exports=b5});var tN=I((Pme,eN)=>{var E5=ch(),_5=(t,e,r)=>E5(t,e,">",r);eN.exports=_5});var nN=I((kme,rN)=>{var S5=ch(),x5=(t,e,r)=>S5(t,e,"<",r);rN.exports=x5});var sN=I((Ime,oN)=>{var iN=cn(),P5=(t,e,r)=>(t=new iN(t,r),e=new iN(e,r),t.intersects(e));oN.exports=P5});var cN=I((Ame,aN)=>{var k5=Cu(),I5=an();aN.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,d)=>I5(u,d,r));for(let u of s)k5(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var pN=I((Tme,fN)=>{var lN=cn(),lh=vu(),{ANY:iC}=lh,bu=Cu(),oC=an(),A5=(t,e,r={})=>{if(t===e)return!0;t=new lN(t,r),e=new lN(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=T5(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},T5=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===iC){if(e.length===1&&e[0].semver===iC)return!0;r.includePrerelease?t=[new lh(">=0.0.0-0")]:t=[new lh(">=0.0.0")]}if(e.length===1&&e[0].semver===iC){if(r.includePrerelease)return!0;e=[new lh(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=uN(i,p,r):p.operator==="<"||p.operator==="<="?o=dN(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=oC(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!bu(p,String(i),r)||o&&!bu(p,String(o),r))return null;for(let h of e)if(!bu(p,String(h),r))return!1;return!0}let a,c,l,u,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=uN(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!bu(i.semver,String(p),r))return!1}if(o){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=dN(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!bu(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||f||d)},uN=(t,e,r)=>{if(!t)return e;let n=oC(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},dN=(t,e,r)=>{if(!t)return e;let n=oC(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};fN.exports=A5});var mN=I((Rme,hN)=>{var sC=qs();hN.exports={re:sC.re,src:sC.src,tokens:sC.t,SEMVER_SPEC_VERSION:uu().SEMVER_SPEC_VERSION,SemVer:ir(),compareIdentifiers:Qp().compareIdentifiers,rcompareIdentifiers:Qp().rcompareIdentifiers,parse:$s(),valid:$D(),clean:UD(),inc:HD(),diff:YD(),major:QD(),minor:ZD(),patch:tO(),prerelease:nO(),compare:an(),rcompare:oO(),compareLoose:aO(),compareBuild:th(),sort:dO(),rsort:pO(),gt:hu(),lt:rh(),eq:eh(),neq:Jw(),gte:nh(),lte:ih(),cmp:Qw(),coerce:bO(),Comparator:vu(),Range:cn(),satisfies:Cu(),toComparators:jO(),maxSatisfying:BO(),minSatisfying:VO(),minVersion:zO(),validRange:YO(),outside:ch(),gtr:tN(),ltr:nN(),intersects:sN(),simplifyRange:cN(),subset:pN()}});var hL=I(pL=>{var w7=Object.create,Tu=Object.defineProperty,C7=Object.getOwnPropertyDescriptor,b7=Object.getOwnPropertyNames,b1=Object.getOwnPropertySymbols,E7=Object.getPrototypeOf,E1=Object.prototype.hasOwnProperty,_7=Object.prototype.propertyIsEnumerable,_1=(t,e,r)=>e in t?Tu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ko=(t,e)=>{for(var r in e||(e={}))E1.call(e,r)&&_1(t,r,e[r]);if(b1)for(var r of b1(e))_7.call(e,r)&&_1(t,r,e[r]);return t},S1=t=>Tu(t,"__esModule",{value:!0}),O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),S7=(t,e)=>{S1(t);for(var r in e)Tu(t,r,{get:e[r],enumerable:!0})},x7=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of b7(e))!E1.call(t,n)&&n!=="default"&&Tu(t,n,{get:()=>e[n],enumerable:!(r=C7(e,n))||r.enumerable});return t},Ru=t=>x7(S1(Tu(t!=null?w7(E7(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),zt=O((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+i,o)},n.warn=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+i,o)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),x1=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Ec(),n=require("events"),i=function(){function o(){}return o.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},o.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=o._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},o.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},o.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},o.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},o._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(u,l,c);return d},o}();t.OpenTelemetryScopeManagerWrapper=i,t.AsyncScopeManager=new i}),P7=O((t,e)=>{t=e.exports=X;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,_="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",x=c++;a[x]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var D=c++;a[D]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var V=c++;a[V]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var ne=c++;a[ne]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[V]+"$";var J=c++;a[J]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var H=c++;a[H]="(?:~>?)";var L=c++;a[L]="(\\s*)"+a[H]+"\\s+",s[L]=new RegExp(a[L],"g");var q="$1~",j=c++;a[j]="^"+a[H]+a[F]+"$";var Q=c++;a[Q]="^"+a[H]+a[V]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var ie="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Ae=c++;a[Ae]="^"+a[z]+a[V]+"$";var Te=c++;a[Te]="^"+a[k]+"\\s*("+P+")$|^$";var _e=c++;a[_e]="^"+a[k]+"\\s*("+_+")$|^$";var we=c++;a[we]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[we]=new RegExp(a[we],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[V]+")\\s+-\\s+("+a[V]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X)return y;if(typeof y!="string"||y.length>n)return null;var S=E.loose?s[x]:s[b];if(!S.test(y))return null;try{return new X(y,E)}catch{return null}}t.valid=Ho;function Ho(y,E){var S=je(y,E);return S?S.version:null}t.clean=Vo;function Vo(y,E){var S=je(y.trim().replace(/^[=v]+/,""),E);return S?S.version:null}t.SemVer=X;function X(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof X))return new X(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var S=y.trim().match(E.loose?s[x]:s[b]);if(!S)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof X||(y=new X(y,this.options)),this.compareMain(y)||this.comparePre(y)},X.prototype.compareMain=function(y){return y instanceof X||(y=new X(y,this.options)),it(this.major,y.major)||it(this.minor,y.minor)||it(this.patch,y.patch)},X.prototype.comparePre=function(y){if(y instanceof X||(y=new X(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var S=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,S,R),S===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(S===void 0)return-1;if(S!==R)return it(S,R)}while(++E)},X.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Go;function Go(y,E,S,R){typeof S=="string"&&(R=S,S=void 0);try{return new X(y,S).inc(E,R).version}catch{return null}}t.diff=Wo;function Wo(y,E){if(mr(y,E))return null;var S=je(y),R=je(E),N="";if(S.prerelease.length||R.prerelease.length){N="pre";var M="prerelease"}for(var B in S)if((B==="major"||B==="minor"||B==="patch")&&S[B]!==R[B])return N+B;return M}t.compareIdentifiers=it;var kr=/^[0-9]+$/;function it(y,E){var S=kr.test(y),R=kr.test(E);return S&&R&&(y=+y,E=+E),y===E?0:S&&!R?-1:R&&!S?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return it(E,y)}t.major=ar;function ar(y,E){return new X(y,E).major}t.minor=Bi;function Bi(y,E){return new X(y,E).minor}t.patch=Hi;function Hi(y,E){return new X(y,E).patch}t.compare=We;function We(y,E,S){return new X(y,S).compare(new X(E,S))}t.compareLoose=zo;function zo(y,E){return We(y,E,!0)}t.rcompare=Hn;function Hn(y,E,S){return We(E,y,S)}t.sort=Vi;function Vi(y,E){return y.sort(function(S,R){return t.compare(S,R,E)})}t.rsort=Gi;function Gi(y,E){return y.sort(function(S,R){return t.rcompare(S,R,E)})}t.gt=bt;function bt(y,E,S){return We(y,E,S)>0}t.lt=Bt;function Bt(y,E,S){return We(y,E,S)<0}t.eq=mr;function mr(y,E,S){return We(y,E,S)===0}t.neq=Vn;function Vn(y,E,S){return We(y,E,S)!==0}t.gte=Ir;function Ir(y,E,S){return We(y,E,S)>=0}t.lte=At;function At(y,E,S){return We(y,E,S)<=0}t.cmp=Tt;function Tt(y,E,S,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y===S;case"!==":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y!==S;case"":case"=":case"==":return mr(y,S,R);case"!=":return Vn(y,S,R);case">":return bt(y,S,R);case">=":return Ir(y,S,R);case"<":return Bt(y,S,R);case"<=":return At(y,S,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=ke;function ke(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ke){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof ke))return new ke(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};ke.prototype.parse=function(y){var E=this.options.loose?s[Te]:s[_e],S=y.match(E);if(!S)throw new TypeError("Invalid comparator: "+y);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new X(S[2],this.options.loose):this.semver=Et},ke.prototype.toString=function(){return this.value},ke.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new X(y,this.options)),Tt(y,this.operator,this.semver,this.options))},ke.prototype.intersects=function(y,E){if(!(y instanceof ke))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var S;if(this.operator==="")return S=new ce(y.value,E),Jt(this.value,S,E);if(y.operator==="")return S=new ce(this.value,E),Jt(y.semver,S,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),M=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||M&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof ke)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var S=E?s[ye]:s[It];y=y.replace(S,Zo),r("hyphen replace",y),y=y.replace(s[we],yt),r("comparator trim",y,s[we]),y=y.replace(s[L],q),y=y.replace(s[oe],ie),y=y.split(/\s+/).join(" ");var R=E?s[Te]:s[_e],N=y.split(" ").map(function(M){return Cn(M,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(M){return!!M.match(R)})),N=N.map(function(M){return new ke(M,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(R){return y.set.some(function(N){return N.every(function(M){return R.intersects(M,E)})})})})},t.toComparators=Wi;function Wi(y,E){return new ce(y,E).set.map(function(S){return S.map(function(R){return R.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=Yo(y,E),r("caret",y),y=Ar(y,E),r("tildes",y),y=Qo(y,E),r("xrange",y),y=cr(y,E),r("stars",y),y}function Ce(y){return!y||y.toLowerCase()==="x"||y==="*"}function Ar(y,E){return y.trim().split(/\s+/).map(function(S){return Ko(S,E)}).join(" ")}function Ko(y,E){var S=E.loose?s[Q]:s[j];return y.replace(S,function(R,N,M,B,ee){r("tilde",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0"):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0",r("tilde return",Z),Z})}function Yo(y,E){return y.trim().split(/\s+/).map(function(S){return Jo(S,E)}).join(" ")}function Jo(y,E){r("caret",y,E);var S=E.loose?s[Ae]:s[ve];return y.replace(S,function(R,N,M,B,ee){r("caret",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?N==="0"?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function Qo(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(S){return Xo(S,E)}).join(" ")}function Xo(y,E){y=y.trim();var S=E.loose?s[Y]:s[ne];return y.replace(S,function(R,N,M,B,ee,Z){r("xRange",y,R,N,M,B,ee,Z);var Le=Ce(M),Re=Le||Ce(B),Se=Re||Ce(ee),Ee=Se;return N==="="&&Ee&&(N=""),Le?N===">"||N==="<"?R="<0.0.0":R="*":N&&Ee?(Re&&(B=0),ee=0,N===">"?(N=">=",Re?(M=+M+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",Re?M=+M+1:B=+B+1),R=N+M+"."+B+"."+ee):Re?R=">="+M+".0.0 <"+(+M+1)+".0.0":Se&&(R=">="+M+"."+B+".0 <"+M+"."+(+B+1)+".0"),r("xRange return",R),R})}function cr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function Zo(y,E,S,R,N,M,B,ee,Z,Le,Re,Se,Ee){return Ce(S)?E="":Ce(R)?E=">="+S+".0.0":Ce(N)?E=">="+S+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(Le)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+Le+1)+".0":Se?ee="<="+Z+"."+Le+"."+Re+"-"+Se:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new X(y,this.options));for(var E=0;E<this.set.length;E++)if(es(this.set[E],y,this.options))return!0;return!1};function es(y,E,S){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!S.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,S){try{E=new ce(E,S)}catch{return!1}return E.test(y)}t.maxSatisfying=ts;function ts(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new X(R,S))}),R}t.minSatisfying=rs;function rs(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new X(R,S))}),R}t.minVersion=Gr;function Gr(y,E){y=new ce(y,E);var S=new X("0.0.0");if(y.test(S)||(S=new X("0.0.0-0"),y.test(S)))return S;S=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(M){var B=new X(M.semver.version);switch(M.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!S||bt(S,B))&&(S=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+M.operator)}})}return S&&y.test(S)?S:null}t.validRange=ns;function ns(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=is;function is(y,E,S){return Tr(y,E,"<",S)}t.gtr=os;function os(y,E,S){return Tr(y,E,">",S)}t.outside=Tr;function Tr(y,E,S,R){y=new X(y,R),E=new ce(E,R);var N,M,B,ee,Z;switch(S){case">":N=bt,M=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,M=Ir,B=bt,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var Le=0;Le<E.set.length;++Le){var Re=E.set[Le],Se=null,Ee=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new ke(">=0.0.0")),Se=Se||Je,Ee=Ee||Je,N(Je.semver,Se.semver,R)?Se=Je:B(Je.semver,Ee.semver,R)&&(Ee=Je)}),Se.operator===ee||Se.operator===Z||(!Ee.operator||Ee.operator===ee)&&M(y,Ee.semver)||Ee.operator===Z&&B(y,Ee.semver))return!1}return!0}t.prerelease=ss;function ss(y,E){var S=je(y,E);return S&&S.prerelease.length?S.prerelease:null}t.intersects=Wr;function Wr(y,E,S){return y=new ce(y,S),E=new ce(E,S),y.intersects(E)}t.coerce=as;function as(y){if(y instanceof X)return y;if(typeof y!="string")return null;var E=y.match(s[J]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),P1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=P7(),n=require("module"),i=Object.keys(process.binding("natives")),o=n.prototype.require;function s(a){var c={};return function(l){var u=o.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(i.indexOf(l)<0)try{f=o.call(this,e.join(l,"package.json")).version}catch{return u}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(f,v.versionSpecifier)&&(h=v.patch(h,d))}return c[d]=h}return u}}t.makePatchingRequire=s}),k7=O((t,e)=>{e.exports={_args:[["diagnostic-channel@1.0.0","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"diagnostic-channel@1.0.0",_id:"diagnostic-channel@1.0.0",_inBundle:!1,_integrity:"sha512-v7Clmg5HG9XwIhqgbBRfwFzwZhxjvESZ33uu1cgcCLkdb9ZxgtY78eAgQMEQ39UecQ//4K5W75iq6LFBtAQD8w==",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@1.0.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"1.0.0",saveSpec:null,fetchSpec:"1.0.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-1.0.0.tgz",_spec:"1.0.0",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"1.0.0"}}),xt=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=P1(),r=P1();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},i=function(){function s(){this.version=k7().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(u)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new i,o=require("module"),o.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var o;t.channel=global.diagnosticsSource}),I7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),A7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),T7=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(A7(),t)}),R7=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(T7(),t)}),k1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.3"}),D7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=k1(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(i){var o=new Set([i]),s=new Set,a=i.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===i};function l(d){return s.add(d),!1}function u(d){return o.add(d),!0}return function(d){if(o.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return l(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?l(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(d):l(d):c.minor<=p.minor?u(d):l(d)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),Du=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=R7(),r=k1(),n=D7(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=e._globalThis;function a(u,d,f,p){var h;p===void 0&&(p=!1);var m=s[o]=(h=s[o])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return f.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[u]=d,f.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var d,f,p=(d=s[o])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[o])===null||f===void 0?void 0:f[u]}t.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var f=s[o];f&&delete f[u]}t.unregisterGlobal=l}),O7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=Du(),r=function(){function i(o){this._namespace=o.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("debug",this._namespace,o)},i.prototype.error=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("error",this._namespace,o)},i.prototype.info=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("info",this._namespace,o)},i.prototype.warn=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("warn",this._namespace,o)},i.prototype.verbose=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("verbose",this._namespace,o)},i}();t.DiagComponentLogger=r;function n(i,o,s){var a=e.getGlobal("diag");if(a)return s.unshift(o),a[i].apply(a,s)}}),LC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),N7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=LC();function r(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function o(s,a){var c=i[s];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:o("error",e.DiagLogLevel.ERROR),warn:o("warn",e.DiagLogLevel.WARN),info:o("info",e.DiagLogLevel.INFO),debug:o("debug",e.DiagLogLevel.DEBUG),verbose:o("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Ou=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=O7(),r=N7(),n=LC(),i=Du(),o="diag",s=function(){function a(){function c(u){return function(){var d=i.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=h.stack)!==null&&f!==void 0?f:h.message),!1}var m=i.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return i.registerGlobal("diag",g,l,!0)},l.disable=function(){i.unregisterGlobal(o,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),L7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],o=n[1];return[i,o]})},r.prototype.setEntry=function(n,i){var o=new r(this._entries);return o._entries.set(n,i),o},r.prototype.removeEntry=function(n){var i=new r(this._entries);return i._entries.delete(n),i},r.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];o._entries.delete(c)}return o},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),F7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),I1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Ou(),r=L7(),n=F7(),i=e.DiagAPI.instance();function o(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}t.createBaggage=o;function s(a){return typeof a!="string"&&(i.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}t.baggageEntryMetadataFromString=s}),M7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),q7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),$7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function i(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var o=0;o<e.length;o++)this[e[o].n]=i(e[o].c)}return n}();t.DiagConsoleLogger=r}),j7=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r($7(),t),r(LC(),t)}),A1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),U7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),B7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Mh=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(i){var o=this;o._currentContext=i?new Map(i):new Map,o.getValue=function(s){return o._currentContext.get(s)},o.setValue=function(s,a){var c=new n(o._currentContext);return c._currentContext.set(s,a),c},o.deleteValue=function(s){var a=new n(o._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),H7=O(t=>{"use strict";var e=t&&t.__spreadArray||function(i,o){for(var s=0,a=o.length,c=i.length;s<a;s++,c++)i[c]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=Mh(),n=function(){function i(){}return i.prototype.active=function(){return r.ROOT_CONTEXT},i.prototype.with=function(o,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},i.prototype.bind=function(o,s){return s},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();t.NoopContextManager=n}),T1=O(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,d=l.length,f=c.length;u<d;u++,f++)c[f]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=H7(),n=Du(),i=Ou(),o="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(o,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var f,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(f=this._getContextManager()).with.apply(f,e([l,u,d],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(o)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},c}();t.ContextAPI=a}),R1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),FC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=R1();t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),MC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=FC(),r=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,o){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,o){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,o){},n}();t.NonRecordingSpan=r}),D1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=Mh(),r=MC(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}t.getSpan=i;function o(l,u){return l.setValue(n,u)}t.setSpan=o;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return o(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),qC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;var e=FC(),r=MC(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(l){return n.test(l)&&l!==e.INVALID_TRACEID}t.isValidTraceId=o;function s(l){return i.test(l)&&l!==e.INVALID_SPANID}t.isValidSpanId=s;function a(l){return o(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new r.NonRecordingSpan(l)}t.wrapSpanContext=c}),O1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=T1(),r=D1(),n=MC(),i=qC(),o=e.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(l,u,d){var f=Boolean(u==null?void 0:u.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&i.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,d,f){var p,h,m;if(!(arguments.length<2)){arguments.length===2?m=u:arguments.length===3?(p=u,m=d):(p=u,h=d,m=f);var g=h!=null?h:o.active(),v=this.startSpan(l,p,g),w=r.setSpan(g,v);return o.with(w,m,void 0,v)}},c}();t.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),N1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=O1(),r=new e.NoopTracer,n=function(){function i(o,s,a){this._provider=o,this.name=s,this.version=a}return i.prototype.startSpan=function(o,s,a){return this._getTracer().startSpan(o,s,a)},i.prototype.startActiveSpan=function(o,s,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},i.prototype._getTracer=function(){if(this._delegate)return this._delegate;var o=this._provider.getDelegateTracer(this.name,this.version);return o?(this._delegate=o,this._delegate):r},i}();t.ProxyTracer=n}),V7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=O1(),r=function(){function n(){}return n.prototype.getTracer=function(i,o){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),L1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=N1(),r=V7(),n=new r.NoopTracerProvider,i=function(){function o(){}return o.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},o.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},o.prototype.setDelegate=function(s){this._delegate=s},o.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},o}();t.ProxyTracerProvider=i}),G7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),W7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),z7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),K7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),Y7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),J7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Q7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),X7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Z7=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),tJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),rJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=Du(),r=L1(),n=qC(),i=D1(),o=Ou(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),nJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,i){},r.prototype.extract=function(n,i){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),iJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=Mh(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function i(s,a){return s.setValue(r,a)}t.setBaggage=i;function o(s){return s.deleteValue(r)}t.deleteBaggage=o}),oJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=Du(),r=nJ(),n=A1(),i=iJ(),o=I1(),s=Ou(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,s.DiagAPI.instance())},u.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},u.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),lt=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(u,d,f,p){p===void 0&&(p=f),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[f]}})}:function(u,d,f,p){p===void 0&&(p=f),u[p]=d[f]}),r=t&&t.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,u,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.baggageEntryMetadataFromString=void 0,r(I7(),t);var n=I1();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(M7(),t),r(q7(),t),r(j7(),t),r(A1(),t),r(U7(),t),r(B7(),t),r(N1(),t),r(L1(),t),r(G7(),t),r(W7(),t),r(z7(),t),r(K7(),t),r(Y7(),t),r(J7(),t),r(Q7(),t),r(R1(),t),r(X7(),t),r(Z7(),t),r(eJ(),t);var i=qC();Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=FC();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),r(Mh(),t),r(tJ(),t);var s=T1();t.context=s.ContextAPI.getInstance();var a=rJ();t.trace=a.TraceAPI.getInstance();var c=oJ();t.propagation=c.PropagationAPI.getInstance();var l=Ou();t.diag=l.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),$C=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=lt(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function i(s){return s.deleteValue(r)}t.unsuppressTracing=i;function o(s){return s.getValue(r)===!0}t.isTracingSuppressed=o}),F1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),M1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=lt(),r=F1(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=i;var o=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),f=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};t.parsePairKeyValue=o;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),sJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=lt(),r=$C(),n=F1(),i=M1(),o=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=i.getKeyPairs(l).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=i.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=i.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),u[f.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=o}),aJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(o){let s={};if(o==null||typeof o!="object")return s;for(let[a,c]of Object.entries(o))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(o){return o==null?!0:Array.isArray(o)?n(o):i(o)}t.isAttributeValue=r;function n(o){let s;for(let a of o)if(a!=null){if(!s){if(i(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function i(o){switch(typeof o){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),q1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=lt();function r(){return o=>{e.diag.error(n(o))}}t.loggingErrorHandler=r;function n(o){return typeof o=="string"?o:JSON.stringify(i(o))}function i(o){let s={},a=o;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),$1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=q1(),r=e.loggingErrorHandler();function n(o){r=o}t.setGlobalErrorHandler=n;var i=o=>{try{r(o)}catch{}};t.globalErrorHandler=i}),j1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),U1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=lt(),r=j1(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(p){return i.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]!="undefined"){let w=Number(m[p]);isNaN(w)||(w<g?h[p]=g:w>v?h[p]=v:h[p]=w)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(w=>w.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function f(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":d(g,h,p);break;default:if(o(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v!="undefined"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=f}),cJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=U1();function n(){let i=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,i)}t.getEnv=n}),lJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,i="";for(let o=0;o<n;o+=2){let s=r.substring(o,o+2),a=parseInt(s,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}t.hexToBase64=e}),uJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=o(r),this.generateSpanId=o(e)}};t.RandomIdGenerator=n;var i=Buffer.allocUnsafe(r);function o(s){return function(){for(let a=0;a<s/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(i[a]>0);a++)a===s-1&&(i[s-1]=1);return i.toString("hex",0,s)}}}),dJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),jC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),fJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var i;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(i=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var o;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(o=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),pJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(fJ(),t)}),hJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=t.HostArchValues||(t.HostArchValues={}));var o;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(o=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),mJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(hJ(),t)}),Nu=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(pJ(),t),r(mJ(),t)}),gJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=jC(),r=Nu();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),vJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),yJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(cJ(),t),r(lJ(),t),r(uJ(),t),r(dJ(),t),r(gJ(),t),r(vJ(),t)}),B1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(yJ(),t)}),wJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=B1(),r=9,n=Math.pow(10,r);function i(m){let g=m/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function o(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=i(o()),v=i(typeof m=="number"?m:e.otperformance.now()),w=g[0]+v[0],C=g[1]+v[1];return C>n&&(C-=n,w+=1),[w,C]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<o()?s(m):i(m);if(m instanceof Date)return i(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],w=g[1]-m[1];return w<0&&(v-=1,w+=n),[v,w]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,w=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",w)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function d(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=d;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=f;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),CJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),bJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),EJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=lt(),r=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(o=>typeof o.fields=="function"?o.fields():[]).reduce((o,s)=>o.concat(s),[])))}inject(n,i,o){for(let s of this._propagators)try{s.inject(n,i,o)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,i,o){return this._propagators.reduce((s,a)=>{try{return a.extract(s,i,o)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),_J=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${r}|${n})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return i.test(l)}t.validateKey=a;function c(l){return o.test(l)&&!s.test(l)}t.validateValue=c}),H1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=_J(),r=32,n=512,i=",",o="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+o+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(o);if(d!==-1){let f=u.slice(0,d),p=u.slice(d+1,l.length);e.validateKey(f)&&e.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),SJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=lt(),r=$C(),n=H1();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var i="00",o="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${o})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(f){let p=l.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var d=class{inject(f,p,h){let m=e.trace.getSpanContext(f);if(!m||r.isTracingSuppressed(f)||!e.isSpanContextValid(m))return;let g=`${i}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let v=u(g);if(!v)return f;v.isRemote=!0;let w=h.get(p,t.TRACE_STATE_HEADER);if(w){let C=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof C=="string"?C:void 0)}return e.trace.setSpanContext(f,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=d}),xJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),PJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=lt(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function i(a,c){return a.setValue(r,c)}t.setRPCMetadata=i;function o(a){return a.deleteValue(r)}t.deleteRPCMetadata=o;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),V1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=lt(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),G1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=lt(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),kJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=lt(),r=$1(),n=V1(),i=G1(),o=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,d){let f=e.trace.getSpanContext(s);return!f||!e.isSpanContextValid(f)?this._root.shouldSample(s,a,c,l,u,d):f.isRemote?f.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,d):f.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,d):this._localParentNotSampled.shouldSample(s,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=o}),IJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=lt(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let o=0;o<n.length/8;o++){let s=o*8,a=parseInt(n.slice(s,s+8),16);i=(i^a)>>>0}return i}};t.TraceIdRatioBasedSampler=r}),AJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}t.urlMatches=e;function r(n,i){if(!i)return!1;for(let o of i)if(e(n,o))return!0;return!1}t.isUrlIgnored=r}),TJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),Dn=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r(sJ(),t),r(aJ(),t),r($1(),t),r(q1(),t),r(wJ(),t),r(CJ(),t),r(bJ(),t),r(jC(),t),t.baggageUtils=M1(),r(B1(),t),r(EJ(),t),r(SJ(),t),r(xJ(),t),r(PJ(),t),r(V1(),t),r(G1(),t),r(kJ(),t),r(IJ(),t),r($C(),t),r(H1(),t),r(U1(),t),r(j1(),t),r(AJ(),t),r(TJ(),t),r(jC(),t)}),RJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),W1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=lt(),r=Dn(),n=Nu(),i=RJ(),o=class{constructor(s,a,c,l,u,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c=="undefined"&&(c=a),a=void 0),typeof c=="undefined"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=o}),z1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=lt(),r=Dn(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function o(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=o;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),DJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=z1();function r(n){let i={sampler:e.buildSamplerFromEnv()},o=Object.assign({},e.DEFAULT_CONFIG,i,n);return o.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),o}t.mergeConfig=r}),OJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=lt(),r=Dn(),n=W1(),i=DJ(),o=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let f=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!f||!e.trace.isSpanContextValid(f)?h=this._idGenerator.generateTraceId():(h=f.traceId,m=f.traceState,g=f.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,w=(d=c.links)!==null&&d!==void 0?d:[],C=r.sanitizeAttributes(c.attributes),b=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,C,w),_=b.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,P={traceId:h,spanId:p,traceFlags:_,traceState:m};if(b.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(P);let x=new n.Span(this,l,a,P,v,g,w,c.startTime);return x.setAttributes(Object.assign(C,b.attributes)),x}startActiveSpan(a,c,l,u){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=l):(d=c,f=l,p=u);let h=f!=null?f:e.context.active(),m=this.startSpan(a,d,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=o;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),NJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),LJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=Y1(),r=lt(),n=require("util"),i=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return o(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=i;var o=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),FJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=lt(),r=Dn(),n=Nu(),i=UC(),o=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,f]=u;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new o}),MJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=lt(),r=Nu(),n=UC(),i=class{async detect(o){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,o)}_getResourceAttributes(o,s){return o[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||o[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||o[r.ResourceAttributes.PROCESS_COMMAND]===""||o[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},o))}};t.processDetector=new i}),qJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(FJ(),t),r(MJ(),t)}),$J=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(NJ(),t),r(LJ(),t),r(qJ(),t)}),K1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r($J(),t)}),Y1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=Nu(),r=Dn(),n=K1(),i=class{constructor(o){this.attributes=o}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(o){if(!o||!Object.keys(o.attributes).length)return this;let s=Object.assign({},this.attributes,o.attributes);return new i(s)}};t.Resource=i,i.EMPTY=new i({})}),jJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),UJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),UC=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y1(),t),r(K1(),t),r(jJ(),t),r(UJ(),t)}),BJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=Dn(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(o=>{e.globalErrorHandler(o||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let o of this._spanProcessors)o.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,o)=>{Promise.all(n).then(()=>{i()},o)})}};t.MultiSpanProcessor=r}),J1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),HJ=O((t,e)=>{var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",C="[object Proxy]",b="[object RegExp]",_="[object Set]",P="[object String]",x="[object Undefined]",k="[object WeakMap]",A="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",V="[object Float64Array]",ne="[object Int8Array]",Y="[object Int16Array]",J="[object Int32Array]",H="[object Uint8Array]",L="[object Uint8ClampedArray]",q="[object Uint16Array]",j="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ie={};ie[F]=ie[V]=ie[ne]=ie[Y]=ie[J]=ie[H]=ie[L]=ie[q]=ie[j]=!0,ie[a]=ie[c]=ie[A]=ie[u]=ie[D]=ie[d]=ie[f]=ie[p]=ie[m]=ie[g]=ie[w]=ie[b]=ie[_]=ie[P]=ie[k]=!1;var ve=typeof global=="object"&&global&&global.Object===Object&&global,Ae=typeof self=="object"&&self&&self.Object===Object&&self,Te=ve||Ae||Function("return this")(),_e=typeof t=="object"&&t&&!t.nodeType&&t,we=_e&&typeof e=="object"&&e&&!e.nodeType&&e,yt=we&&we.exports===_e,It=yt&&ve.process,ye=function(){try{var T=we&&we.require&&we.require("util").types;return T||It&&It.binding&&It.binding("util")}catch{}}(),pe=ye&&ye.isTypedArray;function be(T,$,W){switch(W.length){case 0:return T.call($);case 1:return T.call($,W[0]);case 2:return T.call($,W[0],W[1]);case 3:return T.call($,W[0],W[1],W[2])}return T.apply($,W)}function je(T,$){for(var W=-1,le=Array(T);++W<T;)le[W]=$(W);return le}function Ho(T){return function($){return T($)}}function Vo(T,$){return T==null?void 0:T[$]}function X(T,$){return function(W){return T($(W))}}var Go=Array.prototype,Wo=Function.prototype,kr=Object.prototype,it=Te["__core-js_shared__"],Bn=Wo.toString,ar=kr.hasOwnProperty,Bi=function(){var T=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),Hi=kr.toString,We=Bn.call(Object),zo=RegExp("^"+Bn.call(ar).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hn=yt?Te.Buffer:void 0,Vi=Te.Symbol,Gi=Te.Uint8Array,bt=Hn?Hn.allocUnsafe:void 0,Bt=X(Object.getPrototypeOf,Object),mr=Object.create,Vn=kr.propertyIsEnumerable,Ir=Go.splice,At=Vi?Vi.toStringTag:void 0,Tt=function(){try{var T=Fg(Object,"defineProperty");return T({},"",{}),T}catch{}}(),ke=Hn?Hn.isBuffer:void 0,Et=Math.max,ce=Date.now,Wi=Fg(Te,"Map"),Cn=Fg(Object,"create"),Ce=function(){function T(){}return function($){if(!cs($))return{};if(mr)return mr($);T.prototype=$;var W=new T;return T.prototype=void 0,W}}();function Ar(T){var $=-1,W=T==null?0:T.length;for(this.clear();++$<W;){var le=T[$];this.set(le[0],le[1])}}function Ko(){this.__data__=Cn?Cn(null):{},this.size=0}function Yo(T){var $=this.has(T)&&delete this.__data__[T];return this.size-=$?1:0,$}function Jo(T){var $=this.__data__;if(Cn){var W=$[T];return W===n?void 0:W}return ar.call($,T)?$[T]:void 0}function Qo(T){var $=this.__data__;return Cn?$[T]!==void 0:ar.call($,T)}function Xo(T,$){var W=this.__data__;return this.size+=this.has(T)?0:1,W[T]=Cn&&$===void 0?n:$,this}Ar.prototype.clear=Ko,Ar.prototype.delete=Yo,Ar.prototype.get=Jo,Ar.prototype.has=Qo,Ar.prototype.set=Xo;function cr(T){var $=-1,W=T==null?0:T.length;for(this.clear();++$<W;){var le=T[$];this.set(le[0],le[1])}}function Zo(){this.__data__=[],this.size=0}function es(T){var $=this.__data__,W=ee($,T);if(W<0)return!1;var le=$.length-1;return W==le?$.pop():Ir.call($,W,1),--this.size,!0}function Jt(T){var $=this.__data__,W=ee($,T);return W<0?void 0:$[W][1]}function ts(T){return ee(this.__data__,T)>-1}function rs(T,$){var W=this.__data__,le=ee(W,T);return le<0?(++this.size,W.push([T,$])):W[le][1]=$,this}cr.prototype.clear=Zo,cr.prototype.delete=es,cr.prototype.get=Jt,cr.prototype.has=ts,cr.prototype.set=rs;function Gr(T){var $=-1,W=T==null?0:T.length;for(this.clear();++$<W;){var le=T[$];this.set(le[0],le[1])}}function ns(){this.size=0,this.__data__={hash:new Ar,map:new(Wi||cr),string:new Ar}}function is(T){var $=Bd(this,T).delete(T);return this.size-=$?1:0,$}function os(T){return Bd(this,T).get(T)}function Tr(T){return Bd(this,T).has(T)}function ss(T,$){var W=Bd(this,T),le=W.size;return W.set(T,$),this.size+=W.size==le?0:1,this}Gr.prototype.clear=ns,Gr.prototype.delete=is,Gr.prototype.get=os,Gr.prototype.has=Tr,Gr.prototype.set=ss;function Wr(T){var $=this.__data__=new cr(T);this.size=$.size}function as(){this.__data__=new cr,this.size=0}function y(T){var $=this.__data__,W=$.delete(T);return this.size=$.size,W}function E(T){return this.__data__.get(T)}function S(T){return this.__data__.has(T)}function R(T,$){var W=this.__data__;if(W instanceof cr){var le=W.__data__;if(!Wi||le.length<r-1)return le.push([T,$]),this.size=++W.size,this;W=this.__data__=new Gr(le)}return W.set(T,$),this.size=W.size,this}Wr.prototype.clear=as,Wr.prototype.delete=y,Wr.prototype.get=E,Wr.prototype.has=S,Wr.prototype.set=R;function N(T,$){var W=$g(T),le=!W&&qg(T),Fe=!W&&!le&&i0(T),Ze=!W&&!le&&!Fe&&s0(T),ot=W||le||Fe||Ze,Ne=ot?je(T.length,String):[],st=Ne.length;for(var zr in T)($||ar.call(T,zr))&&!(ot&&(zr=="length"||Fe&&(zr=="offset"||zr=="parent")||Ze&&(zr=="buffer"||zr=="byteLength"||zr=="byteOffset")||r0(zr,st)))&&Ne.push(zr);return Ne}function M(T,$,W){(W!==void 0&&!Hd(T[$],W)||W===void 0&&!($ in T))&&Z(T,$,W)}function B(T,$,W){var le=T[$];(!(ar.call(T,$)&&Hd(le,W))||W===void 0&&!($ in T))&&Z(T,$,W)}function ee(T,$){for(var W=T.length;W--;)if(Hd(T[W][0],$))return W;return-1}function Z(T,$,W){$=="__proto__"&&Tt?Tt(T,$,{configurable:!0,enumerable:!0,value:W,writable:!0}):T[$]=W}var Le=dV();function Re(T){return T==null?T===void 0?x:v:At&&At in Object(T)?fV(T):yV(T)}function Se(T){return el(T)&&Re(T)==a}function Ee(T){if(!cs(T)||gV(T))return!1;var $=Ug(T)?zo:z;return $.test(EV(T))}function Je(T){return el(T)&&o0(T.length)&&!!ie[Re(T)]}function tV(T){if(!cs(T))return vV(T);var $=n0(T),W=[];for(var le in T)le=="constructor"&&($||!ar.call(T,le))||W.push(le);return W}function t0(T,$,W,le,Fe){T!==$&&Le($,function(Ze,ot){if(Fe||(Fe=new Wr),cs(Ze))rV(T,$,ot,W,t0,le,Fe);else{var Ne=le?le(Mg(T,ot),Ze,ot+"",T,$,Fe):void 0;Ne===void 0&&(Ne=Ze),M(T,ot,Ne)}},a0)}function rV(T,$,W,le,Fe,Ze,ot){var Ne=Mg(T,W),st=Mg($,W),zr=ot.get(st);if(zr){M(T,W,zr);return}var Rr=Ze?Ze(Ne,st,W+"",T,$,ot):void 0,tl=Rr===void 0;if(tl){var Bg=$g(st),Hg=!Bg&&i0(st),l0=!Bg&&!Hg&&s0(st);Rr=st,Bg||Hg||l0?$g(Ne)?Rr=Ne:_V(Ne)?Rr=cV(Ne):Hg?(tl=!1,Rr=oV(st,!0)):l0?(tl=!1,Rr=aV(st,!0)):Rr=[]:SV(st)||qg(st)?(Rr=Ne,qg(Ne)?Rr=xV(Ne):(!cs(Ne)||Ug(Ne))&&(Rr=pV(st))):tl=!1}tl&&(ot.set(st,Rr),Fe(Rr,st,le,Ze,ot),ot.delete(st)),M(T,W,Rr)}function nV(T,$){return CV(wV(T,$,c0),T+"")}var iV=Tt?function(T,$){return Tt(T,"toString",{configurable:!0,enumerable:!1,value:kV($),writable:!0})}:c0;function oV(T,$){if($)return T.slice();var W=T.length,le=bt?bt(W):new T.constructor(W);return T.copy(le),le}function sV(T){var $=new T.constructor(T.byteLength);return new Gi($).set(new Gi(T)),$}function aV(T,$){var W=$?sV(T.buffer):T.buffer;return new T.constructor(W,T.byteOffset,T.length)}function cV(T,$){var W=-1,le=T.length;for($||($=Array(le));++W<le;)$[W]=T[W];return $}function lV(T,$,W,le){var Fe=!W;W||(W={});for(var Ze=-1,ot=$.length;++Ze<ot;){var Ne=$[Ze],st=le?le(W[Ne],T[Ne],Ne,W,T):void 0;st===void 0&&(st=T[Ne]),Fe?Z(W,Ne,st):B(W,Ne,st)}return W}function uV(T){return nV(function($,W){var le=-1,Fe=W.length,Ze=Fe>1?W[Fe-1]:void 0,ot=Fe>2?W[2]:void 0;for(Ze=T.length>3&&typeof Ze=="function"?(Fe--,Ze):void 0,ot&&hV(W[0],W[1],ot)&&(Ze=Fe<3?void 0:Ze,Fe=1),$=Object($);++le<Fe;){var Ne=W[le];Ne&&T($,Ne,le,Ze)}return $})}function dV(T){return function($,W,le){for(var Fe=-1,Ze=Object($),ot=le($),Ne=ot.length;Ne--;){var st=ot[T?Ne:++Fe];if(W(Ze[st],st,Ze)===!1)break}return $}}function Bd(T,$){var W=T.__data__;return mV($)?W[typeof $=="string"?"string":"hash"]:W.map}function Fg(T,$){var W=Vo(T,$);return Ee(W)?W:void 0}function fV(T){var $=ar.call(T,At),W=T[At];try{T[At]=void 0;var le=!0}catch{}var Fe=Hi.call(T);return le&&($?T[At]=W:delete T[At]),Fe}function pV(T){return typeof T.constructor=="function"&&!n0(T)?Ce(Bt(T)):{}}function r0(T,$){var W=typeof T;return $=$==null?s:$,!!$&&(W=="number"||W!="symbol"&&oe.test(T))&&T>-1&&T%1==0&&T<$}function hV(T,$,W){if(!cs(W))return!1;var le=typeof $;return(le=="number"?jg(W)&&r0($,W.length):le=="string"&&$ in W)?Hd(W[$],T):!1}function mV(T){var $=typeof T;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?T!=="__proto__":T===null}function gV(T){return!!Bi&&Bi in T}function n0(T){var $=T&&T.constructor,W=typeof $=="function"&&$.prototype||kr;return T===W}function vV(T){var $=[];if(T!=null)for(var W in Object(T))$.push(W);return $}function yV(T){return Hi.call(T)}function wV(T,$,W){return $=Et($===void 0?T.length-1:$,0),function(){for(var le=arguments,Fe=-1,Ze=Et(le.length-$,0),ot=Array(Ze);++Fe<Ze;)ot[Fe]=le[$+Fe];Fe=-1;for(var Ne=Array($+1);++Fe<$;)Ne[Fe]=le[Fe];return Ne[$]=W(ot),be(T,this,Ne)}}function Mg(T,$){if(!($==="constructor"&&typeof T[$]=="function")&&$!="__proto__")return T[$]}var CV=bV(iV);function bV(T){var $=0,W=0;return function(){var le=ce(),Fe=o-(le-W);if(W=le,Fe>0){if(++$>=i)return arguments[0]}else $=0;return T.apply(void 0,arguments)}}function EV(T){if(T!=null){try{return Bn.call(T)}catch{}try{return T+""}catch{}}return""}function Hd(T,$){return T===$||T!==T&&$!==$}var qg=Se(function(){return arguments}())?Se:function(T){return el(T)&&ar.call(T,"callee")&&!Vn.call(T,"callee")},$g=Array.isArray;function jg(T){return T!=null&&o0(T.length)&&!Ug(T)}function _V(T){return el(T)&&jg(T)}var i0=ke||IV;function Ug(T){if(!cs(T))return!1;var $=Re(T);return $==p||$==h||$==l||$==C}function o0(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=s}function cs(T){var $=typeof T;return T!=null&&($=="object"||$=="function")}function el(T){return T!=null&&typeof T=="object"}function SV(T){if(!el(T)||Re(T)!=w)return!1;var $=Bt(T);if($===null)return!0;var W=ar.call($,"constructor")&&$.constructor;return typeof W=="function"&&W instanceof W&&Bn.call(W)==We}var s0=pe?Ho(pe):Je;function xV(T){return lV(T,a0(T))}function a0(T){return jg(T)?N(T,!0):tV(T)}var PV=uV(function(T,$,W){t0(T,$,W)});function kV(T){return function(){return T}}function c0(T){return T}function IV(){return!1}e.exports=PV}),VJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=lt(),r=Dn(),n=class{constructor(i,o){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(o==null?void 0:o.maxExportBatchSize)=="number"?o.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(o==null?void 0:o.maxQueueSize)=="number"?o.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(o==null?void 0:o.scheduledDelayMillis)=="number"?o.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(o==null?void 0:o.exportTimeoutMillis)=="number"?o.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,o)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{i()}).catch(o)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,o)=>{let s=setTimeout(()=>{o(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?i():o((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{r.globalErrorHandler(i)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),GJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=VJ(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),WJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(GJ(),t)}),Q1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(WJ(),t)}),zJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=lt(),r=Dn(),n=UC(),i=X1(),o=z1(),s=BJ(),a=J1(),c=HJ(),l=Q1(),u;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},o.DEFAULT_CONFIG,f);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let h=`${f}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new i.Tracer({name:f,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){e.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&e.context.setGlobalContextManager(f.contextManager),f.propagator&&e.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=u.timeout},f);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(w=>{clearTimeout(v),g=u.error,m(w)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||e.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),KJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=Dn(),r=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let o of n)console.log(this._exportInfo(o));if(i)return i({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),YJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=Dn(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),JJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),QJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=lt(),r=Dn(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([i],o=>{var s;o.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=o.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${o})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),XJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),ZJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),tQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),X1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(OJ(),t),r(zJ(),t),r(Q1(),t),r(KJ(),t),r(YJ(),t),r(JJ(),t),r(QJ(),t),r(XJ(),t),r(J1(),t),r(W1(),t),r(ZJ(),t),r(eQ(),t),r(tQ(),t)}),rQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=xt();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(o){if(r)return o;try{var s=X1(),a=lt(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=o.setTracer;o.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,h,m){var g=f.call(this,p,h,m),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),w},g},d[t.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),o.setTracer(l),r=!0}catch{}return o};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=i}),nQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=xt(),r=function(i){var o=i.prototype._emit;return i.prototype._emit=function(s,a){var c=o.apply(this,arguments);if(!a){var l=c;l||(l=o.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},i};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),iQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=xt(),r=require("stream"),n=function(o){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new o.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=o[h];m&&(o[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch{}return m.apply(o,arguments)})},d=0,f=l;d<f.length;d++){var p=f[d];u(p)}return o};t.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=i}),oQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=xt(),r=function(i){var o=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var s=o.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},i};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),sQ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[f]=l[f])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=xt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),l.on("failed",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},o=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},u},c},s=function(c){o(c);var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=f)}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),aQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=xt(),r=require("path"),n=function(o,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var w=arguments.length-1,C=arguments.length-1;C>=0;--C)if(typeof arguments[C]=="function"){w=C;break}else if(typeof arguments[C]!="undefined")break;var b=arguments[w],_={result:null,startTime:null,startDate:null};typeof b=="function"&&(g?(_.startTime=process.hrtime(),_.startDate=new Date,arguments[w]=e.channel.bindToContext(g(_,b))):arguments[w]=e.channel.bindToContext(b));var P=v.apply(this,arguments);return _.result=P,P})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),o};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=i}),cQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=xt();function r(i){var o=i.prototype.connect;return i.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),o.apply(this,arguments)},i}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),lQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=xt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var w=e.channel.bindToContext(function(C,b){var _=process.hrtime(h);if(p.result=b&&{rowCount:b.rowCount,command:b.command},p.error=C,p.duration=Math.ceil(_[0]*1e3+_[1]/1e6),e.channel.publish("postgres",p),C){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",C)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:v}),w}catch{return v}}try{typeof u=="string"?d instanceof Array?(p.query.preparable={text:u,args:d},f=g(f)):(p.query.text=u,f?f=g(f):d=g(d)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,f?f=g(f):d?d=g(d):u.callback=g(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function i(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p=this,h=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(C){C&&C[l]&&(C=C[l]);var b=e.channel.bindToContext(function(_,P){var x=process.hrtime(g);if(m.result=P&&{rowCount:P.rowCount,command:P.command},m.error=_,m.duration=Math.ceil(x[0]*1e3+x[1]/1e6),e.channel.publish("postgres",m),_){if(C)return C.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",_)}else C&&C.apply(this,arguments)});try{return Object.defineProperty(b,l,{value:C}),b}catch{return C}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},h=typeof f=="function",f=h?w(f):f):(m.query.text=u,f?(h=typeof f=="function",f=h?w(f):f):(h=typeof d=="function",d=h?w(d):d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,f?(h=typeof f=="function",f=w(f)):d?(h=typeof d=="function",d=h?w(d):d):(h=typeof u.callback=="function",u.callback=h?w(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(C){return w()(void 0,C),new p._Promise(function(b,_){b(C)})}).catch(function(C){return w()(C,void 0),new p._Promise(function(b,_){_(C)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function o(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=o}),uQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=xt(),r=function(i){var o=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(d,f){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:d,result:f,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return o.call(this,s)},i};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),dQ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=xt(),n=function(o){var s=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,h){var m=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",d),l.call(this,f,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},o};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=i}),fQ=O(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=xt(),i=function(a){var c=a.Logger.prototype.log,l,u=function(d,f,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:h}),f};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},o=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,w=m.level,C=m.meta,b=r(m,["message","level","meta"]);w=typeof Symbol.for=="function"?m[Symbol.for("level")]:w,v=m instanceof Error?m:v;var _=c(this.winston,w);C=C||{};for(var P in b)b.hasOwnProperty(P)&&(C[P]=b[P]);n.channel.publish("winston",{message:v,level:w,levelKind:_,meta:C}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=d.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:o},t.winston2={versionSpecifier:"2.x",patch:i};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),pQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=rQ();t.azuresdk=e;var r=nQ();t.bunyan=r;var n=iQ();t.console=n;var i=oQ();t.mongodbCore=i;var o=sQ();t.mongodb=o;var s=aQ();t.mysql=s;var a=cQ();t.pgPool=a;var c=lQ();t.pg=c;var l=uQ();t.redis=l;var u=dQ();t.tedious=u;var d=fQ();t.winston=d;function f(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}t.enable=f}),BC=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=x1(),r=zt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){i=pQ(),o=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=o.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,o,s,a,c;function l(u){if(t.IsInitialized){var d=xt();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Lu=O((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),hn=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("http"),i=require("https"),o=require("url"),s=require("constants"),a=zt(),c=Lu(),l=function(){function u(){}return u.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var h=d+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=u.trim(f),f&&f.indexOf(h)===0){p=f.substring(h.length,m[g].length);break}}return p},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var f=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},h=d.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,h=0;h<4;h++)p=u.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var m=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,h=""+Math.floor(d/(1e3*60*60))%24,m=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+f},u.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var h="",m=d[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(w){h=m.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return f},u.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(o.parse(f).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},u.makeRequest=function(d,f,p,h){f&&f.indexOf("//")===0&&(f="https:"+f);var m=o.parse(f),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=o.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:f,headers:r(r({},g.headers),{Host:m.hostname})})}var C=m.protocol==="https:"&&!v;return C&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!C&&d.httpAgent!==void 0?g.agent=d.httpAgent:C&&(g.agent=u.tlsRestrictedAgent),C?i.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(d,f,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(d,f,h):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},u.addCorrelationIdHeaderFromString=function(d,f,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),bc=O((t,e)=>{"use strict";var r=hn(),n=zt(),i=function(){function o(){}return o.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(o.completedLookups.hasOwnProperty(c)){a(o.completedLookups[c]);return}else if(o.pendingLookups[c]){o.pendingLookups[c].push(a);return}o.pendingLookups[c]=[a];var l=function(){if(o.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(o.TAG,u);var d=r.makeRequest(s,c,u,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(h){p+=h}),f.on("end",function(){n.info(o.TAG,p);var h=o.correlationIdPrefix+p;o.completedLookups[c]=h,o.pendingLookups[c]&&o.pendingLookups[c].forEach(function(m){return m(h)}),delete o.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(o.completedLookups[c]=void 0,delete o.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(o.TAG,f)}),d.end())}};setTimeout(l,0)},o.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=o.pendingLookups[c];l&&(o.pendingLookups[c]=l.filter(function(u){return u!=a}),o.pendingLookups[c].length==0&&delete o.pendingLookups[c])},o.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(o.currentRootId++).toString(16);return o.appendSuffix(s,a,"_")}else return o.generateRootId()},o.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},o.generateRootId=function(){return"|"+r.w3cTraceId()+"."},o.appendSuffix=function(s,a,c){if(s.length+a.length<o.requestIdMaxLength)return s+a+c;var l=o.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return o.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},o.TAG="CorrelationIdManager",o.correlationIdPrefix="cid-v1:",o.w3cEnabled=!0,o.pendingLookups={},o.completedLookups={},o.requestIdMaxLength=1024,o.currentRootId=r.randomu32(),o}();e.exports=i}),qh=O((t,e)=>{"use strict";var r=hn(),n=bc(),i=function(){function o(s,a){if(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.version=o.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=o.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),o.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),o.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);o.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return o.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},o.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},o.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},o.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},o.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},o.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},o.DEFAULT_TRACE_FLAG="01",o.DEFAULT_VERSION="00",o}();e.exports=i}),Z1=O((t,e)=>{"use strict";var r=function(){function n(i){this.fieldmap=[],!!i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var o=i.split("@");if(o.length==2){var s=o[0].trim(),a=o[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(o.length==1)return Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(i){var o=[],s={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,o.push(d)}}return o},n.strict=!0,n}();e.exports=r}),Io=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),hQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),eL=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),mQ=O((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),gQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=eL(),i=function(o){r(s,o);function s(){return o.call(this)||this}return s}(n);e.exports=i}),tL=O((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),vQ=O((t,e)=>{"use strict";var r=tL(),n=function(){function i(){this.kind=r.Measurement}return i}();e.exports=n}),yQ=O((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),rL=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),wQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=i}),CQ=O((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),bQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=i}),EQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=i}),_Q=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=rL(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),SQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),xQ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Io(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),PQ=O((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),kQ=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),nL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=hQ(),t.Base=eL(),t.ContextTagKeys=mQ(),t.Data=gQ(),t.DataPoint=vQ(),t.DataPointType=tL(),t.Domain=Io(),t.Envelope=yQ(),t.EventData=rL(),t.ExceptionData=wQ(),t.ExceptionDetails=CQ(),t.MessageData=bQ(),t.MetricData=EQ(),t.PageViewData=_Q(),t.RemoteDependencyData=SQ(),t.RequestData=xQ(),t.SeverityLevel=PQ(),t.StackFrame=kQ()}),IQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=nL(),r=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();t.RemoteDependencyDataConstants=r;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}t.domainSupportsProperties=n}),AQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),DQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),OQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),LQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),FQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),MQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),qQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),$Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),jQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),UQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),BQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(AQ(),t),r(TQ(),t),r(RQ(),t),r(DQ(),t),r(OQ(),t),r(NQ(),t),r(LQ(),t),r(FQ(),t),r(MQ(),t),r(qQ(),t),r($Q(),t),r(jQ(),t),r(UQ(),t)}),HQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),VQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),GQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),WQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),zQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),KQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),YQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),QQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(HQ(),t),r(VQ(),t),r(GQ(),t),r(WQ(),t),r(zQ(),t),r(KQ(),t),r(YQ(),t),r(JQ(),t)}),_r=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(IQ(),t),r(nL(),t),r(BQ(),t),r(QQ(),t)}),iL=O((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,o){var s=+new Date;this.duration=s-this.startTime,this.statusCode=i;var a=this.properties||{};if(o){if(typeof o=="string")a.error=o;else if(o instanceof Error)a.error=o.message;else if(typeof o=="object")for(var c in o)a[c]=o[c]&&o[c].toString&&o[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),oL=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var f=function(p,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},f(p,h)};return function(p,h){f(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),i=_r(),o=hn(),s=Lu(),a=iL(),c=bc(),l=Z1(),u=qh(),d=function(f){r(p,f);function p(h,m){var g=f.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,w=g.search,C=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",b=n.format({protocol:C,host:h.headers.host,pathname:v,search:w});return b},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var w=h.exec(v);if(w)return w[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(o.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=o.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,w=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,C=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,b=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new u(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=C,this.traceparent.legacyRootId=b||C,this.setBackCompatFromThisTraceContext()):(this.parentId=C,this.requestId=c.generateRequestId(b||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new i.ContextTagKeys,p}(a);e.exports=d}),XQ=O((t,e)=>{t=e.exports=X;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,_="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",x=c++;a[x]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var D=c++;a[D]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var V=c++;a[V]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var ne=c++;a[ne]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[V]+"$";var J=c++;a[J]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var H=c++;a[H]="(?:~>?)";var L=c++;a[L]="(\\s*)"+a[H]+"\\s+",s[L]=new RegExp(a[L],"g");var q="$1~",j=c++;a[j]="^"+a[H]+a[F]+"$";var Q=c++;a[Q]="^"+a[H]+a[V]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var ie="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Ae=c++;a[Ae]="^"+a[z]+a[V]+"$";var Te=c++;a[Te]="^"+a[k]+"\\s*("+P+")$|^$";var _e=c++;a[_e]="^"+a[k]+"\\s*("+_+")$|^$";var we=c++;a[we]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[we]=new RegExp(a[we],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[V]+")\\s+-\\s+("+a[V]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X)return y;if(typeof y!="string"||y.length>n)return null;var S=E.loose?s[x]:s[b];if(!S.test(y))return null;try{return new X(y,E)}catch{return null}}t.valid=Ho;function Ho(y,E){var S=je(y,E);return S?S.version:null}t.clean=Vo;function Vo(y,E){var S=je(y.trim().replace(/^[=v]+/,""),E);return S?S.version:null}t.SemVer=X;function X(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof X))return new X(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var S=y.trim().match(E.loose?s[x]:s[b]);if(!S)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof X||(y=new X(y,this.options)),this.compareMain(y)||this.comparePre(y)},X.prototype.compareMain=function(y){return y instanceof X||(y=new X(y,this.options)),it(this.major,y.major)||it(this.minor,y.minor)||it(this.patch,y.patch)},X.prototype.comparePre=function(y){if(y instanceof X||(y=new X(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var S=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,S,R),S===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(S===void 0)return-1;if(S!==R)return it(S,R)}while(++E)},X.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Go;function Go(y,E,S,R){typeof S=="string"&&(R=S,S=void 0);try{return new X(y,S).inc(E,R).version}catch{return null}}t.diff=Wo;function Wo(y,E){if(mr(y,E))return null;var S=je(y),R=je(E),N="";if(S.prerelease.length||R.prerelease.length){N="pre";var M="prerelease"}for(var B in S)if((B==="major"||B==="minor"||B==="patch")&&S[B]!==R[B])return N+B;return M}t.compareIdentifiers=it;var kr=/^[0-9]+$/;function it(y,E){var S=kr.test(y),R=kr.test(E);return S&&R&&(y=+y,E=+E),y===E?0:S&&!R?-1:R&&!S?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return it(E,y)}t.major=ar;function ar(y,E){return new X(y,E).major}t.minor=Bi;function Bi(y,E){return new X(y,E).minor}t.patch=Hi;function Hi(y,E){return new X(y,E).patch}t.compare=We;function We(y,E,S){return new X(y,S).compare(new X(E,S))}t.compareLoose=zo;function zo(y,E){return We(y,E,!0)}t.rcompare=Hn;function Hn(y,E,S){return We(E,y,S)}t.sort=Vi;function Vi(y,E){return y.sort(function(S,R){return t.compare(S,R,E)})}t.rsort=Gi;function Gi(y,E){return y.sort(function(S,R){return t.rcompare(S,R,E)})}t.gt=bt;function bt(y,E,S){return We(y,E,S)>0}t.lt=Bt;function Bt(y,E,S){return We(y,E,S)<0}t.eq=mr;function mr(y,E,S){return We(y,E,S)===0}t.neq=Vn;function Vn(y,E,S){return We(y,E,S)!==0}t.gte=Ir;function Ir(y,E,S){return We(y,E,S)>=0}t.lte=At;function At(y,E,S){return We(y,E,S)<=0}t.cmp=Tt;function Tt(y,E,S,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y===S;case"!==":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y!==S;case"":case"=":case"==":return mr(y,S,R);case"!=":return Vn(y,S,R);case">":return bt(y,S,R);case">=":return Ir(y,S,R);case"<":return Bt(y,S,R);case"<=":return At(y,S,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=ke;function ke(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ke){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof ke))return new ke(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};ke.prototype.parse=function(y){var E=this.options.loose?s[Te]:s[_e],S=y.match(E);if(!S)throw new TypeError("Invalid comparator: "+y);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new X(S[2],this.options.loose):this.semver=Et},ke.prototype.toString=function(){return this.value},ke.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new X(y,this.options)),Tt(y,this.operator,this.semver,this.options))},ke.prototype.intersects=function(y,E){if(!(y instanceof ke))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var S;if(this.operator==="")return S=new ce(y.value,E),Jt(this.value,S,E);if(y.operator==="")return S=new ce(this.value,E),Jt(y.semver,S,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),M=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||M&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof ke)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var S=E?s[ye]:s[It];y=y.replace(S,Zo),r("hyphen replace",y),y=y.replace(s[we],yt),r("comparator trim",y,s[we]),y=y.replace(s[L],q),y=y.replace(s[oe],ie),y=y.split(/\s+/).join(" ");var R=E?s[Te]:s[_e],N=y.split(" ").map(function(M){return Cn(M,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(M){return!!M.match(R)})),N=N.map(function(M){return new ke(M,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(R){return y.set.some(function(N){return N.every(function(M){return R.intersects(M,E)})})})})},t.toComparators=Wi;function Wi(y,E){return new ce(y,E).set.map(function(S){return S.map(function(R){return R.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=Yo(y,E),r("caret",y),y=Ar(y,E),r("tildes",y),y=Qo(y,E),r("xrange",y),y=cr(y,E),r("stars",y),y}function Ce(y){return!y||y.toLowerCase()==="x"||y==="*"}function Ar(y,E){return y.trim().split(/\s+/).map(function(S){return Ko(S,E)}).join(" ")}function Ko(y,E){var S=E.loose?s[Q]:s[j];return y.replace(S,function(R,N,M,B,ee){r("tilde",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0"):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0",r("tilde return",Z),Z})}function Yo(y,E){return y.trim().split(/\s+/).map(function(S){return Jo(S,E)}).join(" ")}function Jo(y,E){r("caret",y,E);var S=E.loose?s[Ae]:s[ve];return y.replace(S,function(R,N,M,B,ee){r("caret",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?N==="0"?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function Qo(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(S){return Xo(S,E)}).join(" ")}function Xo(y,E){y=y.trim();var S=E.loose?s[Y]:s[ne];return y.replace(S,function(R,N,M,B,ee,Z){r("xRange",y,R,N,M,B,ee,Z);var Le=Ce(M),Re=Le||Ce(B),Se=Re||Ce(ee),Ee=Se;return N==="="&&Ee&&(N=""),Le?N===">"||N==="<"?R="<0.0.0":R="*":N&&Ee?(Re&&(B=0),ee=0,N===">"?(N=">=",Re?(M=+M+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",Re?M=+M+1:B=+B+1),R=N+M+"."+B+"."+ee):Re?R=">="+M+".0.0 <"+(+M+1)+".0.0":Se&&(R=">="+M+"."+B+".0 <"+M+"."+(+B+1)+".0"),r("xRange return",R),R})}function cr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function Zo(y,E,S,R,N,M,B,ee,Z,Le,Re,Se,Ee){return Ce(S)?E="":Ce(R)?E=">="+S+".0.0":Ce(N)?E=">="+S+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(Le)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+Le+1)+".0":Se?ee="<="+Z+"."+Le+"."+Re+"-"+Se:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new X(y,this.options));for(var E=0;E<this.set.length;E++)if(es(this.set[E],y,this.options))return!0;return!1};function es(y,E,S){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!S.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,S){try{E=new ce(E,S)}catch{return!1}return E.test(y)}t.maxSatisfying=ts;function ts(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new X(R,S))}),R}t.minSatisfying=rs;function rs(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new X(R,S))}),R}t.minVersion=Gr;function Gr(y,E){y=new ce(y,E);var S=new X("0.0.0");if(y.test(S)||(S=new X("0.0.0-0"),y.test(S)))return S;S=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(M){var B=new X(M.semver.version);switch(M.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!S||bt(S,B))&&(S=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+M.operator)}})}return S&&y.test(S)?S:null}t.validRange=ns;function ns(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=is;function is(y,E,S){return Tr(y,E,"<",S)}t.gtr=os;function os(y,E,S){return Tr(y,E,">",S)}t.outside=Tr;function Tr(y,E,S,R){y=new X(y,R),E=new ce(E,R);var N,M,B,ee,Z;switch(S){case">":N=bt,M=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,M=Ir,B=bt,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var Le=0;Le<E.set.length;++Le){var Re=E.set[Le],Se=null,Ee=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new ke(">=0.0.0")),Se=Se||Je,Ee=Ee||Je,N(Je.semver,Se.semver,R)?Se=Je:B(Je.semver,Ee.semver,R)&&(Ee=Je)}),Se.operator===ee||Se.operator===Z||(!Ee.operator||Ee.operator===ee)&&M(y,Ee.semver)||Ee.operator===Z&&B(y,Ee.semver))return!1}return!0}t.prerelease=ss;function ss(y,E){var S=je(y,E);return S&&S.prerelease.length?S.prerelease:null}t.intersects=Wr;function Wr(y,E,S){return y=new ce(y,S),E=new ce(E,S),y.intersects(E)}t.coerce=as;function as(y){if(y instanceof X)return y;if(typeof y!="string")return null;var E=y.match(s[J]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),HC=O((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,d,f){var p=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function o(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,d,f){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(u[d])||!r(f)){n("original object and wrapper must be functions");return}var p=u[d],h=f(p,d);return i(h,"__original",p),i(h,"__unwrap",function(){u[d]===h&&i(u,d,p)}),i(h,"__wrapped",!0),i(u,d,h),h}function a(u,d,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){d.forEach(function(h){s(p,h,f)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(f){d.forEach(function(p){c(f,p)})})}o.wrap=s,o.massWrap=a,o.unwrap=c,o.massUnwrap=l,e.exports=o}),VC=O((t,e)=>{"use strict";var r=HC(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(d,f,p){var h=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(d,f){for(var p=f.length,h=0;h<p;h++){var m=f[h],g=d[o];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](m)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(d,f,p){var h=c(d,f),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(d,m)}function u(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var h=0;h<d.length;h++)p[h]=f(d[h])}return p}}e.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,w){var C=c(this,v).slice();try{var b=g.call(this,v,w);return l(this,v,C),b}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function C(b){return function(){this._events[v]=w;try{return b.apply(this,arguments)}finally{w=this._events[v],this._events[v]=u(w,p)}}}n(this,"removeListener",C);try{return this._events[v]=u(w,p),g.apply(this,arguments)}finally{i(this,"removeListener"),this._events[v]=w}}}d[o]?typeof d[o]=="function"?s(d,o,[d[o],f]):Array.isArray(d[o])&&d[o].push(f):s(d,o,f),d.__wrapped||(n(d,"addListener",h),n(d,"on",h),n(d,"emit",m),s(d,"__unwrap",function(){i(d,"addListener"),i(d,"on"),i(d,"emit"),delete d[o],delete d.__wrapped}),s(d,"__wrapped",!0))}}),ZQ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=VC(),o=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=o.currentId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(C+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${C}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=o.triggerAsyncId(),C=o.executionAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=o.triggerAsyncId(),C=o.executionAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),w.then(C=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C)).catch(C=>{throw C[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(C){throw C&&(C[a]=v),C}finally{w.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=o.executionAsyncId(),C=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function C(_){!_||(_[s]||(_[s]=Object.create(null)),_[s][w]={namespace:v,context:v.active})}function b(_){if(!(_&&_[s]))return _;let P=_,x=_[s];return Object.keys(x).forEach(function(k){let A=x[k];P=A.namespace.bind(P,A.context)}),P}i(g,C,b)},u.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,o.createHook({init(w,C,b,_){if(l=o.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let P=" ".repeat(v._indent<0?0:v._indent);m(`${P}INIT [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}else if(l===0){let P=o.triggerAsyncId(),x=v._contexts.get(P);if(x){if(v._contexts.set(w,x),c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT USING CONTEXT FROM TRIGGERID [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}else if(c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT MISSING CONTEXT [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}if(c&&C==="PROMISE"){m(r.inspect(_,{showHidden:!0}));let P=_.parentId,x=" ".repeat(v._indent<0?0:v._indent);m(`${x}INIT RESOURCE-PROMISE [${C}] (${g}) parentId:${P} asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}},before(w){l=o.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(l),C){if(c){let b=o.triggerAsyncId(),_=" ".repeat(v._indent<0?0:v._indent);m(`${_}BEFORE (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`),v._indent+=2}v.enter(C)}else if(c){let b=o.triggerAsyncId(),_=" ".repeat(v._indent<0?0:v._indent);m(`${_}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){l=o.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(l),C){if(c){let b=o.triggerAsyncId();v._indent-=2;let _=" ".repeat(v._indent<0?0:v._indent);m(`${_}AFTER (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}v.exit(C)}else if(c){let b=o.triggerAsyncId();v._indent-=2;let _=" ".repeat(v._indent<0?0:v._indent);m(`${_}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}},destroy(w){if(l=o.executionAsyncId(),c){let C=o.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);m(`${b}DESTROY (${g}) currentUid:${l} asyncId:${w} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),eX=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=process.nextTick;process.nextTick=function(){if(!i.enabled)return o.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--i.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},o.apply(process,s)}}}),tX=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=global.Promise,s=o.prototype.then;o.prototype.then=u;function a(d,f,p,h){return typeof d!="function"?h?c(p):l(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function l(d){return function(f){throw n.destroy.call(null,d),f}}function u(d,f){if(!i.enabled)return s.call(this,d,f);let p=new r,h=--i.counter;return n.init.call(p,h,0,null,null),s.call(this,a(d,p,h,!0),a(f,p,h,!1))}}}),rX=O((t,e)=>{"use strict";var r=require("timers");function n(){}function i(){}function o(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",o,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,h,m,g,v,w){let C=r[h],b=r[m];r[h]=function(){if(!p.enabled)return C.apply(r,arguments);let _=new Array(arguments.length);for(let D=0;D<arguments.length;D++)_[D]=arguments[D];let P=_[0];if(typeof P!="function")throw new TypeError('"callback" argument must be a function');let x=new g,k=--p.counter,A;return f.init.call(x,k,0,null,null),_[0]=function(){l=A,f.pre.call(x,k);let D=!0;try{P.apply(this,arguments),D=!1}finally{D&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(x,k,!0),v.delete(A),f.destroy.call(null,k)})}f.post.call(x,k,!1),l=null,(w||u)&&(u=!1,v.delete(A),f.destroy.call(null,k))},A=C.apply(r,_),v.set(A,k),A},r[m]=function(_){if(l===_&&_!==null)u=!0;else if(v.has(_)){let P=v.get(_);v.delete(_),f.destroy.call(null,P)}b.apply(r,arguments)}}}),sL=O((t,e)=>{e.exports={_args:[["async-hook-jl@1.7.6","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"async-hook-jl@1.7.6",_id:"async-hook-jl@1.7.6",_inBundle:!1,_integrity:"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==",_location:"/async-hook-jl",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"async-hook-jl@1.7.6",name:"async-hook-jl",escapedName:"async-hook-jl",rawSpec:"1.7.6",saveSpec:null,fetchSpec:"1.7.6"},_requiredBy:["/cls-hooked"],_resolved:"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz",_spec:"1.7.6",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/jeff-lewis/async-hook-jl/issues"},dependencies:{"stack-chain":"^1.3.7"},description:"Inspect the life of handle objects in node",devDependencies:{async:"1.5.x","cli-color":"1.1.x",endpoint:"0.4.x",eslint:"^3.4.0"},engines:{node:"^4.7 || >=6.9 || >=7.3"},homepage:"https://github.com/jeff-lewis/async-hook-jl#readme",keywords:["async","async hooks","inspect","async wrap"],license:"MIT",main:"./index.js",name:"async-hook-jl",repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},scripts:{test:"node ./test/runner.js && eslint ."},version:"1.7.6"}}),nX=O((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:eX(),promise:tX(),timers:rX()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){o.add(h);return}for(let w of u)w(h,this,m,g,v)},this.pre=function(h){if(!o.has(h))for(let m of d)m(h,this)},this.post=function(h,m){if(!o.has(h))for(let g of f)g(h,this,m)},this.destroy=function(h){if(o.has(h)){o.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let f=u.indexOf(d);f!==-1&&u.splice(f,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=sL().version,this.providers=r.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),aL=O((t,e)=>{e.exports={_args:[["stack-chain@1.3.7","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"stack-chain@1.3.7",_id:"stack-chain@1.3.7",_inBundle:!1,_integrity:"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=",_location:"/stack-chain",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"stack-chain@1.3.7",name:"stack-chain",escapedName:"stack-chain",rawSpec:"1.3.7",saveSpec:null,fetchSpec:"1.3.7"},_requiredBy:["/async-hook-jl"],_resolved:"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz",_spec:"1.3.7",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/AndreasMadsen/stack-chain/issues"},description:"API for combining call site modifiers",devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},homepage:"https://github.com/AndreasMadsen/stack-chain#readme",keywords:["stack","chain","trace","call site","concat","format"],license:"MIT",name:"stack-chain",repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},scripts:{test:"tap ./test/simple"},version:"1.3.7"}}),iX=O((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch{return"<error>"}}}e.exports=function(n,i){var o=[];o.push(r(n));for(var s=0;s<i.length;s++){var a=i[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}o.push("    at "+c)}return o.join(`
`)}}),oX=O((t,e)=>{var r=iX();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=aL().version}var i=!1;n.prototype.callSite=function d(f){f||(f={}),i=!0;var p={};Error.captureStackTrace(p,d);var h=p.stack;return i=!1,h=h.slice(f.slice||0),f.extend&&(h=this.extend._modify(p,h)),f.filter&&(h=this.filter._modify(p,h)),h};var o=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,h=this._modifiers.length;p<h;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(d,f){if(i)return f;if(c)return r(d,f);var p=f.concat();p=o.extend._modify(d,p),p=o.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var h=o.format._formater(d,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?o.format._roolback():(o.format._backup(),o.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=o}),cL=O((t,e)=>{if(global._stackChain)if(global._stackChain.version===aL().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=oX()}),sX=O((t,e)=>{"use strict";var r=nX();if(global._asyncHook)if(global._asyncHook.version===sL().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else cL().filter.attach(function(n,i){return i.filter(function(o){let s=o.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),aX=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=VC(),o=sX(),s="cls@contexts",a="error@context",c=[];for(let b in o.providers)c[o.providers[b]]=b;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:f,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function d(b){this.name=b,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(b,_){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+b+"="+_+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[b]=_,_},d.prototype.get=function(b){if(!this.active){l&&g("    GETTING KEY:"+b+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+b+"="+this.active[b]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[b]},d.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let b=Object.create(this.active?this.active:Object.prototype);return b._ns_name=this.name,b.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(b,!0,2,!0)),b},d.prototype.run=function(b){let _=this.createContext();this.enter(_);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),b(_),_}catch(P){throw P&&(P[a]=_),P}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_)}},d.prototype.runAndReturn=function(b){var _;return this.run(function(P){_=b(P)}),_},d.prototype.runPromise=function(b){let _=this.createContext();this.enter(_);let P=b(_);if(!P||!P.then||!P.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),P.then(x=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_),x)).catch(x=>{throw x[a]=_,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_),x})},d.prototype.bind=function(b,_){_||(this.active?_=this.active:_=this.createContext());let P=this;return function(){P.enter(_);try{return b.apply(this,arguments)}catch(x){throw x&&(x[a]=_),x}finally{P.exit(_)}}},d.prototype.enter=function(b){n.ok(b,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(b)),this._set.push(this.active),this.active=b},d.prototype.exit=function(b){if(n.ok(b,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(b)),this.active===b){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let _=this._set.lastIndexOf(b);_<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(b)),n.ok(_>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(b))):(n.ok(_,"can't remove top context"),this._set.splice(_,1))},d.prototype.bindEmitter=function(b){n.ok(b.on&&b.addListener&&b.emit,"can only bind real EEs");let _=this,P="context@"+this.name;function x(A){!A||(A[s]||(A[s]=Object.create(null)),A[s][P]={namespace:_,context:_.active})}function k(A){if(!(A&&A[s]))return A;let D=A,F=A[s];return Object.keys(F).forEach(function(V){let ne=F[V];D=ne.namespace.bind(D,ne.context)}),D}i(b,x,k)},d.prototype.fromException=function(b){return b[a]};function f(b){return process.namespaces[b]}function p(b){n.ok(b,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+b);let _=new d(b);return _.id=u,o.addHooks({init(P,x,k,A,D){u=P,A?(_._contexts.set(P,_._contexts.get(A)),l&&g("PARENTID: "+b+" uid:"+P+" parent:"+A+" provider:"+k)):_._contexts.set(u,_.active),l&&g("INIT "+b+" uid:"+P+" parent:"+A+" provider:"+c[k]+" active:"+r.inspect(_.active,!0))},pre(P,x){u=P;let k=_._contexts.get(P);k?(l&&g(" PRE "+b+" uid:"+P+" handle:"+v(x)+" context:"+r.inspect(k)),_.enter(k)):l&&g(" PRE MISSING CONTEXT "+b+" uid:"+P+" handle:"+v(x))},post(P,x){u=P;let k=_._contexts.get(P);k?(l&&g(" POST "+b+" uid:"+P+" handle:"+v(x)+" context:"+r.inspect(k)),_.exit(k)):l&&g(" POST MISSING CONTEXT "+b+" uid:"+P+" handle:"+v(x))},destroy(P){u=P,l&&g("DESTROY "+b+" uid:"+P+" context:"+r.inspect(_._contexts.get(u))+" active:"+r.inspect(_.active,!0)),_._contexts.delete(P)}}),process.namespaces[b]=_,_}function h(b){let _=f(b);n.ok(_,`can't delete nonexistent namespace! "`+b+'"'),n.ok(_.id,"don't assign to process.namespaces directly! "+r.inspect(_)),process.namespaces[b]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(b){h(b)}),process.namespaces=Object.create(null)}process.namespaces={},o._state&&!o._state.enabled&&o.enable();function g(b){process.env.DEBUG&&process._rawDebug(b)}function v(b){if(!b)return b;if(typeof b=="function")return b.name?b.name:(b.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(b.constructor&&b.constructor.name)return b.constructor.name}if(l){w=cL();for(C in w.filter._modifiers)w.filter.deattach(C)}var w,C}),cX=O((t,e)=>{"use strict";var r=XQ();process&&r.gte(process.versions.node,"8.0.0")?e.exports=ZQ():e.exports=aX()}),lX=O((t,e)=>{t=e.exports=X;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,_="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",x=c++;a[x]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var D=c++;a[D]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var V=c++;a[V]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var ne=c++;a[ne]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[V]+"$";var J=c++;a[J]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var H=c++;a[H]="(?:~>?)";var L=c++;a[L]="(\\s*)"+a[H]+"\\s+",s[L]=new RegExp(a[L],"g");var q="$1~",j=c++;a[j]="^"+a[H]+a[F]+"$";var Q=c++;a[Q]="^"+a[H]+a[V]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var ie="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Ae=c++;a[Ae]="^"+a[z]+a[V]+"$";var Te=c++;a[Te]="^"+a[k]+"\\s*("+P+")$|^$";var _e=c++;a[_e]="^"+a[k]+"\\s*("+_+")$|^$";var we=c++;a[we]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[we]=new RegExp(a[we],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[V]+")\\s+-\\s+("+a[V]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X)return y;if(typeof y!="string"||y.length>n)return null;var S=E.loose?s[x]:s[b];if(!S.test(y))return null;try{return new X(y,E)}catch{return null}}t.valid=Ho;function Ho(y,E){var S=je(y,E);return S?S.version:null}t.clean=Vo;function Vo(y,E){var S=je(y.trim().replace(/^[=v]+/,""),E);return S?S.version:null}t.SemVer=X;function X(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof X){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof X))return new X(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var S=y.trim().match(E.loose?s[x]:s[b]);if(!S)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof X||(y=new X(y,this.options)),this.compareMain(y)||this.comparePre(y)},X.prototype.compareMain=function(y){return y instanceof X||(y=new X(y,this.options)),it(this.major,y.major)||it(this.minor,y.minor)||it(this.patch,y.patch)},X.prototype.comparePre=function(y){if(y instanceof X||(y=new X(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var S=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,S,R),S===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(S===void 0)return-1;if(S!==R)return it(S,R)}while(++E)},X.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Go;function Go(y,E,S,R){typeof S=="string"&&(R=S,S=void 0);try{return new X(y,S).inc(E,R).version}catch{return null}}t.diff=Wo;function Wo(y,E){if(mr(y,E))return null;var S=je(y),R=je(E),N="";if(S.prerelease.length||R.prerelease.length){N="pre";var M="prerelease"}for(var B in S)if((B==="major"||B==="minor"||B==="patch")&&S[B]!==R[B])return N+B;return M}t.compareIdentifiers=it;var kr=/^[0-9]+$/;function it(y,E){var S=kr.test(y),R=kr.test(E);return S&&R&&(y=+y,E=+E),y===E?0:S&&!R?-1:R&&!S?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return it(E,y)}t.major=ar;function ar(y,E){return new X(y,E).major}t.minor=Bi;function Bi(y,E){return new X(y,E).minor}t.patch=Hi;function Hi(y,E){return new X(y,E).patch}t.compare=We;function We(y,E,S){return new X(y,S).compare(new X(E,S))}t.compareLoose=zo;function zo(y,E){return We(y,E,!0)}t.rcompare=Hn;function Hn(y,E,S){return We(E,y,S)}t.sort=Vi;function Vi(y,E){return y.sort(function(S,R){return t.compare(S,R,E)})}t.rsort=Gi;function Gi(y,E){return y.sort(function(S,R){return t.rcompare(S,R,E)})}t.gt=bt;function bt(y,E,S){return We(y,E,S)>0}t.lt=Bt;function Bt(y,E,S){return We(y,E,S)<0}t.eq=mr;function mr(y,E,S){return We(y,E,S)===0}t.neq=Vn;function Vn(y,E,S){return We(y,E,S)!==0}t.gte=Ir;function Ir(y,E,S){return We(y,E,S)>=0}t.lte=At;function At(y,E,S){return We(y,E,S)<=0}t.cmp=Tt;function Tt(y,E,S,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y===S;case"!==":return typeof y=="object"&&(y=y.version),typeof S=="object"&&(S=S.version),y!==S;case"":case"=":case"==":return mr(y,S,R);case"!=":return Vn(y,S,R);case">":return bt(y,S,R);case">=":return Ir(y,S,R);case"<":return Bt(y,S,R);case"<=":return At(y,S,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=ke;function ke(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ke){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof ke))return new ke(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};ke.prototype.parse=function(y){var E=this.options.loose?s[Te]:s[_e],S=y.match(E);if(!S)throw new TypeError("Invalid comparator: "+y);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new X(S[2],this.options.loose):this.semver=Et},ke.prototype.toString=function(){return this.value},ke.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new X(y,this.options)),Tt(y,this.operator,this.semver,this.options))},ke.prototype.intersects=function(y,E){if(!(y instanceof ke))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var S;if(this.operator==="")return S=new ce(y.value,E),Jt(this.value,S,E);if(y.operator==="")return S=new ce(this.value,E),Jt(y.semver,S,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),M=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||M&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof ke)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var S=E?s[ye]:s[It];y=y.replace(S,Zo),r("hyphen replace",y),y=y.replace(s[we],yt),r("comparator trim",y,s[we]),y=y.replace(s[L],q),y=y.replace(s[oe],ie),y=y.split(/\s+/).join(" ");var R=E?s[Te]:s[_e],N=y.split(" ").map(function(M){return Cn(M,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(M){return!!M.match(R)})),N=N.map(function(M){return new ke(M,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(R){return y.set.some(function(N){return N.every(function(M){return R.intersects(M,E)})})})})},t.toComparators=Wi;function Wi(y,E){return new ce(y,E).set.map(function(S){return S.map(function(R){return R.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=Yo(y,E),r("caret",y),y=Ar(y,E),r("tildes",y),y=Qo(y,E),r("xrange",y),y=cr(y,E),r("stars",y),y}function Ce(y){return!y||y.toLowerCase()==="x"||y==="*"}function Ar(y,E){return y.trim().split(/\s+/).map(function(S){return Ko(S,E)}).join(" ")}function Ko(y,E){var S=E.loose?s[Q]:s[j];return y.replace(S,function(R,N,M,B,ee){r("tilde",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0"):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0",r("tilde return",Z),Z})}function Yo(y,E){return y.trim().split(/\s+/).map(function(S){return Jo(S,E)}).join(" ")}function Jo(y,E){r("caret",y,E);var S=E.loose?s[Ae]:s[ve];return y.replace(S,function(R,N,M,B,ee){r("caret",y,R,N,M,B,ee);var Z;return Ce(N)?Z="":Ce(M)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(B)?N==="0"?Z=">="+N+"."+M+".0 <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+"-"+ee+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?M==="0"?Z=">="+N+"."+M+"."+B+" <"+N+"."+M+"."+(+B+1):Z=">="+N+"."+M+"."+B+" <"+N+"."+(+M+1)+".0":Z=">="+N+"."+M+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function Qo(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(S){return Xo(S,E)}).join(" ")}function Xo(y,E){y=y.trim();var S=E.loose?s[Y]:s[ne];return y.replace(S,function(R,N,M,B,ee,Z){r("xRange",y,R,N,M,B,ee,Z);var Le=Ce(M),Re=Le||Ce(B),Se=Re||Ce(ee),Ee=Se;return N==="="&&Ee&&(N=""),Le?N===">"||N==="<"?R="<0.0.0":R="*":N&&Ee?(Re&&(B=0),ee=0,N===">"?(N=">=",Re?(M=+M+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",Re?M=+M+1:B=+B+1),R=N+M+"."+B+"."+ee):Re?R=">="+M+".0.0 <"+(+M+1)+".0.0":Se&&(R=">="+M+"."+B+".0 <"+M+"."+(+B+1)+".0"),r("xRange return",R),R})}function cr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function Zo(y,E,S,R,N,M,B,ee,Z,Le,Re,Se,Ee){return Ce(S)?E="":Ce(R)?E=">="+S+".0.0":Ce(N)?E=">="+S+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(Le)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+Le+1)+".0":Se?ee="<="+Z+"."+Le+"."+Re+"-"+Se:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new X(y,this.options));for(var E=0;E<this.set.length;E++)if(es(this.set[E],y,this.options))return!0;return!1};function es(y,E,S){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!S.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,S){try{E=new ce(E,S)}catch{return!1}return E.test(y)}t.maxSatisfying=ts;function ts(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new X(R,S))}),R}t.minSatisfying=rs;function rs(y,E,S){var R=null,N=null;try{var M=new ce(E,S)}catch{return null}return y.forEach(function(B){M.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new X(R,S))}),R}t.minVersion=Gr;function Gr(y,E){y=new ce(y,E);var S=new X("0.0.0");if(y.test(S)||(S=new X("0.0.0-0"),y.test(S)))return S;S=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(M){var B=new X(M.semver.version);switch(M.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!S||bt(S,B))&&(S=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+M.operator)}})}return S&&y.test(S)?S:null}t.validRange=ns;function ns(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=is;function is(y,E,S){return Tr(y,E,"<",S)}t.gtr=os;function os(y,E,S){return Tr(y,E,">",S)}t.outside=Tr;function Tr(y,E,S,R){y=new X(y,R),E=new ce(E,R);var N,M,B,ee,Z;switch(S){case">":N=bt,M=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,M=Ir,B=bt,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var Le=0;Le<E.set.length;++Le){var Re=E.set[Le],Se=null,Ee=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new ke(">=0.0.0")),Se=Se||Je,Ee=Ee||Je,N(Je.semver,Se.semver,R)?Se=Je:B(Je.semver,Ee.semver,R)&&(Ee=Je)}),Se.operator===ee||Se.operator===Z||(!Ee.operator||Ee.operator===ee)&&M(y,Ee.semver)||Ee.operator===Z&&B(y,Ee.semver))return!1}return!0}t.prerelease=ss;function ss(y,E){var S=je(y,E);return S&&S.prerelease.length?S.prerelease:null}t.intersects=Wr;function Wr(y,E,S){return y=new ce(y,S),E=new ce(E,S),y.intersects(E)}t.coerce=as;function as(y){if(y instanceof X)return y;if(typeof y!="string")return null;var E=y.match(s[J]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),uX=O((t,e)=>{var r=HC().wrap,n=1<<0,i=1<<1,o=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],d,f;function p(x,k){var A=x.length,D=k.length,F=[];if(A===0&&D===0)return F;for(var V=0;V<A;V++)F[V]=x[V];if(D===0)return F;for(var ne=0;ne<D;ne++){var Y=!0;for(V=0;V<A;V++)if(x[V].uid===k[ne].uid){Y=!1;break}Y&&F.push(k[ne])}return F}process._fatalException?(h=!1,d=function(x){var k=a.length;if(h||k===0)return!1;var A=!1;h=!0;for(var D=0;D<k;++D){var F=a[D];if((F.flags&s)!=0){var V=m&&m[F.uid];A=F.error(V,x)||A}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,A&&!l},f=function(x,k,A){var D=[];l=!0;for(var F=0;F<A;++F){var V=k[F];if(D[V.uid]=V.data,(V.flags&n)!=0){var ne=V.create(V.data);ne!==void 0&&(D[V.uid]=ne)}}return l=!1,function(){m=D,u.push(a),a=p(k,a),l=!0;for(var Y=0;Y<A;++Y)(k[Y].flags&i)>0&&k[Y].before(this,D[k[Y].uid]);l=!1;var J=x.apply(this,arguments);for(l=!0,Y=0;Y<A;++Y)(k[Y].flags&o)>0&&k[Y].after(this,D[k[Y].uid]);return l=!1,a=u.pop(),m=void 0,J}},r(process,"_fatalException",function(x){return function(k){return d(k)||x(k)}})):(g=!1,d=function(x){if(g)throw x;for(var k=!1,A=a.length,D=0;D<A;++D){var F=a[D];(F.flags&s)!=0&&(k=F.error(null,x)||k)}if(!k&&l)throw x},f=function(x,k,A){var D=[];l=!0;for(var F=0;F<A;++F){var V=k[F];if(D[V.uid]=V.data,(V.flags&n)!=0){var ne=V.create(V.data);ne!==void 0&&(D[V.uid]=ne)}}return l=!1,function(){var Y=!1,J=!1;u.push(a),a=p(k,a),l=!0;for(var H=0;H<A;++H)(k[H].flags&i)>0&&k[H].before(this,D[k[H].uid]);l=!1;var L;try{L=x.apply(this,arguments)}catch(q){Y=!0;for(var H=0;H<A;++H)if((a[H].flags&s)!=0)try{J=a[H].error(D[k[H].uid],q)||J}catch(Q){throw g=!0,Q}if(!J)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),q}finally{if(!Y||J){for(l=!0,H=0;H<A;++H)(k[H].flags&o)>0&&k[H].after(this,D[k[H].uid]);l=!1}a=u.pop()}return L}},process.addListener("uncaughtException",d));var h,m,g;function v(x,k,A){l=!0;for(var D=0;D<A;++D){var F=k[D];F.create&&F.create(F.data)}return l=!1,function(){u.push(a),a=p(k,a);var V=x.apply(this,arguments);return a=u.pop(),V}}function w(x){var k=a.length;if(k===0)return x;for(var A=a.slice(),D=0;D<k;++D)if(A[D].flags>0)return f(x,A,k);return v(x,A,k)}function C(x,k){typeof x.create=="function"&&(this.create=x.create,this.flags|=n),typeof x.before=="function"&&(this.before=x.before,this.flags|=i),typeof x.after=="function"&&(this.after=x.after,this.flags|=o),typeof x.error=="function"&&(this.error=x.error,this.flags|=s),this.uid=++c,this.data=k===void 0?null:k}C.prototype.create=void 0,C.prototype.before=void 0,C.prototype.after=void 0,C.prototype.error=void 0,C.prototype.data=void 0,C.prototype.uid=0,C.prototype.flags=0;function b(x,k){if(typeof x!="object"||!x)throw new TypeError("callbacks argument must be an object");return x instanceof C?x:new C(x,k)}function _(x,k){var A;x instanceof C?A=x:A=b(x,k);for(var D=!1,F=0;F<a.length;F++)if(A===a[F]){D=!0;break}return D||a.push(A),A}function P(x){for(var k=0;k<a.length;k++)if(x===a[k]){a.splice(k,1);break}}process.createAsyncListener=b,process.addAsyncListener=_,process.removeAsyncListener=P,e.exports=w}),dX=O((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(i){var o,s;super(c);var a=this;try{i.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[d,f];function d(p){return n(a,!1),l(p)}function f(p){return n(a,!1),u(p)}}}}}),fX=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=HC(),e=lX(),r=t.wrap,n=t.massWrap,i=uX(),o=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(L){if(L.length===0)return[{},null];var q=L[0],j={};typeof q=="object"&&q!==null?j=q:H(q)?j.path=q:(j.port=q,L.length>1&&typeof L[1]=="string"&&(j.host=L[1]));var Q=L[L.length-1];return typeof Q!="function"?[j,null]:[j,Q]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(L){var q={};function j(z){return(z=Number(z))>=0?z:!1}typeof L[0]=="object"&&L[0]!==null?q=L[0]:typeof L[0]=="string"&&j(L[0])===!1?q.path=L[0]:(q.port=L[0],typeof L[1]=="string"&&(q.host=L[1]));var Q=L[L.length-1];return typeof Q=="function"?[q,Q]:[q]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",d):r(u.Server.prototype,"_listen2",d);function d(L){return function(){this.on("connection",function(q){q._handle&&(q._handle.onread=i(q._handle.onread))});try{return L.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function f(L){if(L&&L._handle){var q=L._handle;q._originalOnread||(q._originalOnread=q.onread),q.onread=i(q._originalOnread)}}r(u.Socket.prototype,"connect",function(L){return function(){var q;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?q=arguments[0]:q=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),q[1]&&(q[1]=i(q[1]));var j=L.apply(this,q);return f(this),j}});var p=require("http");r(p.Agent.prototype,"addRequest",function(L){return function(q){var j=q.onSocket;return q.onSocket=i(function(Q){return f(Q),j.apply(this,arguments)}),L.apply(this,arguments)}});var h=require("child_process");function m(L){Array.isArray(L.stdio)&&L.stdio.forEach(function(q){q&&q._handle&&(q._handle.onread=i(q._handle.onread),r(q._handle,"close",Y))}),L._handle&&(L._handle.onexit=i(L._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(L){return function(){var q=L.apply(this,arguments);return m(this),q}}):n(h,["execFile","fork","spawn"],function(L){return function(){var q=L.apply(this,arguments);return m(q),q}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,ne),r(process,"nextTick",Y);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),C=global.setTimeout===w.setTimeout;n(w,v,Y),C&&n(global,v,Y);var b=require("dns");n(b,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ne),b.resolveNaptr&&r(b,"resolveNaptr",ne);var _=require("fs");n(_,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ne),_.lchown&&r(_,"lchown",ne),_.lchmod&&r(_,"lchmod",ne),_.ftruncate&&r(_,"ftruncate",ne);var P;try{P=require("zlib")}catch{}P&&P.Deflate&&P.Deflate.prototype&&(x=Object.getPrototypeOf(P.Deflate.prototype),x._transform?r(x,"_transform",ne):x.write&&x.flush&&x.end&&n(x,["write","flush","end"],ne));var x,k;try{k=require("crypto")}catch{}k&&(A=["pbkdf2","randomBytes"],l||A.push("pseudoRandomBytes"),n(k,A,ne));var A,D=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";D&&(F=process.addAsyncListener({create:function(){D=!1}}),global.Promise.resolve(!0).then(function(){D=!1}),process.removeAsyncListener(F));var F;D&&V();function V(){var L=global.Promise;function q(ie){if(!(this instanceof q))return L(ie);if(typeof ie!="function")return new L(ie);var ve,Ae,Te=new L(_e);Te.__proto__=q.prototype;try{ie.apply(ve,Ae)}catch(we){Ae[1](we)}return Te;function _e(we,yt){ve=this,Ae=[It,ye];function It(pe){return Q(Te,!1),we(pe)}function ye(pe){return Q(Te,!1),yt(pe)}}}if(o.inherits(q,L),r(L.prototype,"then",oe),L.prototype.chain&&r(L.prototype,"chain",oe),s)global.Promise=dX()(L,Q);else{var j=["all","race","reject","resolve","accept","defer"];j.forEach(function(ie){typeof L[ie]=="function"&&(q[ie]=L[ie])}),global.Promise=q}function Q(ie,ve){(!ie.__asl_wrapper||ve)&&(ie.__asl_wrapper=i(z))}function z(ie,ve,Ae,Te){var _e;try{return _e=ve.call(ie,Ae),{returnVal:_e,error:!1}}catch(we){return{errorVal:we,error:!0}}finally{_e instanceof L?Te.__asl_wrapper=function(){var we=_e.__asl_wrapper||z;return we.apply(this,arguments)}:Q(Te,!0)}}function oe(ie){return function(){var ve=this,Ae=ie.apply(ve,Array.prototype.map.call(arguments,Te));return Ae.__asl_wrapper=function(_e,we,yt,It){return ve.__asl_wrapper?(ve.__asl_wrapper(_e,function(){},null,Ae),Ae.__asl_wrapper(_e,we,yt,It)):z(_e,we,yt,It)},Ae;function Te(_e){return typeof _e!="function"?_e:i(function(we){var yt=(ve.__asl_wrapper||z)(this,_e,we,Ae);if(yt.error)throw yt.errorVal;return yt.returnVal})}}}}function ne(L){var q=function(){var j,Q=arguments.length-1;if(typeof arguments[Q]=="function"){j=Array(arguments.length);for(var z=0;z<arguments.length-1;z++)j[z]=arguments[z];j[Q]=i(arguments[Q])}return L.apply(this,j||arguments)};switch(L.length){case 1:return function(j){return arguments.length!==1?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j))};case 2:return function(j,Q){return arguments.length!==2?q.apply(this,arguments):(typeof Q=="function"&&(Q=i(Q)),L.call(this,j,Q))};case 3:return function(j,Q,z){return arguments.length!==3?q.apply(this,arguments):(typeof z=="function"&&(z=i(z)),L.call(this,j,Q,z))};case 4:return function(j,Q,z,oe){return arguments.length!==4?q.apply(this,arguments):(typeof oe=="function"&&(oe=i(oe)),L.call(this,j,Q,z,oe))};case 5:return function(j,Q,z,oe,ie){return arguments.length!==5?q.apply(this,arguments):(typeof ie=="function"&&(ie=i(ie)),L.call(this,j,Q,z,oe,ie))};case 6:return function(j,Q,z,oe,ie,ve){return arguments.length!==6?q.apply(this,arguments):(typeof ve=="function"&&(ve=i(ve)),L.call(this,j,Q,z,oe,ie,ve))};default:return q}}function Y(L){var q=function(){var j;if(typeof arguments[0]=="function"){j=Array(arguments.length),j[0]=i(arguments[0]);for(var Q=1;Q<arguments.length;Q++)j[Q]=arguments[Q]}return L.apply(this,j||arguments)};switch(L.length){case 1:return function(j){return arguments.length!==1?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j))};case 2:return function(j,Q){return arguments.length!==2?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j,Q))};case 3:return function(j,Q,z){return arguments.length!==3?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j,Q,z))};case 4:return function(j,Q,z,oe){return arguments.length!==4?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j,Q,z,oe))};case 5:return function(j,Q,z,oe,ie){return arguments.length!==5?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j,Q,z,oe,ie))};case 6:return function(j,Q,z,oe,ie,ve){return arguments.length!==6?q.apply(this,arguments):(typeof j=="function"&&(j=i(j)),L.call(this,j,Q,z,oe,ie,ve))};default:return q}}function J(L){return(L=Number(L))>=0?L:!1}function H(L){return typeof L=="string"&&J(L)===!1}}),pX=O((t,e)=>{"use strict";var r=require("assert"),n=VC(),i="cls@contexts",o="error@context";process.addAsyncListener||fX();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[o]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(h){throw h&&(h[o]=f),h}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function h(g){!g||(g[i]||(g[i]=Object.create(null)),g[i][p]={namespace:f,context:f.active})}function m(g){if(!(g&&g[i]))return g;var v=g,w=g[i];return Object.keys(w).forEach(function(C){var b=w[C];v=b.namespace.bind(v,b.context)}),v}n(d,h,m)},s.prototype.fromException=function(d){return d[o]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,h){h&&f.enter(h)},after:function(p,h){h&&f.exit(h)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function l(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Ec=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=zt(),r=BC(),n=qh(),i=Z1(),o=oL(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,f,p,h){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(f)}:null},c.spanToContextObject=function(l,u,d){var f=new n;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=u,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=cX():this.cls=pX()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,f=l&&l.traceId?l:null,p=l&&l.headers;if(f){var h=new n("00-"+f.traceId+"-"+f.spanId+"-01"),m=new i(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(d){var h=new n(d.traceparent),m=new i(d.tracestate),v=typeof u=="object"?new o(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new i(p.tracestate?p.tracestate.toString():null),v=new o(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===l){f.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),hX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=_r(),r=xt(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function o(a,c){a?(n.length===0&&r.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",i))}t.enable=o;function s(){r.channel.unsubscribe("console",i),n=[]}t.dispose=s}),mX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=_r(),r=xt(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},o=function(c){var l=c.data.result;n.forEach(function(u){var d=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",o))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",o),n=[]}t.dispose=a}),gX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=_r(),r=xt(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},o=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",o))}t.enable=s;function a(){r.channel.unsubscribe("winston",o),n=[]}t.dispose=a}),vX=O((t,e)=>{"use strict";var r=BC(),n=function(){function i(o){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=o,i.INSTANCE=this}return i.prototype.enable=function(o,s){r.IsInitialized&&(hX().enable(o&&s,this._client),mX().enable(o,this._client),gX().enable(o,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),yX=O((t,e)=>{"use strict";var r=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var o=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(o[0])>13||parseInt(o[0])===13&&parseInt(o[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var o=this;if(i){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),o._client.trackException({exception:u}),o._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),Ao=O(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(o){o.COMMITTED_BYTES="\\Memory\\Committed Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",o.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",o.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",o.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",o.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",o.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",o.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(o){o.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",o.AVAILABLE_BYTES="\\Memory\\Available Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",o.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",o.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var i;(function(o){o.REQUESTS_DURATION="requests/duration",o.DEPENDENCIES_DURATION="dependencies/duration",o.EXCEPTIONS_COUNT="exceptions/count",o.TRACES_COUNT="traces/count"})(i=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),GC=O((t,e)=>{"use strict";var r=require("os"),n=Ao(),i=function(){function o(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return o.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:o._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countRequest=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalRequestExecutionTime+=c,a===!1&&o._totalFailedRequestCount++,o._totalRequestCount++}},o.countException=function(){o._totalExceptionCount++},o.countDependency=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalDependencyExecutionTime+=c,a===!1&&o._totalFailedDependencyCount++,o._totalDependencyCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},o.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],h=this._lastCpus[f],m="% cpu("+f+") ",g=p.model,v=p.speed,w=p.times,C=h.times,b=w.user-C.user||0;a+=b;var _=w.sys-C.sys||0;c+=_;var P=w.nice-C.nice||0;l+=P;var x=w.idle-C.idle||0;u+=x;var k=w.irq-C.irq||0;d+=k}var A=void 0;if(typeof process.cpuUsage=="function"){var D=process.cpuUsage(),F=process.hrtime(),V=D.user-this._lastAppCpuUsage.user+(D.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var ne=(F[0]-this._lastHrtime[0])*1e6+(F[1]-this._lastHrtime[1])/1e3||0;A=100*V/(ne*s.length)}this._lastAppCpuUsage=D,this._lastHrtime=F}var Y=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(Y-u)/Y*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:A||a/Y*100})}this._lastCpus=s},o.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},o.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=o._intervalRequestExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},o.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=o._intervalDependencyExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},o.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:o._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o._totalRequestCount=0,o._totalFailedRequestCount=0,o._totalDependencyCount=0,o._totalFailedDependencyCount=0,o._totalExceptionCount=0,o._intervalDependencyExecutionTime=0,o._intervalRequestExecutionTime=0,o}();e.exports=i}),wX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),CX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),lL=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=Ao(),i=wX(),o=CX(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var f in c)if(c[f]!=l[d].dimensions[f]){u=!0;break}if(!u)return l[d];u=!1}}var p=new i.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[o.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),$h=O((t,e)=>{"use strict";var r=require("os"),n=require("fs"),i=require("path"),o=_r(),s=zt(),a=function(){function c(l){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),bX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(d,f)};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),i=_r(),o=hn(),s=Lu(),a=iL(),c=bc(),l=function(u){r(d,u);function d(f,p){var h=u.call(this)||this;return p&&p.method&&f&&(h.method=p.method,h.url=d._getUrlFromRequestOptions(f,p),h.startTime=+new Date),h}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=o.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=i.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=i.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?w.time=f.time:this.startTime&&(w.time=new Date(this.startTime)),f){for(var C in f)w[C]||(w[C]=f[C]);if(f.properties)for(var C in f.properties)w.properties[C]=f.properties[C]}return w},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var h=n.parse(f);h.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(w){f[w]=m[w]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);e.exports=l}),EX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=lt(),n=Ao();function i(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function o(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",w=p+" "+v,C=n.DependencyTypeName.Http,b=g?(m+":"+g).toString():m.toString(),_=h.toString(),P=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,x=P<400;return{id:a,name:w,dependencyTypeName:C,target:b,data:_,success:x,duration:c,url:_,resultCode:String(P),properties:i(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",k=s.attributes[n.SpanAttribute.GrpcService],A=k?p+" "+k:s.name;return{id:a,duration:c,name:A,target:k.toString(),data:k.toString()||A,url:k.toString()||A,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:i(s.attributes)}}else{var D=s.name,F=s.links&&s.links.map(function(V){return{operation_Id:V.context.traceId,id:V.context.spanId}});return{id:a,duration:c,name:D,target:l,data:l||D,url:l||D,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},i(s.attributes)),{"_MS.links":F||void 0})}}}t.spanToTelemetryContract=o}),_X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=lt(),r=xt(),n=qh(),i=EX(),o=x1(),s=[],a=function(l){var u=l.data,d=i.spanToTelemetryContract(u),f=u.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=u.parentSpanId?"|"+f.traceId+"."+u.parentSpanId+".":null,o.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(d)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(d){return d!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),SX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=xt(),r=[],n=function(o){o.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",time:o.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=i}),xX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=xt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query||{},c=a.sql||"Unknown query",l=!o.data.err,u=a._connection||{},d=u.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=i}),PX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=xt(),r=[],n=function(o){r.forEach(function(s){o.data.commandObj.command!=="info"&&s.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",time:o.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=i}),kX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=xt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!o.data.error,u=o.data.database.host+":"+o.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=i}),Fu=O((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),w=0,m=0;m<g;m++)for(var C=arguments[m],b=0,_=C.length;b<_;b++,w++)v[w]=C[b];return v},n=require("http"),i=require("https"),o=zt(),s=hn(),a=Lu(),c=bX(),l=Ec(),u=bc(),d=qh(),f=BC(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(_X().enable(!0,this._client),SX().enable(m,this._client),xX().enable(m,this._client),PX().enable(m,this._client),kX().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=i.request,w=function(C,b){var _=!b[h.disableCollectionRequestOption]&&!C[h.alreadyAutoCollectedFlag];b.headers&&b.headers["user-agent"]&&b.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(_=!1),C[h.alreadyAutoCollectedFlag]=!0,C&&b&&_&&(l.CorrelationContextManager.wrapEmitter(C),h.trackRequest(m._client,{options:b,request:C}))};n.request=function(C){for(var b=[],_=1;_<arguments.length;_++)b[_-1]=arguments[_];var P=g.call.apply(g,r([n,C],b));return w(P,C),P},i.request=function(C){for(var b=[],_=1;_<arguments.length;_++)b[_-1]=arguments[_];var P=v.call.apply(v,r([i,C],b));return w(P,C),P},n.get=function(C){for(var b,_=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var x=(b=n.request).call.apply(b,r([n,C],_));return x.end(),x},i.get=function(C){for(var b,_=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var x=(b=i.request).call.apply(b,r([i,C],_));return x.end(),x}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),w=l.CorrelationContextManager.getCurrentContext(),C,b;if(w&&w.operation&&w.operation.traceparent&&d.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),C=w.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var _=new d;b=_.toString(),C=_.getBackCompatRequestId()}else C=w&&w.operation&&w.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var P=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,P)}catch(A){o.warn("Request-Context header could not be set. Correlation of requests may be lost",A)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,C),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,C)),b||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,b||w.operation.traceparent.toString());else if(u.w3cEnabled){var _=new d().toString();g.request.setHeader(a.traceparentHeader,_)}if(w.operation.tracestate){var x=w.operation.tracestate.toString();x&&g.request.setHeader(a.traceStateHeader,x)}var k=w.customProperties.serializeToHeader();k&&g.request.setHeader(a.correlationContextHeader,k)}catch(A){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",A)}}g.request.on&&(g.request.on("response",function(A){v.onResponse(A);var D=v.getDependencyTelemetry(g,C);D.contextObjects=D.contextObjects||{},D.contextObjects["http.RequestOptions"]=g.options,D.contextObjects["http.ClientRequest"]=g.request,D.contextObjects["http.ClientResponse"]=A,m.trackDependency(D)}),g.request.on("error",function(A){v.onError(A);var D=v.getDependencyTelemetry(g,C);D.contextObjects=D.contextObjects||{},D.contextObjects["http.RequestOptions"]=g.options,D.contextObjects["http.ClientRequest"]=g.request,D.contextObjects.Error=A,m.trackDependency(D)}),g.request.on("abort",function(){v.onError(new Error);var A=v.getDependencyTelemetry(g,C);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(A)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),IX=O((t,e)=>{"use strict";var r=require("os"),n=Ao(),i=hn(),o=$h(),s=Fu(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},w=o.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,w=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),C=i.makeRequest(p,v,w,function(b){if(b.statusCode===200){g._isVM=!0;var _="";b.on("data",function(P){_+=P}),b.on("end",function(){g._vmData=g._isJSON(_)?JSON.parse(_):{},h()})}else h()});C&&(C.on("error",function(b){b&&b.message&&b.message.indexOf(u)>-1&&(g._isVM=!1),h()}),C.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();e.exports=d}),uL=O((t,e)=>{"use strict";var r=require("http"),n=require("https"),i=zt(),o=hn(),s=Lu(),a=oL(),c=Ec(),l=GC(),u=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,C){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(C);var b=w&&!w[d.alreadyAutoCollectedFlag];if(w&&b){var _=new a(w),P=f._generateCorrelationContext(_);c.CorrelationContextManager.runWithContext(P,function(){f._isEnabled&&(w[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:w,response:C},_)),typeof v=="function"&&v(w,C)})}else typeof v=="function"&&v(w,C)}}},h=function(v){var w=v.addListener.bind(v);v.addListener=function(C,b){switch(C){case"request":case"checkContinue":return w(C,p(b));default:return w(C,b)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var C=m(v,p(w));return h(C),C}else{var C=m(p(v));return h(C),C}};var g=n.createServer;n.createServer=function(v,w){var C=g(v,p(w));return h(C),C}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(f.context.tags)||h.operation.id,h.operation.name=m.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),d.endRequest(f,m,p,p.duration,p.error)},d.trackRequest=function(f,p,h){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);o.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),m&&!h&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);o.safeIncludeCorrelationHeader(f,p,h)}},d.endRequest=function(f,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(f.context.tags),h.tagOverrides)for(var w in h.tagOverrides)v.tagOverrides[w]=h.tagOverrides[w];var C=p.getLegacyRootId();C&&(v.properties.ai_legacyRootId=C),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),AX=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("os"),i=_r(),o=Ao(),s=hn(),a=zt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,f,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,w={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return w},u.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.name,h=r(r({},f),{Name:p});return h},u.createQuickPulseTraceDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,h=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:i.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){h+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(d){var f,p,h,m;d.data.baseType?(p=o.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=o.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),h=d.tags[u.keys.operationId],m=u.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};f.push(g)}var v=d.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};f.push(g)}return f},u.keys=new i.ContextTagKeys,u}();e.exports=l}),TX=O((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),RX=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(d,f,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(_){try{b(h.next(_))}catch(P){v(P)}}function C(_){try{b(h.throw(_))}catch(P){v(P)}}function b(_){_.done?g(_.value):m(_.value).then(w,C)}b((h=h.apply(d,f||[])).next())})},n=t&&t.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(b){return function(_){return C([b,_])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=b[0]&2?m.return:b[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,b[1])).done)return g;switch(m=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return p.label++,{value:b[1],done:!1};case 5:p.label++,m=b[1],b=[0];continue;case 7:b=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){p=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){p.label=b[1];break}if(b[0]===6&&p.label<g[1]){p.label=g[1],g=b;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(b);break}g[2]&&p.ops.pop(),p.trys.pop();continue}b=f.call(d,p)}catch(_){b=[6,_],m=0}finally{h=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},i=require("https"),o=Fu(),s=zt(),a=TX(),c=hn(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,h){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,h,"ping",m)},d.prototype.post=function(f,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],p,h,"post")];case 1:return m.sent(),[2]}})})},d.prototype._submitData=function(f,p,h,m,g){return r(this,void 0,void 0,function(){var v,w,C,b,_,P=this;return n(this,function(x){return v=JSON.stringify(f),w=(b={},b[o.disableCollectionRequestOption]=!0,b.host=p&&p.length>0?p:this._config.quickPulseHost,b.method=l.method,b.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,b.headers=(_={Expect:"100-continue"},_[l.time]=a.getTransmissionTime(),_["Content-Type"]="application/json",_["Content-Length"]=Buffer.byteLength(v),_),b),g&&g.length>0&&g.forEach(function(k){return w.headers[k.name]=k.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,C=i.request(w,function(k){if(k.statusCode==200){var A=k.headers[l.subscribed]==="true",D=k.headers[l.endpointRedirect]?k.headers[l.endpointRedirect].toString():null,F=k.headers[l.pollingIntervalHint]?parseInt(k.headers[l.pollingIntervalHint].toString()):null;P._consecutiveErrors=0,h(A,k,D,F)}else P._onError("StatusCode:"+k.statusCode+" StatusMessage:"+k.statusMessage),h()}),C.on("error",function(k){P._onError(k),h()}),C.write(v),C.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),DX=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,d,f,p){function h(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function v(b){try{C(p.next(b))}catch(_){g(_)}}function w(b){try{C(p.throw(b))}catch(_){g(_)}}function C(b){b.done?m(b.value):h(b.value).then(v,w)}C((p=p.apply(u,d||[])).next())})},n=t&&t.__generator||function(u,d){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(C){return function(b){return w([C,b])}}function w(C){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,h&&(m=C[0]&2?h.return:C[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,C[1])).done)return m;switch(h=0,m&&(C=[C[0]&2,m.value]),C[0]){case 0:case 1:m=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,h=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!m||C[1]>m[0]&&C[1]<m[3])){f.label=C[1];break}if(C[0]===6&&f.label<m[1]){f.label=m[1],m=C;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(C);break}m[2]&&f.ops.pop(),f.trys.pop();continue}C=d.call(u,f)}catch(b){C=[6,b],h=0}finally{p=m=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},i=zt(),o=AX(),s=RX(),a=Ao(),c=$h(),l=function(){function u(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var f=o.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},u.prototype._addMetric=function(d){var f=d.value,p=d.count||1,h=a.PerformanceToQuickPulseCounter[d.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+f*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=o.createQuickPulseMetric(d),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),f=o.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,f,p,h){d!=null?(this._isCollectingData!==d&&(i.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,i.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),OX=O((t,e)=>{"use strict";var r=Ao(),n=function(){function i(){}return i.parse=function(o){if(!o)return{};var s=o.split(i._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var d=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];l[f]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),dL=O((t,e)=>{"use strict";var r=bc(),n=OX(),i=zt(),o=Ao(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(l),p=n.parse(d),h=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),NX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=dL(),n=$h(),i=zt(),o=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var f=0,p=u;f<p.length;f++){var h=p[f];d[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",f=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,f=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=o}),LX=O((t,e)=>{"use strict";var r=zt(),n=function(){function i(o,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=o,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(o,s,a){this._sender.setDiskRetryMode(o,s,a)},i.prototype.send=function(o){var s=this;if(!this._isDisabled()){if(!o){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(o),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(o,s){var a=this._buffer.length<1;a||(o?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},i}();e.exports=n}),FX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),MX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=_r();function r(i,o){var s=i.sampleRate,a=!1;return s==null||s>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=n(o.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(i){var o=-2147483648,s=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=o?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),qX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=GC(),r=_r();function n(i,o){switch(o&&o.addDocument(i),i.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=i.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),$X=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=_r(),n=lL(),i=_r();function o(s,a){if(n.isEnabled())switch(s.data.baseType){case i.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(d);break;case i.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case i.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=o}),jX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(FX(),t),r(MX(),t),r(qX(),t),r($X(),t)}),UX=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(w){return w instanceof m?w:new m(function(C){C(w)})}return new(m||(m=Promise))(function(w,C){function b(x){try{P(g.next(x))}catch(k){C(k)}}function _(x){try{P(g.throw(x))}catch(k){C(k)}}function P(x){x.done?w(x.value):v(x.value).then(b,_)}P((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,C;return C={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function b(P){return function(x){return _([P,x])}}function _(P){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(w=P[0]&2?v.return:P[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,P[1])).done)return w;switch(v=0,w&&(P=[P[0]&2,w.value]),P[0]){case 0:case 1:w=P;break;case 4:return m.label++,{value:P[1],done:!1};case 5:m.label++,v=P[1],P=[0];continue;case 7:P=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(P[0]===6||P[0]===2)){m=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){m.label=P[1];break}if(P[0]===6&&m.label<w[1]){m.label=w[1],w=P;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(P);break}w[2]&&m.ops.pop(),m.trys.pop();continue}P=h.call(p,m)}catch(x){P=[6,x],v=0}finally{g=w=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},i=require("fs"),o=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=zt(),u=Fu(),d=hn(),f=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(o.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=i.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,w,C,b=this;return n(this,function(_){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",h.forEach(function(P){var x=b._stringify(P);typeof x=="string"&&(w+=x+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),C=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(C,function(P,x){var k=x;P?(l.warn(P),k=C,v.headers["Content-Length"]=C.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=x.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var A=function(F){F.setEncoding("utf-8");var V="";F.on("data",function(ne){V+=ne}),F.on("end",function(){if(b._numConsecutiveFailures=0,b._enableDiskRetryMode){if(F.statusCode===200)b._resendTimer||(b._resendTimer=setTimeout(function(){b._resendTimer=null,b._sendFirstFileOnDisk()},b._resendInterval),b._resendTimer.unref());else if(b._isRetriable(F.statusCode))try{var ne=JSON.parse(V),Y=[];ne.errors.forEach(function(H){b._isRetriable(H.statusCode)&&Y.push(h[H.index])}),Y.length>0&&b._storeToDisk(Y)}catch{b._storeToDisk(h)}}if(F.statusCode===307||F.statusCode===308)if(b._numConsecutiveRedirects++,b._numConsecutiveRedirects<10){var J=F.headers.location?F.headers.location.toString():null;J&&(b._redirectedHost=J,b.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else b._numConsecutiveRedirects=0,typeof m=="function"&&m(V),l.info(p.TAG,V),typeof b._onSuccess=="function"&&b._onSuccess(V)})},D=d.makeRequest(b._config,g,v,A);D.on("error",function(F){if(b._numConsecutiveFailures++,!b._enableDiskRetryMode||b._numConsecutiveFailures>0&&b._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var V="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";b._enableDiskRetryMode&&(V="Ingestion endpoint could not be reached "+b._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,V,d.dumpObj(F))}else{var V="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,V,d.dumpObj(F))}b._onErrorHelper(F),typeof m=="function"&&(F&&m(d.dumpObj(F)),m("Error sending telemetry")),b._enableDiskRetryMode&&b._storeToDisk(h)}),D.write(k),D.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,w){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,w),function(C){return p.ACLED_DIRECTORIES[h]=!C,m(C)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;i.lstat(h,function(v,w){v&&v.code==="ENOENT"?i.mkdir(h,function(C){C&&C.code!=="EEXIST"?m(C):g._applyACLRules(h,m)}):!v&&w.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){i.readdir(h,function(g,v){if(g)return m(g,-1);var w=null,C=0,b=0;if(v.length===0){m(null,0);return}for(var _=0;_<v.length;_++)i.stat(s.join(h,v[_]),function(P,x){b++,P?w=P:x.isFile()&&(C+=x.size),b===v.length&&(w?m(w,-1):m(w,C))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=i.readdirSync(h),g=0,v=0;v<m.length;v++)g+=i.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,w){if(v||w<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(w>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var C=new Date().getTime()+".ai.json",b=s.join(m._tempDir,C);l.info(p.TAG,"saving data to disk at: "+b),i.writeFile(b,m._stringify(h),{mode:384},function(_){return m._onErrorHelper(_)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),i.writeFileSync(v,h,{mode:384})}catch(w){l.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(b){return s.basename(b).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],C=s.join(h._tempDir,w);i.readFile(C,function(b,_){b?h._onErrorHelper(b):i.unlink(C,function(P){if(P)h._onErrorHelper(P);else try{var x=JSON.parse(_.toString());h.send(x)}catch(k){l.warn("Failed to read persisted file",k)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var C=new Date(parseInt(w.split(".ai.json")[0])),b=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>C;if(b){var _=s.join(h._tempDir,w);i.unlink(_,function(P){P&&h._onErrorHelper(P)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=o.type()==="Windows_NT",p}();e.exports=f}),BX=O((t,e)=>{"use strict";var r=_r(),n=hn(),i=Ec(),o=function(){function a(){}return a.createEnvelope=function(c,l,u,d,f){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=l,f},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(l)for(var f in l)d[f]=l[f];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,f=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],d++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var v=0,w=l.length-1,C=0,b=v,_=w;v<w;){var P=l[v].sizeInBytes,x=l[w].sizeInBytes;if(C+=P+x,C>g){var k=_-b+1;l.splice(b,k);break}b=v,_=w,v++,w--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=o}),HX=O((t,e)=>{"use strict";var r=require("url"),n=dL(),i=$h(),o=_r(),s=LX(),a=jX(),c=Ec(),l=UX(),u=hn(),d=zt(),f=BX(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new i,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,o.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,o.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,o.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,o.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,o.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,o.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,o.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,o.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&o.telemetryTypeToBaseType(g)){var v=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,m.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var C=0;C<w;++C)try{var b=this._telemetryProcessors[C];if(b&&b.apply(null,[m,g])===!1){v=!1;break}}catch(_){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",_,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),VX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=HX(),i=uL(),o=Fu(),s=zt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?o.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),GX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),WX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Ec(),r=vX(),n=yX(),i=GC(),o=lL(),s=IX(),a=Fu(),c=uL(),l=bc(),u=zt(),d=DX(),f=NX();t.TelemetryClient=VX(),t.Contracts=_r(),t.azureFunctionsTypes=GX();var p;(function(ye){ye[ye.AI=0]="AI",ye[ye.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,w=!0,C=!1,b=!0,_=!0,P=!0,x=!0,k,A=!1,D=!0,F,V=void 0,ne=void 0,Y,J,H,L,q,j,Q,z,oe=!1,ie;function ve(ye){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(ye),Y=new r(t.defaultClient),J=new n(t.defaultClient),H=new i(t.defaultClient),L=new o(t.defaultClient),q=new s(t.defaultClient),Q=new c(t.defaultClient),z=new a(t.defaultClient),j||(j=new f.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(P,V,ne),yt}t.setup=ve;function Ae(){return t.defaultClient?(oe=!0,Y.enable(h,m),J.enable(g),H.enable(v),L.enable(w),q.enable(C,t.defaultClient.config),j.enable(D,F),Q.useAutoCorrelation(x,k),Q.enable(b),z.enable(_),t.liveMetricsClient&&A&&t.liveMetricsClient.enable(A)):u.warn("Start cannot be called before setup"),yt}t.start=Ae;function Te(){return x?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=Te;function _e(ye,pe){return e.CorrelationContextManager.startOperation(ye,pe)}t.startOperation=_e;function we(ye,pe){return e.CorrelationContextManager.wrapCallback(ye,pe)}t.wrapWithCorrelationContext=we;var yt=function(){function ye(){}return ye.setDistributedTracingMode=function(pe){return l.w3cEnabled=pe===p.AI_AND_W3C,ye},ye.setAutoCollectConsole=function(pe,be){return be===void 0&&(be=!1),h=pe,m=be,oe&&Y.enable(pe,be),ye},ye.setAutoCollectExceptions=function(pe){return g=pe,oe&&J.enable(pe),ye},ye.setAutoCollectPerformance=function(pe,be){be===void 0&&(be=!0),v=pe;var je=f.AutoCollectNativePerformance.parseEnabled(be);return D=je.isEnabled,F=je.disabledMetrics,oe&&(H.enable(pe),j.enable(je.isEnabled,je.disabledMetrics)),ye},ye.setAutoCollectPreAggregatedMetrics=function(pe){return w=pe,oe&&L.enable(pe),ye},ye.setAutoCollectHeartbeat=function(pe){return C=pe,oe&&q.enable(pe,t.defaultClient.config),ye},ye.setAutoCollectRequests=function(pe){return b=pe,oe&&Q.enable(pe),ye},ye.setAutoCollectDependencies=function(pe){return _=pe,oe&&z.enable(pe),ye},ye.setAutoDependencyCorrelation=function(pe,be){return x=pe,k=be,oe&&Q.useAutoCorrelation(pe,be),ye},ye.setUseDiskRetryCaching=function(pe,be,je){return P=pe,V=be,ne=je,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(pe,be,je),ye},ye.setInternalLogging=function(pe,be){return pe===void 0&&(pe=!1),be===void 0&&(be=!0),u.enableDebug=pe,u.disableWarnings=!be,ye},ye.setSendLiveMetrics=function(pe){return pe===void 0&&(pe=!1),t.defaultClient?(!t.liveMetricsClient&&pe?(t.liveMetricsClient=new d(t.defaultClient.config,null),ie=new i(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(ie),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(pe),A=pe,ye):(u.warn("Live metrics client cannot be setup without the default client"),ye)},ye.start=Ae,ye}();t.Configuration=yt;function It(){l.w3cEnabled=!0,t.defaultClient=null,oe=!1,Y&&Y.dispose(),J&&J.dispose(),H&&H.dispose(),L&&L.dispose(),q&&q.dispose(),j&&j.dispose(),Q&&Q.dispose(),z&&z.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),A=!1,t.liveMetricsClient=void 0)}t.dispose=It});S7(pL,{default:()=>JX});var fL=Ru(require("os")),_c=Ru(require("vscode")),pt=Ru(require("vscode")),WC=Ru(require("vscode")),On;(function(t){t.ON="on",t.OFF="off"})(On||(On={}));function jh(){let t="telemetry",e="enableTelemetry";return WC.env.isTelemetryEnabled!==void 0?WC.env.isTelemetryEnabled?On.ON:On.OFF:WC.workspace.getConfiguration(t).get(e)?On.ON:On.OFF}var zX=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),pt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(pt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(pt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(pt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=jh();this.userOptIn=t===On.ON,this.errorOptIn=t===On.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=pt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(pt.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===pt.ExtensionKind.Workspace||pt.env.uiKind===pt.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,pt&&pt.env){switch(t["common.vscodemachineid"]=pt.env.machineId,t["common.vscodesessionid"]=pt.env.sessionId,t["common.vscodeversion"]=pt.version,t["common.isnewappinstall"]=pt.env.isNewAppInstall?pt.env.isNewAppInstall.toString():"false",t["common.product"]=pt.env.appHost,pt.env.uiKind){case pt.UIKind.Web:t["common.uikind"]="web";break;case pt.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(pt.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];pt.env.appRoot!==""&&n.push(new RegExp(pt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of n)for(;(r=l.exec(t))&&r;)o.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([l,u])=>r.index<l||r.index>=u)&&(i+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(i+=t.substr(c))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":e[r]=n}return e}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=ko(ko({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(t,e,r){this.userOptIn&&t!==""&&(e=ko(ko({},e),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:e,measurements:r}))}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=ko(ko({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=ko(ko({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},KX=class{constructor(t,e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t,jh()!==On.OFF&&this.instantiateAppender()}logEvent(t,e){if(!this._telemetryClient){!this._isInstantiated&&jh()===On.ON&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){!this._isInstantiated&&jh()!==On.OFF&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._isInstantiated=!0,this._flushQueues()}).catch(t=>{console.error(t)})}},YX=async t=>{let e;try{let r=await Promise.resolve().then(()=>Ru(WX()));r.defaultClient?(e=new r.TelemetryClient(t),e.channel.setUseDiskRetryCaching(!0)):(r.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),e=r.defaultClient),_c&&_c.env&&(e.context.tags[e.context.keys.userId]=_c.env.machineId,e.context.tags[e.context.keys.sessionId]=_c.env.sessionId,e.context.tags[e.context.keys.cloudRole]=_c.env.appName,e.context.tags[e.context.keys.cloudRoleInstance]=_c.env.appName),t&&t.indexOf("AIF-")===0&&(e.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(r)}return{logEvent:(r,n)=>{e==null||e.trackEvent({name:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},logException:(r,n)=>{e==null||e.trackException({exception:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},flush:async()=>{e==null||e.flush()}}},JX=class extends zX{constructor(t,e,r,n){let i=new KX(r,YX);r&&r.indexOf("AIF-")===0&&(n=!0);super(t,e,i,{release:fL.release(),platform:fL.platform()},n)}}});var zC=I(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Uh=require("vscode"),Mu=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Fi.ApplicationVersion:return Mu.trimVersionSuffix(Uh.version);case Fi.Build:return Uh.env.appName;case Fi.ClientId:return Uh.env.machineId;case Fi.ExtensionName:return this.extensionName;case Fi.ExtensionVersion:return Mu.trimVersionSuffix(this.extensionVersion);case Fi.Language:return Uh.env.language;case Fi.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Fi);for(let n of r)e.set(n,this.getFilterValue(n));return e}};Qs.VSCodeFilterProvider=Mu;var Fi;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Fi=Qs.Filters||(Qs.Filters={}));var QX;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(QX=Qs.TargetPopulation||(Qs.TargetPopulation={}))});var gL=I(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});var mL=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};KC.BaseFeatureProvider=mL});var yL=I(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});var XX=gL(),vL=class extends XX.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};YC.FilteredFeatureProvider=vL});var CL=I(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});var ZX=yL(),wL=class extends ZX.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};JC.TasApiFeatureProvider=wL});var QC=I((rwe,bL)=>{"use strict";bL.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var pr=I((nwe,SL)=>{"use strict";var eZ=QC(),Xs=Object.prototype.toString;function XC(t){return Xs.call(t)==="[object Array]"}function ZC(t){return typeof t=="undefined"}function tZ(t){return t!==null&&!ZC(t)&&t.constructor!==null&&!ZC(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function rZ(t){return Xs.call(t)==="[object ArrayBuffer]"}function nZ(t){return typeof FormData!="undefined"&&t instanceof FormData}function iZ(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function oZ(t){return typeof t=="string"}function sZ(t){return typeof t=="number"}function EL(t){return t!==null&&typeof t=="object"}function Bh(t){if(Xs.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function aZ(t){return Xs.call(t)==="[object Date]"}function cZ(t){return Xs.call(t)==="[object File]"}function lZ(t){return Xs.call(t)==="[object Blob]"}function _L(t){return Xs.call(t)==="[object Function]"}function uZ(t){return EL(t)&&_L(t.pipe)}function dZ(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function fZ(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function pZ(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function eb(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),XC(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function tb(){var t={};function e(i,o){Bh(t[o])&&Bh(i)?t[o]=tb(t[o],i):Bh(i)?t[o]=tb({},i):XC(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)eb(arguments[r],e);return t}function hZ(t,e,r){return eb(e,function(i,o){r&&typeof i=="function"?t[o]=eZ(i,r):t[o]=i}),t}function mZ(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}SL.exports={isArray:XC,isArrayBuffer:rZ,isBuffer:tZ,isFormData:nZ,isArrayBufferView:iZ,isString:oZ,isNumber:sZ,isObject:EL,isPlainObject:Bh,isUndefined:ZC,isDate:aZ,isFile:cZ,isBlob:lZ,isFunction:_L,isStream:uZ,isURLSearchParams:dZ,isStandardBrowserEnv:pZ,forEach:eb,merge:tb,extend:hZ,trim:fZ,stripBOM:mZ}});var Hh=I((iwe,PL)=>{"use strict";var Sc=pr();function xL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}PL.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Sc.isURLSearchParams(r))i=r.toString();else{var o=[];Sc.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Sc.isArray(c)?l=l+"[]":c=[c],Sc.forEach(c,function(d){Sc.isDate(d)?d=d.toISOString():Sc.isObject(d)&&(d=JSON.stringify(d)),o.push(xL(l)+"="+xL(d))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var IL=I((owe,kL)=>{"use strict";var gZ=pr();function Vh(){this.handlers=[]}Vh.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Vh.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Vh.prototype.forEach=function(e){gZ.forEach(this.handlers,function(n){n!==null&&e(n)})};kL.exports=Vh});var TL=I((swe,AL)=>{"use strict";var vZ=pr();AL.exports=function(e,r){vZ.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var Gh=I((awe,RL)=>{"use strict";RL.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var Wh=I((cwe,DL)=>{"use strict";var yZ=Gh();DL.exports=function(e,r,n,i,o){var s=new Error(e);return yZ(s,r,n,i,o)}});var rb=I((lwe,OL)=>{"use strict";var wZ=Wh();OL.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(wZ("Request failed with status code "+n.status,n.config,null,n.request,n))}});var LL=I((uwe,NL)=>{"use strict";var zh=pr();NL.exports=zh.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),zh.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),zh.isString(o)&&c.push("path="+o),zh.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ML=I((dwe,FL)=>{"use strict";FL.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var $L=I((fwe,qL)=>{"use strict";qL.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var nb=I((pwe,jL)=>{"use strict";var CZ=ML(),bZ=$L();jL.exports=function(e,r){return e&&!CZ(r)?bZ(e,r):r}});var BL=I((hwe,UL)=>{"use strict";var ib=pr(),EZ=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];UL.exports=function(e){var r={},n,i,o;return e&&ib.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=ib.trim(a.substr(0,o)).toLowerCase(),i=ib.trim(a.substr(o+1)),n){if(r[n]&&EZ.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var GL=I((mwe,VL)=>{"use strict";var HL=pr();VL.exports=HL.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=HL.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var xc=I((gwe,WL)=>{"use strict";function ob(t){this.message=t}ob.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ob.prototype.__CANCEL__=!0;WL.exports=ob});var KL=I((vwe,zL)=>{"use strict";var Kh=pr(),_Z=rb(),SZ=LL(),xZ=Hh(),PZ=nb(),kZ=BL(),IZ=GL(),sb=Wh(),AZ=Pc(),TZ=xc();zL.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}Kh.isFormData(o)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=PZ(e.baseURL,e.url);u.open(e.method.toUpperCase(),xZ(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(!!u){var g="getAllResponseHeaders"in u?kZ(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,w={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};_Z(function(b){n(b),l()},function(b){i(b),l()},w),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(i(sb("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(sb("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v="timeout of "+e.timeout+"ms exceeded",w=e.transitional||AZ.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(sb(v,e,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Kh.isStandardBrowserEnv()){var m=(e.withCredentials||IZ(p))&&e.xsrfCookieName?SZ.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in u&&Kh.forEach(s,function(v,w){typeof o=="undefined"&&w.toLowerCase()==="content-type"?delete s[w]:u.setRequestHeader(w,v)}),Kh.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(g){!u||(i(!g||g&&g.type?new TZ("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),o||(o=null),u.send(o)})}});var JL=I((ywe,YL)=>{var qu;YL.exports=function(){if(!qu){try{qu=yy()("follow-redirects")}catch{}typeof qu!="function"&&(qu=function(){})}qu.apply(null,arguments)}});var fb=I((wwe,db)=>{var kc=require("url"),ab=kc.URL,RZ=require("http"),DZ=require("https"),QL=require("stream").Writable,OZ=require("assert"),XL=JL(),Zs=["abort","aborted","connect","error","socket","timeout"],lb=Object.create(null);Zs.forEach(function(t){lb[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var NZ=Yh("ERR_FR_REDIRECTION_FAILURE",""),LZ=Yh("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),FZ=Yh("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),MZ=Yh("ERR_STREAM_WRITE_AFTER_END","write after end");function Ur(t,e){QL.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Ur.prototype=Object.create(QL.prototype);Ur.prototype.abort=function(){tF(this._currentRequest),this.emit("abort")};Ur.prototype.write=function(t,e,r){if(this._ending)throw new MZ;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new FZ),this.abort())};Ur.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Ur.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Ur.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Ur.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.once("response",o),this.once("error",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Ur.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Ur.prototype,t,{get:function(){return this._currentRequest[t]}})});Ur.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Ur.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=kc.format(this._options),n._redirectable=this;for(var i=0;i<Zs.length;i++)n.on(Zs[i],lb[Zs[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};Ur.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(tF(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new LZ);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ub(/^content-/i,this._options.headers));var n=ub(/^host$/i,this._options.headers)||kc.parse(this._currentUrl).hostname,i=kc.resolve(this._currentUrl,r);XL("redirecting to",i),this._isRedirect=!0;var o=kc.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&ub(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new NZ("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function ZL(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=eF(new ab(f))}catch{l=kc.parse(f)}}else ab&&l instanceof ab?l=eF(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,OZ.equal(u.protocol,i,"protocol mismatch"),XL("options",u),new Ur(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function qZ(){}function eF(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function ub(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r}function Yh(t,e){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function tF(t){for(var e=0;e<Zs.length;e++)t.removeListener(Zs[e],lb[Zs[e]]);t.on("error",qZ),t.abort()}db.exports=ZL({http:RZ,https:DZ});db.exports.wrap=ZL});var Jh=I((Cwe,rF)=>{rF.exports={version:"0.22.0"}});var cF=I((bwe,aF)=>{"use strict";var $u=pr(),nF=rb(),$Z=nb(),jZ=Hh(),UZ=require("http"),BZ=require("https"),HZ=fb().http,VZ=fb().https,iF=require("url"),GZ=require("zlib"),WZ=Jh().version,Qh=Wh(),pb=Gh(),zZ=Pc(),KZ=xc(),oF=/https:?/;function sF(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,sF(o,e,o.href)}}aF.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(z){s(),n(z)},c=function(z){s(),i(z)},l=e.data,u=e.headers,d={};if(Object.keys(u).forEach(function(z){d[z.toLowerCase()]=z}),"user-agent"in d?u[d["user-agent"]]||delete u[d["user-agent"]]:u["User-Agent"]="axios/"+WZ,l&&!$u.isStream(l)){if(!Buffer.isBuffer(l))if($u.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if($u.isString(l))l=Buffer.from(l,"utf-8");else return c(Qh("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));d["content-length"]||(u["Content-Length"]=l.length)}var f=void 0;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";f=p+":"+h}var m=$Z(e.baseURL,e.url),g=iF.parse(m),v=g.protocol||"http:";if(!f&&g.auth){var w=g.auth.split(":"),C=w[0]||"",b=w[1]||"";f=C+":"+b}f&&d.authorization&&delete u[d.authorization];var _=oF.test(v),P=_?e.httpsAgent:e.httpAgent,x={path:jZ(g.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:u,agent:P,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?x.socketPath=e.socketPath:(x.hostname=g.hostname,x.port=g.port);var k=e.proxy;if(!k&&k!==!1){var A=v.slice(0,-1)+"_proxy",D=process.env[A]||process.env[A.toUpperCase()];if(D){var F=iF.parse(D),V=process.env.no_proxy||process.env.NO_PROXY,ne=!0;if(V){var Y=V.split(",").map(function(z){return z.trim()});ne=!Y.some(function(z){return z?z==="*"||z[0]==="."&&g.hostname.substr(g.hostname.length-z.length)===z?!0:g.hostname===z:!1})}if(ne&&(k={host:F.hostname,port:F.port,protocol:F.protocol},F.auth)){var J=F.auth.split(":");k.auth={username:J[0],password:J[1]}}}}k&&(x.headers.host=g.hostname+(g.port?":"+g.port:""),sF(x,k,v+"//"+g.hostname+(g.port?":"+g.port:"")+x.path));var H,L=_&&(k?oF.test(k.protocol):!0);e.transport?H=e.transport:e.maxRedirects===0?H=L?BZ:UZ:(e.maxRedirects&&(x.maxRedirects=e.maxRedirects),H=L?VZ:HZ),e.maxBodyLength>-1&&(x.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(x.insecureHTTPParser=e.insecureHTTPParser);var q=H.request(x,function(z){if(!q.aborted){var oe=z,ie=z.req||q;if(z.statusCode!==204&&ie.method!=="HEAD"&&e.decompress!==!1)switch(z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":oe=oe.pipe(GZ.createUnzip()),delete z.headers["content-encoding"];break}var ve={status:z.statusCode,statusText:z.statusMessage,headers:z.headers,config:e,request:ie};if(e.responseType==="stream")ve.data=oe,nF(a,c,ve);else{var Ae=[],Te=0;oe.on("data",function(we){Ae.push(we),Te+=we.length,e.maxContentLength>-1&&Te>e.maxContentLength&&(oe.destroy(),c(Qh("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,ie)))}),oe.on("error",function(we){q.aborted||c(pb(we,e,null,ie))}),oe.on("end",function(){var we=Buffer.concat(Ae);e.responseType!=="arraybuffer"&&(we=we.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(we=$u.stripBOM(we))),ve.data=we,nF(a,c,ve)})}}});if(q.on("error",function(z){q.aborted&&z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(pb(z,e,null,q))}),e.timeout){var j=parseInt(e.timeout,10);if(isNaN(j)){c(Qh("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",q));return}q.setTimeout(j,function(){q.abort();var z=e.transitional||zZ.transitional;c(Qh("timeout of "+j+"ms exceeded",e,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",q))})}(e.cancelToken||e.signal)&&(o=function(Q){q.aborted||(q.abort(),c(!Q||Q&&Q.type?new KZ("canceled"):Q))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),$u.isStream(l)?l.on("error",function(z){c(pb(z,e,null,q))}).pipe(q):q.end(l)})}});var Pc=I((Ewe,dF)=>{"use strict";var Kt=pr(),lF=TL(),YZ=Gh(),JZ={"Content-Type":"application/x-www-form-urlencoded"};function uF(t,e){!Kt.isUndefined(t)&&Kt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function QZ(){var t;return typeof XMLHttpRequest!="undefined"?t=KL():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=cF()),t}function XZ(t,e,r){if(Kt.isString(t))try{return(e||JSON.parse)(t),Kt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Xh={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:QZ(),transformRequest:[function(e,r){return lF(r,"Accept"),lF(r,"Content-Type"),Kt.isFormData(e)||Kt.isArrayBuffer(e)||Kt.isBuffer(e)||Kt.isStream(e)||Kt.isFile(e)||Kt.isBlob(e)?e:Kt.isArrayBufferView(e)?e.buffer:Kt.isURLSearchParams(e)?(uF(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Kt.isObject(e)||r&&r["Content-Type"]==="application/json"?(uF(r,"application/json"),XZ(e)):e}],transformResponse:[function(e){var r=this.transitional||Xh.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Kt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?YZ(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kt.forEach(["delete","get","head"],function(e){Xh.headers[e]={}});Kt.forEach(["post","put","patch"],function(e){Xh.headers[e]=Kt.merge(JZ)});dF.exports=Xh});var pF=I((_we,fF)=>{"use strict";var ZZ=pr(),eee=Pc();fF.exports=function(e,r,n){var i=this||eee;return ZZ.forEach(n,function(s){e=s.call(i,e,r)}),e}});var hb=I((Swe,hF)=>{"use strict";hF.exports=function(e){return!!(e&&e.__CANCEL__)}});var vF=I((xwe,gF)=>{"use strict";var mF=pr(),mb=pF(),tee=hb(),ree=Pc(),nee=xc();function gb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nee("canceled")}gF.exports=function(e){gb(e),e.headers=e.headers||{},e.data=mb.call(e,e.data,e.headers,e.transformRequest),e.headers=mF.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),mF.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||ree.adapter;return r(e).then(function(i){return gb(e),i.data=mb.call(e,i.data,i.headers,e.transformResponse),i},function(i){return tee(i)||(gb(e),i&&i.response&&(i.response.data=mb.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var vb=I((Pwe,yF)=>{"use strict";var Br=pr();yF.exports=function(e,r){r=r||{};var n={};function i(u,d){return Br.isPlainObject(u)&&Br.isPlainObject(d)?Br.merge(u,d):Br.isPlainObject(d)?Br.merge({},d):Br.isArray(d)?d.slice():d}function o(u){if(Br.isUndefined(r[u])){if(!Br.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function s(u){if(!Br.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Br.isUndefined(r[u])){if(!Br.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Br.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var f=l[d]||o,p=f(d);Br.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var bF=I((kwe,CF)=>{"use strict";var iee=Jh().version,yb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){yb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var wF={};yb.transitional=function(e,r,n){function i(o,s){return"[Axios v"+iee+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!wF[s]&&(wF[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function oee(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+o)}}CF.exports={assertOptions:oee,validators:yb}});var kF=I((Iwe,PF)=>{"use strict";var EF=pr(),see=Hh(),_F=IL(),SF=vF(),Zh=vb(),xF=bF(),Ic=xF.validators;function ju(t){this.defaults=t,this.interceptors={request:new _F,response:new _F}}ju.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Zh(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&xF.assertOptions(r,{silentJSONParsing:Ic.transitional(Ic.boolean),forcedJSONParsing:Ic.transitional(Ic.boolean),clarifyTimeoutError:Ic.transitional(Ic.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(i=i&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var s;if(!i){var a=[SF,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(d){u(d);break}}try{s=SF(c)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};ju.prototype.getUri=function(e){return e=Zh(this.defaults,e),see(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};EF.forEach(["delete","get","head","options"],function(e){ju.prototype[e]=function(r,n){return this.request(Zh(n||{},{method:e,url:r,data:(n||{}).data}))}});EF.forEach(["post","put","patch"],function(e){ju.prototype[e]=function(r,n,i){return this.request(Zh(i||{},{method:e,url:r,data:n}))}});PF.exports=ju});var AF=I((Awe,IF)=>{"use strict";var aee=xc();function Ac(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new aee(i),e(r.reason))})}Ac.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ac.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Ac.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Ac.source=function(){var e,r=new Ac(function(i){e=i});return{token:r,cancel:e}};IF.exports=Ac});var RF=I((Twe,TF)=>{"use strict";TF.exports=function(e){return function(n){return e.apply(null,n)}}});var OF=I((Rwe,DF)=>{"use strict";DF.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var FF=I((Dwe,wb)=>{"use strict";var NF=pr(),cee=QC(),em=kF(),lee=vb(),uee=Pc();function LF(t){var e=new em(t),r=cee(em.prototype.request,e);return NF.extend(r,em.prototype,e),NF.extend(r,e),r.create=function(i){return LF(lee(t,i))},r}var ci=LF(uee);ci.Axios=em;ci.Cancel=xc();ci.CancelToken=AF();ci.isCancel=hb();ci.VERSION=Jh().version;ci.all=function(e){return Promise.all(e)};ci.spread=RF();ci.isAxiosError=OF();wb.exports=ci;wb.exports.default=ci});var qF=I((Owe,MF)=>{MF.exports=FF()});var jF=I(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0});var dee=qF(),$F=class{constructor(e){this.endpoint=e}get(e){return dee.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};Cb.AxiosHttpClient=$F});var BF=I(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});var UF=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};bb.MemoryKeyValueStorage=UF});var VF=I(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0});var fee=BF(),HF=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new fee.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};Eb.ExperimentationServiceBase=HF});var WF=I(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});var GF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};_b.PollingService=GF});var KF=I(Sb=>{"use strict";Object.defineProperty(Sb,"__esModule",{value:!0});var pee=VF(),hee=WF(),zF=class extends pee.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new hee.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};Sb.ExperimentationServiceAutoPolling=zF});var YF=I(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});var mee=CL(),gee=jF(),vee=KF(),xb=class extends vee.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new mee.TasApiFeatureProvider(new gee.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};Pb.ExperimentationService=xb;xb.REFRESH_RATE_IN_MINUTES=30});var JF=I(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});var yee=YF();kb.ExperimentationService=yee.ExperimentationService});var XF=I(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0});var QF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};Ib.MementoKeyValueStorage=QF});var eM=I(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});var ZF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};Ab.default=ZF});var rM=I(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});var wee=zC(),Cee=JF(),Tb=require("vscode"),bee=XF(),Eee=eM(),_ee="https://default.exp-tas.com/vscode/ab",See="query-expfeature",xee="VSCode.ABExp.Features",Pee="abexp.assignmentcontext",kee="VSCode.ABExp.FeatureData",Iee=1e3*60*30;function tM(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=Tb.workspace.getConfiguration("telemetry");if(!(Tb.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):Tb.env.isTelemetryEnabled))return new Eee.default;let l=[new wee.VSCodeFilterProvider(t,e,r),...o],u=new bee.MementoKeyValueStorage(i);return new Cee.ExperimentationService({filterProviders:l,telemetry:n,storageKey:kee,keyValueStorage:u,featuresTelemetryPropertyName:xee,assignmentContextTelemetryPropertyName:Pee,telemetryEventName:See,endpoint:_ee,refetchInterval:Iee})}tm.getExperimentationService=tM;async function Aee(t,e,r,n,i,...o){let s=tM(t,e,r,n,i,...o);return await s.initializePromise,s}tm.getExperimentationServiceAsync=Aee});var iM=I(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});var nM=rM();Uu.getExperimentationService=nM.getExperimentationService;Uu.getExperimentationServiceAsync=nM.getExperimentationServiceAsync;var Tee=zC();Uu.TargetPopulation=Tee.TargetPopulation});var Ke=I(Ut=>{"use strict";var Bb=Symbol.for("yaml.alias"),AM=Symbol.for("yaml.document"),dm=Symbol.for("yaml.map"),TM=Symbol.for("yaml.pair"),Hb=Symbol.for("yaml.scalar"),fm=Symbol.for("yaml.seq"),fi=Symbol.for("yaml.node.type"),ete=t=>!!t&&typeof t=="object"&&t[fi]===Bb,tte=t=>!!t&&typeof t=="object"&&t[fi]===AM,rte=t=>!!t&&typeof t=="object"&&t[fi]===dm,nte=t=>!!t&&typeof t=="object"&&t[fi]===TM,RM=t=>!!t&&typeof t=="object"&&t[fi]===Hb,ite=t=>!!t&&typeof t=="object"&&t[fi]===fm;function DM(t){if(t&&typeof t=="object")switch(t[fi]){case dm:case fm:return!0}return!1}function ote(t){if(t&&typeof t=="object")switch(t[fi]){case Bb:case dm:case Hb:case fm:return!0}return!1}var ste=t=>(RM(t)||DM(t))&&!!t.anchor,OM=class{constructor(e){Object.defineProperty(this,fi,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};Ut.ALIAS=Bb;Ut.DOC=AM;Ut.MAP=dm;Ut.NODE_TYPE=fi;Ut.NodeBase=OM;Ut.PAIR=TM;Ut.SCALAR=Hb;Ut.SEQ=fm;Ut.hasAnchor=ste;Ut.isAlias=ete;Ut.isCollection=DM;Ut.isDocument=tte;Ut.isMap=rte;Ut.isNode=ote;Ut.isPair=nte;Ut.isScalar=RM;Ut.isSeq=ite});var Xu=I(NM=>{"use strict";var Sr=Ke(),ra=Symbol("break visit"),ate=Symbol("skip children"),Qu=Symbol("remove node");function pm(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),Sr.isDocument(t)?Oc(null,t.contents,e,Object.freeze([t]))===Qu&&(t.contents=null):Oc(null,t,e,Object.freeze([]))}pm.BREAK=ra;pm.SKIP=ate;pm.REMOVE=Qu;function Oc(t,e,r,n){let i;if(typeof r=="function"?i=r(t,e,n):Sr.isMap(e)?r.Map&&(i=r.Map(t,e,n)):Sr.isSeq(e)?r.Seq&&(i=r.Seq(t,e,n)):Sr.isPair(e)?r.Pair&&(i=r.Pair(t,e,n)):Sr.isScalar(e)?r.Scalar&&(i=r.Scalar(t,e,n)):Sr.isAlias(e)&&r.Alias&&(i=r.Alias(t,e,n)),Sr.isNode(i)||Sr.isPair(i)){let o=n[n.length-1];if(Sr.isCollection(o))o.items[t]=i;else if(Sr.isPair(o))t==="key"?o.key=i:o.value=i;else if(Sr.isDocument(o))o.contents=i;else{let s=Sr.isAlias(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Oc(t,i,r,n)}if(typeof i!="symbol"){if(Sr.isCollection(e)){n=Object.freeze(n.concat(e));for(let o=0;o<e.items.length;++o){let s=Oc(o,e.items[o],r,n);if(typeof s=="number")o=s-1;else{if(s===ra)return ra;s===Qu&&(e.items.splice(o,1),o-=1)}}}else if(Sr.isPair(e)){n=Object.freeze(n.concat(e));let o=Oc("key",e.key,r,n);if(o===ra)return ra;o===Qu&&(e.key=null);let s=Oc("value",e.value,r,n);if(s===ra)return ra;s===Qu&&(e.value=null)}}return i}NM.visit=pm});var Vb=I(FM=>{"use strict";var LM=Ke(),cte=Xu(),lte={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},ute=t=>t.replace(/[!,[\]{}]/g,e=>lte[e]),Hr=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Hr.defaultYaml,e),this.tags=Object.assign({},Hr.defaultTags,r)}clone(){let e=new Hr(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Hr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Hr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Hr.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Hr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Hr.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[o,s]=n;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[o]=n;return o==="1.1"||o==="1.2"?(this.yaml.version=o,!0):(r(6,`Unsupported YAML version ${o}`,!0),!1)}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,i]=e.match(/^(.*!)([^!]*)$/);i||r(`The ${e} tag has no suffix`);let o=this.tags[n];return o?o+decodeURIComponent(i):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+ute(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&LM.isNode(e.contents)){let o={};cte.visit(e.contents,(s,a)=>{LM.isNode(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(let[o,s]of n)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&r.push(`%TAG ${o} ${s}`);return r.join(`
`)}};Hr.defaultYaml={explicit:!1,version:"1.2"};Hr.defaultTags={"!!":"tag:yaml.org,2002:"};FM.Directives=Hr});var hm=I(Zu=>{"use strict";var MM=Ke(),dte=Xu();function fte(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function qM(t){let e=new Set;return dte.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function $M(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function pte(t,e){let r=[],n=new Map,i=null;return{onAnchor(o){r.push(o),i||(i=qM(t));let s=$M(e,i);return i.add(s),s},setAnchors(){for(let o of r){let s=n.get(o);if(typeof s=="object"&&s.anchor&&(MM.isScalar(s.node)||MM.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:n}}Zu.anchorIsValid=fte;Zu.anchorNames=qM;Zu.createNodeAnchors=pte;Zu.findNewAnchor=$M});var td=I(BM=>{"use strict";var hte=hm(),jM=Xu(),ed=Ke(),UM=class extends ed.NodeBase{constructor(e){super(ed.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return jM.visit(e,{Node:(n,i)=>{if(i===this)return jM.visit.BREAK;i.anchor===this.source&&(r=i)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:o}=r,s=this.resolve(i);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=mm(i,s,n)),a.count*a.aliasCount>o)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(hte.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function mm(t,e,r){if(ed.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(ed.isCollection(e)){let n=0;for(let i of e.items){let o=mm(t,i,r);o>n&&(n=o)}return n}else if(ed.isPair(e)){let n=mm(t,e.key,r),i=mm(t,e.value,r);return Math.max(n,i)}return 1}BM.Alias=UM});var Nc=I(VM=>{"use strict";var mte=Ke();function HM(t,e,r){if(Array.isArray(t))return t.map((n,i)=>HM(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!mte.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=o=>{n.res=o,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}VM.toJS=HM});var Pt=I(Gb=>{"use strict";var GM=Ke(),gte=Nc(),vte=t=>!t||typeof t!="function"&&typeof t!="object",na=class extends GM.NodeBase{constructor(e){super(GM.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:gte.toJS(this.value,e,r)}toString(){return String(this.value)}};na.BLOCK_FOLDED="BLOCK_FOLDED";na.BLOCK_LITERAL="BLOCK_LITERAL";na.PLAIN="PLAIN";na.QUOTE_DOUBLE="QUOTE_DOUBLE";na.QUOTE_SINGLE="QUOTE_SINGLE";Gb.Scalar=na;Gb.isScalarValue=vte});var rd=I(zM=>{"use strict";var yte=td(),ia=Ke(),WM=Pt(),wte="tag:yaml.org,2002:";function Cte(t,e,r){if(e){let n=r.filter(o=>o.tag===e),i=n.find(o=>!o.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function bte(t,e,r){var n,i;if(ia.isDocument(t)&&(t=t.contents),ia.isNode(t))return t;if(ia.isPair(t)){let p=(i=(n=r.schema[ia.MAP]).createNode)===null||i===void 0?void 0:i.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(o&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new yte.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=wte+e.slice(2));let d=Cte(t,e,c.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new WM.Scalar(t);return u&&(u.node=p),p}d=t instanceof Map?c[ia.MAP]:Symbol.iterator in Object(t)?c[ia.SEQ]:c[ia.MAP]}a&&(a(d),delete r.onTagObj);let f=(d==null?void 0:d.createNode)?d.createNode(r.schema,t,r):new WM.Scalar(t);return e&&(f.tag=e),u&&(u.node=f),f}zM.createNode=bte});var nd=I(gm=>{"use strict";var Ete=rd(),Fn=Ke();function Wb(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=n,n=s}else n=new Map([[o,n]])}return Ete.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var KM=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,zb=class extends Fn.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>Fn.isNode(n)||Fn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(KM(e))this.add(r);else{let[n,...i]=e,o=this.get(n,!0);if(Fn.isCollection(o))o.addIn(i,r);else if(o===void 0&&this.schema)this.set(n,Wb(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let i=this.get(r,!0);if(Fn.isCollection(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...i]=e,o=this.get(n,!0);return i.length===0?!r&&Fn.isScalar(o)?o.value:o:Fn.isCollection(o)?o.getIn(i,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!Fn.isPair(r))return!1;let n=r.value;return n==null||e&&Fn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let i=this.get(r,!0);return Fn.isCollection(i)?i.hasIn(n):!1}setIn(e,r){let[n,...i]=e;if(i.length===0)this.set(n,r);else{let o=this.get(n,!0);if(Fn.isCollection(o))o.setIn(i,r);else if(o===void 0&&this.schema)this.set(n,Wb(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};zb.maxFlowStringSingleLineLength=60;gm.Collection=zb;gm.collectionFromPath=Wb;gm.isEmptyPath=KM});var JM=I(id=>{"use strict";var _te="flow",Kb="block",vm="quoted";function Ste(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let c=Math.max(1+o,1+i-e.length);if(t.length<=c)return t;let l=[],u={},d=i-e.length;typeof n=="number"&&(n>i-Math.max(2,o)?l.push(0):d=i-n);let f,p,h=!1,m=-1,g=-1,v=-1;r===Kb&&(m=YM(t,m),m!==-1&&(d=m+c));for(let C;C=t[m+=1];){if(r===vm&&C==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(C===`
`)r===Kb&&(m=YM(t,m)),d=m+c,f=void 0;else{if(C===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let b=t[m+1];b&&b!==" "&&b!==`
`&&b!=="	"&&(f=m)}if(m>=d)if(f)l.push(f),d=f+c,f=void 0;else if(r===vm){for(;p===" "||p==="	";)p=C,C=t[m+=1],h=!0;let b=m>v+1?m-2:g-1;if(u[b])return t;l.push(b),u[b]=!0,d=b+c,f=void 0}else h=!0}p=C}if(h&&a&&a(),l.length===0)return t;s&&s();let w=t.slice(0,l[0]);for(let C=0;C<l.length;++C){let b=l[C],_=l[C+1]||t.length;b===0?w=`
${e}${t.slice(0,_)}`:(r===vm&&u[b]&&(w+=`${t[b]}\\`),w+=`
${e}${t.slice(b+1,_)}`)}return w}function YM(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}id.FOLD_BLOCK=Kb;id.FOLD_FLOW=_te;id.FOLD_QUOTED=vm;id.foldFlowLines=Ste});var ad=I(QM=>{"use strict";var pi=Pt(),Do=JM(),ym=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),wm=t=>/^(%|---|\.\.\.)/m.test(t);function xte(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>n)return!0;if(s=o+1,i-s<=n)return!1}return!0}function od(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(wm(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<i)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=o,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:Do.foldFlowLines(s,o,Do.FOLD_QUOTED,ym(e))}function Yb(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return od(t,e);let r=e.indent||(wm(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:Do.foldFlowLines(n,r,Do.FOLD_FLOW,ym(e))}function sd(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=od;else{let i=t.includes('"'),o=t.includes("'");i&&!o?n=Yb:o&&!i?n=od:n=r?Yb:od}return n(t,e)}function Cm({comment:t,type:e,value:r},n,i,o){let{lineWidth:s,blockQuote:a}=n.options;if(!a||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return sd(r,n);let c=n.indent||(n.forceBlockIndent||wm(r)?"  ":""),l=a==="literal"?!0:a==="folded"||e===pi.Scalar.BLOCK_FOLDED?!1:e===pi.Scalar.BLOCK_LITERAL?!0:!xte(r,s,c.length);if(!r)return l?`|
`:`>
`;let u,d;for(d=r.length;d>0;--d){let _=r[d-1];if(_!==`
`&&_!=="	"&&_!==" ")break}let f=r.substring(d),p=f.indexOf(`
`);p===-1?u="-":r===f||p!==f.length-1?(u="+",o&&o()):u="",f&&(r=r.slice(0,-f.length),f[f.length-1]===`
`&&(f=f.slice(0,-1)),f=f.replace(/\n+(?!\n|$)/g,`$&${c}`));let h=!1,m,g=-1;for(m=0;m<r.length;++m){let _=r[m];if(_===" ")h=!0;else if(_===`
`)g=m;else break}let v=r.substring(0,g<m?g+1:m);v&&(r=r.substring(v.length),v=v.replace(/\n+/g,`$&${c}`));let C=(l?"|":">")+(h?c?"2":"1":"")+u;if(t&&(C+=" #"+t.replace(/ ?[\r\n]+/g," "),i&&i()),l)return r=r.replace(/\n+/g,`$&${c}`),`${C}
${c}${v}${r}${f}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let b=Do.foldFlowLines(`${v}${r}${f}`,c,Do.FOLD_BLOCK,ym(n));return`${C}
${c}${b}`}function Pte(t,e,r,n){var i;let{type:o,value:s}=t,{actualString:a,implicitKey:c,indent:l,inFlow:u}=e;if(c&&/[\n[\]{},]/.test(s)||u&&/[[\]{},]/.test(s))return sd(s,e);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return c||u||s.indexOf(`
`)===-1?sd(s,e):Cm(t,e,r,n);if(!c&&!u&&o!==pi.Scalar.PLAIN&&s.indexOf(`
`)!==-1)return Cm(t,e,r,n);if(l===""&&wm(s))return e.forceBlockIndent=!0,Cm(t,e,r,n);let d=s.replace(/\n+/g,`$&
${l}`);if(a){for(let f of e.doc.schema.tags)if(f.default&&f.tag!=="tag:yaml.org,2002:str"&&((i=f.test)===null||i===void 0?void 0:i.test(d)))return sd(s,e)}return c?d:Do.foldFlowLines(d,l,Do.FOLD_FLOW,ym(e))}function kte(t,e,r,n){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==pi.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=pi.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case pi.Scalar.BLOCK_FOLDED:case pi.Scalar.BLOCK_LITERAL:return i||o?sd(s.value,e):Cm(s,e,r,n);case pi.Scalar.QUOTE_DOUBLE:return od(s.value,e);case pi.Scalar.QUOTE_SINGLE:return Yb(s.value,e);case pi.Scalar.PLAIN:return Pte(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(l=c(f),l===null)throw new Error(`Unsupported default string type ${f}`)}return l}QM.stringifyString=kte});var Lc=I(Jb=>{"use strict";var Ite=hm(),Oo=Ke(),Ate=ad(),Tte=(t,e)=>({anchors:new Set,doc:t,indent:"",indentStep:typeof e.indent=="number"?" ".repeat(e.indent):"  ",options:Object.assign({blockQuote:!0,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e)});function Rte(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)||i[0]}let r,n;if(Oo.isScalar(e)){n=e.value;let i=t.filter(o=>o.identify&&o.identify(n));r=i.find(o=>o.format===e.format)||i.find(o=>!o.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function Dte(t,e,{anchors:r,doc:n}){let i=[],o=(Oo.isScalar(t)||Oo.isCollection(t))&&t.anchor;return o&&Ite.anchorIsValid(o)&&(r.add(o),i.push(`&${o}`)),t.tag?i.push(n.directives.tagString(t.tag)):e.default||i.push(n.directives.tagString(e.tag)),i.join(" ")}function Ote(t,e,r,n){if(Oo.isPair(t))return t.toString(e,r,n);if(Oo.isAlias(t))return t.toString(e);let i,o=Oo.isNode(t)?t:e.doc.createNode(t,{onTagObj:c=>i=c});i||(i=Rte(e.doc.schema.tags,o));let s=Dte(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart||0)+s.length+1);let a=typeof i.stringify=="function"?i.stringify(o,e,r,n):Oo.isScalar(o)?Ate.stringifyString(o,e,r,n):o.toString(e,r,n);return s?Oo.isScalar(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}Jb.createStringifyContext=Tte;Jb.stringify=Ote});var bm=I(Qb=>{"use strict";var XM=(t,e)=>/^\n+$/.test(t)?t.substring(1):t.replace(/^(?!$)(?: $)?/gm,`${e}#`);function Nte(t,e,r){return r?r.includes(`
`)?`${t}
`+XM(r,e):t.endsWith(" ")?`${t}#${r}`:`${t} #${r}`:t}Qb.addComment=Nte;Qb.stringifyComment=XM});var rq=I(tq=>{"use strict";var No=Ke(),ZM=Pt(),eq=Lc(),cd=bm();function Lte({key:t,value:e},r,n,i){let{allNullValues:o,doc:s,indent:a,indentStep:c,options:{indentSeq:l,simpleKeys:u}}=r,d=No.isNode(t)&&t.comment||null;if(u){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(No.isCollection(t)){let _="With simple keys, collection cannot be used as a key value";throw new Error(_)}}let f=!u&&(!t||d&&e==null&&!r.inFlow||No.isCollection(t)||(No.isScalar(t)?t.type===ZM.Scalar.BLOCK_FOLDED||t.type===ZM.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!f&&(u||!o),indent:a+c});let p=!1,h=!1,m=eq.stringify(t,r,()=>p=!0,()=>h=!0);if(!f&&!r.inFlow&&m.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(r.inFlow){if(o||e==null)return p&&n&&n(),f?`? ${m}`:m}else if(o&&!u||e==null&&f)return p&&(d=null),h&&!d&&i&&i(),cd.addComment(`? ${m}`,r.indent,d);p&&(d=null),m=f?`? ${cd.addComment(m,r.indent,d)}
${a}:`:cd.addComment(`${m}:`,r.indent,d);let g="",v=null;No.isNode(e)?(e.spaceBefore&&(g=`
`),e.commentBefore&&(g+=`
${cd.stringifyComment(e.commentBefore,r.indent)}`),v=e.comment):e&&typeof e=="object"&&(e=s.createNode(e)),r.implicitKey=!1,!f&&!d&&No.isScalar(e)&&(r.indentAtStart=m.length+1),h=!1,!l&&c.length>=2&&!r.inFlow&&!f&&No.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let w=!1,C=eq.stringify(e,r,()=>w=!0,()=>h=!0),b=" ";return g||d?b=C===""&&!r.inFlow?g:`${g}
${r.indent}`:!f&&No.isCollection(e)?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(b=`
${r.indent}`):(C===""||C[0]===`
`)&&(b=""),r.inFlow?(w&&n&&n(),m+b+C):(w&&(v=null),h&&!v&&i&&i(),cd.addComment(m+b+C,r.indent,v))}tq.stringifyPair=Lte});var Zb=I(Xb=>{"use strict";function Fte(t,...e){t==="debug"&&console.log(...e)}function Mte(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}Xb.debug=Fte;Xb.warn=Mte});var rE=I(iq=>{"use strict";var qte=Zb(),$te=Lc(),Fc=Ke(),jte=Pt(),eE=Nc(),nq="<<";function Ute(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&Bte(r))if(n=Fc.isAlias(n)?n.resolve(t.doc):n,Fc.isSeq(n))for(let i of n.items)tE(t,e,i);else if(Array.isArray(n))for(let i of n)tE(t,e,i);else tE(t,e,n);else{let i=eE.toJS(r,"",t);if(e instanceof Map)e.set(i,eE.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let o=Hte(r,i,t),s=eE.toJS(n,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var Bte=t=>t===nq||Fc.isScalar(t)&&t.value===nq&&(!t.type||t.type===jte.Scalar.PLAIN);function tE(t,e,r){let n=t&&Fc.isAlias(r)?r.resolve(t.doc):r;if(!Fc.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function Hte(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Fc.isNode(t)&&r&&r.doc){let n=$te.createStringifyContext(r.doc,{});n.anchors=new Set;for(let o of r.anchors.keys())n.anchors.add(o.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),qte.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}iq.addPairToJSMap=Ute});var ji=I(nE=>{"use strict";var oq=rd(),Vte=rq(),Gte=rE(),Em=Ke();function Wte(t,e,r){let n=oq.createNode(t,void 0,r),i=oq.createNode(e,void 0,r);return new ld(n,i)}var ld=class{constructor(e,r=null){Object.defineProperty(this,Em.NODE_TYPE,{value:Em.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Em.isNode(r)&&(r=r.clone(e)),Em.isNode(n)&&(n=n.clone(e)),new ld(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return Gte.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?Vte.stringifyPair(this,e,r,n):JSON.stringify(this)}};nE.Pair=ld;nE.createPair=Wte});var _m=I(sq=>{"use strict";var zte={intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};sq.defaultOptions=zte});var iE=I(cq=>{"use strict";var Kte=nd(),Sm=Ke(),Yte=Lc(),aq=bm();function Jte({comment:t,flow:e,items:r},n,{blockItem:i,flowChars:o,itemIndent:s,onChompKeep:a,onComment:c}){let{indent:l,indentStep:u}=n,d=e||n.inFlow;d&&(s+=u),n=Object.assign({},n,{indent:s,inFlow:d,type:null});let f=!0,p=!1,h=r.reduce((g,v,w)=>{let C=null;if(Sm.isNode(v)){!p&&v.spaceBefore&&g.push({comment:!0,str:""});let _=v.commentBefore;if(_&&p&&(_=_.replace(/^\n+/,"")),_){/^\n+$/.test(_)&&(_=_.substring(1));for(let P of _.match(/^.*$/gm)){let x=P===" "?"#":P?`#${P}`:"";g.push({comment:!0,str:x})}}v.comment&&(C=v.comment,f=!1)}else if(Sm.isPair(v)){let _=Sm.isNode(v.key)?v.key:null;if(_){!p&&_.spaceBefore&&g.push({comment:!0,str:""});let P=_.commentBefore;if(P&&p&&(P=P.replace(/^\n+/,"")),P){/^\n+$/.test(P)&&(P=P.substring(1));for(let x of P.match(/^.*$/gm)){let k=x===" "?"#":x?`#${x}`:"";g.push({comment:!0,str:k})}}_.comment&&(f=!1)}if(d){let P=Sm.isNode(v.value)?v.value:null;P?(P.comment&&(C=P.comment),(P.comment||P.commentBefore)&&(f=!1)):v.value==null&&_&&_.comment&&(C=_.comment)}}p=!1;let b=Yte.stringify(v,n,()=>C=null,()=>p=!0);return d&&w<r.length-1&&(b+=","),b=aq.addComment(b,s,C),p&&(C||d)&&(p=!1),g.push({comment:!1,str:b}),g},[]),m;if(h.length===0)m=o.start+o.end;else if(d){let{start:g,end:v}=o,w=h.map(b=>b.str),C=2;for(let b of h){if(b.comment||b.str.includes(`
`)){f=!1;break}C+=b.str.length+2}if(!f||C>Kte.Collection.maxFlowStringSingleLineLength){m=g;for(let b of w)m+=b?`
${u}${l}${b}`:`
`;m+=`
${l}${v}`}else m=`${g} ${w.join(" ")} ${v}`}else{let g=h.map(i);m=g.shift()||"";for(let v of g)m+=v?`
${l}${v}`:`
`}return t?(m+=`
`+aq.stringifyComment(t,l),c&&c()):p&&a&&a(),m}cq.stringifyCollection=Jte});var oa=I(sE=>{"use strict";var Qte=iE(),Xte=rE(),Zte=nd(),Lo=Ke(),oE=ji(),ere=Pt();function ud(t,e){let r=Lo.isScalar(e)?e.value:e;for(let n of t)if(Lo.isPair(n)&&(n.key===e||n.key===r||Lo.isScalar(n.key)&&n.key.value===r))return n}var lq=class extends Zte.Collection{constructor(e){super(Lo.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;Lo.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new oE.Pair(e,e.value):n=new oE.Pair(e.key,e.value);let i=ud(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);Lo.isScalar(i.value)&&ere.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(o){let s=this.items.findIndex(a=>o(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=ud(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=ud(this.items,e),i=n&&n.value;return!r&&Lo.isScalar(i)?i.value:i}has(e){return!!ud(this.items,e)}set(e,r){this.add(new oE.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let o of this.items)Xte.addPairToJSMap(r,i,o);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!Lo.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Qte.stringifyCollection(this,e,{blockItem:i=>i.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};sE.YAMLMap=lq;sE.findPair=ud});var Mc=I(dq=>{"use strict";var tre=Ke(),rre=ji(),uq=oa();function nre(t,e,r){let{keepUndefined:n,replacer:i}=r,o=new uq.YAMLMap(t),s=(a,c)=>{if(typeof i=="function")c=i.call(e,a,c);else if(Array.isArray(i)&&!i.includes(a))return;(c!==void 0||n)&&o.items.push(rre.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}var ire={collection:"map",createNode:nre,default:!0,nodeClass:uq.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return tre.isMap(t)||e("Expected a mapping for this tag"),t}};dq.map=ire});var sa=I(pq=>{"use strict";var ore=iE(),sre=nd(),xm=Ke(),are=Pt(),cre=Nc(),fq=class extends sre.Collection{constructor(e){super(xm.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=Pm(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=Pm(e);if(typeof n!="number")return;let i=this.items[n];return!r&&xm.isScalar(i)?i.value:i}has(e){let r=Pm(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=Pm(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];xm.isScalar(i)&&are.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let o of this.items)n.push(cre.toJS(o,String(i++),r));return n}toString(e,r,n){return e?ore.stringifyCollection(this,e,{blockItem:i=>i.comment?i.str:`- ${i.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function Pm(t){let e=xm.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}pq.YAMLSeq=fq});var qc=I(mq=>{"use strict";var lre=rd(),ure=Ke(),hq=sa();function dre(t,e,r){let{replacer:n}=r,i=new hq.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(o++);s=n.call(e,a,s)}i.items.push(lre.createNode(s,void 0,r))}}return i}var fre={collection:"seq",createNode:dre,default:!0,nodeClass:hq.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return ure.isSeq(t)||e("Expected a sequence for this tag"),t}};mq.seq=fre});var dd=I(gq=>{"use strict";var pre=ad(),hre={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),pre.stringifyString(t,e,r,n)}};gq.string=hre});var km=I(wq=>{"use strict";var vq=Pt(),yq={identify:t=>t==null,createNode:()=>new vq.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new vq.Scalar(null),stringify:({source:t},e)=>t&&yq.test.test(t)?t:e.options.nullStr};wq.nullTag=yq});var aE=I(bq=>{"use strict";var mre=Pt(),Cq={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new mre.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&Cq.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};bq.boolTag=Cq});var $c=I(Eq=>{"use strict";function gre({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}Eq.stringifyNumber=gre});var cE=I(Im=>{"use strict";var vre=Pt(),_q=$c(),yre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_q.stringifyNumber},wre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},Cre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new vre.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:_q.stringifyNumber};Im.float=Cre;Im.floatExp=wre;Im.floatNaN=yre});var uE=I(Tm=>{"use strict";var Sq=$c(),Am=t=>typeof t=="bigint"||Number.isInteger(t),lE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function xq(t,e,r){let{value:n}=t;return Am(n)&&n>=0?r+n.toString(e):Sq.stringifyNumber(t)}var bre={identify:t=>Am(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>lE(t,2,8,r),stringify:t=>xq(t,8,"0o")},Ere={identify:Am,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>lE(t,0,10,r),stringify:Sq.stringifyNumber},_re={identify:t=>Am(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>lE(t,2,16,r),stringify:t=>xq(t,16,"0x")};Tm.int=Ere;Tm.intHex=_re;Tm.intOct=bre});var kq=I(Pq=>{"use strict";var Sre=Mc(),xre=km(),Pre=qc(),kre=dd(),Ire=aE(),dE=cE(),fE=uE(),Are=[Sre.map,Pre.seq,kre.string,xre.nullTag,Ire.boolTag,fE.intOct,fE.int,fE.intHex,dE.floatNaN,dE.floatExp,dE.float];Pq.schema=Are});var Tq=I(Aq=>{"use strict";var Tre=Pt(),Rre=Mc(),Dre=qc();function Iq(t){return typeof t=="bigint"||Number.isInteger(t)}var Rm=({value:t})=>JSON.stringify(t),Ore=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Rm},{identify:t=>t==null,createNode:()=>new Tre.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Rm},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Rm},{identify:Iq,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>Iq(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Rm}],Nre={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Lre=[Rre.map,Dre.seq].concat(Ore,Nre);Aq.schema=Lre});var hE=I(Rq=>{"use strict";var pE=Pt(),Fre=ad(),Mre={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,o){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=pE.Scalar.BLOCK_LITERAL),e!==pE.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,f=0;d<l;++d,f+=c)u[d]=a.substr(f,c);a=u.join(e===pE.Scalar.BLOCK_LITERAL?`
`:" ")}return Fre.stringifyString({comment:t,type:e,value:a},n,i,o)}};Rq.binary=Mre});var Nm=I(Om=>{"use strict";var Dm=Ke(),mE=ji(),qre=Pt(),$re=sa();function Dq(t,e){if(Dm.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!Dm.isPair(n)){if(Dm.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new mE.Pair(new qre.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let o=i.value||i.key;o.comment=o.comment?`${n.comment}
${o.comment}`:n.comment}n=i}t.items[r]=Dm.isPair(n)?n:new mE.Pair(n)}}else e("Expected a sequence for this tag");return t}function Oq(t,e,r){let{replacer:n}=r,i=new $re.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(o++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;i.items.push(mE.createPair(a,c,r))}return i}var jre={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Dq,createNode:Oq};Om.createPairs=Oq;Om.pairs=jre;Om.resolvePairs=Dq});var yE=I(vE=>{"use strict";var Ure=sa(),gE=Nc(),Nq=Ke(),fd=oa(),Lq=Nm(),Fo=class extends Ure.YAMLSeq{constructor(){super();this.add=fd.YAMLMap.prototype.add.bind(this),this.delete=fd.YAMLMap.prototype.delete.bind(this),this.get=fd.YAMLMap.prototype.get.bind(this),this.has=fd.YAMLMap.prototype.has.bind(this),this.set=fd.YAMLMap.prototype.set.bind(this),this.tag=Fo.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let o,s;if(Nq.isPair(i)?(o=gE.toJS(i.key,"",r),s=gE.toJS(i.value,o,r)):o=gE.toJS(i,"",r),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,s)}return n}};Fo.tag="tag:yaml.org,2002:omap";var Bre={collection:"seq",identify:t=>t instanceof Map,nodeClass:Fo,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=Lq.resolvePairs(t,e),n=[];for(let{key:i}of r.items)Nq.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Fo,r)},createNode(t,e,r){let n=Lq.createPairs(t,e,r),i=new Fo;return i.items=n.items,i}};vE.YAMLOMap=Fo;vE.omap=Bre});var jq=I(wE=>{"use strict";var Fq=Pt();function Mq({value:t,source:e},r){return e&&(t?qq:$q).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var qq={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Fq.Scalar(!0),stringify:Mq},$q={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Fq.Scalar(!1),stringify:Mq};wE.falseTag=$q;wE.trueTag=qq});var Bq=I(Lm=>{"use strict";var Hre=Pt(),Uq=$c(),Vre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Uq.stringifyNumber},Gre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},Wre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new Hre.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:Uq.stringifyNumber};Lm.float=Wre;Lm.floatExp=Gre;Lm.floatNaN=Vre});var Vq=I(hd=>{"use strict";var Hq=$c(),pd=t=>typeof t=="bigint"||Number.isInteger(t);function Fm(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,r);return i==="-"?-1*o:o}function CE(t,e,r){let{value:n}=t;if(pd(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return Hq.stringifyNumber(t)}var zre={identify:pd,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>Fm(t,2,2,r),stringify:t=>CE(t,2,"0b")},Kre={identify:pd,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>Fm(t,1,8,r),stringify:t=>CE(t,8,"0")},Yre={identify:pd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>Fm(t,0,10,r),stringify:Hq.stringifyNumber},Jre={identify:pd,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>Fm(t,2,16,r),stringify:t=>CE(t,16,"0x")};hd.int=Yre;hd.intBin=zre;hd.intHex=Jre;hd.intOct=Kre});var EE=I(bE=>{"use strict";var Mm=Ke(),qm=ji(),$m=oa(),Mo=class extends $m.YAMLMap{constructor(e){super(e);this.tag=Mo.tag}add(e){let r;Mm.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new qm.Pair(e.key,null):r=new qm.Pair(e,null),$m.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=$m.findPair(this.items,e);return!r&&Mm.isPair(n)?Mm.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=$m.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new qm.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};Mo.tag="tag:yaml.org,2002:set";var Qre={collection:"map",identify:t=>t instanceof Set,nodeClass:Mo,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(Mm.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new Mo,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,i=new Mo(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof n=="function"&&(o=n.call(e,o,o)),i.items.push(qm.createPair(o,null,r));return i}};bE.YAMLSet=Mo;bE.set=Qre});var SE=I(jm=>{"use strict";var Xre=$c();function _E(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=n.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return r==="-"?i(-1)*o:o}function Gq(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Xre.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),n+o.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var Zre={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>_E(t,r),stringify:Gq},ene={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>_E(t,!1),stringify:Gq},Wq={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(Wq.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,o,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,i,o||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=_E(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};jm.floatTime=ene;jm.intTime=Zre;jm.timestamp=Wq});var Yq=I(Kq=>{"use strict";var tne=Mc(),rne=km(),nne=qc(),ine=dd(),one=hE(),zq=jq(),xE=Bq(),Um=Vq(),sne=yE(),ane=Nm(),cne=EE(),PE=SE(),lne=[tne.map,nne.seq,ine.string,rne.nullTag,zq.trueTag,zq.falseTag,Um.intBin,Um.intOct,Um.int,Um.intHex,xE.floatNaN,xE.floatExp,xE.float,one.binary,sne.omap,ane.pairs,cne.set,PE.intTime,PE.floatTime,PE.timestamp];Kq.schema=lne});var o$=I(AE=>{"use strict";var Jq=Mc(),une=km(),Qq=qc(),dne=dd(),fne=aE(),kE=cE(),IE=uE(),pne=kq(),hne=Tq(),Xq=hE(),Zq=yE(),e$=Nm(),t$=Yq(),r$=EE(),Bm=SE(),n$={core:pne.schema,failsafe:[Jq.map,Qq.seq,dne.string],json:hne.schema,yaml11:t$.schema,"yaml-1.1":t$.schema},i$={binary:Xq.binary,bool:fne.boolTag,float:kE.float,floatExp:kE.floatExp,floatNaN:kE.floatNaN,floatTime:Bm.floatTime,int:IE.int,intHex:IE.intHex,intOct:IE.intOct,intTime:Bm.intTime,map:Jq.map,null:une.nullTag,omap:Zq.omap,pairs:e$.pairs,seq:Qq.seq,set:r$.set,timestamp:Bm.timestamp},mne={"tag:yaml.org,2002:binary":Xq.binary,"tag:yaml.org,2002:omap":Zq.omap,"tag:yaml.org,2002:pairs":e$.pairs,"tag:yaml.org,2002:set":r$.set,"tag:yaml.org,2002:timestamp":Bm.timestamp};function gne(t,e){let r=n$[e];if(!r)if(Array.isArray(t))r=[];else{let n=Object.keys(n$).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let i=i$[n];if(i)return i;let o=Object.keys(i$).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${o}`)})}AE.coreKnownTags=mne;AE.getTags=gne});var RE=I(a$=>{"use strict";var TE=Ke(),vne=Mc(),yne=qc(),wne=dd(),s$=o$(),Cne=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,Hm=class{constructor({customTags:e,merge:r,resolveKnownTags:n,schema:i,sortMapEntries:o}){this.merge=!!r,this.name=i||"core",this.knownTags=n?s$.coreKnownTags:{},this.tags=s$.getTags(e,this.name),Object.defineProperty(this,TE.MAP,{value:vne.map}),Object.defineProperty(this,TE.SCALAR,{value:wne.string}),Object.defineProperty(this,TE.SEQ,{value:yne.seq}),this.sortMapEntries=o===!0?Cne:o||null}clone(){let e=Object.create(Hm.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};a$.Schema=Hm});var l$=I(c$=>{"use strict";var bne=Ke(),DE=Lc(),Vm=bm();function Ene(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1){let c=t.directives.toString(t);c?(r.push(c),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---"),t.commentBefore&&(r.length!==1&&r.unshift(""),r.unshift(Vm.stringifyComment(t.commentBefore,"")));let i=DE.createStringifyContext(t,e),o=!1,s=null;if(t.contents){bne.isNode(t.contents)&&(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore&&r.push(Vm.stringifyComment(t.contents.commentBefore,"")),i.forceBlockIndent=!!t.comment,s=t.contents.comment);let c=s?void 0:()=>o=!0,l=DE.stringify(t.contents,i,()=>s=null,c);s&&(l=Vm.addComment(l,"",s)),(l[0]==="|"||l[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${l}`:r.push(l)}else r.push(DE.stringify(t.contents,i));let a=t.comment;return a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||s)&&r[r.length-1]!==""&&r.push(""),r.push(Vm.stringifyComment(a,""))),r.join(`
`)+`
`}c$.stringifyDocument=Ene});var d$=I(u$=>{"use strict";function md(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,o=n.length;i<o;++i){let s=n[i],a=md(t,n,String(i),s);a===void 0?delete n[i]:a!==s&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let o=n.get(i),s=md(t,n,i,o);s===void 0?n.delete(i):s!==o&&n.set(i,s)}else if(n instanceof Set)for(let i of Array.from(n)){let o=md(t,n,i,i);o===void 0?n.delete(i):o!==i&&(n.delete(i),n.add(o))}else for(let[i,o]of Object.entries(n)){let s=md(t,n,i,o);s===void 0?delete n[i]:s!==o&&(n[i]=s)}return t.call(e,r,n)}u$.applyReviver=md});var gd=I(f$=>{"use strict";var _ne=td(),jc=nd(),mn=Ke(),Sne=ji(),xne=Nc(),Pne=_m(),kne=RE(),Ine=Lc(),Ane=l$(),OE=hm(),Tne=d$(),Rne=rd(),Dne=Vb(),Gm=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mn.NODE_TYPE,{value:mn.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let o=Object.assign({},Pne.defaultOptions,n);this.options=o;let{version:s}=o;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Dne.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,i,n)}clone(){let e=Object.create(Gm.prototype,{[mn.NODE_TYPE]:{value:mn.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),e.directives=this.directives.clone(),e.schema=this.schema.clone(),e.contents=mn.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Uc(this.contents)&&this.contents.add(e)}addIn(e,r){Uc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=OE.anchorNames(this);e.anchor=!r||n.has(r)?OE.findNewAnchor(r||"a",n):r}return new _ne.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:d,setAnchors:f,sourceObjects:p}=OE.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:o!=null?o:!0,keepUndefined:c!=null?c:!1,onAnchor:d,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:p},m=Rne.createNode(e,u,h);return a&&mn.isCollection(m)&&(m.flow=!0),f(),m}createPair(e,r,n={}){let i=this.createNode(e,null,n),o=this.createNode(r,null,n);return new Sne.Pair(i,o)}delete(e){return Uc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return jc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Uc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return mn.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return jc.isEmptyPath(e)?!r&&mn.isScalar(this.contents)?this.contents.value:this.contents:mn.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return mn.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return jc.isEmptyPath(e)?this.contents!==void 0:mn.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=jc.collectionFromPath(this.schema,[e],r):Uc(this.contents)&&this.contents.set(e,r)}setIn(e,r){jc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=jc.collectionFromPath(this.schema,Array.from(e),r):Uc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},r);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},r);break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${i}`)}}this.schema=new kne.Schema(n)}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:Ine.stringify},c=xne.toJS(this.contents,r||"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?Tne.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return Ane.stringifyDocument(this,e)}};function Uc(t){if(mn.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}f$.Document=Gm});var yd=I(vd=>{"use strict";var Wm=class extends Error{constructor(e,r,n,i){super();this.name=e,this.code=n,this.message=i,this.pos=r}},p$=class extends Wm{constructor(e,r,n){super("YAMLParseError",e,r,n)}},h$=class extends Wm{constructor(e,r,n){super("YAMLWarning",e,r,n)}},One=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>i&&(a=Math.min(c.col-i,80-o));let l=" ".repeat(o)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};vd.YAMLError=Wm;vd.YAMLParseError=p$;vd.YAMLWarning=h$;vd.prettifyError=One});var wd=I(m$=>{"use strict";function Nne(t,{flow:e,indicator:r,next:n,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,p=!1,h=null,m=null,g=null,v=null,w=null;for(let _ of t)switch(p&&(_.type!=="space"&&_.type!=="newline"&&_.type!=="comma"&&o(_.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),_.type){case"space":!e&&c&&r!=="doc-start"&&_.source[0]==="	"&&o(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(_,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let P=_.source.substring(1)||" ";u?u+=d+P:u=P,d="",c=!1;break}case"newline":c?u?u+=_.source:a=!0:d+=_.source,c=!0,f=!0,l=!0;break;case"anchor":h&&o(_,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=_,w===null&&(w=_.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&o(_,"MULTIPLE_TAGS","A node can have at most one tag"),m=_,w===null&&(w=_.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&o(_,"BAD_PROP_ORDER",`Anchors and tags must be after the ${_.source} indicator`),v=_,c=!1,l=!1;break;case"comma":if(e){g&&o(_,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=_,c=!1,l=!1;break}default:o(_,"UNEXPECTED_TOKEN",`Unexpected ${_.type} token`),c=!1,l=!1}let C=t[t.length-1],b=C?C.offset+C.source.length:i;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&o(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:f,anchor:h,tag:m,end:b,start:w!=null?w:b}}m$.resolveProps=Nne});var LE=I(g$=>{"use strict";function NE(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(NE(e.key)||NE(e.value))return!0}return!1;default:return!0}}g$.containsNewline=NE});var FE=I(y$=>{"use strict";var v$=Ke();function Lne(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(o,s)=>o===s||v$.isScalar(o)&&v$.isScalar(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,r))}y$.mapIncludes=Lne});var _$=I(E$=>{"use strict";var w$=ji(),Fne=oa(),C$=wd(),Mne=LE(),qne=FE(),b$="All mapping items must start at the same column";function $ne({composeNode:t,composeEmptyNode:e},r,n,i){var o;let s=new Fne.YAMLMap(r.schema),a=n.offset;for(let c of n.items){let{start:l,key:u,sep:d,value:f}=c,p=C$.resolveProps(l,{indicator:"explicit-key-ind",next:u||(d==null?void 0:d[0]),offset:a,onError:i,startOnNewline:!0}),h=!p.found;if(h){if(u&&(u.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&i(a,"BAD_INDENT",b$)),!p.anchor&&!p.tag&&!d){p.comment&&(s.comment?s.comment+=`
`+p.comment:s.comment=p.comment);continue}}else((o=p.found)===null||o===void 0?void 0:o.indent)!==n.indent&&i(a,"BAD_INDENT",b$);h&&Mne.containsNewline(u)&&i(u,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let m=p.end,g=u?t(r,u,p,i):e(r,m,l,null,p,i);qne.mapIncludes(r,s.items,g)&&i(m,"DUPLICATE_KEY","Map keys must be unique");let v=C$.resolveProps(d||[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:i,startOnNewline:!u||u.type==="block-scalar"});if(a=v.end,v.found){h&&((f==null?void 0:f.type)==="block-map"&&!v.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&p.start<v.found.offset-1024&&i(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let w=f?t(r,f,v,i):e(r,a,d,null,v,i);a=w.range[2];let C=new w$.Pair(g,w);r.options.keepSourceTokens&&(C.srcToken=c),s.items.push(C)}else{h&&i(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(g.comment?g.comment+=`
`+v.comment:g.comment=v.comment);let w=new w$.Pair(g);r.options.keepSourceTokens&&(w.srcToken=c),s.items.push(w)}}return s.range=[n.offset,a,a],s}E$.resolveBlockMap=$ne});var x$=I(S$=>{"use strict";var jne=sa(),Une=wd();function Bne({composeNode:t,composeEmptyNode:e},r,n,i){let o=new jne.YAMLSeq(r.schema),s=n.offset;for(let{start:a,value:c}of n.items){let l=Une.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(o.comment=l.comment);continue}let u=c?t(r,c,l,i):e(r,s,a,null,l,i);s=u.range[2],o.items.push(u)}return o.range=[n.offset,s,s],o}S$.resolveBlockSeq=Bne});var Bc=I(P$=>{"use strict";function Hne(t,e,r,n){let i="";if(t){let o=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":o=!0;break;case"comment":{r&&!o&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=c),o=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}P$.resolveEnd=Hne});var T$=I(A$=>{"use strict";var Vne=Ke(),Gne=ji(),k$=oa(),Wne=sa(),zne=Bc(),I$=wd(),Kne=LE(),Yne=FE(),ME="Block collections are not allowed within flow collections",qE=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Jne({composeNode:t,composeEmptyNode:e},r,n,i){let o=n.start.source==="{",s=o?"flow map":"flow sequence",a=o?new k$.YAMLMap(r.schema):new Wne.YAMLSeq(r.schema);a.flow=!0;let c=n.offset;for(let p=0;p<n.items.length;++p){let h=n.items[p],{start:m,key:g,sep:v,value:w}=h,C=I$.resolveProps(m,{flow:s,indicator:"explicit-key-ind",next:g||(v==null?void 0:v[0]),offset:c,onError:i,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!v&&!w){p===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):p<n.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),C.comment&&(a.comment?a.comment+=`
`+C.comment:a.comment=C.comment);continue}!o&&r.options.strict&&Kne.containsNewline(g)&&i(g,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(p===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${s} items`),C.comment){let b="";e:for(let _ of m)switch(_.type){case"comma":case"space":break;case"comment":b=_.source.substring(1);break e;default:break e}if(b){let _=a.items[a.items.length-1];Vne.isPair(_)&&(_=_.value||_.key),_.comment?_.comment+=`
`+b:_.comment=b,C.comment=C.comment.substring(b.length+1)}}if(!o&&!v&&!C.found){let b=w?t(r,w,C,i):e(r,C.end,v,null,C,i);a.items.push(b),c=b.range[2],qE(w)&&i(b.range,"BLOCK_IN_FLOW",ME)}else{let b=C.end,_=g?t(r,g,C,i):e(r,b,m,null,C,i);qE(g)&&i(_.range,"BLOCK_IN_FLOW",ME);let P=I$.resolveProps(v||[],{flow:s,indicator:"map-value-ind",next:w,offset:_.range[2],onError:i,startOnNewline:!1});if(P.found){if(!o&&!C.found&&r.options.strict){if(v)for(let A of v){if(A===P.found)break;if(A.type==="newline"){i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<P.found.offset-1024&&i(P.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else w&&("source"in w&&w.source&&w.source[0]===":"?i(w,"MISSING_CHAR",`Missing space after : in ${s}`):i(P.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let x=w?t(r,w,P,i):P.found?e(r,P.end,v,null,P,i):null;x?qE(w)&&i(x.range,"BLOCK_IN_FLOW",ME):P.comment&&(_.comment?_.comment+=`
`+P.comment:_.comment=P.comment);let k=new Gne.Pair(_,x);if(r.options.keepSourceTokens&&(k.srcToken=h),o){let A=a;Yne.mapIncludes(r,A.items,_)&&i(b,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(k)}else{let A=new k$.YAMLMap(r.schema);A.flow=!0,A.items.push(k),a.items.push(A)}c=x?x.range[2]:P.end}}let l=o?"}":"]",[u,...d]=n.end,f=c;if(u&&u.source===l?f=u.offset+u.source.length:(i(c+1,"MISSING_CHAR",`Expected ${s} to end with ${l}`),u&&u.source.length!==1&&d.unshift(u)),d.length>0){let p=zne.resolveEnd(d,f,r.options.strict,i);p.comment&&(a.comment?a.comment+=`
`+p.comment:a.comment=p.comment),a.range=[n.offset,f,p.offset]}else a.range=[n.offset,f,f];return a}A$.resolveFlowCollection=Jne});var O$=I(D$=>{"use strict";var R$=Ke(),Qne=Pt(),Xne=_$(),Zne=x$(),eie=T$();function tie(t,e,r,n,i){let o;switch(r.type){case"block-map":{o=Xne.resolveBlockMap(t,e,r,i);break}case"block-seq":{o=Zne.resolveBlockSeq(t,e,r,i);break}case"flow-collection":{o=eie.resolveFlowCollection(t,e,r,i);break}}if(!n)return o;let s=e.directives.tagName(n.source,f=>i(n,"TAG_RESOLVE_FAILED",f));if(!s)return o;let a=o.constructor;if(s==="!"||s===a.tagName)return o.tag=a.tagName,o;let c=R$.isMap(o)?"map":"seq",l=e.schema.tags.find(f=>f.collection===c&&f.tag===s);if(!l){let f=e.schema.knownTags[s];if(f&&f.collection===c)e.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o}let u=l.resolve(o,f=>i(n,"TAG_RESOLVE_FAILED",f),e.options),d=R$.isNode(u)?u:new Qne.Scalar(u);return d.range=o.range,d.tag=s,(l==null?void 0:l.format)&&(d.format=l.format),d}D$.composeCollection=tie});var jE=I(N$=>{"use strict";var $E=Pt();function rie(t,e,r){let n=t.offset,i=nie(t,e,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let o=i.mode===">"?$E.Scalar.BLOCK_FOLDED:$E.Scalar.BLOCK_LITERAL,s=t.source?iie(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=i.chomp==="+"?`
`.repeat(Math.max(0,s.length-1)):"",g=n+i.length;return t.source&&(g+=t.source.length),{value:m,type:o,comment:i.comment,range:[n,g,g]}}let c=t.indent+i.indent,l=t.offset+i.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")i.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",w)}i.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let d="",f="",p=!1;for(let m=0;m<u;++m)d+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<c){let b=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(w?2:1),"BAD_INDENT",b),g=""}o===$E.Scalar.BLOCK_LITERAL?(d+=f+g.slice(c)+v,f=`
`):g.length>c||v[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),d+=f+g.slice(c)+v,f=`
`,p=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)d+=`
`+s[m][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let h=n+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[n,h,h]}}function nie({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",c=-1;for(let f=1;f<i.length;++f){let p=i[f];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+f)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let p=e[f];switch(p.type){case"space":l=!0;case"newline":d+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),d+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function iie(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),o=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}N$.resolveBlockScalar=rie});var BE=I(F$=>{"use strict";var UE=Pt(),oie=Bc();function sie(t,e,r){let{offset:n,type:i,source:o,end:s}=t,a,c,l=(f,p,h)=>r(n+f,p,h);switch(i){case"scalar":a=UE.Scalar.PLAIN,c=aie(o,l);break;case"single-quoted-scalar":a=UE.Scalar.QUOTE_SINGLE,c=cie(o,l);break;case"double-quoted-scalar":a=UE.Scalar.QUOTE_DOUBLE,c=lie(o,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+o.length,n+o.length]}}let u=n+o.length,d=oie.resolveEnd(s,u,e,r);return{value:c,type:a,comment:d.comment,range:[n,u,d.offset]}}function aie(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),L$(t)}function cie(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),L$(t.slice(1,-1)).replace(/''/g,"'")}function L$(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],o=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?o===`
`?i+=o:o=`
`:(i+=o+n[1],o=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),i+o+(n&&n[1]||"")}function lie(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:o,offset:s}=uie(t,n);r+=o,n=s}else if(i==="\\"){let o=t[++n],s=die[o];if(s)r+=s;else if(o===`
`)for(o=t[n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="\r"&&t[n+1]===`
`)for(o=t[++n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];r+=fie(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let o=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>o?t.slice(o,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function uie(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var die={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function fie(t,e,r,n){let i=t.substr(e,r),s=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}F$.resolveFlowScalar=sie});var $$=I(q$=>{"use strict";var zm=Ke(),M$=Pt(),pie=jE(),hie=BE();function mie(t,e,r,n){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?pie.resolveBlockScalar(e,t.options.strict,n):hie.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,l=r&&c?gie(t.schema,i,c,r,n):vie(t.schema,i,e.type==="scalar"),u;try{let d=l.resolve(i,f=>n(r||e,"TAG_RESOLVE_FAILED",f),t.options);u=zm.isScalar(d)?d:new M$.Scalar(d)}catch(d){let f=d instanceof Error?d.message:String(d);n(r||e,"TAG_RESOLVE_FAILED",f),u=new M$.Scalar(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function gie(t,e,r,n,i){var o;if(r==="!")return t[zm.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((o=c.test)===null||o===void 0?void 0:o.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[zm.SCALAR])}function vie(t,e,r){var n;if(r){for(let i of t.tags)if(i.default&&((n=i.test)===null||n===void 0?void 0:n.test(e)))return i}return t[zm.SCALAR]}q$.composeScalar=mie});var U$=I(j$=>{"use strict";function yie(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++n];break}}return t}j$.emptyScalarPosition=yie});var G$=I(HE=>{"use strict";var wie=td(),Cie=O$(),B$=$$(),bie=Bc(),Eie=U$(),_ie={composeNode:H$,composeEmptyNode:V$};function H$(t,e,r,n){let{spaceBefore:i,comment:o,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=Sie(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=B$.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Cie.composeCollection(_ie,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&(c.srcToken=e),c}function V$(t,e,r,n,{spaceBefore:i,comment:o,anchor:s,tag:a},c){let l={type:"scalar",offset:Eie.emptyScalarPosition(e,r,n),indent:-1,source:""},u=B$.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),o&&(u.comment=o),u}function Sie({options:t},{offset:e,source:r,end:n},i){let o=new wie.Alias(r.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=bie.resolveEnd(n,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}HE.composeEmptyNode=V$;HE.composeNode=H$});var K$=I(z$=>{"use strict";var xie=gd(),W$=G$(),Pie=Bc(),kie=wd();function Iie(t,e,{offset:r,start:n,value:i,end:o},s){let a=Object.assign({directives:e},t),c=new xie.Document(void 0,a),l={directives:c.directives,options:c.options,schema:c.schema},u=kie.resolveProps(n,{indicator:"doc-start",next:i||(o==null?void 0:o[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?W$.composeNode(l,i,u,s):W$.composeEmptyNode(l,u.end,n,null,u,s);let d=c.contents.range[2],f=Pie.resolveEnd(o,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[r,d,f.offset],c}z$.composeDoc=Iie});var VE=I(X$=>{"use strict";var Aie=Vb(),Tie=gd(),Cd=yd(),Y$=Ke(),Rie=_m(),Die=K$(),Oie=Bc();function bd(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function J$(t){var e;let r="",n=!1,i=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":r+=(r===""?"":i?`

`:`
`)+(s.substring(1)||" "),n=!0,i=!1;break;case"%":((e=t[o+1])===null||e===void 0?void 0:e[0])!=="#"&&(o+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:r,afterEmptyLine:i}}var Q$=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,o)=>{let s=bd(r);o?this.warnings.push(new Cd.YAMLWarning(s,n,i)):this.errors.push(new Cd.YAMLParseError(s,n,i))},this.directives=new Aie.Directives({version:e.version||Rie.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=J$(this.prelude);if(n){let o=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.marker||!o)e.commentBefore=n;else if(Y$.isCollection(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Y$.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=o.commentBefore;o.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:J$(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let o=bd(e);o[0]+=r,this.onError(o,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=Die.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Cd.YAMLParseError(bd(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Cd.YAMLParseError(bd(e),"UNEXPECTED_TOKEN",n));break}let r=Oie.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Cd.YAMLParseError(bd(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),i=new Tie.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};X$.Composer=Q$});var tj=I(Km=>{"use strict";var Nie=jE(),Lie=BE(),Fie=yd(),Z$=ad();function Mie(t,e=!0,r){if(t){let n=(i,o,s)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,o,s);else throw new Fie.YAMLParseError([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Lie.resolveFlowScalar(t,e,n);case"block-scalar":return Nie.resolveBlockScalar(t,e,n)}}return null}function qie(t,e){var r;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=Z$.stringifyString({type:a,value:t},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:d}];return ej(p,l)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:c,end:l};default:return{type:"scalar",offset:s,indent:i,source:c,end:l}}}function $ie(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=Z$.stringifyString({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":jie(t,c);break;case'"':GE(t,c,"double-quoted-scalar");break;case"'":GE(t,c,"single-quoted-scalar");break;default:GE(t,c,"scalar")}}function jie(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=n,t.source=i}else{let{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:n}];ej(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function ej(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function GE(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let o of n)o.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,i={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(let o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}Km.createScalarToken=qie;Km.resolveAsScalar=Mie;Km.setScalarValue=$ie});var nj=I(rj=>{"use strict";var Uie=t=>"type"in t?Ym(t):Jm(t);function Ym(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=Ym(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=Jm(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=Jm(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=Jm(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function Jm({start:t,key:e,sep:r,value:n}){let i="";for(let o of t)i+=o.source;if(e&&(i+=Ym(e)),r)for(let o of r)i+=o.source;return n&&(i+=Ym(n)),i}rj.stringify=Uie});var aj=I(sj=>{"use strict";var WE=Symbol("break visit"),Bie=Symbol("skip children"),ij=Symbol("remove item");function aa(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),oj(Object.freeze([]),t,e)}aa.BREAK=WE;aa.SKIP=Bie;aa.REMOVE=ij;aa.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let o=r&&r[n];if(o&&"items"in o)r=o.items[i];else return}return r};aa.parentCollection=(t,e)=>{let r=aa.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r&&r[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function oj(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=oj(Object.freeze(t.concat([[i,s]])),o.items[s],r);if(typeof a=="number")s=a-1;else{if(a===WE)return WE;a===ij&&(o.items.splice(s,1),s-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}sj.visit=aa});var Qm=I(xr=>{"use strict";var zE=tj(),Hie=nj(),Vie=aj(),KE="\uFEFF",YE="",JE="",QE="",Gie=t=>!!t&&"items"in t,Wie=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function zie(t){switch(t){case KE:return"<BOM>";case YE:return"<DOC>";case JE:return"<FLOW_END>";case QE:return"<SCALAR>";default:return JSON.stringify(t)}}function Kie(t){switch(t){case KE:return"byte-order-mark";case YE:return"doc-mode";case JE:return"flow-error-end";case QE:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}xr.createScalarToken=zE.createScalarToken;xr.resolveAsScalar=zE.resolveAsScalar;xr.setScalarValue=zE.setScalarValue;xr.stringify=Hie.stringify;xr.visit=Vie.visit;xr.BOM=KE;xr.DOCUMENT=YE;xr.FLOW_END=JE;xr.SCALAR=QE;xr.isCollection=Gie;xr.isScalar=Wie;xr.prettyToken=zie;xr.tokenType=Kie});var ZE=I(dj=>{"use strict";var Ed=Qm();function gn(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var cj="0123456789ABCDEFabcdef".split(""),Yie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),lj=",[]{}".split(""),Jie=` ,[]{}
\r	`.split(""),XE=t=>!t||Jie.includes(t),uj=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&gn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Ed.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let o=e[n-1];(o===" "||o==="	")&&(r=n-1)}for(;;){let o=e[r-1];if(o===" "||o==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Ed.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&gn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&gn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!gn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&gn(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(XE),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&gn(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Ed.FLOW_END,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(XE),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||gn(s)||s===",")return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let o=0;for(;this.buffer[r-1-o]==="\\";)o+=1;if(o%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=n.indexOf(`
`,o)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>gn(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:e=i,r=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];for(o==="\r"&&(o=this.buffer[--i]);o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos)e=i;else break}while(!0);return yield Ed.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let o=this.buffer[n+1];if(gn(o)||e&&o===",")break;r=n}else if(gn(i)){let o=this.buffer[n+1];if(i==="\r"&&(o===`
`?(n+=1,i=`
`,o=this.buffer[n+1]):r=n),o==="#"||e&&lj.includes(o))break;if(i===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&lj.includes(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Ed.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(XE))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(gn(this.charAt(1)))return this.flowLevel===0&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!gn(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(Yie.includes(r))r=this.buffer[++e];else if(r==="%"&&cj.includes(this.buffer[e+1])&&cj.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};dj.Lexer=uj});var e_=I(pj=>{"use strict";var fj=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let o=r+n>>1;this.lineStarts[o]<e?r=o+1:n=o}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};pj.LineCounter=fj});var r_=I(yj=>{"use strict";var hj=Qm(),Qie=ZE();function hi(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function t_(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function mj(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Xm(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function _d(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function gj(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!hi(e.start,"explicit-key-ind")&&!hi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,mj(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var vj=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Qie.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",hj.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=hj.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch((r.type==="block-scalar"||r.type==="flow-collection")&&(r.indent="indent"in n?n.indent:-1),r.type==="flow-collection"&&gj(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!hi(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&!t_(i.start)&&(r.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{t_(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=Xm(this.peek(2)),n=_d(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&(n.sep||t_(n.start));switch(this.type){case"anchor":case"tag":i||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!hi(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||i&&!hi(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(hi(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(hi(n.start,"explicit-key-ind")&&mj(n.key)&&!hi(n.sep,"newline")){let o=_d(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||n.value?(e.items.push({start:[],key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&hi(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||hi(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=Xm(n),o=_d(i);gj(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=Xm(e),n=_d(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=Xm(e),n=_d(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};yj.Parser=vj});var _j=I(xd=>{"use strict";var wj=VE(),Xie=gd(),Sd=yd(),Zie=Zb(),eoe=e_(),Cj=r_();function bj(t){let e=!t||t.prettyErrors!==!1;return{lineCounter:t&&t.lineCounter||e&&new eoe.LineCounter||null,prettyErrors:e}}function toe(t,e={}){let{lineCounter:r,prettyErrors:n}=bj(e),i=new Cj.Parser(r==null?void 0:r.addNewLine),o=new wj.Composer(e),s=Array.from(o.compose(i.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Sd.prettifyError(t,r)),a.warnings.forEach(Sd.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function Ej(t,e={}){let{lineCounter:r,prettyErrors:n}=bj(e),i=new Cj.Parser(r==null?void 0:r.addNewLine),o=new wj.Composer(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Sd.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Sd.prettifyError(t,r)),s.warnings.forEach(Sd.prettifyError(t,r))),s}function roe(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=Ej(t,r);if(!i)return null;if(i.warnings.forEach(o=>Zie.warn(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function noe(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r||e||{};if(!i)return}return new Xie.Document(t,n,r).toString(r)}xd.parse=roe;xd.parseAllDocuments=toe;xd.parseDocument=Ej;xd.stringify=noe});var Sj=I(Ye=>{"use strict";var ioe=VE(),ooe=gd(),soe=RE(),n_=yd(),aoe=td(),qo=Ke(),coe=ji(),loe=Pt(),uoe=oa(),doe=sa(),foe=_m(),poe=Qm(),hoe=ZE(),moe=e_(),goe=r_(),Zm=_j(),voe=Xu();Ye.Composer=ioe.Composer;Ye.Document=ooe.Document;Ye.Schema=soe.Schema;Ye.YAMLError=n_.YAMLError;Ye.YAMLParseError=n_.YAMLParseError;Ye.YAMLWarning=n_.YAMLWarning;Ye.Alias=aoe.Alias;Ye.isAlias=qo.isAlias;Ye.isCollection=qo.isCollection;Ye.isDocument=qo.isDocument;Ye.isMap=qo.isMap;Ye.isNode=qo.isNode;Ye.isPair=qo.isPair;Ye.isScalar=qo.isScalar;Ye.isSeq=qo.isSeq;Ye.Pair=coe.Pair;Ye.Scalar=loe.Scalar;Ye.YAMLMap=uoe.YAMLMap;Ye.YAMLSeq=doe.YAMLSeq;Ye.defaultOptions=foe.defaultOptions;Ye.CST=poe;Ye.Lexer=hoe.Lexer;Ye.LineCounter=moe.LineCounter;Ye.Parser=goe.Parser;Ye.parse=Zm.parse;Ye.parseAllDocuments=Zm.parseAllDocuments;Ye.parseDocument=Zm.parseDocument;Ye.stringify=Zm.stringify;Ye.visit=voe.visit});var xj=I((zbe,yoe)=>{yoe.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var i_=I((Kbe,Pj)=>{"use strict";Pj.exports=xj()});var eg=I((Ybe,kj)=>{kj.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var Tj=I((Jbe,Aj)=>{"use strict";var Ij={};function woe(t){var e,r,n=Ij[t];if(n)return n;for(n=Ij[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function tg(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=tg.defaultChars),typeof r=="undefined"&&(r=!0),a=woe(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}tg.defaultChars=";/?:@&=+$,-_.!~*'()#";tg.componentChars="-_.!~*'()";Aj.exports=tg});var Oj=I((Qbe,Dj)=>{"use strict";var Rj={};function Coe(t){var e,r,n=Rj[t];if(n)return n;for(n=Rj[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function rg(t,e){var r;return typeof e!="string"&&(e=rg.defaultChars),r=Coe(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,l,u,d="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){d+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?d+="\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?d+="\uFFFD\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),l=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?d+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}d+="\uFFFD"}return d})}rg.defaultChars=";/?:@&=+$,#";rg.componentChars="";Dj.exports=rg});var Lj=I((Xbe,Nj)=>{"use strict";Nj.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var Bj=I((Zbe,Uj)=>{"use strict";function ng(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var boe=/^([a-z0-9.+-]+:)/i,Eoe=/:[0-9]*$/,_oe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Soe=["<",">",'"',"`"," ","\r",`
`,"	"],xoe=["{","}","|","\\","^","`"].concat(Soe),Poe=["'"].concat(xoe),Fj=["%","/","?",";","#"].concat(Poe),Mj=["/","?","#"],koe=255,qj=/^[+a-z0-9A-Z_-]{0,63}$/,Ioe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$j={javascript:!0,"javascript:":!0},jj={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Aoe(t,e){if(t&&t instanceof ng)return t;var r=new ng;return r.parse(t,e),r}ng.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=_oe.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=boe.exec(a);if(l&&(l=l[0],i=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&$j[l])&&(a=a.substr(2),this.slashes=!0)),!$j[l]&&(s||l&&!jj[l])){var u=-1;for(r=0;r<Mj.length;r++)o=a.indexOf(Mj[r]),o!==-1&&(u===-1||o<u)&&(u=o);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,r=0;r<Fj.length;r++)o=a.indexOf(Fj[r]),o!==-1&&(u===-1||o<u)&&(u=o);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(qj)){for(var v="",w=0,C=g.length;w<C;w++)g.charCodeAt(w)>127?v+="x":v+=g[w];if(!v.match(qj)){var b=m.slice(0,r),_=m.slice(r+1),P=g.match(Ioe);P&&(b.push(P[1]),_.unshift(P[2])),_.length&&(a=_.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>koe&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var x=a.indexOf("#");x!==-1&&(this.hash=a.substr(x),a=a.slice(0,x));var k=a.indexOf("?");return k!==-1&&(this.search=a.substr(k),a=a.slice(0,k)),a&&(this.pathname=a),jj[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};ng.prototype.parseHost=function(t){var e=Eoe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};Uj.exports=Aoe});var o_=I((eEe,Pd)=>{"use strict";Pd.exports.encode=Tj();Pd.exports.decode=Oj();Pd.exports.format=Lj();Pd.exports.parse=Bj()});var s_=I((tEe,Hj)=>{Hj.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var a_=I((rEe,Vj)=>{Vj.exports=/[\0-\x1F\x7F-\x9F]/});var Wj=I((nEe,Gj)=>{Gj.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var c_=I((iEe,zj)=>{zj.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var Kj=I(Hc=>{"use strict";Hc.Any=s_();Hc.Cc=a_();Hc.Cf=Wj();Hc.P=eg();Hc.Z=c_()});var ze=I(Nt=>{"use strict";function Toe(t){return Object.prototype.toString.call(t)}function Roe(t){return Toe(t)==="[object String]"}var Doe=Object.prototype.hasOwnProperty;function Yj(t,e){return Doe.call(t,e)}function Ooe(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function Noe(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function Jj(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function Qj(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var Xj=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,Loe=/&([a-z#][a-z0-9]{1,31});/gi,Foe=new RegExp(Xj.source+"|"+Loe.source,"gi"),Moe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Zj=i_();function qoe(t,e){var r=0;return Yj(Zj,e)?Zj[e]:e.charCodeAt(0)===35&&Moe.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),Jj(r))?Qj(r):t}function $oe(t){return t.indexOf("\\")<0?t:t.replace(Xj,"$1")}function joe(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Foe,function(e,r,n){return r||qoe(e,n)})}var Uoe=/[&<>"]/,Boe=/[&<>"]/g,Hoe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Voe(t){return Hoe[t]}function Goe(t){return Uoe.test(t)?t.replace(Boe,Voe):t}var Woe=/[.?*+^$[\]\\(){}|-]/g;function zoe(t){return t.replace(Woe,"\\$&")}function Koe(t){switch(t){case 9:case 32:return!0}return!1}function Yoe(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var Joe=eg();function Qoe(t){return Joe.test(t)}function Xoe(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Zoe(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}Nt.lib={};Nt.lib.mdurl=o_();Nt.lib.ucmicro=Kj();Nt.assign=Ooe;Nt.isString=Roe;Nt.has=Yj;Nt.unescapeMd=$oe;Nt.unescapeAll=joe;Nt.isValidEntityCode=Jj;Nt.fromCodePoint=Qj;Nt.escapeHtml=Goe;Nt.arrayReplaceAt=Noe;Nt.isSpace=Koe;Nt.isWhiteSpace=Yoe;Nt.isMdAsciiPunct=Xoe;Nt.isPunctChar=Qoe;Nt.escapeRE=zoe;Nt.normalizeReference=Zoe});var tU=I((aEe,eU)=>{"use strict";eU.exports=function(e,r,n){var i,o,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,i=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=u,-1}}return o&&(c=e.pos),e.pos=u,c}});var iU=I((cEe,nU)=>{"use strict";var rU=ze().unescapeAll;nU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=rU(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=rU(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var sU=I((lEe,oU)=>{"use strict";var ese=ze().unescapeAll;oU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=ese(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var aU=I(ig=>{"use strict";ig.parseLinkLabel=tU();ig.parseLinkDestination=iU();ig.parseLinkTitle=sU()});var lU=I((dEe,cU)=>{"use strict";var tse=ze().assign,rse=ze().unescapeAll,ca=ze().escapeHtml,mi={};mi.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+ca(t[e].content)+"</code>"};mi.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+ca(t[e].content)+`</code></pre>
`};mi.fence=function(t,e,r,n,i){var o=t[e],s=o.info?rse(o.info).trim():"",a="",c="",l,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],c=d.slice(2).join("")),r.highlight?l=r.highlight(o.content,a,c)||ca(o.content):l=ca(o.content),l.indexOf("<pre")===0?l+`
`:s?(u=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[],u<0?f.push(["class",r.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+r.langPrefix+a),p={attrs:f},"<pre><code"+i.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+l+`</code></pre>
`};mi.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};mi.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};mi.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};mi.text=function(t,e){return ca(t[e].content)};mi.html_block=function(t,e){return t[e].content};mi.html_inline=function(t,e){return t[e].content};function Vc(){this.rules=tse({},mi)}Vc.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+ca(e.attrs[r][0])+'="'+ca(e.attrs[r][1])+'"';return i};Vc.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};Vc.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};Vc.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};Vc.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};cU.exports=Vc});var og=I((fEe,uU)=>{"use strict";function Mn(){this.__rules__=[],this.__cache__=null}Mn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Mn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};Mn.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Mn.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Mn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Mn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Mn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Mn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};uU.exports=Mn});var fU=I((pEe,dU)=>{"use strict";var nse=/\r\n?|\n/g,ise=/\0/g;dU.exports=function(e){var r;r=e.src.replace(nse,`
`),r=r.replace(ise,"\uFFFD"),e.src=r}});var hU=I((hEe,pU)=>{"use strict";pU.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var gU=I((mEe,mU)=>{"use strict";mU.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var yU=I((gEe,vU)=>{"use strict";var ose=ze().arrayReplaceAt;function sse(t){return/^<a[>\s]/i.test(t)}function ase(t){return/^<\/a\s*>/i.test(t)}vU.exports=function(e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w=e.tokens,C;if(!!e.md.options.linkify){for(n=0,i=w.length;n<i;n++)if(!(w[n].type!=="inline"||!e.md.linkify.pretest(w[n].content)))for(o=w[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(sse(a.content)&&h>0&&h--,ase(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,C=e.md.linkify.match(u),c=[],p=a.level,f=0,l=0;l<C.length;l++)m=C[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=C[l].text,C[l].schema?C[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d=C[l].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),f=C[l].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,c.push(s)),w[n].children=o=ose(o,r,c)}}}}});var bU=I((vEe,CU)=>{"use strict";var wU=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,cse=/\((c|tm|r|p)\)/i,lse=/\((c|tm|r|p)\)/ig,use={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function dse(t,e){return use[e.toLowerCase()]}function fse(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(lse,dse)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function pse(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&wU.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}CU.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(cse.test(e.tokens[r].content)&&fse(e.tokens[r].children),wU.test(e.tokens[r].content)&&pse(e.tokens[r].children))}});var IU=I((yEe,kU)=>{"use strict";var EU=ze().isWhiteSpace,_U=ze().isPunctChar,SU=ze().isMdAsciiPunct,hse=/['"]/,xU=/['"]/g,PU="\u2019";function sg(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function mse(t,e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,_,P;for(b=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,w=b.length-1;w>=0&&!(b[w].level<=c);w--);if(b.length=w+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(xU.lastIndex=s,o=xU.exec(i),!!o);){if(g=v=!0,s=o.index+1,C=o[0]==="'",u=32,o.index-1>=0)u=i.charCodeAt(o.index-1);else for(w=r-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(!!t[w].content){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(d=32,s<a)d=i.charCodeAt(s);else for(w=r+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(!!t[w].content){d=t[w].content.charCodeAt(0);break}if(f=SU(u)||_U(String.fromCharCode(u)),p=SU(d)||_U(String.fromCharCode(d)),h=EU(u),m=EU(d),m?g=!1:p&&(h||f||(g=!1)),h?v=!1:f&&(m||p||(v=!1)),d===34&&o[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=f,v=p),!g&&!v){C&&(n.content=sg(n.content,o.index,PU));continue}if(v){for(w=b.length-1;w>=0&&(l=b[w],!(b[w].level<c));w--)if(l.single===C&&b[w].level===c){l=b[w],C?(_=e.md.options.quotes[2],P=e.md.options.quotes[3]):(_=e.md.options.quotes[0],P=e.md.options.quotes[1]),n.content=sg(n.content,o.index,P),t[l.token].content=sg(t[l.token].content,l.pos,_),s+=P.length-1,l.token===r&&(s+=_.length-1),i=n.content,a=i.length,b.length=w;continue e}}g?b.push({token:r,pos:o.index,single:C,level:c}):v&&C&&(n.content=sg(n.content,o.index,PU))}}}kU.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!hse.test(e.tokens[r].content)||mse(e.tokens[r].children,e)}});var ag=I((wEe,AU)=>{"use strict";function Gc(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Gc.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};Gc.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Gc.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};Gc.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};Gc.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};AU.exports=Gc});var DU=I((CEe,RU)=>{"use strict";var gse=ag();function TU(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}TU.prototype.Token=gse;RU.exports=TU});var NU=I((bEe,OU)=>{"use strict";var vse=og(),l_=[["normalize",fU()],["block",hU()],["inline",gU()],["linkify",yU()],["replacements",bU()],["smartquotes",IU()]];function u_(){this.ruler=new vse;for(var t=0;t<l_.length;t++)this.ruler.push(l_[t][0],l_[t][1])}u_.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};u_.prototype.State=DU();OU.exports=u_});var MU=I((EEe,FU)=>{"use strict";var d_=ze().isSpace;function f_(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function LU(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}FU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,_,P;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(_=e.src.charCodeAt(a++),_!==124&&_!==45&&_!==58)||a>=e.eMarks[u]||(P=e.src.charCodeAt(a++),P!==124&&P!==45&&P!==58&&!d_(P))||_===45&&d_(P))return!1;for(;a<e.eMarks[u];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!d_(o))return!1;a++}for(s=f_(e,r+1),d=s.split("|"),h=[],c=0;c<d.length;c++){if(m=d[c].trim(),!m){if(c===0||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=f_(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(d=LU(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(i)return!0;for(w=e.parentType,e.parentType="table",b=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<d.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(C=!1,c=0,l=b.length;c<l;c++)if(b[c](e,u,n,!0)){C=!0;break}if(C||(s=f_(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=LU(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<f;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c]?d[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=w,e.line=u,!0}});var $U=I((_Ee,qU)=>{"use strict";qU.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var UU=I((SEe,jU)=>{"use strict";jU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(l=p,p=e.skipChars(p,o),s=p-l,s<3)||(d=e.src.slice(l,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[r],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=d,u.map=[r,e.line],!0}});var VU=I((xEe,HU)=>{"use strict";var BU=ze().isSpace;HU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,_,P,x,k,A=e.lineMax,D=e.bMarks[r]+e.tShift[r],F=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(D++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(D)===32?(D++,c++,p++,o=!1,b=!0):e.src.charCodeAt(D)===9?(b=!0,(e.bsCount[r]+p)%4==3?(D++,c++,p++,o=!1):o=!0):b=!1,h=[e.bMarks[r]],e.bMarks[r]=D;D<F&&(s=e.src.charCodeAt(D),BU(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;D++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(b?1:0),u=D>=F,w=[e.sCount[r]],e.sCount[r]=p-c,C=[e.tShift[r]],e.tShift[r]=D-e.bMarks[r],P=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=r+1;f<n&&(k=e.sCount[f]<e.blkIndent,D=e.bMarks[f]+e.tShift[f],F=e.eMarks[f],!(D>=F));f++){if(e.src.charCodeAt(D++)===62&&!k){for(c=p=e.sCount[f]+1,e.src.charCodeAt(D)===32?(D++,c++,p++,o=!1,b=!0):e.src.charCodeAt(D)===9?(b=!0,(e.bsCount[f]+p)%4==3?(D++,c++,p++,o=!1):o=!0):b=!1,h.push(e.bMarks[f]),e.bMarks[f]=D;D<F&&(s=e.src.charCodeAt(D),BU(s));){s===9?p+=4-(p+e.bsCount[f]+(o?1:0))%4:p++;D++}u=D>=F,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(b?1:0),w.push(e.sCount[f]),e.sCount[f]=p-c,C.push(e.tShift[f]),e.tShift[f]=D-e.bMarks[f];continue}if(u)break;for(_=!1,a=0,l=P.length;a<l;a++)if(P[a](e,f,n,!0)){_=!0;break}if(_){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,x=e.push("blockquote_open","blockquote",1),x.markup=">",x.map=d=[r,0],e.md.block.tokenize(e,r,f),x=e.push("blockquote_close","blockquote",-1),x.markup=">",e.lineMax=A,e.parentType=v,d[1]=e.line,a=0;a<C.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=C[a],e.sCount[a+r]=w[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var WU=I((PEe,GU)=>{"use strict";var yse=ze().isSpace;GU.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l++),o!==42&&o!==45&&o!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==o&&!yse(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var QU=I((kEe,JU)=>{"use strict";var zU=ze().isSpace;function KU(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!zU(o))?-1:n}function YU(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!zU(r))?-1:i}function wse(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}JU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,_,P,x,k,A,D,F,V,ne,Y,J,H,L=!1,q=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.tShift[r]>=e.blkIndent&&(L=!0),(F=YU(e,r))>=0){if(d=!0,ne=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(ne,F-1)),L&&v!==1)return!1}else if((F=KU(e,r))>=0)d=!1;else return!1;if(L&&e.skipSpaces(F)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(F-1),i)return!0;for(m=e.tokens.length,d?(H=e.push("ordered_list_open","ol",1),v!==1&&(H.attrs=[["start",v]])):H=e.push("bullet_list_open","ul",1),H.map=h=[r,0],H.markup=String.fromCharCode(g),C=r,V=!1,J=e.md.block.ruler.getRules("list"),P=e.parentType,e.parentType="list";C<n;){for(D=F,w=e.eMarks[C],u=b=e.sCount[C]+F-(e.bMarks[r]+e.tShift[r]);D<w;){if(o=e.src.charCodeAt(D),o===9)b+=4-(b+e.bsCount[C])%4;else if(o===32)b++;else break;D++}if(s=D,s>=w?l=1:l=b-u,l>4&&(l=1),c=u+l,H=e.push("list_item_open","li",1),H.markup=String.fromCharCode(g),H.map=f=[r,0],d&&(H.info=e.src.slice(ne,F-1)),A=e.tight,k=e.tShift[r],x=e.sCount[r],_=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=b,s>=w&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||V)&&(q=!1),V=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=_,e.tShift[r]=k,e.sCount[r]=x,e.tight=A,H=e.push("list_item_close","li",-1),H.markup=String.fromCharCode(g),C=r=e.line,f[1]=C,s=e.bMarks[r],C>=n||e.sCount[C]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(Y=!1,a=0,p=J.length;a<p;a++)if(J[a](e,C,n,!0)){Y=!0;break}if(Y)break;if(d){if(F=YU(e,C),F<0)break;ne=e.bMarks[C]+e.tShift[C]}else if(F=KU(e,C),F<0)break;if(g!==e.src.charCodeAt(F-1))break}return d?H=e.push("ordered_list_close","ol",-1):H=e.push("bullet_list_close","ul",-1),H.markup=String.fromCharCode(g),h[1]=C,e.line=C,e.parentType=P,q&&wse(e,m),!0}});var ZU=I((IEe,XU)=>{"use strict";var Cse=ze().normalizeReference,cg=ze().isSpace;XU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,_=0,P=e.bMarks[r]+e.tShift[r],x=e.eMarks[r],k=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(P)!==91)return!1;for(;++P<x;)if(e.src.charCodeAt(P)===93&&e.src.charCodeAt(P-1)!==92){if(P+1===x||e.src.charCodeAt(P+1)!==58)return!1;break}for(c=e.lineMax,C=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";k<c&&!e.isEmpty(k);k++)if(!(e.sCount[k]-e.blkIndent>3)&&!(e.sCount[k]<0)){for(w=!1,u=0,d=C.length;u<d;u++)if(C[u](e,k,c,!0)){w=!0;break}if(w)break}for(v=e.getLines(r,k,e.blkIndent,!1).trim(),x=v.length,P=1;P<x;P++){if(o=v.charCodeAt(P),o===91)return!1;if(o===93){p=P;break}else o===10?_++:o===92&&(P++,P<x&&v.charCodeAt(P)===10&&_++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(P=p+2;P<x;P++)if(o=v.charCodeAt(P),o===10)_++;else if(!cg(o))break;if(m=e.md.helpers.parseLinkDestination(v,P,x),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(P=m.pos,_+=m.lines,s=P,a=_,g=P;P<x;P++)if(o=v.charCodeAt(P),o===10)_++;else if(!cg(o))break;for(m=e.md.helpers.parseLinkTitle(v,P,x),P<x&&g!==P&&m.ok?(b=m.str,P=m.pos,_+=m.lines):(b="",P=s,_=a);P<x&&(o=v.charCodeAt(P),!!cg(o));)P++;if(P<x&&v.charCodeAt(P)!==10&&b)for(b="",P=s,_=a;P<x&&(o=v.charCodeAt(P),!!cg(o));)P++;return P<x&&v.charCodeAt(P)!==10||(f=Cse(v.slice(1,p)),!f)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:b,href:l}),e.parentType=h,e.line=r+_+1),!0)}});var tB=I((AEe,eB)=>{"use strict";eB.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var h_=I((TEe,p_)=>{"use strict";var bse="[a-zA-Z_:][a-zA-Z0-9:._-]*",Ese="[^\"'=<>`\\x00-\\x20]+",_se="'[^']*'",Sse='"[^"]*"',xse="(?:"+Ese+"|"+_se+"|"+Sse+")",Pse="(?:\\s+"+bse+"(?:\\s*=\\s*"+xse+")?)",rB="<[A-Za-z][A-Za-z0-9\\-]*"+Pse+"*\\s*\\/?>",nB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",kse="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Ise="<[?][\\s\\S]*?[?]>",Ase="<![A-Z]+\\s+[^>]*>",Tse="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Rse=new RegExp("^(?:"+rB+"|"+nB+"|"+kse+"|"+Ise+"|"+Ase+"|"+Tse+")"),Dse=new RegExp("^(?:"+rB+"|"+nB+")");p_.exports.HTML_TAG_RE=Rse;p_.exports.HTML_OPEN_CLOSE_TAG_RE=Dse});var oB=I((REe,iB)=>{"use strict";var Ose=tB(),Nse=h_().HTML_OPEN_CLOSE_TAG_RE,Wc=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Ose.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Nse.source+"\\s*$"),/^$/,!1]];iB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),o=0;o<Wc.length&&!Wc[o][0].test(c);o++);if(o===Wc.length)return!1;if(i)return Wc[o][2];if(s=r+1,!Wc[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),Wc[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var cB=I((DEe,aB)=>{"use strict";var sB=ze().isSpace;aB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l),o!==35||l>=u))return!1;for(s=1,o=e.src.charCodeAt(++l);o===35&&l<u&&s<=6;)s++,o=e.src.charCodeAt(++l);return s>6||l<u&&!sB(o)?!1:(i||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&sB(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var uB=I((OEe,lB)=>{"use strict";lB.exports=function(e,r,n){var i,o,s,a,c,l,u,d,f,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){o=!0;break}if(o)break}}return d?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(d),1),c.markup=String.fromCharCode(f),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(d),-1),c.markup=String.fromCharCode(f),e.parentType=h,!0):!1}});var fB=I((NEe,dB)=>{"use strict";dB.exports=function(e,r){var n,i,o,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=!1,o=0,s=u.length;o<s;o++)if(u[o](e,l,d,!0)){i=!0;break}if(i)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var mB=I((LEe,hB)=>{"use strict";var pB=ag(),lg=ze().isSpace;function gi(t,e,r,n){var i,o,s,a,c,l,u,d;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,d=!1,s=a=l=u=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!d)if(lg(i)){l++,i===9?u+=4-u%4:u++;continue}else d=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),d=!1,l=0,u=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}gi.prototype.push=function(t,e,r){var n=new pB(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};gi.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};gi.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};gi.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!lg(r));e++);return e};gi.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!lg(this.src.charCodeAt(--e)))return e+1;return e};gi.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};gi.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};gi.prototype.getLines=function(e,r,n,i){var o,s,a,c,l,u,d,f=e;if(e>=r)return"";for(u=new Array(r-e),o=0;f<r;f++,o++){for(s=0,d=c=this.bMarks[f],f+1<r||i?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&s<n;){if(a=this.src.charCodeAt(c),lg(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(c-d<this.tShift[f])s++;else break;c++}s>n?u[o]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[o]=this.src.slice(c,l)}return u.join("")};gi.prototype.Token=pB;hB.exports=gi});var vB=I((FEe,gB)=>{"use strict";var Lse=og(),ug=[["table",MU(),["paragraph","reference"]],["code",$U()],["fence",UU(),["paragraph","reference","blockquote","list"]],["blockquote",VU(),["paragraph","reference","blockquote","list"]],["hr",WU(),["paragraph","reference","blockquote","list"]],["list",QU(),["paragraph","reference","blockquote"]],["reference",ZU()],["html_block",oB(),["paragraph","reference","blockquote"]],["heading",cB(),["paragraph","reference","blockquote"]],["lheading",uB()],["paragraph",fB()]];function dg(){this.ruler=new Lse;for(var t=0;t<ug.length;t++)this.ruler.push(ug[t][0],ug[t][1],{alt:(ug[t][2]||[]).slice()})}dg.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};dg.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};dg.prototype.State=mB();gB.exports=dg});var wB=I((MEe,yB)=>{"use strict";function Fse(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}yB.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!Fse(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var bB=I((qEe,CB)=>{"use strict";var Mse=ze().isSpace;CB.exports=function(e,r){var n,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;for(n=e.pending.length-1,i=e.posMax,r||(n>=0&&e.pending.charCodeAt(n)===32?n>=1&&e.pending.charCodeAt(n-1)===32?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<i&&Mse(e.src.charCodeAt(o));)o++;return e.pos=o,!0}});var _B=I(($Ee,EB)=>{"use strict";var qse=ze().isSpace,m_=[];for(g_=0;g_<256;g_++)m_.push(0);var g_;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){m_[t.charCodeAt(0)]=1});EB.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&m_[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!qse(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var xB=I((jEe,SB)=>{"use strict";SB.exports=function(e,r){var n,i,o,s,a,c,l,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(n=d,d++,i=e.posMax;d<i&&e.src.charCodeAt(d)===96;)d++;if(o=e.src.slice(n,d),l=o.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=o),e.pos+=l,!0;for(a=c=d;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=l,!0}});var y_=I((UEe,v_)=>{"use strict";v_.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:l,length:0,jump:n/2,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function PB(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}v_.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(PB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&PB(e,n[r].delimiters)}});var C_=I((BEe,w_)=>{"use strict";w_.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,jump:n,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function kB(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1&&e[r-1].marker===n.marker,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}w_.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(kB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&kB(e,n[r].delimiters)}});var AB=I((HEe,IB)=>{"use strict";var $se=ze().normalizeReference,b_=ze().isSpace;IB.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(i=e.src.charCodeAt(c),!(!b_(i)&&i!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",g=c;c<m&&(i=e.src.charCodeAt(c),!(!b_(i)&&i!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(i=e.src.charCodeAt(c),!(!b_(i)&&i!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(g,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),u=e.env.references[$se(o)],!u)return e.pos=h,!1;f=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),d=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var RB=I((VEe,TB)=>{"use strict";var jse=ze().normalizeReference,E_=ze().isSpace;TB.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f,p,h,m,g="",v=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<w&&e.src.charCodeAt(l)===40){for(l++;l<w&&(i=e.src.charCodeAt(l),!(!E_(i)&&i!==10));l++);if(l>=w)return!1;for(m=l,d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?l=d.pos:g=""),m=l;l<w&&(i=e.src.charCodeAt(l),!(!E_(i)&&i!==10));l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<w&&m!==l&&d.ok)for(f=d.str,l=d.pos;l<w&&(i=e.src.charCodeAt(l),!(!E_(i)&&i!==10));l++);else f="";if(l>=w||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<w&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[jse(s)],!u)return e.pos=v,!1;g=u.href,f=u.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=o,f&&n.push(["title",f])),e.pos=l,e.posMax=w,!0}});var OB=I((GEe,DB)=>{"use strict";var Use=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Bse=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;DB.exports=function(e,r){var n,i,o,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),Bse.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):Use.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var LB=I((WEe,NB)=>{"use strict";var Hse=h_().HTML_TAG_RE;function Vse(t){var e=t|32;return e>=97&&e<=122}NB.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!Vse(n))||(i=e.src.slice(a).match(Hse),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var $B=I((zEe,qB)=>{"use strict";var FB=i_(),Gse=ze().has,Wse=ze().isValidEntityCode,MB=ze().fromCodePoint,zse=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Kse=/^&([a-z][a-z0-9]{1,31});/i;qB.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(zse),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=Wse(i)?MB(i):MB(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(Kse),o&&Gse(FB,o[1]))return r||(e.pending+=FB[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var BB=I((KEe,UB)=>{"use strict";function jB(t,e){var r,n,i,o,s,a,c,l,u={},d=e.length;for(r=0;r<d;r++)if(i=e[r],i.length=i.length||0,!!i.close){for(u.hasOwnProperty(i.marker)||(u[i.marker]=[-1,-1,-1,-1,-1,-1]),s=u[i.marker][(i.open?3:0)+i.length%3],n=r-i.jump-1,n<-1&&(n=-1),a=n;n>s;n-=o.jump+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?e[n-1].jump+1:0,i.jump=r-n+l,i.open=!1,o.end=r,o.jump=l,o.close=!1,a=-1;break}a!==-1&&(u[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}UB.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(jB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&jB(e,n[r].delimiters)}});var VB=I((YEe,HB)=>{"use strict";HB.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var YB=I((JEe,KB)=>{"use strict";var __=ag(),GB=ze().isWhiteSpace,WB=ze().isPunctChar,zB=ze().isMdAsciiPunct;function kd(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}kd.prototype.pushPending=function(){var t=new __("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};kd.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new __(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};kd.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,l,u,d,f=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,l=zB(n)||WB(String.fromCharCode(n)),d=zB(i)||WB(String.fromCharCode(i)),c=GB(n),u=GB(i),u?f=!1:d&&(c||l||(f=!1)),c?p=!1:l&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||l),a=p&&(!f||d)),{can_open:s,can_close:a,length:o}};kd.prototype.Token=__;KB.exports=kd});var XB=I((QEe,QB)=>{"use strict";var JB=og(),S_=[["text",wB()],["newline",bB()],["escape",_B()],["backticks",xB()],["strikethrough",y_().tokenize],["emphasis",C_().tokenize],["link",AB()],["image",RB()],["autolink",OB()],["html_inline",LB()],["entity",$B()]],x_=[["balance_pairs",BB()],["strikethrough",y_().postProcess],["emphasis",C_().postProcess],["text_collapse",VB()]];function Id(){var t;for(this.ruler=new JB,t=0;t<S_.length;t++)this.ruler.push(S_[t][0],S_[t][1]);for(this.ruler2=new JB,t=0;t<x_.length;t++)this.ruler2.push(x_[t][0],x_[t][1])}Id.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};Id.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Id.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};Id.prototype.State=YB();QB.exports=Id});var e2=I((XEe,ZB)=>{"use strict";ZB.exports=function(t){var e={};e.src_Any=s_().source,e.src_Cc=a_().source,e.src_Z=c_().source,e.src_P=eg().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var s2=I((ZEe,o2)=>{"use strict";function P_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function fg(t){return Object.prototype.toString.call(t)}function Yse(t){return fg(t)==="[object String]"}function Jse(t){return fg(t)==="[object Object]"}function Qse(t){return fg(t)==="[object RegExp]"}function t2(t){return fg(t)==="[object Function]"}function Xse(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var r2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Zse(t){return Object.keys(t||{}).reduce(function(e,r){return e||r2.hasOwnProperty(r)},!1)}var eae={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},tae="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",rae="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function nae(t){t.__index__=-1,t.__text_cache__=""}function iae(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function n2(){return function(t,e){e.normalize(t)}}function pg(t){var e=t.re=e2()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(tae),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,Jse(c)){Qse(c.validate)?l.validate=iae(c.validate):t2(c.validate)?l.validate=c.validate:o(a,c),t2(c.normalize)?l.normalize=c.normalize:c.normalize?o(a,c):l.normalize=n2();return}if(Yse(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:n2()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Xse).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),nae(t)}function oae(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function i2(t,e){var r=new oae(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function vn(t,e){if(!(this instanceof vn))return new vn(t,e);e||Zse(t)&&(e=t,t={}),this.__opts__=P_({},r2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=P_({},eae,t),this.__compiled__={},this.__tlds__=rae,this.__tlds_replaced__=!1,this.re={},pg(this)}vn.prototype.add=function(e,r){return this.__schemas__[e]=r,pg(this),this};vn.prototype.set=function(e){return this.__opts__=P_(this.__opts__,e),this};vn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};vn.prototype.pretest=function(e){return this.re.pretest.test(e)};vn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};vn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(i2(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push(i2(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};vn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),pg(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,pg(this),this)};vn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};vn.prototype.onCompile=function(){};o2.exports=vn});var c2=I((e_e,a2)=>{"use strict";a2.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var u2=I((t_e,l2)=>{"use strict";l2.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var f2=I((r_e,d2)=>{"use strict";d2.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var g2=I((n_e,m2)=>{"use strict";var Ad=ze(),sae=aU(),aae=lU(),cae=NU(),lae=vB(),uae=XB(),dae=s2(),la=o_(),p2=require("punycode"),fae={default:c2(),zero:u2(),commonmark:f2()},pae=/^(vbscript|javascript|file|data):/,hae=/^data:image\/(gif|png|jpeg|webp);/;function mae(t){var e=t.trim().toLowerCase();return pae.test(e)?!!hae.test(e):!0}var h2=["http:","https:","mailto:"];function gae(t){var e=la.parse(t,!0);if(e.hostname&&(!e.protocol||h2.indexOf(e.protocol)>=0))try{e.hostname=p2.toASCII(e.hostname)}catch{}return la.encode(la.format(e))}function vae(t){var e=la.parse(t,!0);if(e.hostname&&(!e.protocol||h2.indexOf(e.protocol)>=0))try{e.hostname=p2.toUnicode(e.hostname)}catch{}return la.decode(la.format(e),la.decode.defaultChars+"%")}function yn(t,e){if(!(this instanceof yn))return new yn(t,e);e||Ad.isString(t)||(e=t||{},t="default"),this.inline=new uae,this.block=new lae,this.core=new cae,this.renderer=new aae,this.linkify=new dae,this.validateLink=mae,this.normalizeLink=gae,this.normalizeLinkText=vae,this.utils=Ad,this.helpers=Ad.assign({},sae),this.options={},this.configure(t),e&&this.set(e)}yn.prototype.set=function(t){return Ad.assign(this.options,t),this};yn.prototype.configure=function(t){var e=this,r;if(Ad.isString(t)&&(r=t,t=fae[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};yn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};yn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};yn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};yn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};yn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};yn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};yn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};m2.exports=yn});var y2=I((i_e,v2)=>{"use strict";v2.exports=g2()});var $H=I((mxe,wce)=>{wce.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.209.6",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.63.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","workspaceTrust","terminalDimensions"],contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.* "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.* "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts","test-container-features":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.test.ts","test-container-features-offline":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.offline.test.ts","test-container-features-online":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.online.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.2.22","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.4","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.0.0","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.9","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.0","@types/vscode":"^1.62.0","@types/yargs":"^17.0.5","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.8.0",chai:"4.3.4",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.1.3","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.4.4","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.3.0"},dependencies:{applicationinsights:"2.1.9","find-process":"^1.4.5","follow-redirects":"^1.14.5","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.2.0",minimist:"^1.2.5",muxrpc:"^6.5.3","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.209.6/vscode-dev-containers-0.209.6.tgz","vscode-extension-telemetry":"^0.4.3","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.2",yaml:"^2.0.0-9",yargs:"~17.0.1"}}});FV(exports,{activate:()=>Cce,attachToContainer:()=>Ig,deactivate:()=>Sce});var U=K(require("vscode")),jH=K(require("os")),Rg=K(require("fs")),Lt=K(require("path")),UH=K(require("querystring"));var dt=K(require("fs")),vi=K(require("util"));function vt(t){return new Promise(e=>dt.stat(t,(r,n)=>e(!r&&n.isFile())))}function nl(t){return new Promise(e=>dt.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Me=(0,vi.promisify)(dt.readFile),ma=(0,vi.promisify)(dt.writeFile),zce=(0,vi.promisify)(dt.appendFile),ga=(0,vi.promisify)(dt.rename),Kr=(0,vi.promisify)(dt.readdir),h0=(0,vi.promisify)(dt.unlink),Dr=t=>new Promise((e,r)=>dt.mkdir(t,{recursive:!0},n=>n?r(n):e())),Vg=(0,vi.promisify)(dt.rmdir),m0=(t,e=!1,r=!1)=>new Promise((n,i)=>dt.rm(t,{recursive:e,force:r},o=>o?i(o):n())),Kce=(0,vi.promisify)(dt.copyFile),il;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(il||(il={}));var Be=K(require("vscode")),B_=K(require("path"));var So=K(require("path")),l1=K(require("crypto"));var v0=K(require("os")),ol=K(require("fs")),y0=K(require("path"));async function g0(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t}}var ae;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(ae||(ae={}));var Gg={info:3,debug:2,trace:1},qV=Object.keys(Gg).reduce((t,e)=>(t[Gg[e]]=e,t),[]);function w0(t){return Gg[t]||3}function C0(t){return qV[t]||3}var tt={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},zi=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function b0(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function E0(t,e){let r=UV(t);return{event(n){let i=jV(n,e());i&&r.write(i)},join:r.join}}function _0(t,e,r){return{event(n){let i=$V(n,e(),r.getTime());i&&t(i)}}}function ft(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function $V(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${sl(P0,`${t.timestamp-r} ms`)}] ${Vd(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${sl(GV,`[${t.timestamp-r} ms] Start`)}: ${Vd(t.text)}`:`[${sl(P0,`${t.timestamp-r} ms`)}] Start: ${Vd(t.text)}`;case"stop":return 1>=e?`${sl(VV,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${Vd(t.text)}`:void 0;default:throw S0(t)}}function Vd(t){return zV(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function jV(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Wg(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Wg(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Wg(t.text)}`:void 0;default:throw S0(t)}}function Wg(t){return t.replace(zi,"").replace(/(\r?\n)?$/,v0.EOL)}function S0(t){return new Error(`Unknown log event type: ${t.type}`)}function UV(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,ol.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?ol.mkdir(y0.dirname(t),{recursive:!0},d=>{d?(o(),console.error(d)):ol.appendFile(t,l,f=>{o(),f&&console.error(f),s()})}):(o(),console.error(u))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var BV="38;2;143;99;79",x0="38;2;99;143;79",HV="38;2;86;156;214",VV=BV,GV=x0,P0=x0,WV=HV;function sl(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function zV(t){let e,r=0,n=[];for(zi.lastIndex=0;e=zi.exec(t);)n.push(k0(t.substring(r,e.index))),n.push(e[0]),r=zi.lastIndex;return n.push(k0(t.substr(r))),n.join("")}function k0(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(sl(WV,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Oe(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function zg(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ue=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var fn=K(require("path")),QN=K(qa());var me=K(require("path")),Ap=K(require("fs")),rR=K(Vf()),yw=K(require("string_decoder")),Tp=K(qa());"use strict";function Pl(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(C,b){for(var _=0,P=0;_<C||!b;){var x=t.charCodeAt(n);if(x>=48&&x<=57)P=P*16+x-48;else if(x>=65&&x<=70)P=P*16+x-65+10;else if(x>=97&&x<=102)P=P*16+x-97+10;else break;n++,_++}return _<C&&(P=-1),P}function p(C){n=C,i="",o=0,s=16,d=0}function h(){var C=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Ba(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Ba(t.charCodeAt(n)))for(n++;n<t.length&&Ba(t.charCodeAt(n));)n++;else return d=3,t.substring(C,n);var b=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Ba(t.charCodeAt(n))){for(n++;n<t.length&&Ba(t.charCodeAt(n));)n++;b=n}else d=3;return t.substring(C,b)}function m(){for(var C="",b=n;;){if(n>=r){C+=t.substring(b,n),d=2;break}var _=t.charCodeAt(n);if(_===34){C+=t.substring(b,n),n++;break}if(_===92){if(C+=t.substring(b,n),n++,n>=r){d=2;break}var P=t.charCodeAt(n++);switch(P){case 34:C+='"';break;case 92:C+="\\";break;case 47:C+="/";break;case 98:C+="\b";break;case 102:C+="\f";break;case 110:C+=`
`;break;case 114:C+="\r";break;case 116:C+="	";break;case 117:var x=f(4,!0);x>=0?C+=String.fromCharCode(x):d=4;break;default:d=5}b=n;continue}if(_>=0&&_<=31)if(kl(_)){C+=t.substring(b,n),d=2;break}else d=6;n++}return C}function g(){if(i="",d=0,o=n,c=a,u=l,n>=r)return o=r,s=17;var C=t.charCodeAt(n);if(_y(C)){do n++,i+=String.fromCharCode(C),C=t.charCodeAt(n);while(_y(C));return s=15}if(kl(C))return n++,i+=String.fromCharCode(C),C===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,s=14;switch(C){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var b=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!kl(t.charCodeAt(n));)n++;return i=t.substring(b,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var _=r-1,P=!1;n<_;){var x=t.charCodeAt(n);if(x===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,kl(x)&&(x===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return P||(n++,d=1),i=t.substring(b,n),s=13}return i+=String.fromCharCode(C),n++,s=16;case 45:if(i+=String.fromCharCode(C),n++,n===r||!Ba(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&v(C);)n++,C=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(C),n++,s=16}}function v(C){if(_y(C)||kl(C))return!1;switch(C){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){var C;do C=g();while(C>=12&&C<=15);return C}return{setPosition:p,getPosition:function(){return n},scan:e?w:g,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return d}}}function _y(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function kl(t){return t===10||t===13||t===8232||t===8233}function Ba(t){return t>=48&&t<=57}"use strict";function Sy(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!Il(t,o-1);)o--;for(var c=a;c<t.length&&!Il(t,c);)c++;i=t.substring(o,c),n=ZW(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var l=ez(r,t),u=!1,d=0,f;r.insertSpaces?f=xy(" ",r.tabSize||4):f="	";var p=Pl(i,!1),h=!1;function m(){return l+xy(f,n+d)}function g(){var V=p.scan();for(u=!1;V===15||V===14;)u=u||V===14,V=p.scan();return h=V===16||p.getTokenError()!==0,V}var v=[];function w(V,ne,Y){!h&&(!e||ne<a&&Y>s)&&t.substring(ne,Y)!==V&&v.push({offset:ne,length:Y-ne,content:V})}var C=g();if(C!==17){var b=p.getTokenOffset()+o,_=xy(f,n);w(_,o,b)}for(;C!==17;){for(var P=p.getTokenOffset()+p.getTokenLength()+o,x=g(),k="",A=!1;!u&&(x===12||x===13);){var D=p.getTokenOffset()+o;w(" ",P,D),P=p.getTokenOffset()+p.getTokenLength()+o,A=x===12,k=A?m():"",x=g()}if(x===2)C!==1&&(d--,k=m());else if(x===4)C!==3&&(d--,k=m());else{switch(C){case 3:case 1:d++,k=m();break;case 5:case 12:k=m();break;case 13:u?k=m():A||(k=" ");break;case 6:A||(k=" ");break;case 10:if(x===6){A||(k="");break}case 7:case 8:case 9:case 11:case 2:case 4:x===12||x===13?A||(k=" "):x!==5&&x!==17&&(h=!0);break;case 16:h=!0;break}u&&(x===12||x===13)&&(k=m())}x===17&&(k=r.insertFinalNewline?l:"");var F=p.getTokenOffset()+o;w(k,P,F),C=x}return v}function xy(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function ZW(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function ez(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function Il(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var Al;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Al||(Al={}));function KP(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,d){o.value=c,o.offset=l,o.length=u,o.type=d,o.colonOffset=void 0,i=o}try{zf(t,{onObjectBegin:function(c,l){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,JP(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=l,s=!1,i=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function YP(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Al.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return zf(t,a,r),i[0]}function Gf(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Al.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=o({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){i(c+l),n.length=c+l-n.offset,n=n.parent,i(c+l)},onArrayBegin:function(c,l){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,i(c+l)},onLiteralValue:function(c,l,u){o({type:JP(c),offset:l,length:u,parent:n,value:c}),i(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&i(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};zf(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Tl(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function Wf(t){switch(t.type){case"array":return t.children.map(Wf);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=Wf(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function zf(t,e,r){r===void 0&&(r=Al.DEFAULT);var n=Pl(t,!1);function i(A){return A?function(){return A(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(A){return A?function(D){return A(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),d=o(e.onLiteralValue),f=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var A=n.scan();switch(n.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:m||w(11);break;case 2:w(12);break;case 6:w(16);break}switch(A){case 12:case 13:m?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return A}}}function w(A,D,F){if(D===void 0&&(D=[]),F===void 0&&(F=[]),h(A),D.length+F.length>0)for(var V=n.getToken();V!==17;){if(D.indexOf(V)!==-1){v();break}else if(F.indexOf(V)!==-1)break;V=v()}}function C(A){var D=n.getTokenValue();return A?d(D):a(D),v(),!0}function b(){switch(n.getToken()){case 11:var A=n.getTokenValue(),D=Number(A);isNaN(D)&&(w(2),D=0),d(D);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function _(){return n.getToken()!==10?(w(3,[],[2,5]),!1):(C(!1),n.getToken()===6?(f(":"),v(),k()||w(4,[],[2,5])):w(5,[],[2,5]),!0)}function P(){s(),v();for(var A=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(A||w(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else A&&w(6,[],[]);_()||w(4,[],[2,5]),A=!0}return c(),n.getToken()!==2?w(7,[2],[]):v(),!0}function x(){l(),v();for(var A=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(A||w(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else A&&w(6,[],[]);k()||w(4,[],[4,5]),A=!0}return u(),n.getToken()!==4?w(8,[4],[]):v(),!0}function k(){switch(n.getToken()){case 3:return x();case 1:return P();case 10:return C(!0);default:return b()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(w(4,[],[]),!1):k()?(n.getToken()!==17&&w(9,[],[]),!0):(w(4,[],[]),!1)}function JP(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function QP(t,e,r,n){for(var i,o=e.slice(),s=[],a=Gf(t,s),c=void 0,l=void 0;o.length>0&&(l=o.pop(),c=Tl(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r=(i={},i[l]=r,i):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Tl(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var d=c.children.indexOf(u.parent),f=void 0,p=u.parent.offset+u.parent.length;if(d>0){var h=c.children[d-1];f=h.offset+h.length}else if(f=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return Ss(t,{offset:f,length:p-f,content:""},n)}else return Ss(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(A){return A.children[0].value})):c.children.length,w=void 0;if(v>0){var h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?w={offset:c.offset+1,length:0,content:g}:w={offset:c.offset+1,length:0,content:g+","};return Ss(t,w,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var C=l;if(C===-1){var g=""+JSON.stringify(r),w=void 0;if(c.children.length===0)w={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Ss(t,w,n)}else if(r===void 0&&c.children.length>=0){var b=l,_=c.children[b],w=void 0;if(c.children.length===1)w={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===b){var h=c.children[b-1],P=h.offset+h.length,x=c.offset+c.length;w={offset:P,length:x-2-P,content:""}}else w={offset:_.offset,length:c.children[b+1].offset-_.offset,content:""};return Ss(t,w,n)}else if(r!==void 0){var w=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var k=c.children[l];w={offset:k.offset,length:k.length,content:g}}else if(c.children.length===0||l===0)w={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Ss(t,w,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+C+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return Ss(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function Ss(t,e,r){if(!r.formattingOptions)return[e];var n=Kf(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!Il(n,i-1);)i--;for(;o<n.length&&!Il(n,o);)o++}for(var s=Sy(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=Kf(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var l=t.length-(n.length-o)-i;return[{offset:i,length:l,content:n.substring(i,o)}]}function Kf(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var XP=KP,Xe=YP,ZP=Gf,Yf=Tl;var ek=Wf;function Mt(t,e,r,n){return QP(t,e,r,n)}function er(t,e){for(var r=e.length-1;r>=0;r--)t=Kf(t,e[r]);return t}var nR=K(require("crypto")),iR=K(require("util"));var tk=K(require("string_decoder")),ao="\u2404";async function _n(t,e,r,n,i="Container"){let o=await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:n||"/bin/sh",args:[],output:e}),s=tz(o),a;async function c(u,d){let f=a=(async()=>{try{await a}catch{}return l(u,d)})();try{return await Promise.race([f,s.unexpectedExit])}finally{s.disposeStdioListeners(),a===f&&(a=void 0)}}async function l(u,d){let f=`Run in ${i.toLowerCase()}: ${u.replace(/\n.*/g,"")}`,p;if((d==null?void 0:d.logOutput)!=="silent"&&(p=e.start(f,d==null?void 0:d.logLevel)),o.stdin.destroyed){e.write("Stdin closed!");let{code:_,signal:P}=await o.exit;return Promise.reject({message:`Shell server terminated (code: ${_}, signal: ${P})`,code:_,signal:P})}o.stdin.write(`echo -n ${ao}; ( ${u} ); echo -n ${ao}$?${ao}; echo -n ${ao} >&2
`);let[h,m]=rk(o.stdout,[1,2],(d==null?void 0:d.logOutput)==="continuous"?(_,P,x)=>{P===1&&x===0&&e.write(_,d==null?void 0:d.logLevel)}:()=>{}),g=rk(o.stderr,[1],(d==null?void 0:d.logOutput)==="continuous"?(_,P,x)=>{P===0&&x===0&&e.write(_,d==null?void 0:d.logLevel)}:()=>{})[0];(d==null?void 0:d.stdin)&&(await h,o.stdin.write(d==null?void 0:d.stdin));let[v,w]=await m,[C]=await g,b=parseInt(w,10)||0;return((d==null?void 0:d.logOutput)===void 0||(d==null?void 0:d.logOutput)===!0)&&(e.write(v,d==null?void 0:d.logLevel),e.write(C,d==null?void 0:d.logLevel),b&&e.write(`Exit code ${b}`,d==null?void 0:d.logLevel)),(d==null?void 0:d.logOutput)==="continuous"&&b&&e.write(`Exit code ${b}`,d==null?void 0:d.logLevel),(d==null?void 0:d.logOutput)!=="silent"&&e.stop(f,p,d==null?void 0:d.logLevel),b?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${u}`,code:b,stdout:v,stderr:C}):{stdout:v,stderr:C}}return{exec:c,process:o}}function rk(t,e,r){let n=e.map(()=>{let u,d=new Promise((f,p)=>u={resolve:f,reject:p});return G({promise:d},u)}),i=new tk.StringDecoder("utf8"),o=[],s=0,a=[];function c(u){let d=i.write(u);l(d)}function l(u){let d=u.indexOf(ao);if(d!==-1){let f=u.substr(0,d);o.push(f),r(f,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else o.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function tz(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var nk=K(require("path"));var rz=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function ik(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let l=e.shellServer,u=iz(e),d=Object.keys(c).reduce((f,p)=>`${f}${p}=${nz(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${Jf(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:ae.Info}):await l.exec(`# Clone & install dotfiles
${Jf(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${rz.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:ae.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function nz(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function iz(t){return nk.posix.join(xs(t),".dotfilesMarker")}var dr=K(require("path")),Cp=K(qa()),bp=K(require("net")),TT=K(require("crypto")),Ep=K(ep()),RT=K(require("util")),DT=K(require("string_decoder"));var ur=K(require("path")),np=K(require("os")),uI=K(require("fs")),Wa=K(require("child_process")),Oy=K(require("string_decoder"));var aI;aI=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,u="",d=0,f=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||p===1))if(f!==h-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",d=0):d=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),f=h,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,f=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+a.slice(f+1,h):u=a.slice(f+1,h),d=h-f-1;f=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var d;u>=0?d=arguments[u]:(a===void 0&&(a=process.cwd()),d=a),i(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,d=u-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,h=d<p?d:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(f+g))break;v===47&&(m=g)}var w="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){u=f;break}}else d=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!f){u=l+1;break}}else h===-1&&(f=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=h))}return u===d?d=h:d===-1&&(d=a.length),a.slice(u,d)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!f){u=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":a.slice(u,d)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(d=!1,u=p+1),h===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||u===-1||f===0||f===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+d:u+"/"+d:d}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),d=u===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!m){p=g+1;break}return f===-1||h===-1||v===0||v===1&&f===h-1&&f===p+1?h!==-1&&(c.base=c.name=p===0&&d?a.slice(1,h):a.slice(p,h)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(p,f),c.base=a.slice(p,h)),c.ext=a.slice(f,h)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>v,Utils:()=>V}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function(H,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,j){q.__proto__=j}||function(q,j){for(var Q in j)Object.prototype.hasOwnProperty.call(j,Q)&&(q[Q]=j[Q])})(H,L)},function(H,L){function q(){this.constructor=H}c(H,L),H.prototype=L===null?Object.create(L):(q.prototype=L.prototype,new q)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//,h="",m="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,v=function(){function H(L,q,j,Q,z,oe){oe===void 0&&(oe=!1),typeof L=="object"?(this.scheme=L.scheme||h,this.authority=L.authority||h,this.path=L.path||h,this.query=L.query||h,this.fragment=L.fragment||h):(this.scheme=function(ie,ve){return ie||ve?ie:"file"}(L,oe),this.authority=q||h,this.path=function(ie,ve){switch(ie){case"https":case"http":case"file":ve?ve[0]!==m&&(ve=m+ve):ve=m}return ve}(this.scheme,j||h),this.query=Q||h,this.fragment=z||h,function(ie,ve){if(!ie.scheme&&ve)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+ie.authority+'", path: "'+ie.path+'", query: "'+ie.query+'", fragment: "'+ie.fragment+'"}');if(ie.scheme&&!d.test(ie.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ie.path){if(ie.authority){if(!f.test(ie.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(ie.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,oe))}return H.isUri=function(L){return L instanceof H||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="function"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(H.prototype,"fsPath",{get:function(){return x(this,!1)},enumerable:!1,configurable:!0}),H.prototype.with=function(L){if(!L)return this;var q=L.scheme,j=L.authority,Q=L.path,z=L.query,oe=L.fragment;return q===void 0?q=this.scheme:q===null&&(q=h),j===void 0?j=this.authority:j===null&&(j=h),Q===void 0?Q=this.path:Q===null&&(Q=h),z===void 0?z=this.query:z===null&&(z=h),oe===void 0?oe=this.fragment:oe===null&&(oe=h),q===this.scheme&&j===this.authority&&Q===this.path&&z===this.query&&oe===this.fragment?this:new C(q,j,Q,z,oe)},H.parse=function(L,q){q===void 0&&(q=!1);var j=g.exec(L);return j?new C(j[2]||h,F(j[4]||h),F(j[5]||h),F(j[7]||h),F(j[9]||h),q):new C(h,h,h,h,h)},H.file=function(L){var q=h;if(s&&(L=L.replace(/\\/g,m)),L[0]===m&&L[1]===m){var j=L.indexOf(m,2);j===-1?(q=L.substring(2),L=m):(q=L.substring(2,j),L=L.substring(j)||m)}return new C("file",q,L,h,h)},H.from=function(L){return new C(L.scheme,L.authority,L.path,L.query,L.fragment)},H.prototype.toString=function(L){return L===void 0&&(L=!1),k(this,L)},H.prototype.toJSON=function(){return this},H.revive=function(L){if(L){if(L instanceof H)return L;var q=new C(L);return q._formatted=L.external,q._fsPath=L._sep===w?L.fsPath:null,q}return L},H}(),w=s?1:void 0,C=function(H){function L(){var q=H!==null&&H.apply(this,arguments)||this;return q._formatted=null,q._fsPath=null,q}return u(L,H),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=x(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(q){return q===void 0&&(q=!1),q?k(this,!0):(this._formatted||(this._formatted=k(this,!1)),this._formatted)},L.prototype.toJSON=function(){var q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=w),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q},L}(v),b=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function _(H,L){for(var q=void 0,j=-1,Q=0;Q<H.length;Q++){var z=H.charCodeAt(Q);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||L&&z===47)j!==-1&&(q+=encodeURIComponent(H.substring(j,Q)),j=-1),q!==void 0&&(q+=H.charAt(Q));else{q===void 0&&(q=H.substr(0,Q));var oe=b[z];oe!==void 0?(j!==-1&&(q+=encodeURIComponent(H.substring(j,Q)),j=-1),q+=oe):j===-1&&(j=Q)}}return j!==-1&&(q+=encodeURIComponent(H.substring(j))),q!==void 0?q:H}function P(H){for(var L=void 0,q=0;q<H.length;q++){var j=H.charCodeAt(q);j===35||j===63?(L===void 0&&(L=H.substr(0,q)),L+=b[j]):L!==void 0&&(L+=H[q])}return L!==void 0?L:H}function x(H,L){var q;return q=H.authority&&H.path.length>1&&H.scheme==="file"?"//"+H.authority+H.path:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?L?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,s&&(q=q.replace(/\//g,"\\")),q}function k(H,L){var q=L?P:_,j="",Q=H.scheme,z=H.authority,oe=H.path,ie=H.query,ve=H.fragment;if(Q&&(j+=Q,j+=":"),(z||Q==="file")&&(j+=m,j+=m),z){var Ae=z.indexOf("@");if(Ae!==-1){var Te=z.substr(0,Ae);z=z.substr(Ae+1),(Ae=Te.indexOf(":"))===-1?j+=q(Te,!1):(j+=q(Te.substr(0,Ae),!1),j+=":",j+=q(Te.substr(Ae+1),!1)),j+="@"}(Ae=(z=z.toLowerCase()).indexOf(":"))===-1?j+=q(z,!1):(j+=q(z.substr(0,Ae),!1),j+=z.substr(Ae))}if(oe){if(oe.length>=3&&oe.charCodeAt(0)===47&&oe.charCodeAt(2)===58)(_e=oe.charCodeAt(1))>=65&&_e<=90&&(oe="/"+String.fromCharCode(_e+32)+":"+oe.substr(3));else if(oe.length>=2&&oe.charCodeAt(1)===58){var _e;(_e=oe.charCodeAt(0))>=65&&_e<=90&&(oe=String.fromCharCode(_e+32)+":"+oe.substr(2))}j+=q(oe,!0)}return ie&&(j+="?",j+=q(ie,!1)),ve&&(j+="#",j+=L?ve:_(ve,!1)),j}function A(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+A(H.substr(3)):H}}var D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function F(H){return H.match(D)?H.replace(D,function(L){return A(L)}):H}var V,ne=o(470),Y=function(){for(var H=0,L=0,q=arguments.length;L<q;L++)H+=arguments[L].length;var j=Array(H),Q=0;for(L=0;L<q;L++)for(var z=arguments[L],oe=0,ie=z.length;oe<ie;oe++,Q++)j[Q]=z[oe];return j},J=ne.posix||ne;(function(H){H.joinPath=function(L){for(var q=[],j=1;j<arguments.length;j++)q[j-1]=arguments[j];return L.with({path:J.join.apply(J,Y([L.path],q))})},H.resolvePath=function(L){for(var q=[],j=1;j<arguments.length;j++)q[j-1]=arguments[j];var Q=L.path||"/";return L.with({path:J.resolve.apply(J,Y([Q],q))})},H.dirname=function(L){var q=J.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46?L:L.with({path:q})},H.basename=function(L){return J.basename(L.path)},H.extname=function(L){return J.extname(L.path)}})(V||(V={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:xe,Utils:tn}=aI;var cI=K(require("path"));function Ue(t,e){if(Rl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Rl(t){return cI.extname(t)===".code-workspace"}async function tp(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=Xe(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?xe.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!Az(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function Az(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:Tz(t.platform,r,e.substr(0,r.length))}function Tz(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Dy=K(require("path"));var Rz=K(require("http")),Dz=K(require("https"));function Ry(t,e={}){return new Promise((r,n)=>{let i=t.startsWith("https:")?Dz:Rz,o;if(Object.keys(e).length>0){let a=new URL(t);o={headers:e,host:a.host,path:a.pathname}}i.get(o!=null?o:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(Ry(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function ks(t){let e=await Me(Dy.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Dl(t){let e=await Me(Dy.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await Oz(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function Oz(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await Ry(e);return JSON.parse(r.toString()).version}var _t=!0;async function lI(t,e,r,n,i,o,s,a,c){var g;let l=t.substr(6),u=l.indexOf(":"),d=["ssh"];if(u!==-1?d.push("-p",l.substr(u+1),l.substr(0,u)):d.push(l),r==="always"){let v=await Ll(c)||(()=>{throw new Error("No default WSL distro found.")})();d.unshift("wsl","-d",v,"-e")}let f=Nl(d[0],d.slice(1),void 0,await o),p=await rp({extensionPath:n,localCacheFolder:i,package:await ks(n),product:s,loadNativeModule:a,output:c},f,e,!1),h=await Fl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:c},{shell:((g=p.passwdUser)==null?void 0:g.shell)||"/bin/sh",nodeExecutable:p.nodeExecutable,remoteExec:p.exec});await p.setBaseEnv(h);let m=Ga("ssh",e,h,p.exec,p.ptyExec,c);return m.toCommonURI=()=>Promise.resolve(void 0),m.reconnect=()=>p.reconnect(),m.terminate=()=>p.terminate(),m}function Ol(t,e){let r=Nz(t);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let i=JSON.stringify(r);n=Buffer.from(i,"utf8").toString("hex")}return xe.parse(`vscode-remote://ssh-remote+${n}${e}`)}function Nz(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6),r=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,i,o]=r;return{hostName:i,user:n,port:o?parseInt(o,10):void 0}}return{hostName:e}}var Is;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Is||(Is={}));function dI(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Lz=ur.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ny=ur.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Pe(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((u,d)=>{let f=[],p=[],h=c==="continuous"?new Oy.StringDecoder:void 0;l.stdout.on("data",g=>{f.push(g),c==="continuous"&&a.write(h.write(g))}),l.stdout.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let m=c==="continuous"?new Oy.StringDecoder:void 0;l.stderr.on("data",g=>{p.push(g),c==="continuous"&&a.write(Oe(m.write(g)))}),l.stderr.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g}),l.exit.then(({code:g})=>{try{let v=Buffer.concat(f),w=Buffer.concat(p);(c===!0||g&&c==="onerror")&&(a.write(v.toString().replace(/\r?\n/g,`\r
`)),a.write(Oe(w.toString()))),c&&g&&a.write(`Exit code ${g}`),g?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:v,stderr:w,code:g}):u({stdout:v,stderr:w})}catch(v){d(v)}},d),s instanceof Buffer?(l.stdin.write(s,g=>{g&&d(g)}),l.stdin.end()):s instanceof uI.ReadStream&&s.pipe(l.stdin)})}async function Si(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((u,d)=>{let f="",p=[c&&c(h=>l.write(h))];l.onData(h=>{f+=h,s.raw(h),a&&a.exec(f)&&u({cmdOutput:f})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:h,signal:m}):u({cmdOutput:f})}catch(g){d(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),d(h)})})}function Ml(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?G(G({},process.env),e.env):process.env,l=await ip(r,a,c,i),u=Wa.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,f)=>{u.once("error",p=>{i.stop(o,s),f(p)}),u.once("close",(p,h)=>{i.stop(o,s),d({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function Fz(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,d=n.env?G(G({},process.env),n.env):process.env,f=await ip(i,u,d,s),p=r.spawn(f,o||[],{cwd:u,env:d,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:C})=>{if(h.forEach(b=>b==null?void 0:b.dispose()),s.stop(a,c),v({code:w,signal:C}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function Nl(t,e,r,n){return async function(i){let{env:o,cmd:s,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",d=Object.keys(o||{}).map(C=>`${C}='${o[C]}' `).join(""),f=(a||[]).map(C=>` '${C.replace(/'/g,`'"'"'`)}'`).join(""),p=`${u}${d}${s}${f}`,h=[...e,"/bin/sh","-c",p],m=`Run: ${t} ${h.join(" ").replace(/\n.*/g,"")}`,g=c.start(m),v=await ip(t,process.cwd(),process.env,c),w=Wa.spawn(v,h,{windowsHide:!0,env:n?G(G({},process.env),n):void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((C,b)=>{w.once("error",_=>{c.stop(m,g),b(_)}),w.once("close",(_,P)=>{c.stop(m,g),C({code:_,signal:P})})}),async terminate(){w.kill("SIGKILL")}}}}async function fI(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var P,x;let{env:s,cmd:a,args:c,output:l}=o,u=o.cwd||r,d=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(k=>`${k}='${s[k]}' `).join(""),p=(c||[]).map(k=>` '${k.replace(/'/g,`'"'"'`)}'`).join(""),h=`${d}${f}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),w=!1,C=await ip(t,process.cwd(),process.env,l),b=i.spawn(C,m,{cols:(P=l.dimensions)==null?void 0:P.columns,rows:(x=l.dimensions)==null?void 0:x.rows,useConpty:w}),_=[l.onDidChangeDimensions&&l.onDidChangeDimensions(k=>b.resize(k.columns,k.rows))];return{onData:b.onData.bind(b),write:b.write.bind(b),resize:b.resize.bind(b),exit:new Promise(k=>{b.onExit(({exitCode:A,signal:D})=>{if(_.forEach(F=>F==null?void 0:F.dispose()),l.stop(g,v),k({code:A,signal:D}),process.platform==="win32")try{b.kill()}catch{}})}),async terminate(){b.kill("SIGKILL")}}}}async function ip(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(ur.isAbsolute(t))return await ql(t)||t;if(/[/\\]/.test(t)){let a=ur.join(e,t);return await ql(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(ur.delimiter).filter(Boolean),o.push(ur.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=ur.join(e,t);return await ql(a)||a}for(let a of o){let c;ur.isAbsolute(a)?c=ur.join(a,t):c=ur.join(e,a,t);let l=await ql(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=ur.join(e,t);return await ql(s)||s}var pI=process.env.PATHEXT,hI=pI?pI.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function ql(t){if(hI.indexOf(ur.extname(t))!==-1)return await vt(t)?t:void 0;for(let e of hI){let r=t+e;if(await vt(r))return r}}async function Qn(t,e,r,n,i,o,s,a,c,l){return(t==null?void 0:t.startsWith("ssh://"))&&!l?lI(t,e,n,i,o,s,a,r,c):typeof e!="string"||n==="forWSLPath"&&wr(e)||n==="always"?Mz(e,n,i,o,a,r,c):Ly(e,r,c)}async function Ly(t,e,r){let n=Ml(t),i=await Fz(t,e);return qz(t,n,i)}async function Mz(t,e,r,n,i,o,s){var p;let{distro:a,cwd:c}=await $z(t,e,s),l=Nl("wsl",["-d",a,"-e"],c),u=await rp({extensionPath:r,localCacheFolder:n,package:await ks(r),product:i,loadNativeModule:o,output:s},l,c,!1),d=await Fl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=u.passwdUser)==null?void 0:p.shell)||"/bin/sh",nodeExecutable:u.nodeExecutable,remoteExec:u.exec});delete d.WSL_INTEROP,await u.setBaseEnv(d);let f=Ga("wsl",c,d,u.exec,u.ptyExec,s);return f.toCommonURI=async h=>{try{return xe.file((await Pe({exec:u.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},f}function qz(t,e,r){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:ur,homedir:async()=>np.homedir(),tmpdir:async()=>np.tmpdir(),isFile:vt,isFolder:nl,readFile:Me,writeFile:ma,rename:ga,mkdirp:async n=>{await Dr(n)},readDir:Kr,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async n=>xe.file(n)}}async function $z(t,e,r){let n,i;return typeof t!="string"?(n=t.wslDistro,i=t.wslPath):e==="forWSLPath"||wr(t)?(n=za(t),i=await As(n,t,r)):(n=await Ll(r)||(()=>{throw new Error("No default WSL distro found.")})(),i=await As(n,t,r)),{distro:n,cwd:i}}function Ga(t,e,r,n,i,o){let s;return{type:t,platform:"linux",exec:n,ptyExec:i,cwd:e,env:r,path:ur.posix,async homedir(){var a;return typeof s=="undefined"&&(s=this.env.HOME||((a=op((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:a.home)||"/"),s},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async a=>{try{return await Pe({exec:n,cmd:"test",args:["-f",a],output:tt}),!0}catch(c){if((c==null?void 0:c.code)!==1)throw c;return!1}},isFolder:async a=>{try{return await Pe({exec:n,cmd:"test",args:["-d",a],output:tt}),!0}catch(c){if((c==null?void 0:c.code)!==1)throw c;return!1}},readFile:async a=>{try{return(await Pe({exec:n,cmd:"cat",args:[a],output:tt})).stdout}catch(c){let l=new Error(`Could not read file: ${a}`);throw l.originalError=c,l.code="ENOENT",l}},writeFile:async(a,c)=>{await Pe({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${a}'`],stdin:c,output:tt})},rename:async(a,c)=>{await Pe({exec:n,cmd:"mv",args:[a,c],output:tt})},mkdirp:async a=>{await Pe({exec:n,cmd:"mkdir",args:["-p",a],output:tt})},readDir:async a=>(await Pe({exec:n,cmd:"ls",args:["-a",a],output:tt})).stdout.toString().trim().split(`
`).filter(c=>c!=="."&&c!==".."),readDirWithTypes:async a=>{let c={f:1,"*":1,"/":2,"@":64};return(await Pe({exec:n,cmd:"ls",args:["-aF",a],output:tt})).stdout.toString().trim().split(`
`).map(l=>"/*@=%|>".indexOf(l[l.length-1])!==-1?[l.substr(0,l.length-1),l[l.length-1]]:[l,"f"]).filter(([l])=>l!=="."&&l!=="..").map(([l,u])=>[l,c[u]||0])},getuid:async()=>{let a=await Pe({exec:n,cmd:"id",args:["-u"],output:tt});return parseInt(a.stdout.toString().trim(),10)},getgid:async()=>{let a=await Pe({exec:n,cmd:"id",args:["-g"],output:tt});return parseInt(a.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0)}}var mI=/^\\\\wsl(\.localhost|\$)?\\/;function wr(t){return mI.test(t.toLowerCase())}function za(t){let e=t.toLowerCase(),r=mI.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Ll(t){let{stdout:e}=await Pe({exec:Ml(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function As(t,e,r){let{stdout:n}=await Pe({exec:Ml(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function $l(t,e){let r=za(t),n=await As(r,t,e);return xe.parse(`vscode-remote://wsl+${r}${n}`)}function jl(t){if(t.scheme==="vscode-remote"){let e=Fy(t.authority);if(e){let r=t.path;return Rl(r)&&(r=ur.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function Fy(t){return(/wsl\+(.*)/.exec(t)||[])[1]}function Ts(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function Ka(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var gI=Ny?(t,e,r)=>Wa.spawn(Lz,[t,...e||[]],se(G({},r),{windowsHide:!0})):Wa.fork;async function vI(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}}function Ul(t){let{output:e}=t,r=[];return{output:ft(se(G({},e),{get dimensions(){return e.dimensions},event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function yI(t,e){return ft(se(G({},t),{get dimensions(){return t.dimensions},event:n=>{t.event(n),e.event(n)}}))}var sp=K(require("path"));async function My(t,e,r){let n=await wI(t,"agent-extra-socket",r);if(!n)return;let i=await qy(e,"agent-socket");if(!i)return;let o=await qy(e,"homedir");try{let{stdout:a}=await e.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await e.exec(`mkdir -p -m 700 '${sp.posix.dirname(i)}'`);let a=await wI(t,"homedir",r),c=await qy(e,"homedir");a&&c&&(await Bl({cliHost:t},{shellServer:e},t.path.join(a,"pubring.kbx"),sp.posix.join(c,"pubring.kbx"),"gpg"),await Bl({cliHost:t},{shellServer:e},t.path.join(a,"trustdb.gpg"),sp.posix.join(c,"trustdb.gpg"),"gpg")),await jz(t,r)})();return{cliHost:t,remoteGpgSocket:i,localGpgSocket:n,ready:s}}async function wI(t,e,r){try{let{stdout:n}=await Pe({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch{return}}async function qy(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch{return}}async function jz(t,e){try{await Pe({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}async function $y(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await Pe({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function jy(t,e,r){try{return await Pe({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch{return!1}}async function Uy({exec:t},e,r){try{let{stdout:n,stderr:i}=await Pe({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:tt});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function CI(t,e,r){if(!("exec"in t)){let i=await $y(t,e.rootFolderPath,r);if(!i)return;try{return(await t.readFile(t.path.join(i,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;return[]}}let n;try{let{stdout:i}=await Pe({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(Uz(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function Uz(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function bI(t,e,r){return await Bz(t,e,r)||Hz(t,e,r)}async function Bz(t,e,r){try{let{stdout:n}=await Pe({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function Hz(t,e,r){let n=await Vz(t,e,r);if(!!n)try{let{stdout:i}=await Pe({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function Vz(t,e,r){try{let{stdout:n}=await Pe({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function ap(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?se(G({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=Si({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:ft(i,ae.Info)}),u=n.fullClone?l:(async()=>(await l,await Si({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),Si({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:l,gitUnshallow:u}}var co=K(require("stream"));async function EI(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function By(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:f,env:d.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:o}}function _I(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function Hy(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>Hy(n,e,r+e))}`}var Vy=K(require("events")),cp=class{constructor(){this.nodeEmitter=new Vy.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}},Gy=class{constructor(){this.nodeEmitter=new Vy.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var X4=bT(),Xa=xT(),ow=kT(),Z4=AT();async function _p(t,e){var _,P,x,k;let{cliHost:r,output:n}=t,i="Launching Remote-Containers helper.",o=n.start(i);if(Ny)return n.stop(i,o),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await Ly(process.cwd(),t.loadNativeModule,n),l=(await(0,RT.promisify)(TT.randomBytes)(20)).toString("hex"),u={},d=NT(t.cliHost)||NT(a),f=d?dr.posix.join(((_=e.env)==null?void 0:_.TMPDIR)||"/tmp",`vscode-ssh-auth-${l}.sock`):void 0;d?(u[f]=d,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${f}) forwarded to ${d.cliHost!==a?"remote":"local"} host (${d.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await My(r,e.shellServer,n)||(s?void 0:await My(a,e.shellServer,n));p&&(u[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let h=dr.posix.join(((P=e.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${l}.sock`),m=dr.posix.join(((x=e.env)==null?void 0:x.TMPDIR)||"/tmp",`vscode-remote-containers-server-${l}.js`),g=dr.posix.join(((k=e.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-remote-containers-${l}.js`),v=OT(t,e,"Container",void 0,!1,!1,m,g,u,h,a),w=v.then(A=>A.ready),C=v.then(A=>A.mrpcExec),b=v.then(A=>A.mrpcExecToEnd);return w.catch(console.error),t.onAdoptProcess(A=>s6(e.shellServer,h,f,A).catch(console.error)),n.stop(i,o),{remoteContainersCLI:g,remoteEnv:f?{SSH_AUTH_SOCK:f,REMOTE_CONTAINERS_IPC:h}:{REMOTE_CONTAINERS_IPC:h},mrpcExec:C,mrpcExecToEnd:b,ready:w,reconnect:()=>v.then(A=>A.reconnect())}}async function rp(t,e,r,n){let{passwdUser:i,nodeExecutable:o,mrpcExec:s,mrpcPtyExec:a,setBaseEnv:c,reconnect:l,terminate:u}=await OT(t,{remoteExec:e},"Host",r,!0,n,void 0);return{passwdUser:i,nodeExecutable:o,exec:s,ptyExec:a,setBaseEnv:c,reconnect:l,terminate:u}}async function OT(t,{remoteExec:e,nodeExecutable:r},n,i,o,s,a,c,l,u,d){let{product:f,output:p}=t,h=c&&Me(dr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),m=Me(dr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),g=await _n(e,p,void 0,void 0,n),v=o?await cw(g,await aw(g)):void 0,w=!0;if(!r||!a){let P=(await g.exec("echo ~")).stdout.trim().split(`
`)[0],x=dr.posix.join(P,".vscode-remote-containers");if(r||(r=await a6(t,g,x,P,f,s)),!a){a=`${x}/dist/vscode-remote-containers-server-${t.package.version}.js`;try{await g.exec(`test -f '${a}'`),w=!1}catch{await g.exec(`mkdir -p '${dr.posix.dirname(a)}'`)}}}if(c){let P=`EOF-${c}`;await g.exec(`cat <<'${P}' >${c}
${await h}
${P}
`)}if(w){let P=`EOF-${a}`,x=`${a}_${Date.now()}`;await g.exec(`cat <<'${P}' >${x}
${await m}
${P}
mv ${x} ${a}`)}let C=()=>e6(t,n,g,r,a,l,u,d),b=await C(),_;return{ready:b.ready,passwdUser:v,nodeExecutable:r,mrpcExec:t6(()=>b.mrpc,n,i),mrpcPtyExec:r6(()=>b.mrpc,n,i),mrpcExecToEnd:n6(()=>b.mrpc,n,i),setBaseEnv:P=>new Promise((x,k)=>{_=P,b.mrpc.setBaseEnv(P,A=>A?k(A):x())}),reconnect:async()=>{let P=`${n}: Reconnecting exec server`,x=p.start(P);await b.process.terminate().catch(()=>{}),g=await _n(e,p,void 0,void 0,n),b=await C(),_&&await new Promise((k,A)=>{b.mrpc.setBaseEnv(_,D=>D?A(D):k())}),p.stop(P,x)},terminate:()=>b.process.terminate()}}async function e6(t,e,r,n,i,o,s,a){let{cliHost:c,output:l}=t,u=Object.keys(o||{}),d=se(G({},u.reduce((x,k)=>(x[k]="duplex",x),{})),{rpc:"async",connected:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async"},p=r.process,h=`echo -n ${ao} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${i}'
`;p.stdin.write(h);let m,g=new Promise(x=>m=x),v=new DT.StringDecoder;p.stderr.on("data",x=>{let k=v.write(x).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(m){let A=k.indexOf(ao);A!==-1&&(m(),m=void 0,k=k.substr(0,A)+k.substr(A+1))}k&&l.write(Oe(`${e} server: ${k}`))}),p.exit.then(({code:x,signal:k})=>{l.write(`${e} server terminated (code: ${x}, signal: ${k}).`)},x=>{l.write(`${e} server did not launch or terminated: ${x&&x.message||String(x)}`)});let C=(c==null?void 0:c.type)==="local",b,_=new Promise(x=>b=x),P=X4(f,d)(se(G({},u.reduce((x,k)=>{let A=o[k];return x[k]=()=>i6(A.cliHost,A.socketPath,t.fireEvent,l),x},{})),{rpc:async(x,k)=>{try{let A=JSON.parse(x),D=await Uy(C?a:c,A.command,A.stdin).catch(F=>{if(C)throw F});!C&&(D==null?void 0:D.code)!==0&&(D=await Uy(a,A.command,A.stdin),D.code===0&&(C=!0)),k(void 0,JSON.stringify(D))}catch(A){console.error(A),k(A)}},connected:x=>{x()},ready:x=>{b(),x()}}));return(0,Ep.default)(Xa.source(p.stdout),P.createStream(),Xa.sink(p.stdin)),await g,{ready:_,mrpc:P,process:p}}function t6(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((p,h)=>{d.exec({cmd:i,args:o,cwd:s||r,env:a},(m,g)=>{m?h(m):p(g)})});return{stdin:ow.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:ow.source(d.stdout(f)),stderr:ow.source(d.stderr(f)),exit:new Promise((p,h)=>{d.exit(f,(m,g)=>{var v;c.stop(l,u),m?(((v=m.message)==null?void 0:v.endsWith("ENOENT"))&&!m.code&&(m.code="ENOENT"),h(m)):p(g)})}),terminate:async()=>new Promise((p,h)=>{d.terminate(f,m=>{m?h(m):p()})})}}}function r6(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((g,v)=>{var w,C;d.ptyExec({cmd:i,args:o,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(C=c.dimensions)==null?void 0:C.columns},(b,_)=>{b?v(b):g(_)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],h=Z4();(0,Ep.default)(h,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let m=new cp;return(0,Ep.default)(d.ptyOut(f),g=>{g(null,function v(w,C){if(w!==!0){if(w)throw w;m.fire(C),g(null,v)}})}),{write:g=>h.push(g),onData:m.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(w,C)=>{p.forEach(b=>b==null?void 0:b.dispose()),c.stop(l,u),w?v(w):g(C)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,w=>{w?v(w):g()})})}}}function n6(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t();return new Promise((f,p)=>{d.execToEnd({cmd:i,args:o,cwd:s||r,env:a},(h,m)=>{if(c.stop(l,u),h||!m)p({stdin:new co.Writable,stdout:co.Readable.from([]),stderr:co.Readable.from([]),exit:Promise.reject(h),terminate:async()=>{}});else{let g=co.Readable.from([Buffer.from(m.stdout.data)]),v=new Promise(b=>g.on("end",b)),w=co.Readable.from([Buffer.from(m.stderr.data)]),C=new Promise(b=>w.on("end",b));f({stdin:new co.Writable,stdout:g,stderr:w,exit:Promise.all([v,C]).then(()=>({code:m.code,signal:m.signal})),terminate:async()=>{}})}})})}}function i6(t,e,r,n){if(t.type!=="local")return o6(t,e,r,n);if(t.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Xa.duplex(bp.connect(e));let i=new bp.Socket;return(async()=>{let o=await t.readFile(e),s=o.indexOf(10),a=parseInt(o.slice(0,s).toString(),10),c=o.slice(s+1);i.connect(a,"127.0.0.1",()=>{i.write(c,l=>{l&&(console.error(l),i.destroy())})})})().catch(o=>{console.error(o),i.destroy()}),Xa.duplex(i)}function o6(t,e,r,n){let i=t.exec({cmd:"socat",args:["-",`UNIX-CONNECT:${e}`],output:n});i.then(l=>l.exit.then(({code:u,signal:d})=>{(u||d)&&(n.write(Oe(`socat terminated (code: ${u}, signal: ${d}).`)),u===127&&r({type:"socatNotFound"}))})).catch(l=>{n.write(Oe(`socat did not launch: ${l&&(l.stack||l.message)||String(l)}`)),(l==null?void 0:l.code)==="ENOENT"&&r({type:"socatNotFound"})});let o=i.then(l=>Xa.sink(l.stdin)),s=i.then(l=>Xa.source(l.stdout));return{sink:l=>{o.then(u=>u(l))},source:(l,u)=>{s.then(d=>d(l,u))}}}var sw="\\\\.\\pipe\\openssh-ssh-agent";function NT(t){if(t.env.SSH_AUTH_SOCK)return{cliHost:t,socketPath:t.env.SSH_AUTH_SOCK};if(t.platform==="win32")return{cliHost:t,socketPath:sw}}var Sp=new Set;async function s6(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await EI(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!Sp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(Sp.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!Sp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(Sp.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function a6(t,e,r,n,i,o){let s=(i==null?void 0:i.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(i==null?void 0:i.commit)?i.quality||"insider":"stable",{localCacheFolder:c,output:l}=t,u=dr.posix.join(r,"bin",s),d=dr.posix.join(u,"node");try{await e.exec(`test -x '${d}'`)}catch{if(i)try{let g=dr.posix.join(lw(n,i),"bin",s),v=dr.posix.join(g,"node");await e.exec(`test -x '${v}'`);let w=dr.posix.join(g,"node_modules","node-pty","package.json");return await e.exec(`test -f '${w}'`),v}catch{}let f;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")f=uw;else{let g=await fw(e);f=dw(g,!1)}let h={localCacheFolder:c,build:f,commit:s,quality:a,web:!1,output:l},m=Yl(h);if(await vt(m)||await xp(h),f===uw)await Kl({output:l},e,m,u,o);else{let g=[];await Cp.t({file:m,filter:w=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(w),onentry:w=>{new Cp.WriteEntry.Tar(w).on("data",b=>g.push(b))}});let v=Buffer.concat(g);await Kl({output:l},e,v,u,o,!1)}}return d}var YT=K(require("net")),JT=K(KT());async function QT({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,ae.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let l=new Set,u=YT.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${f} > ${p} > ${i} in the container.`),r()===ae.Trace&&(async()=>{let h=await(0,JT.default)("port",f);e.write(`Port forwarding process for ${f} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),m6(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
			`],s).then(h=>{let m;h.exit.then(({code:g,signal:v})=>{m||(l.delete(d),d.end()),e.write(`Port forwarding ${f} > ${p} > ${i} terminated${m?` by extension (${m})`:""} with code ${g} and signal ${v}.`)},g=>{l.delete(d),d.end(),e.write(`Port forwarding ${f} > ${p} > ${i} terminated with error: ${g&&g.message||String(g)}`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${f} > ${p} > ${i} stderr: ${g.toString("utf8")}`,ae.Debug)}),d.on("close",g=>{e.write(`Port forwarding ${f} > ${p} > ${i}: Local close${g?" with error":""}`,ae.Debug),l.delete(d),m="closed",h.stdin.end(),setTimeout(()=>{m="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(d),d.pipe(h.stdin),l.add(d)}).catch(console.error)});u.on("listening",()=>{let d={targetPort:i,server:u,connections:l};u.on("close",()=>{t.delete(d)}),t.add(d),e.write(`Port forwarding local port ${u.address().port} to container port ${i}`),a(u)}),u.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(d)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(i,"127.0.0.1")})}async function m6(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var Za=K(require("path"));function ec(t,e){let r,n=t.platform==="win32",i=se(G({},t),{get env(){return r||(r=ZT(n,t.env))}}),o=y6.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=eR(o,t.containerWorkspaceFolder)),Ip(o,e)}function XT(t,e,r,n){let i=t==="win32";return Ip(w6.bind(void 0,i,e,ZT(i,r)),n)}function Ip(t,e){if(typeof e=="string")return eR(t,e);if(Array.isArray(e))return e.map(r=>Ip(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Ip(t,e[n])}),r}return e}var g6=/\$\{(.*?)\}/g;function ZT(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function eR(t,e){return e.replace(g6,v6.bind(void 0,t))}function v6(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function y6(t,e,r,n,i){switch(n){case"env":case"localEnv":return tR(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Za.win32:Za.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Za.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function w6(t,e,r,n,i,o){switch(i){case"containerEnv":return tR(t,r,o,n,e);default:return n}}function tR(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new ue({description:`'${n}'${i?` in ${Za.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function Pi(t){return new Promise(e=>setTimeout(e,t))}var uo=0,oR=/Extension host agent listening on (\d+)/,sR="d9c064ed-ec74-42ab-b759-c9578d277ba2",wt;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(wt||(wt={}));var aR="updateContentCommand";async function Rp(t){let{params:e,startedAt:r,sharedDataFolder:n,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:o,containerUser:s,containerGroup:a,containerEnv:c,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:d,rootShellServer:f}=t,p;f&&s==="root"?p=f:p=await _n(l,e.output,e.sessionId),s||(s=await aw(p)),!d&&s==="root"&&(d=l);let h=await fw(p),m=await cw(p,s);m||e.output.write(zg(`User ${s} not found in /etc/passwd.`));let g=await C6(c,m),v=await cR(c,m),w=lw(v,e.product),{commit:C,quality:b}=e.product,_=C&&await b6(w,C,b||"insider",e.web),P=dw(h,b==="stable"),x=C&&n&&await lR(me.posix,n,P,C,b||"insider",e.web),k=_&&await _6(_),A;f?A=Promise.resolve(f):s==="root"&&(A=Promise.resolve(p));let D={startedAt:r,osRelease:h,build:P,user:s,gid:a||(m==null?void 0:m.gid),env:c,shell:g,homeFolder:v,userDataFolder:w,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:n,installFolder:_,sharedInstallFolder:x,remoteWorkspaceFolder:o,nodeExecutable:k,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:d,shellServer:p};return(A||d)&&(D.launchRootShellServer=()=>A||(A=_n(d,e.output))),D}async function aw(t){return(await t.exec("id -un")).stdout.trim()}async function cR(t,e){return t.HOME||e&&e.home||"/root"}async function C6(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function cw(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return op(r,e)}function op(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function b6(t,e,r,n){return me.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function lR(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function uR(t){return me.posix.join(t.userDataFolder,"extensions")}function xs(t){return me.posix.join(t.userDataFolder,"data/Machine")}function Dp(t){return me.posix.join(t.userDataFolder,"data/Machine/settings.json")}function E6(t){return me.posix.join(t,".vscode-remote")}function lw(t,e){return me.posix.join(t,e.serverDataFolderName)}function dR(t){return me.posix.join("/var",/^\.*(.*)$/.exec(t.serverDataFolderName)[1])}async function _6(t){return me.posix.join(t,"node")}async function fo(t,e,r,n,i,o=uo){var v;await S6(t,e),await J6(t,e),await Q6(t,e);let s=await x6(t,e,r,n),{serverDownloaded:a}=await A6(t,e),c,l,u=Promise.resolve(),d;if(!t.cliMode&&e.nodeExecutable){let w=await _p(t,e);c=w.remoteContainersCLI,l=w.remoteEnv,u=w.ready,d=w.mrpcExec;let C=t.cliHost.reconnect;C&&(t.cliHost.reconnect=async()=>{await C(),w.reconnect().catch(b=>t.output.write(Oe(b&&(b.stack||b.message)||String(b))))})}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?Fl(t,e,r,d).then(w=>G(G(G(G({},w),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?XT(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(v=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?v:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Ql(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await Op(e,c,t.output,"system"));let m,g;if(e.installFolder){let w=Array.from(new Set([...r.extensions||[],...(n==null?void 0:n.allFeatures.filter(_=>(_t||_.included)&&_.value).reduce((_,P)=>_.concat(P.extensions||[]),[]))||[]])),C=await R6(t,e,w),b=await V6(t,e,o,d,C,p);m=b,t.forwardServerPort&&e.nodeExecutable&&(g=await QT(t,e,b,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>K6(t,e,r)))}if(t.postCreate.enabled){let w,C=!1,b=new Promise(P=>w=()=>{C=!0,P()}),_=(async()=>{var P;if((r.waitFor||aR)==="initializeCommand"&&w(),!(t.postCreate.skipNonBlocking&&C)&&(await bw(t,e,r,"onCreateCommand",p,u,i,!1,w),!(t.postCreate.skipNonBlocking&&C)&&(await bw(t,e,r,"updateContentCommand",p,u,i,!!t.prebuild,w),!(t.postCreate.skipNonBlocking&&C)))){if(!t.prebuild){if(await bw(t,e,r,"postCreateCommand",p,u,i,!1,w),t.postCreate.skipNonBlocking&&C||(await ik(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((P=s["remote.containers.copyGitConfig"])!=null?P:t.isCopyGitConfigEnabled)&&(await Ql(t,e,[".gitconfig"],"git"),await ww(t,e,p.then(x=>G(G({},e.env),x)))),await Op(e,c,t.output,h)),await j6(t,e,r,p,u,i,w),t.postCreate.skipNonBlocking&&C))return;await B6(t,e,r,p,u,i,w)}t.postCreate.done()}})();t.backgroundTasks.push(_),await Promise.race([b,_])}return{hostOrContainerPort:m,hostPortServer:g,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function S6(t,e){let r=E6(e.homeFolder);!await Np(e.shellServer,e.userDataFolder)&&await Np(e.shellServer,r)&&await ki(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function x6(t,e,r,n){let i=xs(e),o=me.posix.join(i,".writeMachineSettingsMarker"),s=Dp(e);if(await Xl(e.shellServer,o)){let a=Object.assign({},...(n==null?void 0:n.allFeatures.filter(c=>(_t||c.included)&&c.value&&c.settings).map(c=>c.settings))||[],r.settings);if(P6(a,r.portsAttributes),k6(a,r.otherPortsAttributes),Object.keys(a).length)return await e.shellServer.exec(`mkdir -p '${me.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(a,null,"	")}
settingsJSON
`),a}try{let{stdout:a}=await e.shellServer.exec(`cat ${s}`);return Xe(a)||{}}catch{return{}}}function P6(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function k6(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function Jl(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();if((await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=me.posix.dirname(r);c!=="/"&&await o.exec(`chown ${i} ${c}`),r!=="/"&&await o.exec(`chown -R ${i} ${r}`)}else if(n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=me.posix.dirname(n);u!=="/"&&await o.exec(`chown -R ${i} ${u}`)}}async function Op(t,e,r,n){if(e&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Ql(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=me.posix.join(e.homeFolder,...r);await Bl(t,e,o,s,n)}async function ww(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return me.posix.join(...u,...o)})();await Bl(t,e,a,c,"git")}async function Bl(t,e,r,n,i){let o=await I6(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${me.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${Zl(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function I6(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function A6(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};T6(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await Np(i,n),c;a||s===mR[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await Np(i,l))return a||await i.exec(`mkdir -p '${me.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&o),d=u?l:n,f=u?await o():i,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output},h=Yl(p),m=await vt(h);m||await xp(p);try{e.sharedDataFolderIsLocalCacheFolder?await fR(p):await Kl(t,f,h,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await xp(p),e.sharedDataFolderIsLocalCacheFolder?await fR(p):await Kl(t,f,h,d);else throw g}return u&&(await i.exec(`mkdir -p '${me.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await f.exec(`cd '${me.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function T6(t,e){let r=t.version;if(e.minVersion&&r){let n=Ts(r.trim());if(n&&Ka(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new ue({description:i,data:{reload:!1}})}}}async function xp(t){let{build:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=Yl(t);await Dr(me.dirname(c));try{let l=`${c}_${Date.now()}`;await new Promise((u,d)=>{let f=Ap.createWriteStream(l),p=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${i?"-web":""}/${n}`;rR.https.get(p,m=>{if(m.statusCode<200||m.statusCode>299){d(new ue({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${p}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",d),m.pipe(f),m.on("end",u)}).on("error",d)}),await ga(l,c)}catch(l){throw l||new Error("Failed to download VS Code Server")}finally{o.stop(s,a)}}async function Kl(t,e,r,n,i,o=!0){let s="Installing VS Code Server",a=t.output.start(s);try{let c=`${n}_${Date.now()}`;if(await e.exec(`mkdir -p ${c}`),i)typeof r=="string"&&r.endsWith(".zip")?await e.exec(`unzip ${r} -d ${c}`):await e.exec(`cat ${r} | tar --no-same-owner -x${o?"z":""} -C ${c}`);else{let l=typeof r=="string"?await Me(r):r;await e.exec(`${Zl(l.byteLength)} | tar --no-same-owner -x${o?"z":""} -C ${c}`,{stdin:l})}await e.exec(`mv -n ${me.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}finally{t.output.stop(s,a)}}async function fR(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let l=await lR(me,e,r,n,i,o),u=`${l}_${Date.now()}`;await Dr(u);let d=Yl(t);await(await Ml(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await Vg(l,{recursive:!0}),await ga(u,l)}finally{s.stop(a,c)}}function Yl(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o}=t,s=me.join(e,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}${r.archiveExt||".tar.gz"}`;return me.join(s,a)}async function pR(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await ki(t,e,[me.posix.join(e.installFolder,"server.sh"),...vR(t.telemetry),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function R6(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?M6(o):void 0,a=hR(e),c=await D6(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=F6(t.localCacheFolder),u=await O6(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);N6(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,i),c}async function D6(t,e,r){let n=xs(e),i=me.posix.join(n,".installExtensionsMarker"),o=!await Xl(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getExtensionsToInstall(o,r),c=[].concat(...s.map(l=>["--install-builtin-extension",l]),...a.map(l=>["--install-extension",l]));return t.cliMode&&c.length&&c.push("--do-not-sync"),{builtinExtensions:s,extensions:a,args:c}}async function O6(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Dr(r);let c=await Kr(r),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=me.basename(r),d=Tp.c({cwd:me.dirname(r)},l.map(h=>me.join(u,h))),f=me.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];d.on("data",g=>m.push(g)),d.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${Zl(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${i} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function N6(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Pi(s);;)o=await L6(t,e,r,n,i,o),await Pi(a)}async function L6(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=o.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await h0(me.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let d=u.filter(f=>o.indexOf(f)===-1&&s.indexOf(f)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,ae.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${i}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=me.posix.basename(i),p=await l({cmd:"tar",cwd:me.posix.dirname(i),args:["c",...d.map(v=>me.posix.join(f,v))],output:t.output}),h=me.join(me.dirname(r),`${me.basename(r)}-${Date.now()}`);await Dr(h);let m=Tp.x({cwd:h,strip:1}),g=new Promise((v,w)=>{m.on("error",w),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await Kr(h))await ga(me.join(h,v),me.join(r,v));await Vg(h)}return{remoteExtensions:u,cachedExtensions:s}}var Cw="extensionsCache";function F6(t){return me.join(t,Cw)}function M6(t){return me.posix.join(t,Cw)}function hR(t){return me.posix.join(t.userDataFolder,Cw)}var q6={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},mR={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},uw={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},$6={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function dw(t,e){let r=$6[t.hardware];if(t.id==="alpine"){let i=r&&mR[r];if(!i)throw new ue({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&q6[r];if(!n||e&&!n.stable)throw new ue({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function fw(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function bw(t,e,r,n,i,o,s,a,c){let l=me.posix.join(xs(e),`.${n}Marker`),u=await Xl(e.shellServer,l)||a;await Ew(t,e,r,n,i,o,s,u,c)}async function j6(t,e,r,n,i,o,s){let a=me.posix.join(xs(e),".postStartCommandMarker"),c=!!e.startedAt&&await U6(e.shellServer,a,e.startedAt);await Ew(t,e,r,"postStartCommand",n,i,o,c,s)}async function U6(t,e,r){try{return await t.exec(`mkdir -p '${me.posix.dirname(e)}' && [ "$(cat '${e}' 2>/dev/null)" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function B6(t,e,r,n,i,o,s){await Ew(t,e,r,"postAttachCommand",n,i,o,!0,s)}async function Ew({postCreate:t},e,r,n,i,o,s,a,c){let l=r[n];if(a&&l&&(typeof l=="string"?l.trim():l.length)){await o,s&&await s();let u=`Running ${n}...`,d=typeof l=="string"?l:l.join(" "),f=ft({event(p){t.output.event(p),p.type==="raw"&&p.text.includes("::endstep::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:""}),p.type==="raw"&&p.text.includes("::step::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:`${p.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},ae.Info);try{f.event({type:"progress",name:u,status:"running",stepDetail:d});let p=e.remoteWorkspaceFolder||e.homeFolder;f.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await Y6(se(G({},t),{output:f}),e,typeof l=="string"?["/bin/sh","-c",l]:l,p,{remoteEnv:await i,print:"continuous"}),f.raw(`\r
`),f.event({type:"progress",name:u,status:"succeeded"})}catch(p){if(f.event({type:"progress",name:u,status:"failed"}),p&&(p.code===130||p.signal===2))f.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw new ue({description:`The ${n} in the devcontainer.json failed.`,originalError:p})}}n===(r.waitFor||aR)&&c()}async function gR(t,e){try{return await t.exec(`test -f ${e}`),!0}catch{return!1}}async function Xl(t,e){try{return await t.exec(Jf(e)),!0}catch{return!1}}function Jf(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${me.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function Np(t,e){try{return await H6(t,e),!0}catch{return!1}}async function H6(t,e){return t.exec(`test -d ${e}`)}async function V6(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:d}=await By(l),f=new RegExp(`${me.posix.join(me.posix.dirname(a).replace(".","\\."),"[^/]*","server.sh")}`),p=u.filter(A=>A.mntNS===d&&f.test(A.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(p,void 0,"  ")}`,ae.Trace);let{current:h,others:m}=p.reduce((A,D)=>(A[(D.cwd===a||D.cwd===c)&&f.test(D.cmd)?"current":"others"].push(D),A),{current:[],others:[]});if(!t.cliMode&&m.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(A=>A.pgrp?`-${A.pgrp}`:A.pid).join(" ")}`)}catch{}}let{commit:g,quality:v}=t.product,w=me.posix.join(xs(e),`.devport-${g}${v==="stable"?"":`-${v}`}${t.web?"-web":""}`);if(h.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:A}=await l.exec(`cat '${w}' 2>/dev/null`),D=A.toString().trim();return parseInt(D,10)}catch(A){console.error(A),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${h.map(D=>D.pgrp?`-${D.pgrp}`:D.pid).join(" ")}`)}catch{}}}t.progress(5);let C="Starting VS Code Server",b=t.output.start(C),_=[me.posix.join(a,"server.sh"),"--log",C0(t.getLogLevel()),"--force-disable-user-env",...G6(t),...vR(t.telemetry),"--port",String(r),...t.connectionToken?["--connectionToken",t.connectionToken]:[],"--extensions-download-dir",hR(e),...i.args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],x=(await ki(t,{remoteExec:await n||e.remoteExec},_,a,{remoteEnv:G({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:oR,print:"continuous"})).cmdOutput;t.output.stop(C,b);let k=(oR.exec(x)||[])[1];if(!k)throw new Error("Port not found");return await l.exec(`echo ${k} >'${w}'`),parseInt(k,10)}function G6(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function vR(t){return t?[]:["--disable-telemetry"]}var W6=/^([a-z0-9\-]+):(\d{1,5})$/;function z6(t){let e=t.match(W6);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function K6(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=z6(i);if(!a)return;s=a.host,o=a.port}return t.openTunnel(e,o,s)}))}async function Y6(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?tt:t.output}),a="",c,l=new Promise(f=>{c=f});s.onData(f=>{a+=f,o==="continuous"&&t.output.raw(f),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,l]);return u&&u.dispose(),o==="end"&&t.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function ki(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?tt:t.output}),a=[],c=[],l=new yw.StringDecoder,u=new yw.StringDecoder,d="",f="",p,h,m=new Promise((b,_)=>{p=b,h=_});s.stdout.on("data",b=>{a.push(b);let _=l.write(b);o==="continuous"&&t.output.write(_.replace(/\r?\n/g,`\r
`)),d+=_,i.resolveOn&&i.resolveOn.exec(d)&&p()}),s.stderr.on("data",b=>{c.push(b),f+=u.write(b)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,b=>{b&&h(b)}),s.stdin.end()):i.stdin instanceof Ap.ReadStream&&i.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),w=Buffer.concat(c);o==="end"&&(t.output.write(d.replace(/\r?\n/g,`\r
`)),t.output.write(Oe(f)));let C=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:C,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:C,stdout:v,stderr:w}}function Zl(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function J6(t,e){let r=me.posix.join(dR(t.product),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await gR(e.shellServer,r)){let n=await e.launchRootShellServer();await Xl(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}=${e.env[i]}`).join("")}
etcEnvrionmentEOF
`)}}async function Q6(t,e){let r=me.posix.join(dR(t.product),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await gR(e.shellServer,r)){let n=await e.launchRootShellServer();await Xl(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function Fl(t,e,r,n){var o;let{userEnvProbe:i}=r||{};if(t.output.write(`userEnvProbe: ${i||t.defaultUserEnvProbe}${i?"":" (default)"}`),i||(i=t.defaultUserEnvProbe),i==="none")return{};try{let a=(await(0,iR.promisify)(nR.randomBytes)(16)).toString("hex"),c=new RegExp(a+"(.*)"+a),l=e.shell;t.output.write(`userEnvProbe shell: ${l}`);let u=e.nodeExecutable,d=me.posix.basename(l),f,p;/^pwsh(-preview)?$/.test(d)?(f=`& '${u}' -p '''${a}'' + JSON.stringify(process.env) + ''${a}'''`,p=i==="loginInteractiveShell"||i==="loginShell"?["-Login","-Command"]:["-Command"]):(f=`'${u}' -p '"${a}" + JSON.stringify(process.env) + "${a}"'`,p=[i==="loginInteractiveShell"?"-lic":i==="loginShell"?"-lc":i==="interactiveShell"?"-ic":"-c"]);let h=ft(t.output,ae.Trace),m=ki({output:h},{remoteExec:await n||e.remoteExec},[l,...p,f],e.installFolder);Promise.race([m,Pi(2e3)]).then(async k=>{if(!k){let A,D=e.shellServer||await _n(e.remoteExec,t.output);try{({processes:A}=await By(D))}finally{e.shellServer||await D.process.terminate()}let F=A.find(V=>V.cmd.startsWith(l)&&V.cmd.indexOf(a)!==-1);if(F){let ne=_I(A)[F.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Hy(ne)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(k=>t.output.write(Oe(k&&(k.stack||k.message)||"Error reading process tree.")));let g=await Promise.race([m,Pi(1e4)]);if(!g)return t.output.write(Oe("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let v=g.stdout.toString(),w=c.exec(v),C=w?w[1]:"{}",b=JSON.parse(C);t.output.write(`userEnvProbe parsed: ${JSON.stringify(b,void 0,"  ")}`,ae.Trace),delete b.PWD;let _=b.PATH,P=(o=e.env)==null?void 0:o.PATH,x=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&_&&P;if(x){let k=e.user;b.PATH=X6(_,P,k==="root"||k==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof _=="string"?`'${_}'`:"None"}
Container: ${typeof P=="string"?`'${P}'`:"None"}${x?`
Merged:    ${typeof b.PATH=="string"?`'${b.PATH}'`:"None"}`:""}`),b}catch(s){return t.output.write(Oe(s&&(s.stack||s.message)||"Error reading shell environment.")),{}}}function X6(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function yR(t){for(let e of t)await(typeof e=="function"?e():e)}var lD=K(require("crypto")),ou=K(require("path"));function wR(t){return typeof t=="undefined"||t===null}function Z6(t){return typeof t=="object"&&t!==null}function e9(t){return Array.isArray(t)?t:wR(t)?[]:[t]}function t9(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function r9(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function n9(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var i9=wR,o9=Z6,s9=e9,a9=r9,c9=n9,l9=t9,Dt={isNothing:i9,isObject:o9,toArray:s9,repeat:a9,isNegativeZero:c9,extend:l9};function CR(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function eu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=CR(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}eu.prototype=Object.create(Error.prototype);eu.prototype.constructor=eu;eu.prototype.toString=function(e){return this.name+": "+CR(this,e)};var Cr=eu;function _w(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function Sw(t,e){return Dt.repeat(" ",e-t.length)+t}function u9(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=_w(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),d),a=Dt.repeat(" ",e.indent)+Sw((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=_w(t.buffer,n[s],i[s],t.position,d),a+=Dt.repeat(" ",e.indent)+Sw((t.line+1).toString(),u)+" | "+l.str+`
`,a+=Dt.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)l=_w(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),d),a+=Dt.repeat(" ",e.indent)+Sw((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var d9=u9,f9=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],p9=["scalar","sequence","mapping"];function h9(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function m9(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(f9.indexOf(r)===-1)throw new Cr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=h9(e.styleAliases||null),p9.indexOf(this.kind)===-1)throw new Cr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var tr=m9;function bR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function g9(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function xw(t){return this.extend(t)}xw.prototype.extend=function(e){var r=[],n=[];if(e instanceof tr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Cr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof tr))throw new Cr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Cr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Cr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof tr))throw new Cr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(xw.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=bR(i,"implicit"),i.compiledExplicit=bR(i,"explicit"),i.compiledTypeMap=g9(i.compiledImplicit,i.compiledExplicit),i};var v9=xw,y9=new tr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),w9=new tr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),C9=new tr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),b9=new v9({explicit:[y9,w9,C9]});function E9(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function _9(){return null}function S9(t){return t===null}var x9=new tr("tag:yaml.org,2002:null",{kind:"scalar",resolve:E9,construct:_9,predicate:S9,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function P9(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function k9(t){return t==="true"||t==="True"||t==="TRUE"}function I9(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var A9=new tr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:P9,construct:k9,predicate:I9,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function T9(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function R9(t){return 48<=t&&t<=55}function D9(t){return 48<=t&&t<=57}function O9(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!T9(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!R9(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!D9(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function N9(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function L9(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Dt.isNegativeZero(t)}var F9=new tr("tag:yaml.org,2002:int",{kind:"scalar",resolve:O9,construct:N9,predicate:L9,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),M9=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function q9(t){return!(t===null||!M9.test(t)||t[t.length-1]==="_")}function $9(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var j9=/^[-+]?[0-9]+e/;function U9(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Dt.isNegativeZero(t))return"-0.0";return r=t.toString(10),j9.test(r)?r.replace("e",".e"):r}function B9(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Dt.isNegativeZero(t))}var H9=new tr("tag:yaml.org,2002:float",{kind:"scalar",resolve:q9,construct:$9,predicate:B9,represent:U9,defaultStyle:"lowercase"}),V9=b9.extend({implicit:[x9,A9,F9,H9]}),G9=V9,ER=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_R=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function W9(t){return t===null?!1:ER.exec(t)!==null||_R.exec(t)!==null}function z9(t){var e,r,n,i,o,s,a,c=0,l=null,u,d,f;if(e=ER.exec(t),e===null&&(e=_R.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),l=(u*60+d)*6e4,e[9]==="-"&&(l=-l)),f=new Date(Date.UTC(r,n,i,o,s,a,c)),l&&f.setTime(f.getTime()-l),f}function K9(t){return t.toISOString()}var Y9=new tr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:W9,construct:z9,instanceOf:Date,represent:K9});function J9(t){return t==="<<"||t===null}var Q9=new tr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:J9}),Pw=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function X9(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=Pw;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function Z9(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=Pw,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function eK(t){var e="",r=0,n,i,o=t.length,s=Pw;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function tK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var rK=new tr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:X9,construct:Z9,predicate:tK,represent:eK}),nK=Object.prototype.hasOwnProperty,iK=Object.prototype.toString;function oK(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,iK.call(i)!=="[object Object]")return!1;for(o in i)if(nK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function sK(t){return t!==null?t:[]}var aK=new tr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:oK,construct:sK}),cK=Object.prototype.toString;function lK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],cK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function uK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var dK=new tr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lK,construct:uK}),fK=Object.prototype.hasOwnProperty;function pK(t){if(t===null)return!0;var e,r=t;for(e in r)if(fK.call(r,e)&&r[e]!==null)return!1;return!0}function hK(t){return t!==null?t:{}}var mK=new tr("tag:yaml.org,2002:set",{kind:"mapping",resolve:pK,construct:hK}),SR=G9.extend({implicit:[Y9,Q9],explicit:[rK,aK,dK,mK]}),po=Object.prototype.hasOwnProperty,Lp=1,xR=2,PR=3,Fp=4,kw=1,gK=2,kR=3,vK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,yK=/[\x85\u2028\u2029]/,wK=/[,\[\]\{\}]/,IR=/^(?:!|!!|![a-z\-]+!)$/i,AR=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function TR(t){return Object.prototype.toString.call(t)}function Xn(t){return t===10||t===13}function Ds(t){return t===9||t===32}function br(t){return t===9||t===32||t===10||t===13}function tc(t){return t===44||t===91||t===93||t===123||t===125}function CK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function bK(t){return t===120?2:t===117?4:t===85?8:0}function EK(t){return 48<=t&&t<=57?t-48:-1}function RR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function _K(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var DR=new Array(256),OR=new Array(256);for(Os=0;Os<256;Os++)DR[Os]=RR(Os)?1:0,OR[Os]=RR(Os);var Os;function SK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||SR,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function NR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=d9(r),new Cr(e,r)}function he(t,e){throw NR(t,e)}function Mp(t,e){t.onWarning&&t.onWarning.call(null,NR(t,e))}var LR={YAML:function(e,r,n){var i,o,s;e.version!==null&&he(e,"duplication of %YAML directive"),n.length!==1&&he(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&he(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&he(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Mp(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&he(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],IR.test(i)||he(e,"ill-formed tag handle (first argument) of the TAG directive"),po.call(e.tagMap,i)&&he(e,'there is a previously declared suffix for "'+i+'" tag handle'),AR.test(o)||he(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{he(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function ho(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||he(t,"expected valid JSON character");else vK.test(a)&&he(t,"the stream contains non-printable characters");t.result+=a}}function FR(t,e,r,n){var i,o,s,a;for(Dt.isObject(r)||he(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],po.call(e,o)||(e[o]=r[o],n[o]=!0)}function rc(t,e,r,n,i,o,s,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&he(t,"nested arrays are not supported inside keys"),typeof i=="object"&&TR(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&TR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)FR(t,e,o[l],r);else FR(t,e,o,r);else!t.json&&!po.call(r,i)&&po.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,he(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function Iw(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):he(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function St(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ds(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Xn(i))for(Iw(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Mp(t,"deficient indentation"),n}function qp(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||br(r)))}function Aw(t,e){e===1?t.result+=" ":e>1&&(t.result+=Dt.repeat(`
`,e-1))}function xK(t,e,r){var n,i,o,s,a,c,l,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),br(p)||tc(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),br(i)||r&&tc(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),br(i)||r&&tc(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),br(n))break}else{if(t.position===t.lineStart&&qp(t)||r&&tc(p))break;if(Xn(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,St(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(ho(t,o,s,!1),Aw(t,t.line-c),o=s=t.position,a=!1),Ds(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return ho(t,o,s,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function PK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(ho(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Xn(r)?(ho(t,n,i,!0),Aw(t,St(t,!1,e)),n=i=t.position):t.position===t.lineStart&&qp(t)?he(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);he(t,"unexpected end of the stream within a single quoted scalar")}function kK(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return ho(t,r,t.position,!0),t.position++,!0;if(a===92){if(ho(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Xn(a))St(t,!1,e);else if(a<256&&DR[a])t.result+=OR[a],t.position++;else if((s=bK(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=CK(a))>=0?o=(o<<4)+s:he(t,"expected hexadecimal character");t.result+=_K(o),t.position++}else he(t,"unknown escape sequence");r=n=t.position}else Xn(a)?(ho(t,r,n,!0),Aw(t,St(t,!1,e)),r=n=t.position):t.position===t.lineStart&&qp(t)?he(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}he(t,"unexpected end of the stream within a double quoted scalar")}function IK(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,l,u,d,f,p,h=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,p=!1,a=[];else if(w===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(St(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?w===44&&he(t,"expected the node content, but found ','"):he(t,"missed comma between flow collection entries"),g=m=v=null,d=f=!1,w===63&&(l=t.input.charCodeAt(t.position+1),br(l)&&(d=f=!0,t.position++,St(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,nc(t,e,Lp,!1,!0),g=t.tag,m=t.result,St(t,!0,e),w=t.input.charCodeAt(t.position),(f||t.line===n)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),St(t,!0,e),nc(t,e,Lp,!1,!0),v=t.result),p?rc(t,a,h,g,m,v,n,i,o):d?a.push(rc(t,null,h,g,m,v,n,i,o)):a.push(m),St(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}he(t,"unexpected end of the stream within a flow collection")}function AK(t,e){var r,n,i=kw,o=!1,s=!1,a=e,c=0,l=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)kw===i?i=d===43?kR:gK:he(t,"repeat of a chomping mode identifier");else if((u=EK(d))>=0)u===0?he(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?he(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Ds(d)){do d=t.input.charCodeAt(++t.position);while(Ds(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Xn(d)&&d!==0)}for(;d!==0;){for(Iw(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Xn(d)){c++;continue}if(t.lineIndent<a){i===kR?t.result+=Dt.repeat(`
`,o?1+c:c):i===kw&&o&&(t.result+=`
`);break}for(n?Ds(d)?(l=!0,t.result+=Dt.repeat(`
`,o?1+c:c)):l?(l=!1,t.result+=Dt.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Dt.repeat(`
`,c):t.result+=Dt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!Xn(d)&&d!==0;)d=t.input.charCodeAt(++t.position);ho(t,r,t.position,!1)}return!0}function MR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!br(s))));){if(a=!0,t.position++,St(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,nc(t,e,PR,!1,!0),o.push(t.result),St(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)he(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function TK(t,e,r){var n,i,o,s,a,c,l=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(w===63||w===58)&&br(n))w===63?(g&&(rc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):he(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=n;else{if(s=t.line,a=t.lineStart,c=t.position,!nc(t,r,xR,!1,!0))break;if(t.line===o){for(w=t.input.charCodeAt(t.position);Ds(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),br(w)||he(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(rc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,i=!1,p=t.tag,h=t.result;else if(v)he(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)he(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),nc(t,e,Fp,!0,i)&&(g?h=t.result:m=t.result),g||(rc(t,d,f,p,h,m,s,a,c),p=h=m=null),St(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&w!==0)he(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&rc(t,d,f,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=d),v}function RK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&he(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):he(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!br(s);)s===33&&(n?he(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),IR.test(i)||he(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),wK.test(o)&&he(t,"tag suffix cannot contain flow indicator characters")}o&&!AR.test(o)&&he(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{he(t,"tag name is malformed: "+o)}return r?t.tag=o:po.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:he(t,'undeclared tag handle "'+i+'"'),!0}function DK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&he(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!br(r)&&!tc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function OK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!br(n)&&!tc(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),po.call(t.anchorMap,r)||he(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],St(t,!0,-1),!0}function nc(t,e,r,n,i){var o,s,a,c=1,l=!1,u=!1,d,f,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=Fp===r||PR===r,n&&St(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;RK(t)||DK(t);)St(t,!0,-1)?(l=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||Fp===r)&&(Lp===r||xR===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&(MR(t,g)||TK(t,g,m))||IK(t,m)?u=!0:(s&&AK(t,m)||PK(t,m)||kK(t,m)?u=!0:OK(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&he(t,"alias node should not have any properties")):xK(t,m,Lp===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&MR(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&he(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(po.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){h=p[d];break}h||he(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&he(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):he(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function NK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(St(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!br(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&he(t,"directive name must not be less than one character in length");s!==0;){for(;Ds(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Xn(s));break}if(Xn(s))break;for(r=t.position;s!==0&&!br(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Iw(t),po.call(LR,n)?LR[n](t,n,i):Mp(t,'unknown document directive "'+n+'"')}if(St(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,St(t,!0,-1)):o&&he(t,"directives end mark is expected"),nc(t,t.lineIndent-1,Fp,!1,!0),St(t,!0,-1),t.checkLineBreaks&&yK.test(t.input.slice(e,t.position))&&Mp(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&qp(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,St(t,!0,-1));return}if(t.position<t.length-1)he(t,"end of the stream or a document separator is expected");else return}function qR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new SK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,he(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)NK(r);return r.documents}function LK(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=qR(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function FK(t,e){var r=qR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Cr("expected a single document in the stream, but found more")}}var MK=LK,qK=FK,$R={loadAll:MK,load:qK},jR=Object.prototype.toString,UR=Object.prototype.hasOwnProperty,Tw=65279,$K=9,tu=10,jK=13,UK=32,BK=33,HK=34,Rw=35,VK=37,GK=38,WK=39,zK=42,BR=44,KK=45,$p=58,YK=61,JK=62,QK=63,XK=64,HR=91,VR=93,ZK=96,GR=123,eY=124,WR=125,rr={};rr[0]="\\0";rr[7]="\\a";rr[8]="\\b";rr[9]="\\t";rr[10]="\\n";rr[11]="\\v";rr[12]="\\f";rr[13]="\\r";rr[27]="\\e";rr[34]='\\"';rr[92]="\\\\";rr[133]="\\N";rr[160]="\\_";rr[8232]="\\L";rr[8233]="\\P";var tY=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rY=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nY(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&UR.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function iY(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Cr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Dt.repeat("0",n-e.length)+e}var oY=1,ru=2;function sY(t){this.schema=t.schema||SR,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Dt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=nY(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ru:oY,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function zR(t,e){for(var r=Dt.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function Dw(t,e){return`
`+Dt.repeat(" ",t.indent*e)}function aY(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function jp(t){return t===UK||t===$K}function nu(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Tw||65536<=t&&t<=1114111}function KR(t){return nu(t)&&t!==Tw&&t!==jK&&t!==tu}function YR(t,e,r){var n=KR(t),i=n&&!jp(t);return(r?n:n&&t!==BR&&t!==HR&&t!==VR&&t!==GR&&t!==WR)&&t!==Rw&&!(e===$p&&!i)||KR(e)&&!jp(e)&&t===Rw||e===$p&&i}function cY(t){return nu(t)&&t!==Tw&&!jp(t)&&t!==KK&&t!==QK&&t!==$p&&t!==BR&&t!==HR&&t!==VR&&t!==GR&&t!==WR&&t!==Rw&&t!==GK&&t!==zK&&t!==BK&&t!==eY&&t!==YK&&t!==JK&&t!==WK&&t!==HK&&t!==VK&&t!==XK&&t!==ZK}function lY(t){return!jp(t)&&t!==$p}function iu(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function JR(t){var e=/^\n* /;return e.test(t)}var QR=1,Ow=2,XR=3,ZR=4,ic=5;function uY(t,e,r,n,i,o,s,a){var c,l=0,u=null,d=!1,f=!1,p=n!==-1,h=-1,m=cY(iu(t,0))&&lY(iu(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=iu(t,c),!nu(l))return ic;m=m&&YR(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=iu(t,c),l===tu)d=!0,p&&(f=f||c-h-1>n&&t[h+1]!==" ",h=c);else if(!nu(l))return ic;m=m&&YR(l,u,a),u=l}f=f||p&&c-h-1>n&&t[h+1]!==" "}return!d&&!f?m&&!s&&!i(t)?QR:o===ru?ic:Ow:r>9&&JR(t)?ic:s?o===ru?ic:Ow:f?ZR:XR}function dY(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ru?'""':"''";if(!t.noCompatMode&&(tY.indexOf(e)!==-1||rY.test(e)))return t.quotingType===ru?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return aY(t,l)}switch(uY(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case QR:return e;case Ow:return"'"+e.replace(/'/g,"''")+"'";case XR:return"|"+eD(e,t.indent)+tD(zR(e,o));case ZR:return">"+eD(e,t.indent)+tD(zR(fY(e,s),o));case ic:return'"'+pY(e)+'"';default:throw new Cr("impossible error: invalid scalar style")}}()}function eD(t,e){var r=JR(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function tD(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function fY(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,rD(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+rD(c,e),i=o}return n}function rD(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function pY(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=iu(t,i),n=rr[r],!n&&nu(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||iY(r);return e}function hY(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(Ii(t,e,a,!1,!1)||typeof a=="undefined"&&Ii(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function nD(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(Ii(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Ii(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Dw(t,e)),t.dump&&tu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function mY(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,l,u;for(s=0,a=o.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=o[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!Ii(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!Ii(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function gY(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,l,u,d,f;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Cr("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||i!=="")&&(f+=Dw(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!Ii(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&tu===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=Dw(t,e)),!!Ii(t,e+1,u,!0,d)&&(t.dump&&tu===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=o,t.dump=i||"{}"}function iD(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,jR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(UR.call(a.represent,c))n=a.represent[c](e,c);else throw new Cr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function Ii(t,e,r,n,i,o,s){t.tag=null,t.dump=r,iD(t,r,!1)||iD(t,r,!0);var a=jR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(r),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(gY(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(mY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?nD(t,e-1,t.dump,i):nD(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(hY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&dY(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Cr("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function vY(t,e){var r=[],n=[],i,o;for(Nw(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function Nw(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Nw(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)Nw(t[n[i]],e,r)}function yY(t,e){e=e||{};var r=new sY(e);r.noRefs||vY(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ii(r,0,n,!0,!0)?r.dump+`
`:""}var wY=yY,CY={dump:wY};function Lw(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Er=$R.load,Kpe=$R.loadAll,Ype=CY.dump;var Jpe=Lw("safeLoad","load"),Qpe=Lw("safeLoadAll","loadAll"),Xpe=Lw("safeDump","dump");var Vp=K(require("path"));var qw=K(require("path")),cD=K(require("os"));var oD=K(require("crypto"));var sD=K(require("util"));var kn={async readDocument(t){switch(t.scheme){case"file":try{return(await Me(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=er(r,e);await ma(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Up=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case Up.scheme:try{return(await this.fileHost.readFile(De(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Up.scheme:let i=er(n,r);await this.fileHost.writeFile(De(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},qt=Up;qt.scheme="vscode-fileHost";var Ls=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case Ls.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Ls.scheme:try{if(!Ls.nonce){let s=await(0,sD.promisify)(oD.randomBytes)(20);Ls.nonce=s.toString("hex")}let i=er(n,r),o=`EOF-${Ls.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Ns=Ls;Ns.scheme="vscode-remote";var aD=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function Ot(t,e){let r={file:kn,[qt.scheme]:new qt(t)};return e&&(r[Ns.scheme]=new Ns(e)),new aD(r)}var Fw=new Map;async function Mw(t,e){let r=t.toString(),n=Fw.get(r);if(n||Fw.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();Fw.delete(r)}}var mo;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(mo||(mo={}));function De(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===qt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function oc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function $w(t,e){return xe.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:qt.scheme})}async function Bp(t,e){let r=oc(t.path,e);for(let n of r)if(await t.isFile(n))return xe.file(n).with({scheme:qt.scheme})}async function Hp(t){let e=oc(qw,t);for(let r of e)if(await vt(r))return r}var Ai=`{${cD.EOL}}`;async function on(t,e,r,n){e.scheme==="file"&&await Dr(qw.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function Fs(t){let e=qw.posix.dirname(t.path);return t.with({path:e})}function go(t,e,r){return Ti(t,e.configFilePath,r)}function Ti(t,e,r){let n=Fs(e);return e.with({path:Vp.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==Ns.scheme?(Vp.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function at(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function sc(t){return t&&(at(t)||"image"in t||"dockerComposeFile"in t)}function Vt(t,e){return go(t,e,bY(e))}function bY(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function nr(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>De(go(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[De(go(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(d=>t.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function EY(){return{contentHashes:{}}}async function uD(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await jw(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let d=new Set(s);l.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==o[p]&&f.push(p);if(u.size||d.size||f.length){let p=await jw(t,e,r);(async()=>{await n.containerOutdated([...u,...d,...f].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await dD(t,e,r)}async function Gp(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await dD(t,e,r),t.common.output.stop(n,i)}async function dD(t,e,r){let n=await jw(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function jw(t,e,r){let n=EY();Wp(n,ou.posix.basename(r.configFilePath.path),JSON.stringify(se(G({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=Fs(r.configFilePath).path;if(at(r)){let o=Vt(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&Wp(n,ou.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await nr(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=xe.file(a).with({scheme:qt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&Wp(n,ou.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=Er(l),d=u&&u.services,f=d&&d[r.service],p=f&&f.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=Ti(t.common.cliHost,c,h),g=fD(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&Wp(n,ou.posix.relative(i,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function Wp(t,e,r){let n=lD.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var un=K(require("path")),GN=K(require("crypto"));var Li=K(require("path"));var uC=K(require("path"));var yD=K(require("net")),Gw=K(require("path"));var Uw=K(require("path")),Bw=K(require("http")),pD=K(require("os")),hD=K(require("crypto"));async function mD(t,e){let r=await Hw(t),n=new gD(r,e);return n.listen(),n}var gD=class{constructor(e,r){this.ipcHandlePath=e;this.server=Bw.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function vD(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function _Y(t){return new Promise((e,r)=>{hD.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function Hw(t){let r=(await _Y(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?Uw.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):Uw.join(pD.tmpdir(),`${n}.sock`)}var Vw=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function Zn(t,e){let r=await Hw("ssh-askpass");return await new Promise((n,i)=>{yD.createServer(o=>{o.setEncoding("utf8");let s="";o.on("data",async a=>{if(s+=a,s.endsWith(`
`))try{let c=await e(JSON.parse(s));o.write(c,l=>{l&&console.error(l)}),o.end()}catch(c){console.error(c)}}),o.on("error",a=>console.error(a))}).on("error",o=>{i(o)}).listen(r,()=>{n()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:Gw.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:Gw.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var SY=0;function In(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++SY)}:{}}async function $t(t,e){return(await vo(t,[e]))[0]}async function vo(t,e){let r=await Kp(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function yo(t,e){return(await Kp(t,"image",[e]))[0]}async function zp(t,e){return(await Kp(t,"volume",[e]))[0]}async function su(t,e){return Kp(t,"volume",e)}async function Kp(t,e,r){if(!r.length)return[];let n=lu(t),i=await Pe(se(G({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function Ri(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await qe(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function wo(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await qe(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Ww(t){return(await qe(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function wD(t){return(await qe(t,"volume","prune","-f")).stdout.toString()}async function CD(t,e,r){let n=[];for(let i of r)n.push("--label",i);await qe(t,"volume","create",...n,e)}async function au(t,e){let{exec:r,cmd:n,args:i,env:o,output:s}=lu(t),a=[];for(let f in e)for(let p of e[f])a.push("--filter",`${f}=${p}`);let c=await Kw(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:o,output:s}),d=[];return u.stderr.on("data",f=>d.push(f)),u.exit.then(({code:f,signal:p})=>{d.length&&s.write(Oe(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(Oe(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(Oe(f&&(f.stack||f.message)))}),u}async function qe(t,...e){let r=lu(t);return Pe(se(G({},r),{args:(r.args||[]).concat(e)}))}async function zw(t){var e;try{let{stdout:r}=await qe(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function Kw(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await qe(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function $r(t,...e){let r=ei(t);return Si(se(G({},r),{args:(r.args||[]).concat(e)}))}async function Ms(t,...e){let r=lu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Pe(se(G({},r),{args:(r.args||[]).concat(e)}))}async function Yp(t,...e){let r=ei(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Si(se(G({},r),{args:(r.args||[]).concat(e)}))}function Co(t,e,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=lu(t),{argsPrefix:c,args:l}=ED(e,r,n,!1);return i({cmd:o,args:(s||[]).concat(l),env:a,output:bD(n.output,o,c)})}}async function cu(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:l}=ei(t),{argsPrefix:u,args:d}=ED(e,r,o,!0);return s({cmd:a,args:(c||[]).concat(d),env:l,output:bD(o.output,a,u)})}}function bD(t,e,r){return xY(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function xY(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return ft(se(G({},t),{get dimensions(){return t.dimensions},event:o=>t.event("text"in o?se(G({},o),{text:o.text.replace(n,r)}):o)}))}function ED(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),o&&c.push("-w",o),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function lu(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:G(G({},t.dockerEnv),In(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:G(G({},t.env),In(t.env)),output:t.output}:se(G({},t),{env:G(G({},t.env),In(t.env))})}function ei(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:G(G({},t.dockerEnv),In(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:G(G({},t.env),In(t.env)),output:t.output}:se(G({},t),{env:G(G({},t.env),In(t.env))})}function Jp(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var kN=K(require("path")),lC=K(require("string_decoder")),IN=K(qa());var uc=K(require("path")),yN=K(mN()),wN=K(require("url")),CN=K(qa());var gN=K(Vf()),vN=K(require("url"));function aC(t,e){return new Promise((r,n)=>{let i=new vN.URL(t.url),o={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},s=gN.https.request(o,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,ae.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),t.data&&s.write(t.data),s.end()})}var Eu="features.tgz";function Bs(t){return t?{allFeatures:t.featureSets.map(r=>r.features).flat()}:void 0}function Tn(t){let e=typeof t=="string"?uc.join(t,"dist"):t.distFolder;return uc.join(e,"node_modules","vscode-dev-containers","container-features")}function dc(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function bN(){return`
ARG BASE_IMAGE=mcr.microsoft.com/vscode/devcontainers/base:buster
FROM $BASE_IMAGE

USER root

COPY . /tmp/build-features/

#{featureLayer}

#{containerEnv}

ARG IMAGE_USER=root
USER $IMAGE_USER
`}async function EN(t){let e="";return(t.featureSets||[]).map(n=>dc(n.sourceInformation)).forEach(n=>{e+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),e}function uh(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,ae.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,ae.Trace),t=t.replace(/\/+$/,"");let u=t.lastIndexOf("#"),d=t.substring(u+1);if(d===""||!r.test(d)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${d}.`,ae.Error);return}let f=new wN.URL(t.substring(0,u)).toString();return e.write(`[${t}] - uri: ${f} , id: ${d}`,ae.Trace),{id:d,sourceInformation:{type:"direct-tarball",tarballUri:f}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",i=t.split("@");if(i.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",ae.Error);return}i.length===2&&(e.write(`[${t}] has version ${i[1]}`,ae.Trace),n=i[1]);let s=i[0].split("/");if(s.length!==3||s.some(u=>u==="")||!r.test(s[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",ae.Error);return}let a=s[0],c=s[1],l=s[2];return n==="latest"?{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/latest`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/latest/download/${Eu}`,owner:a,repo:c,isLatest:!0}}:{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/download/${n}/${Eu}`,owner:a,repo:c,tag:n,isLatest:!1}}}var dh=async(t,e)=>{try{await m0(t,!1,!0)}catch(r){e.write(`Didn't remove temporary tarball from disk with caught exception: ${r==null?void 0:r.Message} `,ae.Trace)}};function R5(t,e,r){let n={"user-agent":"devcontainer"},i=o=>{let s=o.tarballUri;return s.startsWith("https://github.com")||s.startsWith("https://api.github.com")};if(t.type==="github-repo"||t.type==="direct-tarball"&&i(t)){let o=e.GITHUB_TOKEN;o?(r.write(`Using GITHUB_TOKEN ending in ${o.substring(o.length-5)}`),n.Authorization=`Bearer ${o}`):r.write("No GITHUB_TOKEN found in env. Request will be sent unauthenticated.")}return n}async function D5(t,e,r){let{output:n,env:i}=t,{dstFolder:o}=e,s=[],a=r.features;if(!a||!Object.keys(a).length||!o)return;let c=uc.join(o,Eu);n.write("Preparing to parse declared features and fetch remote features.");for await(let l of Object.keys(a)){let u=uh(l,n);if(u===void 0){n.write(`Failed to parse key: ${l}`,ae.Error);continue}let d=u.id,f=u.sourceInformation,p=f.type;if(p==="local-cache"){n.write("Detected local feature set. Continuing...");continue}let h=dc(u.sourceInformation),m=uc.join(o,h);if(s.some(w=>w===h)){n.write(`Already pulled remote resource for '${h}'. No need to re-fetch.`);continue}if(n.write(`Fetching: featureSet = ${h}, feature = ${d}, Type = ${p}`),p==="file-path"){n.write("Local file-path to features on disk is unimplemented. Continuing...");continue}else{let w,C=R5(f,i,n);if(p==="github-repo")n.write("Determining tarball URI for provided github repo.",ae.Trace),C.Authorization&&C.Authorization!==""?(n.write("Authenticated. Fetching from GH API.",ae.Trace),w=await O5(f,C,n),C.Accept="Accept: application/octet-stream"):(n.write("Not authenticated. Fetching from unauthenticated uri",ae.Trace),w=f.unauthenticatedUri);else if(p==="direct-tarball")w=f.tarballUri;else{n.write(`Unhandled source type: ${p}`,ae.Error);continue}if(w!==void 0&&w!==""){let b={type:"GET",url:w,headers:C};n.write(`Fetching tarball at ${b.url}`),n.write(`Headers: ${JSON.stringify(b)}`,ae.Trace);let _=await aC(b,n);if(!_||_.length===0){n.write("Did not receive a response from tarball download URI",ae.Error),await dh(c,n);continue}let P=(x,k)=>!(x.startsWith("./.")||x===`./${Eu}`||x==="./.");n.write("Preparing to unarchive received tgz.",ae.Trace),await Dr(m),await ma(c,_),await CN.x({file:c,cwd:m,filter:P})}else{n.write("Could not fetch features from constructed tarball URL",ae.Error),await dh(c,n);continue}}n.write("Attempting to load features.json",ae.Trace);let v=await _u(m,n);if(!v||!v.features||v.features.length===0){n.write("Unable to parse received features.json.",ae.Error),await dh(c,n);continue}n.write(`Done loading FeatureSet ${h} into from disk into memory`,ae.Trace),v.sourceInformation&&(v=se(G({},v),{sourceInformation:G(G({},v.sourceInformation),f)})),n.write("Merged sourceInfomation",ae.Trace),e.featureSets.push(v),s.push(h),await dh(c,n),n.write(`Succeeded in fetching feature set ${h}`,ae.Trace)}return e}async function O5(t,e,r){let n={type:"GET",url:t.apiUri,headers:e},i=JSON.parse((await aC(n,r)).toString());if(i){let o=i.assets.find(s=>s.name===Eu);if(o&&o.url)return r.write(`Found url to fetch release artifact ${o.name}. Asset of size ${o.size} has been downloaded ${o.download_count} times and was last updated at ${o.updated_at}`),o.url;r.write("Unable to fetch release artifact URI from GitHub API",ae.Error);return}}async function _u(t,e){let r=await Me(uc.join(t,"features.json"));if(r.length===0){e.write("Parsed featureSet is empty.",ae.Error);return}let n=Xe(r.toString());if(!(n==null?void 0:n.features)||n.features.length===0){e.write("Parsed featureSet contains no features.",ae.Error);return}return e.write(`Loaded features.json declares ${n.features.length} features and ${n.sourceInformation?"contains":"does not contain"} explicit source info.`,ae.Trace),n}async function Hs(t,e,r,n,i){var l;let{output:o}=t,s=r.features;if(!s||!Object.keys(s).length)return;let a={featureSets:[],dstFolder:e},c=await _u(i(t.extensionPath),o);if(!c){o.write("Failed to load locally cached features",ae.Error);return}if(c=se(G({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=(l=await D5(t,a,r))!=null?l:a,a=await fh(t,r,a,n),!a.featureSets.every(u=>u.features.every(d=>d.value===!1)))return a}var cC=(t,e)=>`${t}-${dc(e)}`;async function fh(t,e,r,n){var d;let{output:i}=t,o=await n(),s=o["com.visualstudio.code.devcontainers.id"],a=o.version,c=e.features||{},l={};for(let f of Object.keys(c)){let{id:p,sourceInformation:h}=(d=uh(f,i))!=null?d:{};if(p&&h){let m=cC(p,h);l[m]=c[f]}else{i.write(`Failed to read user declared feature ${f}. Skipping.`,ae.Error);continue}}let u={};for(let f of r.featureSets)for(let p of f.features){N5(p);let h=cC(p.id,f.sourceInformation);s&&(p.exclude||[]).some(m=>_N(m,s,a))?p.included=!1:(p.include||[]).length?p.included=!!s&&(p.include||[]).some(m=>_N(m,s,a)):p.included=!0,u[h]=u[h]||p.included,p.value=l[h]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(se(G({},r),{imageDetails:void 0}),void 0,"  "),ae.Trace);for(let f of r.featureSets)f.features=f.features.filter(p=>{let h=cC(p.id,f.sourceInformation);return h in u&&p.included===u[h]?(delete u[p.id],!0):!1});return r}function N5(t){if(t.values){let e=t.options||(t.options={});e[Rn(t)]={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function _N(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||yN.satisfies(r,o))}function Rn(t){return"version"}function Vs(t){var r,n;let e=Rn(t);if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function SN(t){return typeof t.value=="object"?G(G({},xN(t)),t.value):se(G({},xN(t)),{[Rn(t)]:t.value})}function xN(t){let e=t.options||{};return Object.keys(e).reduce((r,n)=>("default"in e[n]&&(r[n]=e[n].default),r),{})}function PN(t){var r;let e=Rn(t);return t.options&&((r=t.options[e])==null?void 0:r.default)}async function Su(t,e,r,n,i,o){let s,a=()=>s||(s=AN(t,r,n)),c=await Hs(t.common,await Gs(t.common),e,async()=>(await a()).Config.Labels||{},Tn),l=Bs(c),u=await F5(t,c,r,a);return{updatedImageName:await M5(t,e,u,a,i,o),collapsedFeaturesConfig:l}}function L5(t){let e="";for(let r of t.featureSets)e+=r.features.filter(n=>(_t||n.included)&&n.value).reduce((n,i)=>n.concat(Object.keys(i.containerEnv||{}).map(o=>`ENV ${o}=${i.containerEnv[o]}`)),[]).join(`
`);return e}async function F5(t,e,r,n){let{common:i}=t,{cliHost:o,output:s}=i;if(!e)return r;let{dstFolder:a}=e;if(!a||a==="")return s.write("dstFolder is undefined or empty in addContainerFeatures",ae.Error),r;let c=dc({type:"local-cache"}),l=(await n()).Config.User||"root",u=xu(i),d=`${r.startsWith(u)?r:u}-features`,f=Tn(i.extensionPath);s.write(`local container features stored at: ${f}`),await o.mkdirp(`${a}/${c}`);let p=IN.c({cwd:f,filter:_=>_!=="./Dockerfile"&&_!=="./features.json"},["."]),h=new Promise((_,P)=>{p.on("error",P),p.on("finish",_)}),m=await o.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${a}/${c}`,output:s}),g=new lC.StringDecoder;m.stdout.on("data",_=>{s.write(g.write(_))});let v=new lC.StringDecoder;m.stderr.on("data",_=>{s.write(Oe(v.write(_)))}),p.pipe(m.stdin);let w=bN();w=w.replace("#{featureLayer}",await EN(e)),w=w.replace("#{containerEnv}",L5(e)),await o.writeFile(o.path.join(a,"Dockerfile"),Buffer.from(w)),await Promise.all([...e.featureSets].map(async _=>{let P=[].concat(..._.features.filter(x=>(_t||x.included)&&x.value).map(x=>{let k=SN(x),A=x.id.replace(/[/-]/g,"_").toUpperCase(),D=[];return k&&(D.push(...Object.keys(k).map(F=>`_BUILD_ARG_${A}_${F.toUpperCase()}="${k[F]}"`)),D.push(`_BUILD_ARG_${A}=true`)),x.buildArg&&D.push(`${x.buildArg}=${Vs(x)}`),D})).join(`
`);await o.writeFile(o.path.join(a,dc(_.sourceInformation),"features.env"),Buffer.from(P))})),await m.exit,await h;let C=["build","-t",d,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`IMAGE_USER=${l}`,a],b=se(G({},ei(t)),{output:ft(s,ae.Info)});return await $r(b,...C),d}async function M5(t,e,r,n,i,o){let{common:s}=t,{cliHost:a}=s;if(s.cliMode||!(typeof e.updateRemoteUserUID=="boolean"?e.updateRemoteUserUID:o)||!(a.platform==="linux"||t.updateRemoteUserUIDOnMacOS&&a.platform==="darwin"))return r;let c=(await n()).Config.User||"root",l=e.remoteUser||i||c;if(l==="root"||/^\d+$/.test(l))return r;let u=xu(s),d=`${r.startsWith(u)?r:u}-uid`,f="updateUID.Dockerfile",p=kN.join(s.extensionPath,"scripts",f),h=s.package.version,m=a.path.join(await a.tmpdir(),"vsch",`${f}-${h}`),g=`${m}-${Date.now()}`;await a.mkdirp(a.path.dirname(g)),await a.writeFile(g,await Me(p)),await a.rename(g,m);let v=["build","-f",m,"-t",d,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${l}`,"--build-arg",`NEW_UID=${await a.getuid()}`,"--build-arg",`NEW_GID=${await a.getgid()}`,"--build-arg",`IMAGE_USER=${c}`,a.path.dirname(m)];return await $r(t,...v),d}var ph="com.docker.compose.project",dC="com.docker.compose.service";async function TN(t,e,r,n){let{common:i,dockerCLI:o,dockerComposeCLI:s}=t,{cliHost:a,env:c,output:l}=i;return DN(t,{cliHost:a,dockerCLI:o,dockerComposeCLI:s,env:c,output:l},e,r,n,fC(r),!0)}async function RN(t,{repositoryPath:e,folder:r},n,i,o,s){let{labels:a}=fc(n,e,r,i),c=Ue(uC.posix,r?n.workspaceFolder(r):n.fullRepositoryName),l=`services:
  '${s.service}':
    labels:
${a.map(m=>`      - ${m}`).join(`
`)}
    volumes:
      - ${i}:${uC.posix.dirname(c.rootFolderPath)}

volumes:
  ${i}:
    external: true
`,{HOME:u,USERPROFILE:d}=t.common.env,f=await gh(t,o,c.rootFolderPath),p=se(G({},f.env),{HOME:u,USERPROFILE:d}),h=gC(n,i,r);return DN(t,se(G({},f),{env:p}),c,s,t.common.cliHost.cwd,c.rootFolderPath,!1,l,o,h,!0)}async function DN(t,e,r,n,i,o,s,a,c,l,u){let{common:d}=t,{cliHost:f}=e,p,h;try{let m=await nr(f,n,f.env,f.cwd),g=f.path.join(f.cwd,".env"),v=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await f.isFile(g)?g:void 0,w="/tmp/docker-compose.repositoryContainer.yml";if(a){let H=(await f.readFile(m[0])).toString(),L=(/^\s*(version:.*)$/m.exec(H)||[])[1];L&&(a=`${L}

${a}`),await f.writeFile(w,Buffer.from(a)),m.push(w)}let C=await Pu(e,r,m),b=await hh(t,C,n.service);if(t.expectExistingContainer&&!b)throw new ue({description:"The expected container does not exist."});if(p=b?await $t(t,b):void 0,p&&(t.removeOnStartup===!0||t.removeOnStartup===p.Id)){let H="Removing existing container.",L=d.output.start(H);await qe(t,"rm","-f",p.Id),d.output.stop(H,L),p=void 0}let _=!!p,P;if(!p||p.State.Status!=="running"){let H=await $5(t,e,n,C,m,v,!p,s);p=await $t(t,H.containerId),P=H.collapsedFeaturesConfig}else{let H=p.Config.Labels||{},L=await Hs(t.common,await Gs(t.common),n,async()=>H,Tn);P=Bs(L)}h=await ri(t,p.Id,o,n.remoteUser),u&&!_&&h.user!=="root"&&(h.launchRootShellServer?await Jl(h,h.launchRootShellServer,o,n.configFilePath.path):d.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let x=Ot(f,h.shellServer);_||await Gp(t,x,n);let k={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:d.env,containerId:p.Id,user:h.user,sessionId:d.sessionId,shutdownAction:n.shutdownAction,projectName:C,composeFiles:m,envFile:v,composeOverrideFile:a&&w,composeOverrideContent:a,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:d.getLogLevel(),delay:1e4},{shutdownArgs:A,doneWithDocuments:D}=await yh(t,x,"dockerCompose",k,_?n:void 0);c&&D.then(()=>{qe(t,"rm","-f",c)});let F=n.devPort||uo,{hostOrContainerPort:V,hostPortServer:ne,remoteEnv:Y,serverDownloaded:J}=await fo(d,h,n,P,void 0,F);return A.hostPortServer=ne,pc(d,h,V,p,r),{params:d,properties:h,config:n,resolvedAuthority:{host:Eo,port:V,extensionHostEnv:Y},tunnelInformation:d.isLocalContainer?hc(p):{},dockerParams:t,dockerContainerId:p.Id,serverDownloaded:J}}catch(m){let g=m instanceof ue?m:new ue({description:"An error occurred setting up the container.",originalError:m});throw p&&(g.manageContainer=!0,g.params=t.common,g.containerId=p.Id,g.dockerParams=t),h&&(g.containerProperties=h),g.config=n,g}}function fC(t){return t.workspaceFolder||"/"}async function q5(t,e,r,n,i,o,s,a){let{cliHost:c}=r,l=["--project-name",e,...i];if(a){let u=c.path.join(await c.tmpdir(),`docker-compose.devcontainer.build-${Date.now()}.yml`),d=`services:
  ${t.service}:
    image: ${a}
`;await c.writeFile(u,Buffer.from(d)),l.push("-f",u)}l.push("build"),s&&l.push("--no-cache","--pull"),o.length&&(l.push(...o),o.indexOf(t.service)===-1&&l.push(t.service));try{await Yp(r,...l)}catch(u){throw u instanceof ue?u:new ue({description:"An error occurred building the Docker Compose images.",originalError:u,data:{fileWithError:n[0]}})}}async function $5(t,e,r,n,i,o,s,a){var V,ne;let{common:c}=t,{cliHost:l}=e;c.progress(wt.StartingContainer);let u=await pC(l.cwd,i,c.output),d=[].concat(...u.map(Y=>["-f",Y]));o&&d.push("--env-file",o);let f=ft(e.output,ae.Info),p=await hC(se(G({},e),{output:f}),u,o);if(Object.keys(p.services||{}).indexOf(r.service)===-1)throw new ue({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let m,g=new Promise((Y,J)=>m=J),{started:v}=await vh(t,{[ph]:n,[dC]:r.service},g,c.output,c.getLogLevel()===ae.Trace);s&&await q5(r,n,se(G({},e),{output:f}),u,d,(V=r.runServices)!=null?V:[],(ne=t.buildNoCache)!=null?ne:!1,void 0);let w=p.services[r.service],C=w.image||`${n}_${r.service}`,{updatedImageName:b,collapsedFeaturesConfig:_}=await Su(t,r,C,!w.build,w.user,a),P=b!==C,x=[...new Set([].concat(...((_==null?void 0:_.allFeatures)||[]).filter(Y=>(_t||Y.included)&&Y.value).map(Y=>Y.capAdd||[])))],k=[...new Set([].concat(...((_==null?void 0:_.allFeatures)||[]).filter(Y=>(_t||Y.included)&&Y.value).map(Y=>Y.securityOpt||[])))],A=[].concat(...((_==null?void 0:_.allFeatures)||[]).map(Y=>(_t||Y.included)&&Y.value&&Y.mounts).filter(Boolean)),D=A.filter(Y=>Y.type==="volume");if(r.overrideCommand||P||A.length){let Y=((_==null?void 0:_.allFeatures)||[]).map(j=>(_t||j.included)&&j.value&&j.entrypoint).filter(Boolean),J=`services:
  '${r.service}':${P?`
    image: ${b}`:""}${r.overrideCommand?`
    entrypoint: /bin/sh
    command: ["-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${Y.join(`\\n
`)}\\n
while sleep 1 & wait $$!; do :; done"]`:""}${((_==null?void 0:_.allFeatures)||[]).some(j=>(_t||j.included)&&j.value&&j.init)?`
    init: true`:""}${((_==null?void 0:_.allFeatures)||[]).some(j=>(_t||j.included)&&j.value&&j.privileged)?`
    privileged: true`:""}${x.length?`
    cap_add:${x.map(j=>`
      - ${j}`).join("")}`:""}${k.length?`
    security_opt:${k.map(j=>`
      - ${j}`).join("")}`:""}${A.length?`
    volumes:${A.map(j=>`
      - type: ${j.type}
        source: ${j.source}
        target: ${j.target}`).join("")}`:""}${D.length?`
volumes:${D.map(j=>`
  ${j.source}:`).join("")}`:""}
`,H=(await l.readFile(i[0])).toString(),L=(/^\s*(version:.*)$/m.exec(H)||[])[1];L&&(J=`${L}

${J}`);let q=`${await l.tmpdir()}/docker-compose.devcontainer.containerFeatures-${Date.now()}.yml`;await l.writeFile(q,Buffer.from(J)),d.push("-f",q)}let F=["--project-name",n,...d];F.push("up","-d"),t.expectExistingContainer&&F.push("--no-recreate"),r.runServices&&r.runServices.length&&(F.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&F.push(r.service));try{await Yp(se(G({},e),{output:f}),...F)}catch(Y){throw m(),new ue({description:"An error occurred starting Docker Compose up.",originalError:Y,data:{fileWithError:u[0]}})}return await v,{containerId:await hh(t,n,r.service),collapsedFeaturesConfig:_}}async function pC(t,e,r){if(wr(t)){let n=za(t),i=[];for(let o=0;o<e.length;o++){let s=await As(n,e[o],r);i.push(s)}return i}return e}async function hC(t,e,r){try{let n=[].concat(...e.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(Ts(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await Ms(t,...n,"config"),s=o.toString();return t.output.write(s),Er(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await Yp(se(G({},t),{output:ft({event:t.output.event,dimensions:{columns:999999,rows:1}},ae.Info)}),...n,"config");return Er(c.replace(zi,""))||{}}let{stdout:s}=await Ms(se(G({},t),{env:se(G({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),Er(a)||{}}}catch(n){throw n instanceof ue?n:new ue({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function hh(t,e,r){let n=await Ri(t,!0,[`${ph}=${e}`,`${dC}=${r}`]);return n&&n[0]}async function ON(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[ph]===e&&o[dC]===r}))==null?void 0:n.Id}async function Pu(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await j5(t),o=mh(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),d=u&&u[1].trim(),f=mh(d||"",i);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return dI(n.platform,a,n.path.join(s,".devcontainer"))?mh(`${n.path.basename(s)}_devcontainer`,i):mh(n.path.basename(a),i)}function mC(t){let e=(t.Config.Labels||{})[ph];return e||void 0}function mh(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function j5(t){try{let e=Ts((await t.dockerComposeCLI()).version);return e?!Ka(e,[1,21,0]):!0}catch{return!0}}function ti(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await Ms(se(G({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await Ms(se(G({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}var ni=K(require("url")),NN=K(require("https"));var vC;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(vC||(vC={}));function ii(t){return t.toLowerCase().indexOf("github.com")>=0?G5(t):t.toLowerCase().indexOf("visualstudio.com")>=0?H5(t):t.toLowerCase().indexOf("dev.azure.com")>=0?B5(t):t.toLowerCase().indexOf("gitlab.com")>=0?V5(t):U5(t)}function Ni(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function U5(t){var s;let e="unknown-owner",r,n=t,i;i=(s=ni.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?Ni(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function B5(t){var o,s;let e,r,n=t,i;if(wh(t)){let a=`http://${t}`;i=(o=ni.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Ni(t);e=c[3],r=c[4]}else{i=(s=ni.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Ni(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function H5(t){var o,s;let e,r,n=t,i;if(wh(t)){let a=`http://${t}`;i=(o=ni.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Ni(t);e=c[3],r=c[4]}else{i=(s=ni.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Ni(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function V5(t){var o,s;let e,r,n=t,i;if(wh(t)){let a=`http://${t}`;i=(o=ni.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return Ni(t);e=c[1],r=c[2]}else{i=(s=ni.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return Ni(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function G5(t){var c,l;let e,r,n=t,i,o,s;if(wh(t)){let u=`http://${t}`;s=(c=ni.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ni.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return Ni(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),i=t.substring(u.index+u[0].length))}if(a[3]==="pull"){o=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function wh(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Ch=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},bh=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=ii(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},LN=class extends bh{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var u,d,f,p,h,m,g,v,w,C,b;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(d=(u=o.head)==null?void 0:u.repo)==null?void 0:d.clone_url,a=(p=(f=o.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Ch(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,l=((v=(g=(m=o.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(b=(C=(w=o.head)==null?void 0:w.repo)==null?void 0:C.owner)==null?void 0:b.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,l)=>{let u="",d=NN.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return l(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{u+=p}),f.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});d.on("error",l),d.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await Pe({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:i}),await Pe({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await Pe({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await Pe({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await Pe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await Pe({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},FN=class extends bh{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await Pe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},yC=class extends bh{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function mc(t,e){if(e)return new yC(t,e);let r=ii(t);if(r.repository==="github"){if(r.pullRequestId)return new LN(t);if(r.ref)return new FN(t)}return new yC(t)}var Eh=Li.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function MN(t,e,r){let n=t.parsedAuthority;if(!n||Wt(n))return W5(t,n,e,r);if(ln(n))return n.inspectVolume?bC(t,n):z5(t,n);if(gc(n))return bC(t,n);throw new Error(`Unexpected authority: ${JSON.stringify(n)}`)}async function W5(t,e,r,n){let{common:i,userRepositoryConfigurationPaths:o,workspaceMountConsistencyDefault:s}=t,{cliHost:a,output:c}=i,l=a.cwd,u=e&&Ue(a.path,Rl(e.hostPath)?a.path.join(l,Li.basename(e.hostPath)):l),d;u&&(d=await Y5(t,u),d&&i.backgroundTasks.push(d==null?void 0:d.gitUnshallow),d&&!r&&await d.gitClone());let f=u?await oi(a,u,o)||(r?$w(a,u.configFolderPath):void 0):r,p=f&&await Ws(a,u,f,c,s,t.configUpdater,r,i.cliMode)||void 0;if(!p)throw f||u?new ue({description:`Dev container config (${De(f||$w(a,u.configFolderPath),a.platform)}) not found.`}):new ue({description:"No dev container config and no workspace found."});let h=p.config,m=e==null?void 0:e.settings,g=_o(m),v=h.name?`Dev Container: ${h.name}${g}`:`Dev Container${g}`;i.setWorkspaceName(v),d&&"initializeCommand"in h&&await d.gitClone(),await VN(se(G({},t),{common:se(G({},i),{output:i.postCreate.output})}),h.initializeCommand,i.postCreate.onDidInput);let w;if(at(h)||"image"in h)w=await BN(t,u,h,p.workspaceConfig,t.originalCwd||l,d==null?void 0:d.gitClone,n);else if("dockerComposeFile"in h){if(d&&await d.gitClone(),!u)throw new ue({description:"A Dev Container using Docker Compose requires a workspace folder."});w=await TN(t,u,h,t.originalCwd||l)}else throw new ue({description:`Dev container config (${h.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return d&&await d.gitClone(),w}async function z5(t,e){let{repositoryPath:r,volumeName:n,folder:i}=e,o=jr(r);n=await UN(t,o,n);let{labels:s}=fc(o,r,i,n),a=[...s,`${ku}=${t.common.product.quality}`],c=await Sh(t,a);if(c)return CC(t,e,o,n,c);let{containerId:l,shellServer:u,config:d}=await o.cloneAndInitializeRepository(t,e,o,n);if(at(d)||"image"in d)return CC(t,e,o,n,d,l,u);if("dockerComposeFile"in d)return RN(t,e,o,n,l,d);throw new ue({description:`Dev container config (${d.configFilePath}) not valid.`})}async function Ws(t,e,r,n,i,o,s,a=!1){let l=await Ot(t).readDocument(s!=null?s:r);if(!l)return;let u=Xe(l),d=u;if(u&&o&&(u.configFilePath=r,d=o(u),delete d.configFilePath),!d||typeof d!="object"||Array.isArray(d))throw new ue({description:`Dev container config (${De(r,t.platform)}) must contain a JSON object literal.`});let f=await HN(t,e,d,n,i,a),p=ec({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:f.workspaceFolder,configFile:r,env:t.env},d);return typeof p.workspaceFolder=="string"&&(f.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(f.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:f}}async function oi(t,e,r){let n=await wC(t,e,r);return n==null?void 0:n.uri}async function wC(t,e,r){let n=await qN(t,e,r);if(n)return{uri:n,location:"user"};let i=await Bp(t,e.configFolderPath);if(i)return{uri:i,location:"workspace"};let o=await qN(t,e,[Eh]);if(o)return{uri:o,location:"builtin"}}async function qN(t,e,r){let n=await CI(t,e,tt);return n&&_h(n,r)}async function _h(t,e){let r=new Set(t.map(K5).filter(n=>!!n));for(let n of r)for(let i of e){let o=Li.join(i,n),s=await Hp(o);if(s)return xe.file(s)}}function $N(t,e,r){let n=t.path.relative(e.rootFolderPath,De(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function jN(t){if(t.scheme!=="file")return;let e=Li.relative(Eh,t.fsPath);if(e&&!e.startsWith("..")&&!Li.isAbsolute(e))return e}function K5(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}async function Y5(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=Ul(r),s=Ul(r),a=mc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=se(G(G({},n),l),{env:G(G({},n.env),l.env)}),d=await ap(r,r.cliHost,e.rootFolderPath,u,o.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await f},gitUnshallow:async()=>{o.flush(),s.flush(),await d.gitUnshallow}}}function jr(t){return{repositoryPath:t,fullRepositoryName:xh(t),repositoryName:J5(t),workspaceFolder:WN,volumeDestination:EC(),oldVolumeName:Q5(t),alreadyCloned:!1,imageName:X5(t),uniqueVolumeName:Z5(t),getWorkspaceConfiguration:(e,r)=>e7(e,r),getOldWorkspacePath:YN,cloneAndInitializeRepository:t7,getConfigurationFromImage:KN,gitUrlHandler:mc(t),gitUrlInfo:ii(t)}}function xh(t){let e=ii(t);return e==null?void 0:e.fullRepositoryName}function J5(t){let e=ii(t);return e==null?void 0:e.repositoryName}function EC(){return"/workspaces"}function Q5(t){let e=xh(t);return`vsc-${un.posix.basename(e)}-${_C(t)}`}function X5(t){let e=xh(t),r=_C(t),n=un.posix.basename(e);return Jp(`vsc-${n}-${r}`)}function Z5(t){let e=ii(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=_C(t);return`${r}-${n}`}function _C(t){return GN.createHash("md5").update(t).digest("hex")}function e7(t,e){let r=WN(t),n=`type=volume,src=${e},dst=${EC()}`;return{workspaceFolder:r,workspaceMount:n}}function WN(t){return un.posix.join(`${EC()}`,`${t}`)}async function t7(t,{folder:e,cloneInfo:r},n,i){var u;await i7(t);let{containerId:o,shellServer:s}=await r7(t,n,i,e,t.configProvider,r),{config:a,workspaceFolder:c}=await KN(t,n,e,s),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();return l&&(a.extensions||(a.extensions=[]),a.extensions.includes(l)||a.extensions.push(l)),await Ah(t,o,"root",c,a.initializeCommand),{repository:n,volumeName:i,containerId:o,shellServer:s,config:a}}async function r7(t,e,r,n,i,o){let{common:s}=t,{output:a,loadNativeModule:c}=s,l=e.fullRepositoryName,u,d,f,p;t.common.progress(wt.CloningRepository);let h=gC(e,r,n,t.buildContainerRunArgs);n?(a.write(`Cloning Github repository: ${l} into ${e.workspaceFolder(n)}
\r`),u=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,p=e.workspaceFolder(n),f=`Repository '${l}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(a.write(`Cloning Github repository: ${l} into volume ${r}
\r`),u=`fatal: destination path '${l}' already exists`,p=`${l}`,f=`Repository '${l}' was already cloned into volume.`);let m=e.gitUrlHandler;if(!m)throw new ue({description:"Could not analyze the URL."});o?d=m.cloneOptions(o):d={url:e.repositoryPath};let{stdout:g}=await qe(t,...h),v=g.toString().trim(),w=Co(t,v,"root"),C=await _n(w,a),b,_,P=Promise.resolve(),x;if(!s.cliMode){let F=await _p(s,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:C});b=F.remoteContainersCLI,_=F.remoteEnv,P=F.ready,x=F.mrpcExec}let k=await cu(t,v,"root",c),A=Ga("container",p,{},await x||w,k,a);try{s.cliMode||(t.common.isCopyGitConfigEnabled&&(await Ql(t.common,{homeFolder:"/root",shellServer:C},[".gitconfig"],"git"),await ww(t.common,{homeFolder:"/root",shellServer:C},{})),await Op({shellServer:C,nodeExecutable:"node"},b,a,"global"),await Ql(t.common,{homeFolder:"/root",shellServer:C},[".ssh","known_hosts"],"ssh"),await P);let F=Ul(s),V=await ap(s,A,p,se(G({},d),{env:G(G({},_),d.env)}),a,F.output);if(await V.gitClone,V.gitUnshallow&&V.gitUnshallow.then(F.flush,F.flush),V.gitClone&&o)try{await m.postClone(o,A,p,a)}catch{return SC(t,v,`Failed to checkout the repository ${o.urlToClone}.`)}}catch(F){let V=F&&(F.cmdOutput||F.stack||F.message)||String(F);if(V=V.replace(zi,""),V.replace(/[\r\n]+/gm,"").includes(u))a.write(f),e.alreadyCloned=!0;else return SC(t,v,`Git clone failed. ${V}`)}let{configRaw:D}=await zN(t,e,n,C);if(!sc(D)&&i){a.write(`Repository ${l} has no development container files.
\r`);let F=!0;for(;F;){let V=await i.createConfiguration(p,A);if(V)F=!1;else if(V=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),V!=="Select Configuration")return SC(t,v,"Cancelled container configuration selection.")}}return{containerId:v,shellServer:C}}function gC(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${xC}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${xC}`,"sleep","infinity"]}function SC(t,e,r){throw e&&qe(t,"rm","-f",e),new ue({description:r})}async function zN(t,e,r,n){let i,o,s;if(r?s=e.workspaceFolder(r):s=`${YN(e.repositoryPath)}`,o=await _h([e.repositoryPath],t.userRepositoryConfigurationPaths),o&&(i=(await Me(o.fsPath)).toString()),!o)for(let a of oc(un.posix,s))try{i=(await n.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,o=xe.from({scheme:"vscode-remote",path:a});break}catch{}return o||(o=await _h([e.repositoryPath],[Eh]),o&&(i=(await Me(o.fsPath)).toString())),{configRaw:i&&Xe(i),configFile:o,workspaceFolder:s}}async function KN(t,e,r,n){let{configRaw:i,configFile:o,workspaceFolder:s}=await zN(t,e,r,n);if(!o||!i)throw new ue({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:a,configUpdater:c}=t,{cliHost:l,output:u}=a,d=G({},i),f=d;c&&(d.configFilePath=o,f=c(d),delete f.configFilePath);let p=ec({platform:l.platform,configFile:o,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:s},f);return p.configFilePath=o,("workspaceMount"in p||"workspaceFolder"in p)&&u.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),n7(t,p),{workspaceFolder:s,config:p}}function n7({common:t},e){let r=si(t.env),n=_o(r),i=e.name?`Dev Container: ${e.name}${n}`:`Dev Container${n}`;t.setWorkspaceName(i)}function YN(t){return`/workspaces/${un.posix.basename(xh(t))}`}var xC="vsc-volume-bootstrap",Ph="vsc-volume-inspect",kh="volume.Dockerfile";async function i7(t){let{common:e}=t,{cliHost:r}=e,n=un.join(e.extensionPath,"scripts",kh),i=e.package.version,o=r.path.join(await r.tmpdir(),"vsch",`${kh}-${i}`),s=`${o}-${Date.now()}`;await r.mkdirp(r.path.dirname(s)),await r.writeFile(s,await Me(n)),await r.rename(s,o);let a=["build","-f",o,"-t",xC,un.dirname(o)];await $r(t,...a)}async function JN(t){let{common:e}=t,{cliHost:r}=e,n=un.join(e.extensionPath,"scripts",kh),i=e.package.version,o=r.path.join(await r.tmpdir(),"vsch",`${kh}-${i}`),s=`${o}-${Date.now()}`;await r.mkdirp(r.path.dirname(s)),await r.writeFile(s,await Me(n)),await r.rename(s,o);let a=["build","-f",o,"-t",Ph,un.dirname(o)];await $r(t,...a)}async function UN(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===dn?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await wo(t)).indexOf(r)===-1&&await CD(t,r,n),r}var Ih="vsch.local.repository",PC="vsch.local.repository.volume",kC="vsch.local.repository.folder";function fc(t,e,r,n){return r?{labels:[`${Ih}=${e}`,`${PC}=${n}`,`${kC}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${Ih}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function gh(t,e,r){let{loadNativeModule:n,output:i}=t.common,o=Co(t,e,"root"),s=await cu(t,e,"root",n),a=Ga("container",r,{},o,s,i);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:ti({exec:a.exec,env:{},output:i},"docker","docker-compose"),env:{},output:i}}var ku="vsch.quality",XN="vsch.local.folder",ZN="vsch.local.volume",IC="/volume";async function BN(t,e,r,n,i,o,s){let{common:a}=t,c,l,u,d=s||[`${XN}=${i}`,`${ku}=${a.product.quality}`];try{l=await Sh(t,d);let f=!!l;if(l){let p=l.Config.Labels||{},h=await Hs(t.common,await Gs(t.common),r,async()=>p,Tn);c=Bs(h),await RC(t,d,l)}else{if(o&&e)if("image"in r){let{stdout:m}=await qe(t,"images","-q",r.image);m.toString().trim().length===0&&await $r(t,"pull",r.image);let g=l7(t,e,r);g.length&&(a.output.write(`Waiting for git clone to finish. (Unsupported: ${g.map(v=>`'${v}'`).join(", ")})`),await o())}else await o();let p=await o7(t,r),h=await Su(t,r,p,"image"in r,e1(r.runArgs)||r.containerUser,!0);c=h.collapsedFeaturesConfig;try{await DC(t,r,c,h.updatedImageName,d,n.workspaceMount)}finally{l=await Iu(t,d)}if(!l)return Rh(a.output,"Dev container not found.")}return u=await ri(t,l.Id,n.workspaceFolder,r.remoteUser),await TC(l,t,u,r,c,e,f,i,o)}catch(f){throw AC(f,l,t,u,r)}}async function CC(t,{repositoryPath:e,folder:r},n,i,o,s,a){let{common:c}=t,l,u,d,{labels:f,remoteWorkspaceFolder:p}=fc(n,e,r,i),h=[...f,`${ku}=${c.product.quality}`];try{let m,g="Id"in o;if("Id"in o){u=o,await RC(t,h,u);let v=Co(t,u.Id,"root"),w=await _n(v,c.output,c.sessionId);l=(await n.getConfigurationFromImage(t,n,r,w)).config;let C=u.Config.Labels||{},b=await Hs(c,await Gs(t.common),l,async()=>C,Tn);m=Bs(b),d=await ri(t,u.Id,p,l.remoteUser),await Ah(t,u.Id,d.user,p,l.initializeCommand)}else{l=o;let v=await gh(t,s,p),w=await s7(t,v,n,l,s,a),C=await Su(t,l,w.imageName,"image"in l,e1(l.runArgs)||l.containerUser,!1);m=C.collapsedFeaturesConfig;try{let b=await n.getWorkspaceConfiguration(n.repositoryPath,i);await DC(t,l,m,C.updatedImageName,h,b.workspaceMount)}finally{u=await Iu(t,h)}if(!u)return Rh(c.output,"Dev container not found.");d=await ri(t,u.Id,p,l.remoteUser),d.user!=="root"&&(d.launchRootShellServer?await Jl(d,d.launchRootShellServer,p,l.configFilePath.path):c.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await TC(u,t,d,l,m,Ue(fn.posix,p),g,c.cwd,void 0)}catch(m){throw AC(m,u,t,d,l)}}async function bC(t,e){let{common:r}=t,{volumeName:n}=e,i,o,s,a,c;gc(e)?(a=IC,c="Inspect Volume"):(a=jr(e.repositoryPath).volumeDestination,c="Recovery Container");let l=fn.join(t.common.extensionPath,"scripts","devContainerInspect.json"),u={image:Ph,name:c,configFilePath:xe.parse(l),settings:{"extensions.ignoreRecommendations":!0}};s=[`${ZN}=${n}`,`${ku}=${r.product.quality}`],r.setWorkspaceName(c);try{if(i=await Sh(t,s),i)await RC(t,s,i),o=await ri(t,i.Id,a,u.remoteUser);else{await JN(t);try{let d=`src=${n},dst=${a},type=volume,volume-driver=local`;await DC(t,u,void 0,Ph,s,d)}finally{i=await Iu(t,s)}if(!i)return Rh(r.output,"Dev container not found.");o=await ri(t,i.Id,a,u.remoteUser),o.user!=="root"&&(o.launchRootShellServer?await Jl(o,o.launchRootShellServer,a):r.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await TC(i,t,o,u,void 0,Ue(fn.posix,a),!0,r.cwd,void 0)}catch(d){throw AC(d,i,t,o,void 0)}}function AC(t,e,r,n,i){let o=t instanceof ue?t:new ue({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function TC(t,e,r,n,i,o,s,a,c){let{common:l}=e,u=Ot(l.cliHost,r.shellServer);s||await Gp(e,u,n);let d={cwd:a,dockerCLI:e.dockerCLI,env:l.env,containerId:t.Id,user:r.user,sessionId:l.sessionId,shutdownAction:n.shutdownAction,logLevel:l.getLogLevel(),delay:1e4},{shutdownArgs:f}=await yh(e,u,"singleContainer",d,s?n:void 0),{hostOrContainerPort:p,hostPortServer:h,remoteEnv:m,serverDownloaded:g}=await fo(l,r,n,i,c,n.devPort||uo);return f.hostPortServer=h,pc(l,r,p,t,o),{params:l,properties:r,config:n,resolvedAuthority:{host:Eo,port:p,extensionHostEnv:m},tunnelInformation:l.isLocalContainer?hc(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:g}}async function o7(t,e){var n;let r="image"in e?e.image:xu(t.common);return at(e)&&(t.common.progress(wt.BuildingImage),await t1(t,e,r,(n=t.buildNoCache)!=null?n:!1)),r}async function s7(t,e,r,n,i,o){var s;try{let a=r.imageName,c="image"in n?n.image:a;if(at(n))try{t.common.progress(wt.BuildingImage);let l=n.configFilePath;if(l.scheme==="file"){let d=fn.dirname(l.fsPath),f=fn.basename(d)===".devcontainer",p=f?fn.dirname(d):d,h=QN.c({cwd:p},["."]),m=await new Promise(v=>{let w=[];h.on("data",C=>w.push(C)),h.on("end",()=>v(Buffer.concat(w)))}),g=`/tmp/devcontainer-${Date.now()}`;await o.exec(`# Copy local config folder to remote
mkdir -p ${g}
${Zl(m.byteLength)} | tar --no-same-owner -x -C ${g}`,{stdin:m}),n=se(G({},n),{configFilePath:xe.from({scheme:qt.scheme,path:f?fn.posix.join(g,".devcontainer","devcontainer.json"):fn.posix.join(g,"devcontainer.json")})})}await t1(e,n,c,(s=t.buildNoCache)!=null?s:!1)}catch(l){throw l instanceof ue?l:new ue({description:"An error occurred building the image.",originalError:l})}return{imageName:c}}finally{qe(t,"rm","-f",i)}}function e1(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function Sh(t,e){let{common:r}=t,n=await Iu(t,e);if(t.expectExistingContainer&&!n)throw new ue({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",o=r.output.start(i);await qe(t,"rm","-f",n.Id),r.output.stop(i,o),n=void 0}return n}async function RC(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let o="Starting container",s=n.output.start(o);await qe(t,"start",r.Id),n.output.stop(o,s),await Iu(t,e)||Rh(n.output,"Dev container not found.")}return i}async function Iu(t,e){let r=await Ri(t,!0,e);return(await vo(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function t1(t,e,r,n){var d,f;let{cliHost:i,output:o}="cliHost"in t?t:t.common,s=Vt(i,e),a=await OC(s,i);if(!i.isFile(a))throw new ue({description:`Dockerfile (${a}) not found.`});let c=["build","-f",a,"-t",r],l=(d=e.build)==null?void 0:d.target;if(l&&c.push("--target",l),n)c.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")c.push("--cache-from",e.build.cacheFrom);else for(let p=0;p<e.build.cacheFrom.length;p++){let h=e.build.cacheFrom[p];c.push("--cache-from",h)}let u=(f=e.build)==null?void 0:f.args;if(u)for(let p in u)c.push("--build-arg",`${p}=${u[p]}`);c.push(await OC(o1(i,e),i));try{let p=se(G({},ei(t)),{output:ft(o,ae.Info)});await $r(p,...c)}catch(p){throw new ue({description:"An error occurred building the image.",originalError:p,data:{fileWithError:a}})}}async function DC(t,e,r,n,i,o){let{common:s}=t;s.progress(wt.StartingContainer);let a=e.appPort,c=typeof a=="number"||typeof a=="string"?[a]:a||[],l=[].concat(...c.map(J=>["-p",typeof J=="number"?`127.0.0.1:${J}:${J}`:J])),u=o?["--mount",o]:[],d=e.mounts?[].concat(...e.mounts.map(J=>["--mount",J])):[];if(t.cacheMount==="volume")d.push("--mount","type=volume,src=vscode,dst=/vscode");else if(t.cacheMount==="bind"){await Dr(s.localCacheFolder);let J=s.localCacheFolder.indexOf(",")!==-1?'"':"";d.push("--mount",`type=bind,${J}src=${s.localCacheFolder}${J},dst=/vscode`)}let f=e.containerEnv,p=f?Object.keys(f).reduce((J,H)=>(J.push("-e",`${H}=${f[H]}`),J),[]):[],h=e.containerUser?["-u",e.containerUser]:[],m=[];((r==null?void 0:r.allFeatures)||[]).some(J=>(_t||J.included)&&J.value&&J.init)&&m.push("--init"),((r==null?void 0:r.allFeatures)||[]).some(J=>(_t||J.included)&&J.value&&J.privileged)&&m.push("--privileged");let g=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(J=>(_t||J.included)&&J.value).map(J=>J.capAdd||[])));for(let J of g)m.push("--cap-add",J);let v=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(J=>(_t||J.included)&&J.value).map(J=>J.securityOpt||[])));for(let J of v)m.push("--security-opt",J);let w=[].concat(...[].concat(...((r==null?void 0:r.allFeatures)||[]).map(J=>(_t||J.included)&&J.value&&J.mounts).filter(Boolean)).map(J=>["--mount",`type=${J.type},src=${J.source},dst=${J.target}`])),C=((r==null?void 0:r.allFeatures)||[]).map(J=>(_t||J.included)&&J.value&&J.entrypoint).filter(Boolean),b=e.overrideCommand!==!1,_=b?["--entrypoint","/bin/sh"]:[],P=b?["-c",`echo Container started
trap "exit 0" 15
${C.join(`
`)}
while sleep 1 & wait $!; do :; done`]:[],x=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...l,...u,...d,...w,...a7(i),"-l",`vsch.remote.devPort=${e.devPort||uo}`,...p,...h,...e.runArgs||[],...m,..._,n,...P],k,A=new Promise((J,H)=>k=H),{started:D}=await vh(t,c7(i),A,s.output,s.getLogLevel()===ae.Trace),F="Starting container",V=s.output.start(F),ne=se(G({},ei(t)),{output:ft(t.common.output,ae.Info)});$r(ne,...x).then(k,k),await D,s.output.stop(F,V)}function vc(t){let e=(t.Config.Labels||{})[XN];return e||void 0}function zs(t){let e=(t.Config.Labels||{})[Ih];return e||void 0}function Th(t){let e=(t.Config.Labels||{})[PC];return e||void 0}function r1(t){let e=(t.Config.Labels||{})[ZN];return e||void 0}function n1(t){let e=(t.Config.Labels||{})[kC];return e||void 0}function a7(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function c7(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function Rh(t,e){throw t.write(Oe(e)),new Error(e)}function l7(t,e,r){let n=[];for(let i in r){let o=u7[i],s=typeof o=="function"?o(t,e,r):o;s===!0?n.push(i):typeof s=="string"?n.push(s):Array.isArray(s)&&n.push(...s)}return n}var u7={configFilePath:!1,image:!1,name:!1,forwardPorts:!1,appPort:!1,devPort:!1,portsAttributes:!1,otherPortsAttributes:!1,extensions:!1,runArgs:(t,e,r)=>{let n={"add-host":!0,"cap-add":!0,gpus:!0,hostname:!0,l:!0,label:!0,"security-opt":!0},i=[];for(let s of r.runArgs){let a=s.indexOf("="),c=a===-1?s.substr(2):s.substr(2,a);if(s.startsWith("--"))i.push(c);else if(s.startsWith("-"))for(let l of s.substr(1))i.push(l)}let o=[];for(let s of i)n[s]||o.push(s);return o},shutdownAction:!1,overrideCommand:!0,initializeCommand:!0,onCreateCommand:!1,updateContentCommand:!1,postCreateCommand:!1,postStartCommand:!1,postAttachCommand:!1,waitFor:!1,workspaceFolder:!1,workspaceMount:(t,e,r)=>i1(t,e,r.workspaceMount)?r.workspaceMount:!1,mounts:(t,e,r)=>r.mounts.filter(i1.bind(void 0,t,e)),settings:!1,containerEnv:!1,remoteEnv:!1,containerUser:!1,remoteUser:!1,updateRemoteUserUID:!1,userEnvProbe:!1,features:!1,hostRequirements:!1};function i1(t,e,r){let n=!!r&&d7(r);return n&&n.type==="bind"&&!!n.source&&f7(t.common.cliHost,e.rootFolderPath,n.source)}function d7(t){let e={src:"source",destination:"target",dst:"target"};return t.split(",").map(r=>r.split("=")).map(([r,n])=>[e[r]||r,n]).reduce((r,[n,i])=>(r[n]=i,r),{type:"bind"})}function f7(t,e,r){let{path:n}=t,i=n.relative(e,r);return!!i&&!i.startsWith("..")&&!n.isAbsolute(i)}var s1=K(require("path"));async function a1(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new Vw,l=[],u=await mD("vscode-remote-containers",async(h,m)=>{let g=await vD(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=l[g.sequence];w&&(w(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let d=s1.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[u.ipcHandlePath,t,ae[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=gI(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function Dh(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function c1({queue:t,done:e}){t.push({type:"cleanup"}),await e}var u1=K(require("util"));var d1=K(require("string_decoder")),dn="__UNIQUE__",Eo="127.0.0.1";async function OC(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await Pe({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:tt});return r.toString().trim()}return De(t,e.platform)}function yc(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?sw:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="ssh"?n.VSCODE_DOCKER_HOST=e.host:n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function si(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let r=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;r&&(e.host=r),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function Oh(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function Nh(t){return!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function _o(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function ai(t,e){try{return await $t(t,e)}catch{return}}async function vh(t,e,r,n,i){let o=await au(t,{event:["start"]});return{started:new Promise((s,a)=>{r.catch(u=>{o.terminate(),a(u)});let c=new d1.StringDecoder("utf8"),l="";o.stdout.on("data",async u=>{if(u){let d=c.write(u);i&&n.write(`Log: startEventSeen#data ${d.trim().replace(/\r?\n/g,`\r
`)}\r
`);let f=(l+d).split(`
`);l=f.pop();for(let p of f)if(p.trim())try{let h=JSON.parse(p);(h.status||h.Status)==="start"&&await p7(t,h,e)&&(o.terminate(),s())}catch(h){console.error(h),console.error(p)}}})})}}async function p7(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await $t(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(o=>n[o]===r[o])}function pc(t,e,r,n,i){let o=n.Ports.filter(u=>!!u.PublicPort),s="";if(t.authority&&i){let u=i.isWorkspaceFile?"workspace":"folder",d=e.remoteWorkspaceFolder||"/",f=i.isWorkspaceFile?So.posix.join(d,t.cliHost.path.basename(i.workspaceOrFolderPath)):d;s=`&${u}=${encodeURIComponent(`vscode-remote://${t.authority}${f}`)}`}let a=[...o.length?["Published Ports:"]:[],...o.map(u=>`${u.PrivatePort}/${u.Type} -> ${u.IP}:${u.PublicPort}`),...o.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${t.connectionToken}${s}`,""]:[]],c=a.reduce((u,d)=>Math.max(d.length,u),0),l="-".repeat(c);c>0&&t.output.write(`\r
\r
${l}\r
${a.join(`\r
`)}${l}\r
\r
`)}async function Lh(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await qe(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(Oe(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new ue({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}async function AN(t,e,r){try{return await yo(t,e)}catch(n){if(!r)throw n;try{await $r(t,"pull",e)}catch{throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(Oe(n.stderr.toString())),n}return yo(t,e)}}function Wt(t){return t.hostPath!==void 0}function ln(t){return t.repositoryPath!==void 0}function gc(t){return!ln(t)&&t.volumeName!==void 0}function pn(t){let e=p1("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function Au(t,e,r,n){let i=r?JSON.stringify({hostPath:t,localDocker:n,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(i,"utf8").toString("hex")}${e}`}function Ks(t,e,r,n,i,o){if(t){let a=jr(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${IC}`}function Fh(t){let e=p1("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function f1(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function p1(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function NC(t,e,r,n=!1){return!n&&await $y(t,e,r)||e}function h1(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}async function HN(t,e,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:fC(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(e&&(!s||!("workspaceMount"in r))){let c=await NC(t,e.rootFolderPath,n,o);if(!s){let l=t.path.relative(t.path.dirname(c),e.rootFolderPath);s=`/workspaces/${t.platform==="win32"?l.replace(/\\/g,"/"):l}`}if(!("workspaceMount"in r)){let l=`/workspaces/${t.path.basename(c)}`,u=t.platform!=="linux"?`,consistency=${i||"consistent"}`:"",d=c.indexOf(",")!==-1?'"':"",f=l.indexOf(",")!==-1?'"':"";a=`type=bind,${d}source=${c}${d},${f}target=${l}${f}${u}`}}return{workspaceFolder:s,workspaceMount:a}}function m1(t,e,r){if(t==="win32")return e;let n=`${h7(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function h7(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function fD(t,e){return t.with({path:So.posix.resolve(t.path,e)})}async function m7(t,e,r,n,i,o){let s=g7(e,r,n,i,o);return $r(t,...s)}function g7(t,e,r,n,i){let o=["exec","-it"];if(r&&o.push("-w",r),o.push("-u",e),n)for(let s in n)o.push("-e",`${s}=${n[s]}`);return o.push(t,...i),o}async function yh(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await a1(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?So.dirname(o.logFilePath):void 0,o.sessionStart);Dh(c,n,o.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await Dh(c,n,o.output)}),o.onDidChangeLogLevel(async f=>{n.logLevel=f,await Dh(c,n,o.output)});let l={},u=async()=>{let f=c1(c);l.hostPortServer&&await(0,u1.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};o.shutdowns.push(u);let d=i?uD(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:d}}function hc(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function o1(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?go(t,e,r):Fs(Vt(t,e))}async function ri(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await $t(t,e);o.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,d]=/([^:]*)(:(.*))?/.exec(l),f=v7(c.Config.Env),p=Co(t,e,l),h=await cu(t,e,l,o.loadNativeModule),m=Co(t,e,"root"),g=c.Mounts.find(C=>C.Type==="volume"&&C.Name==="vscode"),v=c.Mounts.find(C=>C.Type==="bind"&&C.Source===o.localCacheFolder),w=g&&So.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return Rp({params:o,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function v7(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function VN(t,e,r){if(!e)return;let{common:n,dockerEnv:i}=t,{cliHost:o,output:s}=n,a=o.platform==="win32",c=a?[o.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],l=a&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,u=typeof l=="string"?[...c,l]:l;if(!u.length)return;let d="initializeCommand",f=ft(s,ae.Info);try{f.raw(`[1mRunning the ${d} from devcontainer.json...[0m\r
\r
`),await Si({ptyExec:o.ptyExec,cmd:u[0],args:u.slice(1),env:i,output:f,onDidInput:r}),f.raw(`\r
`)}catch(p){if(p&&(p.code===130||p.signal===2))f.raw(`\r
[1m${d} interrupted.[0m\r
\r
`);else throw new ue({description:`The ${d} in the devcontainer.json failed.`,originalError:p})}}async function Ah(t,e,r,n,i){if(!i)return;let o=typeof i=="string"?["/bin/sh","-c",i]:i;if(!o.length)return;let s=t.common.postCreate,a="initializeCommand",c=ft(s.output,ae.Info);try{c.raw(`[1mRunning the ${a} from devcontainer.json...[0m\r
\r
`);let l=se(G({},ei(t)),{output:c,onDidInput:s.onDidInput});await m7(l,e,r,n,void 0,o),c.raw(`\r
`)}catch(l){if(l&&(l.code===130||l.signal===2))c.raw(`\r
[1m${a} interrupted.[0m\r
\r
`);else throw new ue({description:`The ${a} in the devcontainer.json failed.`,originalError:l})}}function xu(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=y7(e),n=So.basename(e);return Jp(`vsc-${n}-${r}`)}function y7(t){return l1.createHash("md5").update(t).digest("hex")}async function Gs(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await e.tmpdir(),"vsch","container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}async function g1(t){let{common:e,dockerCLI:r,dockerComposeCLI:n,dockerEnv:i}=t,{cliHost:o,output:s}=e;return{cliHost:o,dockerCLI:r,dockerComposeCLI:n,env:i,output:s}}var ct=K(require("vscode"));var Ys={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await ct.env.openExternal(ct.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Js={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await qe(t.dockerParams,"stop","-t","0",t.containerId),await ct.commands.executeCommand("workbench.action.reloadWindow")}},v1={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await qe(t.dockerParams,"rm","-f",t.containerId),await ct.commands.executeCommand("workbench.action.reloadWindow")}},wc={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await ct.commands.executeCommand("workbench.action.openRecent")}},y1={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await qe(t.dockerParams,"start",t.containerId),await ct.commands.executeCommand("workbench.action.reloadWindow")}},w1={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await ct.commands.executeCommand("remote-containers.attachToRunningContainer")}},xo={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=ct.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||ct.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await ct.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Cc=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:Js.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await ct.env.openExternal(ct.Uri.parse(t.data.learnMoreUrl))}}];async function Po(t,e,r,n=!1,i){let o=t instanceof ue?t:new ue({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let f=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(f!==void 0){let p=String(f),h=Oe(p);i.log.write(h)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await ct.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),ct.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[Ys]);let a=await s.reduce(async(f,p)=>await p.applicable(o,!0)?[...await f,p]:f,Promise.resolve([])),c=await ct.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(C1(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw ct.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(f,p)=>await p.applicable(o,!1)?[...await f,p]:f,Promise.resolve([])),u=l.map(f=>({label:f.title,action:f}));async function d(){let p=await(l.length?ct.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));p&&(C1(r,e,p.action.id),p.action.execute(o).catch(console.error),p.action.isLastAction||await d())}if(d().catch(console.error),n)throw ct.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function C1(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var re=K(require("vscode")),Bu=K(require("path")),oM=K(require("os"));var sM=K(hL()),To=K(iM());var Ree="remote.containers.defaultExtensions",li="remote-containers.revealLogTerminal",Rb="remote-containers.revealPostCreateTerminal",Hu="remote-containers.openDevContainerFile",aM="remote-containers.openRepositoryInVolume",rm="remote-containers.openRepositoryInUniqueVolume",cM="remote-containers.openRepositoryFromRemoteHub",lM="remote-containers.openPullRequestInVolume",Vu=re.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Gu=re.Uri.parse("https://aka.ms/vscode-dev-containers"),uM=new Gy,sr={onRemoveOnShutdownChangedEmitter:uM,onRemoveOnShutdownChanged:uM.event,results:new Map},ea,ui=t=>vI(t,re.env.appRoot);function nm(t,e,r,n){return async(i,o)=>{if(re.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");let{cliHost:a}=s.params;if(a.reconnect&&await a.reconnect(),s.dockerContainerId){let c=await ai(s.dockerParams,s.dockerContainerId);if(!c)throw re.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(c.State.Status==="paused")throw re.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(c.State.Status!=="running")throw re.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return se(G({connectionToken:void 0},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return Dee(c.params,c.properties).catch(l=>{}),r.set(i,c),t.log.stop(s,a),re.window.withProgress({location:re.ProgressLocation.Window,title:Jee,cancellable:!1},async l=>{await yR(c.params.backgroundTasks)}).then(void 0,l=>{t.show(),t.log.write(Oe(String(l&&(l.stack||l.message)||l)))}),se(G(G({connectionToken:void 0},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function Dee(t,e){if(!e.nodeExecutable)return;let r=await Me(Bu.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await ki(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var Db;async function Oee(){return Db||(Db=Zn(Bu.join(__dirname,"..",".."),Mi)),Db}var Wu={};async function Mi(t,e=!0){var r;if(t.counter&&((r=Wu[t.prompt])==null?void 0:r.from)===t.counter&&delete Wu[t.prompt],!Wu[t.prompt]){if(!e)return"";Wu[t.prompt]={result:Promise.resolve(re.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return Wu[t.prompt].result}async function Ge(t,e,r,n=!0,i=Oee(),o=!0){let s=!r;if(s){if(sr.results.size){let m=[...sr.results.values()].filter(g=>g.dockerParams)[0];return g1(m.dockerParams)}if(ea)return ea}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=jl(r));let a;if(!r){let m=(re.workspace.workspaceFolders||[])[0];if(re.env.remoteName==="wsl")m?r=jl(m.uri):r={wslDistro:Fy(re.env.remoteAuthority),wslPath:"/"};else if(re.env.remoteName==="ssh-remote"){let g=Nee(re.env.remoteAuthority);if(g){let{user:v,hostName:w,port:C}=g;a={host:`ssh://${v?`${v}@`:""}${w}${C?`:${C}`:""}`},m?r=m.uri.path:r="/"}}else(m==null?void 0:m.uri.scheme)==="file"&&(r=m.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=Qn(c,r,ui,n?Ln():"never",t.extensionPath,$i(),i,await Dl(re.env.appRoot),e);o&&!await Promise.race([l,Pi(1e3)])&&await re.window.withProgress({location:re.ProgressLocation.Notification,title:`[Setting up Remote-Containers (show log)](command:${li} "Show details in terminal")`,cancellable:!1},async()=>{await l});let u=await l,d=Nn(),f=Tc();if(!a){let m=re.workspace.getConfiguration("docker"),g=m.get("context")||u.env.DOCKER_CONTEXT;if(!g){let v={cliHost:u,dockerCLI:d,dockerComposeCLI:ti({exec:u.exec,env:{},output:tt},d,f),env:{},output:tt};g=await zw(v)||"default"}g&&g!=="default"?a={context:g}:(a=si(u.env)||{},"context"in a||(Ob(a,m,"host"),Ob(a,m,"certPath"),Ob(a,m,"tlsVerify"),Object.keys(a).length||(a=void 0)))}let p=G(G({},await i),yc(u,a)),h={cliHost:u,dockerCLI:d,dockerComposeCLI:ti({exec:u.exec,env:p,output:e},d,f),env:p,output:e};return s&&(ea=h),h}var im;function dM(t){if(im)return im;let e=Fee(t);return t.subscriptions.push(e),t.subscriptions.push(e.event(()=>{let r=ea==null?void 0:ea.cliHost;ea=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),im=e.event,im}function Nee(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function Ob(t,e,r){let n=e.get(r);n&&(t[r]=n)}var Lee=["remote.containers.dockerPath","remote.containers.executeInWSL","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function Fee(t){let e=new re.EventEmitter,r=re.workspace.onDidChangeConfiguration(async c=>{Lee.some(l=>c.affectsConfiguration(l))&&e.fire()}),n,i,o,s=()=>{(async()=>{i||(i=await Qn(void 0,process.cwd(),ui,Ln(),t.extensionPath,$i(),Promise.resolve({}),void 0,tt));let c={cliHost:i,dockerCLI:Nn(),dockerComposeCLI:ti({exec:i.exec,env:{},output:tt},Nn(),Tc()),env:{},output:tt},l=await zw(c);l===void 0?o=setTimeout(s,2*60*1e3):(l!==n&&(n!==void 0&&e.fire(),n=l),o=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=e.dispose;return e.dispose=()=>{r.dispose(),o&&clearTimeout(o),a.call(e)},e}async function ta(){let t=re.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return Nb(e)}return null}async function Nb(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=pn(t.authority);if(Wt(r))return null;if(ln(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function om(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Mee}}async function Mee(t){let e="Rebuild",r="Ignore",n=await re.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return re.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function qee(t,e){return t?fM():Array.from(new Set([...e,...re.workspace.getConfiguration().get(Ree)||[],...fM()]))}function fM(){let t=re.env.language,e=t.indexOf("-"),r=pM(t)||(e!==-1?pM(t.substr(0,e)):void 0);return r?[r]:[]}function pM(t){let e=t.toLowerCase();return re.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function $ee(){return re.env.isTelemetryEnabled}function hM(){return!!re.workspace.getConfiguration().get("workbench.enableExperiments")}function jee(){return!!re.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function sm(){return re.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function am(){return!!re.workspace.getConfiguration().get("remote.containers.experimentalUpdateRemoteUserUIDOnMacOS")}function cm(){var t;return(t=re.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function Uee(){let t=re.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function Bee(){return re.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function Nn(){return re.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function Ln(){return process.platform!=="win32"?"never":re.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function Tc(){return re.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function Lb(){let t=re.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return w0(t)}var Hee=t=>re.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(Lb())});function Vee(){let t=re.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function qi(t,e,r,n,i,o){let s={resolver:e,outcome:r};n&&(s.configProperties=JSON.stringify(Object.keys(n)),s.configExtensions=JSON.stringify(n.extensions||[]),s.configFeatures=JSON.stringify(Object.keys(n.features||{})),"image"in n?s.configType="image":at(n)?s.configType="dockerfile":"dockerComposeFile"in n&&(s.configType="dockerCompose")),i&&(s.hardwareId=i.osRelease.hardware,s.osReleaseId=i.osRelease.id,s.osReleaseVersion=i.osRelease.version);let a=o&&o.originalError,c=a&&(a.stack||a.message||String(a))||o&&o.description;c&&(s.errorMessage=c),t.sendTelemetryEvent("resolver",s)}var mM=class{constructor(e){this.onClose=e;this.writeEmitter=new re.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new re.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},lm=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new mM(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?Bu.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Gee(i,Lb,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>re.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=re.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Gee(t,e,r,n,i=void 0){let o=[];return r&&o.push(E0(r,()=>Math.min(ae.Debug,e()))),o.push(_0(t,e,n)),ft(b0(o,i))}async function Fb(t,e){let r=await ai(t,e.Id);if(r&&r.State.Status==="running")try{await qe(t,"stop",r.Id)}catch(n){re.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function um(t,e){let r=await ai(t,e.Id);if(r&&r.State.Status!=="running")try{await qe(t,"start",r.Id)}catch(n){re.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function gM(t,e){try{await qe(t,"rm",e)}catch(r){re.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function Mb(t,e){try{await qe(t,"volume","rm","--force",e)}catch(r){re.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function Wee(){return re.env.sessionId!=="someValue.sessionId"?re.env.sessionId:`${re.env.sessionId}_${Date.now()}`}function zee(t,e){let r=re.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function vM(t,e){return t.globalState.get("removeOnStartup")===e?(await t.globalState.update("removeOnStartup",null),!0):t.workspaceState.get("removeOnStartup",!1)}async function yM(t,e){await t.workspaceState.update("removeOnStartup",e)}async function qb(t,e){await t.globalState.update("removeOnStartup",e)}async function wM(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function zu(t,e){await t.globalState.update("buildNoCache",e)}async function Ku(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function CM(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=re.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await ta();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?xe.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await EM(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?re.ViewColumn.Beside:re.ViewColumn.One,preserveFocus:!0},a=await re.window.showTextDocument(re.Uri.file(e.logFile),s),c=new re.Position(a.document.lineCount-1,0);a.selection=new re.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await EM(o),!0}}return!1}function bM(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function EM(t){return t?re.commands.executeCommand("vscode.open",re.Uri.parse(t.toString()),{viewColumn:re.ViewColumn.One}):re.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:re.ViewColumn.One})}async function $b(t){if(sr.results.size)return[...sr.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=di(),r=re.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=Ue(t.path,De(o.uri,t.platform));return await oi(t,s,e)})),i=re.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=Ue(t.path,De(i,t.platform)),s=await oi(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function di(){return re.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function Kee(t,e,r="localhost"){await re.workspace.openTunnel({remoteAddress:{host:r,port:e}})}var _M=!1;function Yee(t,e){if(t.type==="socatNotFound"){let r="socatNotFound_doNotShow";!_M&&!e.globalState.get(r)&&(_M=!0,(async()=>{let n="Don't Show Again";await re.window.showWarningMessage("Cannot connect to socket: 'socat' not installed in WSL distro / SSH server.",n,"OK")===n&&await e.globalState.update(r,!0)})().catch(console.error))}}function SM(t,e){let r=new lm(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i={enabled:!0,skipNonBlocking:!1,output:yI(r.log,t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0)}};return{channel:r,postCreate:i}}async function Rc(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=t,h=jee(),m=se(G({computeExtensionHostEnv:!0},l),{appRoot:re.env.appRoot,localCacheFolder:$i(),extensionPath:r.extensionPath,connectionToken:h?sR:void 0,sessionId:Wee(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getExtensionsToInstall:qee,isCopyGitConfigEnabled:Uee(),credentialHelperConfigLocation:Bee(),dotfilesConfiguration:Vee(),progress:Xee(i),output:u,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,telemetry:$ee(),forwardServerPort:!0,web:h,getLogLevel:Lb,onDidChangeLogLevel:Hee,loadNativeModule:ui,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>zee(m,g),openTunnel:Kee,getTunnels:()=>Promise.resolve(re.workspace.tunnels),fireEvent:g=>Yee(g,r),onAdoptProcess:re.window.onDidOpenTerminal});return m}var Dc=`[Starting Dev Container (show log)](command:${li} "Show details in terminal")`,Jee=`[Configuring Dev Container](command:${Rb} "Show details in terminal")`,Qee={[wt.Begin]:"",[wt.CloningRepository]:"Cloning Repository",[wt.BuildingImage]:"Building image",[wt.StartingContainer]:"Starting container",[wt.InstallingServer]:"Installing server",[wt.StartingServer]:"Starting server",[wt.End]:""};function $i(){return Bu.join(oM.tmpdir(),"vsch")}function Xee(t){let e=0;return r=>{let n=wt.End-r,i=(100-e)/(n+1);t.report({message:Qee[r],increment:i}),e+=i}}async function xM(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return g0(e,r);let a=i?`${i}.${n}`:n,c=new sM.default(a,o,s);t.subscriptions.push(c);let l=new PM(c),u=Zee(r),d=hM()?(0,To.getExperimentationService)(a,o,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async f=>d&&hM()?d.isCachedFlightEnabled(f):!1,product:r,package:e}}var PM=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,G(G({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function Zee(t){switch(t.quality){case"stable":return To.TargetPopulation.Public;case"insider":return To.TargetPopulation.Insiders;case"exploration":return To.TargetPopulation.Internal;case void 0:return To.TargetPopulation.Team;default:return To.TargetPopulation.Public}}var Yu="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",jb="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function Ju(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(jb))return!0;let r="Got It",n="Learn More",i=await re.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(jb,!0),!0):(i===n&&re.env.openExternal(re.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var Ub="userConfirmedAttachToContainerRequiresTrust";async function Ro(t){if(t.globalState.get(Ub))return!0;let e="Got It",r="Learn More",n=await re.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(Ub,!0),!0):(n===r&&re.env.openExternal(re.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function kM(t){t.globalState.setKeysForSync([jb,Ub])}function IM(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var ut=K(require("vscode")),$e=K(require("path")),N2=K(require("fs"));var Ui=K(Sj()),L2=K(y2());var F2=K(require("util"));var w2=K(require("path"));var yae=["png","md","json","txt","map"],wae=["node_modules",".git","bin","out","dist",".vscode-test"],Cae=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],C2={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},b2={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},bae=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function k_(t,e){for(let r of e)if(r.metaData){if(bae.indexOf(w2.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(b2[a]){let c=b2[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(C2[a]){let c=C2[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function E2(t,e){return Eae(t,e.rootFolderPath,wae,yae)}async function Eae(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(C=>{if(m.count>=s)return m.count+=C.length,m.maxReached=!0,g(v);let b=C.length;if(b===0)return g(v);let _=C;m.count+C.length>s&&(m.maxReached=!0,b=s-m.count,_=C.slice(0,b)),m.count+=C.length;for(let P of _){let x=Array.isArray(P)?P[0]:P;(Array.isArray(P)?Promise.resolve((P[1]&il.File)!=0):t.isFile(t.path.join(p,x))).then(A=>{A?(v.push(x),--b==0&&g(v)):h.indexOf(x)===-1?a(t.path.join(p,x),h,m,D=>{if(v=v.concat(D),--b==0)return g(v)}):--b==0&&g(v)},()=>{if(--b==0)return g(v)})}},()=>g(v))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},l=p=>{for(let h of Cae)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},d=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,f,async m=>{m.forEach(u),p({configFiles:o,fileTypes:i,fileCount:f.count,mostPopularFileType:d(i)})})})}var hg=K(require("path"));var $o=K(require("vscode"));async function mg(){await $o.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function gg(t,e){let r=$o.workspace.fs;return{platform:t,path:t==="win32"?hg.win32:hg.posix,async isFile(n){try{return((await r.stat(ua(t,e,n))).type&$o.FileType.File)!=0}catch(i){if((i==null?void 0:i.code)==="FileNotFound")return!1;throw i}},async readFile(n){try{let i=await r.readFile(ua(t,e,n));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${n}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async writeFile(n,i){await r.writeFile(ua(t,e,n),i)},async readDir(n){return(await r.readDirectory(ua(t,e,n))).map(o=>o[0])},async readDirWithTypes(n){return r.readDirectory(ua(t,e,n))},async mkdirp(n){await r.createDirectory(ua(t,e,n))},async toCommonURI(n){return ua(t,e,n)}}}function _ae(t){return new RegExp("^[a-zA-Z]:/[^/].*$").test(t)}function ua(t,e,r){let i=t==="win32"||_ae(r)?"/"+r.replace(/\\/g,"/"):r;return e.with({path:i})}var vg=class{async readDocument(e){try{let r=await $o.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,r,n){let i=er(n,r);await $o.workspace.fs.writeFile(e,Buffer.from(i))}};var ge=K(require("vscode"));var ht=K(require("vscode")),_2=K(require("path"));async function I_(t,e){var i,o;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(i=await ht.window.showQuickPick(n.map(d=>({label:d.scheme==="file"?d.fsPath:d.toString(),uri:d})),{placeHolder:"Select a container configuration file"}))==null?void 0:i.uri:n[0];if(!s)return;let a=r.path.dirname(De(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ue(r.path,c),u=await O_(r,l);if(u){let d=se(G({},u.object),{configFilePath:u.uri});if("image"in d)return{workspace:l,config:u,imageName:d.image,manifest:await Od(d.image)};if(at(d)){let f=((o=d.build)==null?void 0:o.args)||{},p=Vt(r,d),h=await A_(r,p,f);if(h)return G({workspace:l,config:u},h)}if("dockerComposeFile"in d){let f=await nr(r,d),p=await e.readDockerComposeConfig(f,void 0),h=await S2(r,f,c,u.uri,d,p);if(h)return G({workspace:l,config:u},h)}return{workspace:l,config:u}}}else{let s="Add Files...";await ht.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Dd(t)}}async function S2(t,e,r,n,i,o){var u;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=yg(t,e,r,s),c=a?Ti(t,n,a):void 0,l=c&&await A_(t,c,((u=s.build)==null?void 0:u.args)||{});if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await Od(s.image)}}function yg(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function A_(t,e,r){let i=await Ot(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(a,c)=>r[c]||a);return{imageName:s,manifest:await Od(s)}}}}async function x2(t){let e=await I_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let i=await t.fileHost.readFile(r[0]);return Er(i.toString())}catch(i){t.output.write(Oe(String(i&&(i.stack||i.message)||i)))}return{}}});e&&await T_(t,e,{})}async function T_(t,e,r){var h;let{fileHost:n}=t,{workspace:i,config:o}=e,s=ht.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:i,quickPick:s,telemetry:await t.telemetry,output:t.output},c={featureSets:[]},l=await zc(),u=Tn({distFolder:l}),d=await _u(u,a.output);if(!d)return;d=se(G({},d),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(d),c=await fh(a,o.object,c,async()=>{var m,g;return G({"com.visualstudio.code.devcontainers.id":(m=e.manifest)==null?void 0:m.definitionName,version:(g=e.manifest)==null?void 0:g.definitionVersion},r)});let f=((h=c.featureSets.find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:h.features.filter(m=>m.included))||[];if(!f.length){await ht.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await D_(a,f,f.filter(m=>m.value!==!1));try{if(p){let m=o.text,g=o.text;for(let v of f){let w=p[v.id];if(w!==Vs(v)){let C=["features",v.id];w!==!1&&typeof v.value=="object"&&C.push(Rn(v));let b=Mt(g,C,w!==!1?w:void 0,{formattingOptions:{}});g=er(g,b)}}m!==g&&await Ot(n).applyEdits(o.uri,[{content:g,offset:0,length:o.text.length}],o.text)}}finally{s.dispose()}}async function wg(t,e,r,n){var c;if(!Rd())return e;let i=await R_(t,r,_2.basename(e.definitionFolder)),o=((c=((i==null?void 0:i.featureSets)||[]).find(l=>l.sourceInformation.type==="local-cache"))==null?void 0:c.features.filter(l=>l.included))||[],s=await D_(t,o,o.filter(l=>l.value!==!1),!0);if(!s)return;if(s==="back")return n();let a=e.configText;for(let l of o){let u=s[l.id];if(u!==Vs(l)){let d=["features",l.id];u!==!1&&typeof l.value=="object"&&d.push(Rn(l));let f=Mt(a,d,u!==!1?u:void 0,{formattingOptions:{}});a=er(a,f)}}return se(G({},e),{configText:a})}async function R_(t,e,r){var l;let{fileHost:n}=t,i;if("image"in e)i=await Od(e.image);else if(at(e)){let u=((l=e.build)==null?void 0:l.args)||{},d=Vt(n,e),f=await A_(n,d,u);i=f==null?void 0:f.manifest}else if("dockerComposeFile"in e){let u=await nr(n,e);if(u.length&&await n.isFile(u[0])){let d=await n.readFile(u[0]),f=Er(d.toString()),p=await S2(n,u,t.workspace.rootFolderPath,e.configFilePath,e,f);i=p==null?void 0:p.manifest}i=i||r&&await N_(r)||void 0}let o=await zc(),s=Tn({distFolder:o}),a={featureSets:[]},c=await _u(s,t.output);if(!!c)return c=se(G({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=await fh(t,e,a,async()=>({"com.visualstudio.code.devcontainers.id":i==null?void 0:i.definitionName,version:i==null?void 0:i.definitionVersion})),a}var Td={iconPath:new ht.ThemeIcon("check-all"),tooltip:"Finish"};async function D_(t,e,r,n=!1){if(!e.length)return{};let i={iconPath:new ht.ThemeIcon("info"),tooltip:"Open Documentation"},o=t.quickPick.onDidTriggerItemButton(l=>{let u=l.item.feature;ht.env.openExternal(ht.Uri.parse(u.documentationURL))}),s=await qn(t.quickPick,e.map(l=>({label:l.name,picked:r.indexOf(l)!==-1,buttons:l.documentationURL?[i]:void 0,feature:l})).sort((l,u)=>l.label.localeCompare(u.label)),"Select additional features to install",void 0,!0,n?[ht.QuickInputButtons.Back,Td]:[Td]);if(o.dispose(),!s)return;if(s.button===ht.QuickInputButtons.Back)return"back";let a=s.pick.map(l=>l.feature),c={};for(let l of e){let u=a.indexOf(l)!==-1;c[l.id]=u?Vs(l)||PN(l):!1}return s.button===Td?c:xae(t,c,a,()=>D_(t,e,a))}function Sae(t){let e=t.options&&t.options[Rn(t)];return e&&e.type==="string"&&("enum"in e||"proposals"in e)}async function xae(t,e,r,n){let i=r.filter(Sae);return async function o(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[Rn(l)],d=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:Vs(l)===h})),f=d.length===1?{pick:d[0],button:"ok"}:await qn(t.quickPick,d,u.description||"Select a value",void 0,void 0,[ht.QuickInputButtons.Back,Td],"proposals"in u);if(!f)return;if(f.button===ht.QuickInputButtons.Back)return c();let p=se(G({},s),{[l.id]:f.pick.value});return f.button===Td?s:o(p,a.slice(1),()=>o(s,a,c))}(e,i,n)}var P2="remote.containers.experimentalContainerFeatures";function k2(){return ht.commands.executeCommand("setContext","experimentalContainerFeatures",Rd()),ht.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(P2)&&ht.commands.executeCommand("setContext","experimentalContainerFeatures",Rd())})}function Rd(){return ht.workspace.getConfiguration().get(P2,!0)}var I2=K(require("path"));function A2(t){return{provideCompletionItems(e,r,n){let i=XP(e.getText(),e.offsetAt(r)),o=e.getWordRangeAtPosition(r)||new ge.Range(r,r);if(i.path[0]==="extensions"){let s=Xe(e.getText());return s.configFilePath=e.uri,Pae(s,o)}if(Rd()&&i.path[0]==="features"){let s=Xe(e.getText());s.configFilePath=e.uri;try{return kae(t,s,i,o)}catch(a){console.error(a)}}return[]}}}function Pae(t,e){let r=t&&t.extensions||[];if(Array.isArray(r)){let n=ge.extensions.all.filter(i=>!(i.id.startsWith("vscode.")||i.id==="Microsoft.vscode-markdown"||r.indexOf(i.id)>-1));if(n.length)return n.map(i=>{let o=new ge.CompletionItem(i.id),s=`"${i.id}"`;return o.kind=ge.CompletionItemKind.Value,o.insertText=s,o.range=e,o.filterText=s,o})}}async function kae(t,e,r,n){var o,s;let i=e&&e.features||{};if(typeof i=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=se(G({},e),{configFilePath:e.configFilePath.with({scheme:qt.scheme,authority:""})});let h=ge.env.remoteName&&ge.env.remoteName!=="test"?"linux":process.platform,m=((o=(ge.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||xe.file(process.cwd());t=se(G({},t),{fileHost:await gg(h,m)})}let{path:a}=t.fileHost,c=De(e.configFilePath,t.fileHost.platform),l=a.basename(c),u=a.dirname(c),d=Ue(a,l===".devcontainer.json"?u:a.dirname(u)),f=await R_(se(G({},t),{workspace:d}),e),p=((s=((f==null?void 0:f.featureSets)||[]).find(h=>h.sourceInformation.type==="local-cache"))==null?void 0:s.features.filter(h=>h.included))||[];if(r.path.length===2)if(r.isAtPropertyKey){let h=p.filter(m=>!(m.id in i));if(h.length)return h.map(m=>{let g=new ge.CompletionItem(m.id),v=`"${m.id}": `;return g.kind=ge.CompletionItemKind.Property,g.insertText=v,g.range=n,g.filterText=v,g})}else{let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=Rn(m),v=(m.options||{})[g]||{type:"boolean",description:"Set to true to install."},w=(v.type==="string"?("enum"in v&&v.enum||"proposals"in v&&v.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map(C=>({label:C,text:C}));return w.push({label:"{}",text:new ge.SnippetString(`{
	$1
}$0`)}),w.map(({label:C,text:b},_)=>{let P=new ge.CompletionItem(C);return P.kind=ge.CompletionItemKind.Value,P.insertText=b,P.range=n,P.sortText=`${_}_${C}`,P})}}else if(r.path.length===3){let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=m.options||{};if(r.isAtPropertyKey)return Object.keys(g).filter(v=>!(v in(i[h]||{}))).map(v=>{let w=new ge.CompletionItem(v),C=`"${v}": `;return w.kind=ge.CompletionItemKind.Property,w.insertText=C,w.range=n,w.filterText=C,w.detail=g[v].description,w});{let v=r.path[2],w=g[v];if(w)return(w.type==="string"?("enum"in w&&w.enum||"proposals"in w&&w.proposals||[""]).map(b=>`"${b}"`):["true","false"]).map((b,_)=>{let P=new ge.CompletionItem(b),x=b;return P.kind=ge.CompletionItemKind.Value,P.insertText=x,P.range=n,P.filterText=x,P.sortText=`${_}_${b}`,P})}}}}}async function T2(t){let e=await L_(t);if((e==null?void 0:e.scheme)===qt.scheme){let r=De(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await ge.window.showTextDocument(ge.Uri.parse(e.toString()))}async function L_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await ge.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Dd(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await ge.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function R2(t,e){let r=await L_(t);if(r){let n=Ot(t.fileHost);r.scheme==="file"&&!await vt(r.fsPath)?await on(kn,r,[],Ai):r.scheme==="vscode-remote"&&(n=new vg);let i=await n.readDocument(r);if(i){let s=Xe(i).extensions||[],a=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(s.indexOf(e)===-1){s.push(e);let c=Mt(i,["extensions"],s,{formattingOptions:{}});await n.applyEdits(r,c,i),await ge.window.showInformationMessage(`Extension has been added to the ${a}.`)}else await ge.window.showInformationMessage(`Extension is already included in the ${a}.`)}}}async function D2(t,e){var s,a;let r=await ge.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await L_(t);if(o){let c=Ot(t.fileHost);o.scheme==="file"&&!await vt(o.fsPath)?await on(kn,o,[],Ai):o.scheme==="vscode-remote"&&(c=new vg);let l=await c.readDocument(o);if(l){let d=(s=Xe(l).portsAttributes)!=null?s:{},f=(a=d[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(d&&f&&f.label===n)await ge.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{f.label=n,d[`${i}`]=f;let h=Mt(l,["portsAttributes"],d,{formattingOptions:{}});await c.applyEdits(o,h,l),await ge.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}function O2(t,e){let r=ge.languages.createDiagnosticCollection("devcontainer-features");return ge.window.activeTextEditor&&F_(ge.window.activeTextEditor.document,r,e.output),t.subscriptions.push(ge.workspace.onDidChangeTextDocument(n=>{n&&F_(n.document,r,e.output)})),t.subscriptions.push(ge.workspace.onDidOpenTextDocument(n=>{n&&F_(n,r,e.output)})),r.dispose}function F_(t,e,r){if(t&&I2.default.basename(t.uri.fsPath)==="devcontainer.json"){let n=Xe(t.getText()),i=n==null?void 0:n.features;if(!i){e.clear();return}let o=[];Object.keys(i).forEach(s=>{let a=uh(s,r);if(!a||a.sourceInformation.type!=="local-cache")for(let c=0;c<t.lineCount;c++){let l=t.lineAt(c);if(l.text.includes(s)){let u=l.text.indexOf(s),d=u+s.length,f=a==null?void 0:a.sourceInformation,p="Expected feature identifier to contain only alphanumeric and/or the '-' characters.",h=ge.DiagnosticSeverity.Error;f&&(p=`WARNING: Provided feature syntax is currently experimental and is subject to change.
`,h=ge.DiagnosticSeverity.Warning);let m={message:p,severity:h,range:new ge.Range(new ge.Position(c,u),new ge.Position(c,d))};o.push(m);break}}if(a&&a.sourceInformation.type==="github-repo")for(let c=0;c<t.lineCount;c++){let l=t.lineAt(c),u=a.sourceInformation;if(l.text.includes(s)){let d=l.text.indexOf(s),f=d+s.length,p={message:"Feature-set source can be found on GitHub.",range:new ge.Range(new ge.Position(c,d),new ge.Position(c,f)),code:{target:ge.Uri.parse(`https://github.com/${u.owner}/${u.repo}`),value:"github-repo"},severity:ge.DiagnosticSeverity.Information};o.push(p);break}}}),o.length>0?e.set(t.uri,o):e.clear()}}async function M2(t,e){return O2(t,e),{async openConfiguration(){return T2(e)},async createConfiguration(){return Dd(e)},async addExtensionToConfiguration(r){return R2(e,r)},async addPortLabelToConfiguration(r){return D2(e,r)},async configureContainerFeatures(){return x2(e)},createCompletionItemProvider(){return A2(e)}}}async function Dd(t){let{fileHost:e}=t,r=await Iae();if(r){let n=De(r,e.platform),i=Ue(e.path,n),o=await tp(e,i);if(o){let a="Continue";if(await ut.window.showInformationMessage(`The workspace could fail to open in a container: ${o}`,{modal:!0},a)!==a)return!1}let s=await Nd(t,i);if(s){let a=await e.toCommonURI(s);return a&&ut.window.showTextDocument(ut.Uri.parse(a.toString())),!0}}return!1}async function Iae(){let t=ut.workspace.workspaceFile,e=ut.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await mg();return}r=t}else if(e&&e.length)if(e.length>1){let n=await ut.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function qn(t,e,r,n,i,o,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=o?Array.isArray(o)?o:[ut.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(d=>{if(t.busy=!1,t.items=d,i)t.selectedItems=d.filter(f=>f.picked);else{let f=d.find(p=>p.picked);f&&(t.activeItems=[f])}},d=>{t.busy=!1,u(d)})),a.push(t.onDidAccept(()=>{let d=i?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(o)?{pick:d,button:"ok"}:d),a.forEach(f=>f.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(d=>{let f=i?t.selectedItems.slice():t.activeItems[0];l(o===!0?"back":{pick:f,button:d}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(d=>d.dispose()),t.dispose(),l(void 0)})),s){let d;a.push(t.onDidChangeValue(f=>{let p=f.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&d)t.items=t.items.filter(m=>m!==d),d=void 0;else if(!h){let m=t.items.filter(g=>g!==d);m.push(d={label:`Other: ${f}`,value:f}),t.items=m}}))}});return t.show(),c}var M_={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Nd(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await O_(r,e),a=!!sc(o==null?void 0:o.object)&&!!o;if(a){Vr(i,"exists");let l=De(o.uri,r.platform);if(!await ut.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let d=await r.toCommonURI(l);d&&ut.window.showTextDocument(ut.Uri.parse(d.toString()));return}}let c=ut.window.createQuickPick();return c.ignoreFocusOut=!0,q_(se(G({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces}))}async function q_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:G2(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:G2(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Cg(t,void 0);let d={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},f=await qn(t.quickPick,[d,...c,...l,...i?[M_]:[]],"How would you like to create your container configuration?");if(!f){Vr(n,"canceled");return}if(f.type==="help"){Vr(n,"help"),ut.env.openExternal(i);return}if(f.type==="predefined")return Cg(t,()=>q_(t));if(f.type==="dockerComposeFile")return Nae(t,f.dockerComposePath,()=>q_(t));if(f.type==="dockerfile")return Oae(t,f.dockerfilePath)}function q2(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function Aae(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await E2(e,r)),o=await z2(t.codespaces,k_.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await Fae(t.codespaces):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&q2(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[M_]:[],...s]:a=[...n?[M_]:[],...o],{items:a,stats:i}}async function Cg(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=Aae(t),o=await qn(t.quickPick,i.then(s=>s.items),"Select a container configuration definition",void 0,void 0,!!e);if(o==="back")return e();if(!o){Vr(r,"canceled");return}if(o.type==="help"){Vr(r,"help"),ut.env.openExternal(n);return}if(o.type==="showAll")return $2(t,(await i).stats,()=>Cg(t,e));if(o.type==="baseConfiguration")return j2(t,o,()=>Cg(t,e))}async function $2(t,e,r){let{telemetry:n}=t,i=await z2(t.codespaces,k_.bind(null,e)),o=await qn(t.quickPick,[...i],"Select a container configuration definition",void 0,void 0,!0);if(o==="back")return r();if(o&&o.type==="baseConfiguration")return j2(t,o,()=>$2(t,e,r));Vr(n,"canceled")}async function j2(t,e,r){let{telemetry:n}=t,i=await Tae(t,e);if(!i){Vr(n,"canceled");return}return i==="back"?r():(Vr(n,"definition",$e.basename(i.definitionFolder)),$_(t,i))}async function $_(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await jae(t,e)}finally{r.hide()}}async function Tae(t,e){let r=Xe(e.configText);return r.configFilePath=xe.file(e.configFilePath),at(r)?Rae(t,e,r,async()=>"back",(n,i)=>U2(t,n,r,i)):"dockerComposeFile"in r?Dae(t,e,r,async()=>"back",(n,i)=>B2(t,n,r,i)):wg(t,e,r,async()=>"back")}async function Rae(t,e,r,n,i){var c;let o=Vt({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await H2(o,s);return async function l(u,d,f){if(!d.length)return i(se(G({},e),{configText:u}),f);let p=d[0],h=await qn(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return f();let m=u;if(h.value!==p.default){let g=Mt(m,["build","args",p.name],h.value,{formattingOptions:{}});m=er(m,g)}return l(m,d.slice(1),()=>l(u,d,f))}(e.configText,a,n)}async function U2(t,e,r,n){var u;let i=Vt({platform:process.platform},r),o=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await V2(i,o),c=s.length?await qn(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let d of s){let f=c.indexOf(d)!==-1;if(f!==d.default){let p=Mt(l,["build","args",d.name],String(f),{formattingOptions:{}});l=er(l,p)}}return wg(t,se(G({},e),{configText:l}),r,s.length?()=>U2(t,e,r,n):n)}async function Dae(t,e,r,n,i){var a;let{fileHost:o}=t,s=await nr(o,r);if(s.length&&await o.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await o.readFile(s[0])).toString(),u=Er(l),d=((u==null?void 0:u.services)||{})[r.service]||{},f=t.workspace.rootFolderPath,p=yg(o,s,f,d);if(p){let h=r.configFilePath,m=Ti(o,h,p),g=((a=d.build)==null?void 0:a.args)||{},v=await H2(m,g),w;return async function C(b,_){if(!b.length)return w&&(c[s[0]]=w.toString()),i(se(G({},e),{files:c}),_);let P=b[0],x=await qn(t.quickPick,P.items,P.placeholder,void 0,void 0,!0);if(!!x){if(x==="back")return _();if(x.value!==P.default){w||(w=Ui.parseDocument(l,{lineCounter:new Ui.LineCounter}));let k=w.getIn(["services","app","build"]);k.has("args")||k.set("args",new Ui.YAMLMap),k.get("args").set(P.name,x.value)}return C(b.slice(1),()=>C(b,_))}}(v,n)}}return i(e,n)}async function B2(t,e,r,n){var c;let i=!1,o=e.files||{},{fileHost:s}=t,a=await nr(s,r);if(a.length&&await s.isFile(a[0])){let l=o[a[0]]||(await s.readFile(a[0])).toString(),u=Er(l),d=((u==null?void 0:u.services)||{})[r.service]||{},f=t.workspace.rootFolderPath,p=yg(s,a,f,d);if(p){let h=r.configFilePath,m=Ti(s,h,p),g=((c=d.build)==null?void 0:c.args)||{},{options:v,hasOptions:w}=await V2(m,g);i=!!v.length;let C=v.length?await qn(t.quickPick,v,w?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!C)return;if(C==="back")return n();let b;for(let _ of v){let P=C.indexOf(_)!==-1;if(P!==_.default){b||(b=Ui.parseDocument(l,{lineCounter:new Ui.LineCounter}));let x=b.getIn(["services","app","build"]);x.has("args")||x.set("args",new Ui.YAMLMap),x.get("args").set(_.name,String(P))}}b&&(o[a[0]]=b.toString())}}return wg(t,se(G({},e),{files:o}),r,i?()=>B2(t,e,r,n):n)}async function H2(t,e){let r=(await Me(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);return o.map(([,s,a,c,l])=>{let u=e[c]||l,d=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),f=d.findIndex(p=>p.value===u);return f!==-1&&d.unshift(...d.splice(f,1)),{placeholder:s||c,name:c,default:u,items:d}})}async function V2(t,e){let r=(await Me(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);let s=o.map(([,c,l,u,d])=>{let p=(e[u]||d)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function G2(t,e){let r=ut.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function Oae(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await bg()).find(a=>$e.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=$e.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==$e.sep?a.replace($e.sep===$e.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),d=r.platform==="win32"?u.replace(/\\/g,"/"):u,f="dockerFile"in Xe(s.configText)?["dockerFile"]:["build","dockerfile"],p=Mt(s.configText,f,d,{formattingOptions:{}}),h=er(s.configText,p);return Vr(i,"dockerFile"),$_(t,se(G({},s),{configText:h}))}else{Vr(i,"existingDockerfileDefinitionNotFound");return}}async function Nae(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=Er(s);if(!a){await ut.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await qn(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){Vr(o,"canceled");return}let d=typeof u=="string"?u:u.label,p=(await bg()).find(h=>$e.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=$e.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==$e.sep?h.replace($e.sep===$e.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(i.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),w=n.platform==="win32"?v.replace(/\\/g,"/"):v,C=Xe(p.configText).dockerComposeFile,b=Array.isArray(C)?C.slice(1):[],_=[w,...b],P=Mt(p.configText,["dockerComposeFile"],_,{formattingOptions:{}}),x=er(p.configText,P),k=Mt(x,["service"],d,{formattingOptions:{}}),A=er(x,k),D=b.reduce((V,ne)=>(V[go({platform:process.platform},{configFilePath:xe.file(p.configFilePath)},ne).fsPath]=!0,V),{}),F=se(G({},p),{configText:A,async copyFile(V,ne){if(D[V]){let Y=this.files&&this.files[V]||(await Me(V)).toString(),J=Er(Y);J.version&&c&&J.version!==c&&(Y=Y.replace(new RegExp(`^(version:.*)(${J.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let H=Object.keys(J&&J.services||{});H.length&&(Y=Y.replace(new RegExp(`\\b${H[0]}\\b`),d)),await n.writeFile(ne,Buffer.from(Y))}else{let Y=this.files&&this.files[V]?Buffer.from(this.files[V]):await Me(V);await n.writeFile(ne,Y)}}});return Vr(o,"dockerComposeFile"),$_(t,F)}else{Vr(o,"existingDockerComposeDefinitionNotFound");return}}function Vr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function Lae(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var W2=["docker-existing-docker-compose","docker-existing-dockerfile"];async function z2(t,e){let r=(await bg()).filter(n=>W2.indexOf($e.basename(n.definitionFolder))===-1);return t&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),e?(await e(r),r.sort(Lae)):r.sort((n,i)=>n.label.localeCompare(i.label))}async function Fae(t){let e=(await bg()).filter(r=>W2.indexOf($e.basename(r.definitionFolder))===-1);return e=e.filter(r=>q2(r)),t&&(e=e.filter(r=>!/^\s*no\b/i.test(r.metaData.get("codespaces")||"yes"))),e.sort((r,n)=>r.label.localeCompare(n.label))}async function bg(){let t=new L2.default,e=await zc(),r=$e.join(e,"node_modules","vscode-dev-containers","containers"),n=$e.join(e,"node_modules","vscode-dev-containers","containers-readmes"),i=await Kr(r);return(await Promise.all(i.map(async s=>{var w;let a=$e.join(r,s),c=await Hp(a),l=c&&await $ae(c);if(!l)return;let u=Xe(l);u.configFilePath=xe.file(c);let[,d,f]=((w=u.name)==null?void 0:w.match(/^(.*)(\([^)]*\))$/))||[],p=(d==null?void 0:d.trim())||u.name||s,h=f,m,g=$e.join(n,s,"README.md"),v=new Map;if(await vt(g))try{let C=await Me(g,{encoding:"utf8"}),b=/\#\s*summary.*\n*(.*)/i.exec(C);if(b){let _=t.render(b[1]);m=Mae(_);let P=m.indexOf(". ");P!==-1&&(m=m.substr(0,P+1))}v=qae(C)}catch(C){console.error(C)}return{label:p,description:h,type:"baseConfiguration",detail:m,definitionFolder:a,configText:l,configFilePath:c,metaData:v}}))).filter(s=>!!s)}function Mae(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function qae(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let l=a.match(o[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function $ae(t){return await vt(t)?(await Me(t)).toString():void 0}async function jae(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",l=(await Y2(e.definitionFolder)).map(f=>$e.relative(e.definitionFolder,f)),u,d;for(let f of l){let p=$e.join(e.definitionFolder,f),h=p===e.configFilePath,m=r.path.sep!==$e.sep?f.replace($e.sep===$e.win32.sep?/\\/g:/\//g,r.path.sep):f,g=r.path.join(a,m);if(h&&!i&&o){let v=Xe(e.configText);try{d=Uae(r,v,g,o)}catch(w){await Hae(w,r,g,m,s);return}g=De(o.uri,r.platform)}else if(await r.isFile(g)){let v=await ut.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(d||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Me(p);await r.writeFile(g,v)}}return u}function Uae(t,e,r,n){let i=n.text,o=De(n.uri,t.platform);if("image"in e)i=kt(i,["image"],e.image);else if("dockerFile"in e){let u=Kc(t,r,o,e.dockerFile);if(i=kt(i,["dockerFile"],u),e.context){let d=Kc(t,r,o,e.context);i=kt(i,["context"],d)}}else if("build"in e){let u=Kc(t,r,o,e.build.dockerfile);if(i=kt(i,["build","dockerfile"],u),e.build.context){let d=Kc(t,r,o,e.build.context);i=kt(i,["build","context"],d)}i=kt(i,["build","target"],e.build.target),i=kt(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let u=Bae(t,r,o,e.dockerComposeFile);i=kt(i,["dockerComposeFile"],u),i=kt(i,["service"],e.service),i=kt(i,["workspaceFolder"],e.workspaceFolder)}let s=U_(e.settings,n.object.settings);i=kt(i,["settings"],s);let a=j_(n.object.forwardPorts,e.forwardPorts);i=kt(i,["forwardPorts"],a);let c=j_(n.object.extensions,e.extensions);if(i=kt(i,["extensions"],c),"image"in e||at(e)){let u=j_(n.object.mounts,e.mounts);i=kt(i,["mounts"],u);let d=U_(e.containerEnv,n.object.containerEnv);i=kt(i,["containerEnv"],d),i=kt(i,["containerUser"],e.containerUser);let f=K2(n.object.runArgs,e.runArgs);i=kt(i,["runArgs"],f)}i=kt(i,["postCreateCommand"],e.postCreateCommand);let l=U_(e.remoteEnv,n.object.remoteEnv);return i=kt(i,["remoteEnv"],l),i=kt(i,["remoteUser"],e.remoteUser),i}function kt(t,e,r){if(r===void 0)return t;let n=Mt(t,e,r,{formattingOptions:{}});return er(t,n)}function Bae(t,e,r,n){return Array.isArray(n)?n.map(i=>Kc(t,e,r,i)):Kc(t,e,r,n)}function Kc({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function j_(t,e){var r;return(r=K2(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function K2(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function U_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function O_(t,e){let r=await Bp(t,e.configFolderPath);if(!r)return;let n=await Ot(t).readDocument(r);if(!n)return;let i=Xe(n);return{uri:r,text:n,object:i}}async function Y2(t){let e=await Kr(t);return[].concat(...await Promise.all(e.map(async r=>{let n=$e.join(t,r);return(await(0,F2.promisify)(N2.lstat)(n)).isDirectory()?Y2(n):n})))}async function Hae(t,e,r,n,i){i.write(Oe(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await ut.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&ut.window.showTextDocument(ut.Uri.parse(o.toString()))}async function Od(t){return(await Vae()).find(r=>{var n,i;return(i=(n=r.build)==null?void 0:n.tags)==null?void 0:i.some(o=>{let c=`^mcr.microsoft.com/vscode/devcontainers/${o.split(/\$\{[^}]*\}/).map(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(c).test(t)})})}async function Vae(){let t=$e.join(await zc(),"node_modules","vscode-dev-containers","manifests");return(await Promise.all((await Kr(t)).map(e=>N_(e,t)))).filter(Boolean)}async function N_(t,e){e=e||$e.join(await zc(),"node_modules","vscode-dev-containers","manifests");let r=$e.join(e,t,"definition-manifest.json");if(await vt(r)){let n=(await Me(r)).toString(),i=Xe(n);return i.definitionName=t,i}}async function zc(){let t=await nl($e.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await nl($e.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return $e.join(__dirname,...t)}async function J2(t,e,r,n,i,o){let s=pn(r);if(Wt(s)&&!await Be.workspace.requestWorkspaceTrust({message:Yu}))return wr(s.hostPath)?(await Be.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Be.commands.executeCommand("remote-containers.reopenInWSL")):(await Be.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Be.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=ln(s);return a&&!await Ju(t,s.repositoryPath)?(await Be.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):se(G({},await Gae(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function Gae(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&wr(t.hostPath)&&!!Be.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Be.commands.executeCommand("setContext","canReopenInWSL",!0);let u=t.settings,d="localDocker"in t&&t.localDocker,f=!!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d)&&(!!Be.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Be.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&Be.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d);p&&Be.commands.executeCommand("setContext","canReopenLocally",!0);let h;return Be.window.withProgress({location:Be.ProgressLocation.Notification,title:Dc,cancellable:!1},async m=>{let g=Zn(e.extensionPath,Mi),{cliHost:v,originalCwd:w}=await Wae(t,e.extensionPath,$i(),g,i.product,a),C=G(G({},await g),yc(v,t.settings)),b=G(G({},v.env),C),_=await Rc({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:m,cliHost:v,env:b,cwd:v.cwd,isLocalContainer:Nh(C),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),P={async createConfiguration(x,k){return Nd({fileHost:k,telemetry:i,output:a,existingFilesLearnMoreLink:Vu,predefinedDefinitionsLearnMoreLink:Gu,openConfigurationCommandId:Hu},Ue(B_.posix,x))},async showError(x,...k){return await Be.window.showErrorMessage(x,{modal:!0},...k)}};return h={common:_,parsedAuthority:t,dockerCLI:Nn(),dockerComposeCLI:ti({exec:_.cliHost.exec,env:G(G({},C),In(C)),output:_.output},Nn(),Tc()),dockerEnv:C,workspaceMountConsistencyDefault:sm(),updateRemoteUserUIDOnMacOS:am(),cacheMount:cm()?"volume":"none",configurationTracking:om(e.workspaceState),removeOnStartup:await vM(e,o),buildNoCache:await wM(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:di(),originalCwd:w,configProvider:P},await Lh(h),MN(h)}).then(m=>(s(async g=>{await yM(e,g&&m.dockerContainerId||!1),await zu(e,g==="rebuildNoCache"?o:!1)}),qi(i,H_(t),"success",m.config,m.properties),m),m=>{var x;let g=m instanceof ue?m:new ue({description:"An error occurred setting up the container.",originalError:m});ln(t)&&(g.volumeName=t.volumeName,g.volumeName===dn&&(g.volumeName=jr(t.repositoryPath).uniqueVolumeName),g.repositoryPath=t.repositoryPath,g.folderPath=t.folder),qi(i,H_(t),"failure",g.config,g.containerProperties,g);let v="onTheSide",w=(x=g.data)==null?void 0:x.fileWithError,C=w&&(h==null?void 0:h.common.cliHost.path.basename(w))||"devcontainer.json",b=Wt(t)?[{id:"openFileWithErrorLocally",title:`Open ${C} Locally`,isLastAction:!0,applicable:async(k,A)=>p&&!(A&&l),async execute(){let k=h==null?void 0:h.common.cliHost,A=w?k.type==="wsl"?await k.toCommonURI(w):xe.file(w):void 0;await Ku(e,t.hostPath,A,c,v);let D=Be.Uri.file(t.hostPath);await Be.commands.executeCommand("vscode.openFolder",D)}},{id:"openFileWithErrorinWSL",title:`Open ${C} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let k=Be.Uri.parse((await $l(t.hostPath,a)).toString());await Ku(e,k.path,w?k.with({path:w}):void 0,c,v),await Be.commands.executeCommand("vscode.openFolder",k)}},{id:"openFileWithErrorinSSH",title:`Open ${C} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let k=t.settings,A=Be.Uri.parse(Ol(k.host,t.hostPath).toString());await Ku(e,A.path,w?A.with({path:w}):void 0,c,v),await Be.commands.executeCommand("vscode.openFolder",A)}}]:[],_=ln(t)?t.inspectVolume?[xo]:[{id:"reopenInRecoveryContainer",title:`Open ${C} in Recovery Container`,isLastAction:!0,applicable:(k,A)=>!0,execute:async k=>{await Ku(e,t.repositoryPath,w?xe.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await Be.commands.executeCommand("remote-containers.inspectVolume",k.volumeName,k.repositoryPath,k.folderPath)}},xo,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(k,A)=>!A,async execute(){Be.env.openExternal(Be.Uri.parse(t.repositoryPath))}}]:[],P=gc(t)?[xo]:[];return g.actions=[...Cc,Js,v1,...b,..._,...P,wc,Ys],zae(g),Po(g,H_(t),i,!0,r)})}async function Wae(t,e,r,n,i,o){let{settings:s}=t,a=s&&"host"in s&&s.host||void 0;if(Wt(t)){let c=Ue(B_,t.hostPath),l=c.rootFolderPath,u=await Qn(a,c.rootFolderPath,ui,Ln(),e,r,n,i,o,t.localDocker);return u.cwd!==c.rootFolderPath&&(c=Ue(u.path,c.isWorkspaceFile?u.path.join(u.cwd,B_.basename(t.hostPath)):u.cwd)),o.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),Oh(o,t.settings),t.localDocker&&o.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:u,originalCwd:l}}else{let c=process.cwd();return{cliHost:await Qn(a,c,ui,Ln(),e,r,n,i,o),originalCwd:c}}}function H_(t){return Wt(t)?"config":ln(t)?t.inspectVolume?"volume":"repository":"volume"}function zae(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Be.env.openExternal(Be.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var jo=K(require("vscode"));var Q2=K(require("util"));var $n=K(require("path"));async function X2(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new ue({description:"Cannot attach without commit id for the remote extension host."});i=await ri(t,e.Id,r.workspaceFolder,r.remoteUser);let s=Ot(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,remoteEnv:l,serverDownloaded:u}=await fo(n,i,r,void 0,void 0,uo);if(Kae(n,i,s,r.configFilePath),Jae(n,i,s,r.configFilePath),pc(n,i,a,e,Ue($n.posix,"/")),c){let d=async()=>{await(0,Q2.promisify)(c.close.bind(c))()};n.shutdowns.push(d)}return{params:n,properties:i,config:r,resolvedAuthority:{host:Eo,port:a,extensionHostEnv:l},tunnelInformation:n.isLocalContainer?hc(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:u}}catch(o){let s=o instanceof ue?o:new ue({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function Kae(t,e,r,n){e.installFolder&&Z2(t,e,r,n).catch(console.error)}async function Z2(t,e,r,n){try{await ki(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 16
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],uR(e),{print:"off"})}catch(i){i&&i.code===1?await Yae(t,e,r,n):i&&i.code!==2&&await Pi(6e4)}return Z2(t,e,r,n)}async function Yae(t,e,r,n){let i=await pR(t,e);await Mw(n,async()=>{let o=await xg(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!Xae(o.config.extensions||[],i)){let s=Mt(o.text,["extensions"],i,{formattingOptions:{}});await on(r,n,s,o.text)}})}function Jae(t,e,r,n){eH(t,e,r,n).catch(console.error)}async function eH(t,e,r,n){try{let i=Dp(e),o=$n.posix.dirname(i),s=$n.posix.basename(i);await ki(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 16
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
		`],o,{print:"off"})}catch(i){i&&i.code===1&&await Qae(t.cliHost,e,r,n)}return eH(t,e,r,n)}async function Qae(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${Dp(e)}`),o=Xe(i)||{};await Mw(n,async()=>{let s=await xg(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(s.config.settings||{})!==JSON.stringify(o)){let a=Mt(s.text,["settings"],o,{formattingOptions:{}});await on(r,n,a,s.text)}})}function Xae(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function tH(t,e){let r=_g(t,e.Name),n=await cH(r);return n||(r=iH(t,e.Config.Image),n=await cH(r)),n}async function rH(t,e,r,n,i){let o=xe.file(_g(r,n.Name)),s=await xg(t,e,o,i);return s.exists||(o=xe.file(iH(r,n.Config.Image)),s=await xg(t,e,o,i)),s}function Eg(t){return $n.join(t,"nameConfigs")}function _g(t,e){let r=e.startsWith("/")?e.substr(1):e;return $n.join(Eg(t),`${sH(r)}.json`)}async function nH(t){try{let e=Eg(t);return(await Kr(e)).filter(n=>n.endsWith(".json")).map(n=>({name:aH(n.substr(0,n.length-5)),uri:xe.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function Sg(t){return $n.join(t,"imageConfigs")}function iH(t,e){return $n.join(Sg(t),`${sH(e)}.json`)}async function oH(t){try{let e=Sg(t);return(await Kr(e)).filter(n=>n.endsWith(".json")).map(n=>({image:aH(n.substr(0,n.length-5)),uri:xe.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function sH(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function aH(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function cH(t){if(!await vt(t))return;let e=await Me(t),r=Xe(e.toString())||{};return r.configFilePath=xe.file(t),r}async function xg(t,e,r,n){let i=await e.readDocument(r),o=i||Ai,s=Xe(o)||{},a=ec({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},s);return a.configFilePath=r,{exists:!!i,text:o,config:a}}async function lH(t,e,r,n,i){return await Ro(t)?se(G({},await Zae(t,e,r,n,i)),{isTrusted:!0}):(await jo.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Zae(t,e,r,n,i){let o;return jo.window.withProgress({location:jo.ProgressLocation.Notification,title:Dc,cancellable:!1},async s=>{var a,c;try{let l=Fh(r),{settings:u}=l,d="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${d}\r
`),Oh(n.log,u);let f=u&&"host"in u&&u.host||void 0,p=l.cwd||((f==null?void 0:f.startsWith("ssh://"))?"/":process.cwd()),h=Zn(t.extensionPath,Mi),m=await Qn(f,p,ui,Ln(),t.extensionPath,$i(),h,e.product,n.log),g=Nn(),v=G(G({},await h),yc(m,u)),w=ti({exec:m.exec,env:G(G({},v),In(v)),output:n.log},Nn(),Tc()),C=G(G({},m.env),v),b=await ai({cliHost:m,dockerCLI:g,dockerComposeCLI:w,env:C,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!b)throw new ue({description:`Cannot attach to the container with name/id ${d}, it no longer exists.`,data:{reload:!1,attach:!0}});let _=(c=(a=(jo.workspace.workspaceFolders||[void 0])[0])==null?void 0:a.uri)==null?void 0:c.path,P=await rH(m,kn,t.globalStoragePath,b,_);if(_&&P.config.workspaceFolder!==_){let F=Mt(P.text,["workspaceFolder"],_,{formattingOptions:{}});await on(kn,P.config.configFilePath,F,P.text)}let x={common:await Rc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:m,env:C,cwd:p,isLocalContainer:Nh(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:l,dockerCLI:g,dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:sm(),updateRemoteUserUIDOnMacOS:am(),cacheMount:cm()?"volume":"none",configurationTracking:om(t.workspaceState),userRepositoryConfigurationPaths:[]};await Lh(x);let k=_o(u),A=b.Name.startsWith("/")?b.Name.substr(1):b.Name,D=`Container ${b.Config.Image} (${A})${k}`;if(x.common.setWorkspaceName(D),b.State.Status!=="running")throw new ue({description:`Cannot attach to the container ${b.Config.Image} (${A})${k}, it is not running.`,params:x.common,containerId:b.Id,dockerParams:x,data:{reload:!1,start:!0}});return await X2(x,b,P.config)}catch(l){let u=l instanceof ue?l:new ue({description:"An error occurred attaching to the container.",originalError:l});throw u.actions=[y1,w1,...Cc,Js,xo,wc,Ys],u}}).then(s=>(qi(e,"attach","success",o,s.properties),s),s=>{let a=s instanceof ue?s:new ue({description:"An error occurred attaching to the container.",originalError:s});return qi(e,"attach","failure",o,a.containerProperties,a),Po(a,"attach",e,!0,n)})}var gt=K(require("vscode"));var mt=K(require("vscode")),uH=K(require("path")),da=K(require("os")),Ld=K(require("fs")),dH=K(require("child_process")),fH=K(Vf());async function Pg(t){rce()?await new pH().downloadAndInstallDocker(t):mH()?await new hH().downloadAndInstallDocker(t):await mt.env.openExternal(mt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var V_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await mt.window.withProgress({location:mt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(o);mt.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new gH(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await mt.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${tce()}.${this.fileExtension}`;return await ice(this.downloadUrl,e),e}handleError(e,r,n){mt.window.showErrorMessage(e,{title:r}).then(i=>{i&&mt.env.openExternal(mt.Uri.parse(n))})}},pH=class extends V_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await yH(r,n)}finally{try{await Ld.promises.stat(e),await Ld.promises.unlink(e)}catch{}}}},hH=class extends V_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await nce(n,r,{addDockerEnv:!1})}},ece=0;function tce(){return uH.join(da.tmpdir(),`${mt.env.sessionId}-${ece++}.tmp`)}function rce(){return da.platform()==="win32"}function mH(){return da.platform()==="darwin"}async function nce(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new mt.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:mt.TaskScope.Workspace,e,"Docker",new mt.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||da.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await mt.tasks.executeTask(i);return new Promise((u,d)=>{let f=mt.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(f.dispose(),p.exitCode&&r.rejectOnError&&d(p.exitCode),u())})})}var gH=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new wH(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await yH("docker -v",this.output),!0}catch{return!1}}};async function ice(t,e){await new Promise((r,n)=>{let i=Ld.createWriteStream(e);fH.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var vH=10*1024;async function yH(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||vH),o=Buffer.alloc(r&&r.maxBuffer||vH);return await oce(t,e,r,n,i,n,o),{stdout:G_(i),stderr:G_(o)}}async function oce(t,e,r,n,i,o,s,a){return await new Promise((c,l)=>{let u,d=0,f=0;r=r||{},r.shell=!0,sce(r,e);let p=dH.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${G_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=o!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),i&&(d+=i.write(m,d))}),(o||s)&&p.stderr.on("data",h=>{let m=h.toString();o&&o(m,p),s&&(f+=s.write(m,f))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function sce(t,e){var r,n;!mH()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:G({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function G_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var wH=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function Pr(t,e,r){var o;let n=(o=(gt.workspace.workspaceFolders||[])[0])==null?void 0:o.uri;n&&(n.scheme==="file"&&wr(n.fsPath)||jl(n))&&(e=await Ge(t,e.output,n));let i=await Fd(e,r);if(i==="permission")return await gt.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&gt.env.openExternal(gt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(i==="ssh")return await gt.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&gt.commands.executeCommand(li),!1;if(i==="daemon")return await gt.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&gt.commands.executeCommand(li),!1;if(!i||i==="command"){if(e.cliHost.type==="wsl")await gt.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&gt.env.openExternal(gt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="Ignore",c=i===!1?[s,a]:[s],l=await gt.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0},...c);if(l===s)Pg(e.output).then(console.error);else if(l===a)return!0}return!1}return i==="wsl1"?(await gt.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&gt.env.openExternal(gt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Fd(t,e){var s,a,c,l;let r;try{let u=await qe(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let d=u.stderr.toString();d&&t.output.write(Oe(d))}catch(u){console.error(u);let d=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();d&&t.output.write(d);let f=u&&(u.stderr?u.stderr.toString():u.message)||"";f&&t.output.write(Oe(f)),Md(e,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=Ts(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Md(e,"error",void 0,n),"daemon";if(!i)return Md(e,"unparsed",n),!0;let o=!Ka(i,[1,35]);return!o&&await Kw(t)?(Md(e,"podman",n),!0):(Md(e,o?"success":"failure",n),o)}function Md(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function CH(t){try{return await Ms(t,"version"),!0}catch{return await gt.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&gt.env.openExternal(gt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var Yc=K(require("vscode"));var W_=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,r){let n=[],i=ZP(e.getText());if(!i)return n;let o=ek(i)||{};return o.configFilePath=e.uri,at(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new Yc.DocumentLink(new Yc.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=Yf(n,["build","dockerfile"])||Yf(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,Vt(this.fileHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await nr(this.fileHost,r)).map(c=>Yc.Uri.file(c).path),a=Yf(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var te=K(require("vscode")),fa=K(require("path"));var bH="Stop Container",EH="Reopen Folder locally",_H="Close Workspace",Uo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(Uo||(Uo={}));var Yt=class{static isGroupItem(e){return!!e&&e.type===Uo.Group}static isContainerItem(e){return!!e&&e.type===Uo.Container}static isFolderItem(e){return!!e&&e.type===Uo.Folder}},qd;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(qd||(qd={}));var z_=class extends Yt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Uo.Group}async asTreeItem(e,r,n,i){return new te.TreeItem(this.label,te.TreeItemCollapsibleState.Expanded)}},Un=class extends Yt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=Uo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new te.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=kg(r,uce),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=kg(r,lce),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof te.ThemeIcon?o.iconPath:new te.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?te.TreeItemCollapsibleState.Expanded:te.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new te.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new te.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new te.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new te.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new te.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/Un.years))>0?l===1?c="year":c="years":(l=Math.round(u/Un.days))>0?l===1?c="day":c="days":(l=Math.round(u/Un.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/Un.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/Un.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(vc(this.container)&&this.folders.length>0)return`${fa.basename(this.folders[0].folder.path)}`;{let r=mC(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new te.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=Th(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=zs(this.container);e&&(this._repository=jr(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return $t(e,this.container.Id)}},hr=Un;hr.seconds=1e3,hr.minutes=Un.seconds*60,hr.hours=Un.minutes*60,hr.days=Un.hours*24,hr.years=Un.days*365;var pa=class extends Yt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Uo.Folder}async asTreeItem(e,r,n,i){let o=new te.TreeItem(fa.basename(this.folder.path),te.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=kg(r,fce),o.contextValue="attachedFolder",this.isDevContainer&&!zs(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=kg(r,dce),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function ace(t,e,r,n){if(!(!te.env.remoteName||te.env.remoteName!=="attached-container"&&te.env.remoteName!=="dev-container"))return SH(t,e,r,n)}function SH(t,e,r,n){te.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new RH(t,e,n,e.output),o=te.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function cce(t,e){let r=[bH];return t&&t.Id===e.Id&&te.workspace.workspaceFolders&&te.workspace.workspaceFolders.length>0&&(r.push(_H),te.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(EH)),r}var xH=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new te.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:Nn(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},PH=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(te.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(te.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(te.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(te.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(te.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(te.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(te.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(te.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(te.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(te.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(te.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(te.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(te.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(te.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(te.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(te.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(te.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Yt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await te.window.showWarningMessage(r,{modal:!0},...cce(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case bH:{await Fb(this.dockerParams,e.container),e.container=await $t(this.dockerParams,e.container.Id);break}case _H:{await te.commands.executeCommand("workbench.action.closeFolder");break}case EH:{await te.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Yt.isContainerItem(e))return;let r=await ai(this.dockerParams,e.container.Id);if(!r)return;let n=await te.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await Fb(this.dockerParams,e.container),await gM(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=Th(e);if(r||(r=r1(e)),r){let n=await zp(this.dockerParams,r);if((await Ww(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await te.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await Mb(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await te.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await wD(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Yt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await um(this.dockerParams,e.container),e.container=await $t(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Yt.isFolderItem(e)||(await te.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Yt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=SH(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Yt.isFolderItem(e)?(n=e,r=e.container):hr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await um(this.dockerParams,r),await te.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Yt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await um(this.dockerParams,n),await Ig(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Yt.isContainerItem(e)||Bo.isImageItem(e)||Bo.isVolume(e)||Bo.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&te.window.showTextDocument(await te.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){Bo.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Bo.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Bo.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await te.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return te.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Yt.isContainerItem(e))return;let r=new xH(this.dockerParams,e.container.Id);te.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function kH(t,e,r,n){te.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=new IH(t,e,s,r,n),o=te.window.createTreeView("targetsContainers",{treeDataProvider:i});i.setMessage=a=>o.message=a,t.subscriptions.push(te.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await i.getDockerParams(!0),i.refresh(void 0))));function s(a){let c=ace(t,a,i,r),l=new OH(t,r,n),u=te.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let d=new PH(i,c,l,a,t,r);t.subscriptions.push(...d.registerCommands()),t.subscriptions.push(dM(t)(async()=>{i.refresh(void 0),l.refresh(void 0);let f=await Ge(t,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var IH=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new te.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new te.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Zn(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,Mi(r,!1))));try{this.dockerParams=await Ge(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1),await Fd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await $t(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await au(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await te.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await te.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=te.workspace.workspaceFolders&&te.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await te.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new z_("Dev Containers",0)),this.otherContainers.length>0&&r.push(new z_("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new pa(e,n,!0)]:[],o=vc(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new pa(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new pa(e,a,!1))):(o=zs(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new pa(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new pa(e,a,!1)));let s=new hr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new hr(n,this.recentAttachEntries.get(n.Id).map(o=>new pa(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new hr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await Ri(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await vo(this.dockerParams,r);return this.getChildGroups(n)}else{if(Yt.isGroupItem(e))return this.getChildContainers(e);if(Yt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=te.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await ai(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await ai(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(vc(e)){this.devContainers.push(e);return}else if(zs(e)){this.devContainers.push(e);return}else if(mC(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=this.dockerParams.cliHost,n=Ue(r.path,e),i=await oi(r,n,di()),o=i&&await Ws(r,n,i,this.output)||void 0;if(o&&at(o.config))return te.Uri.parse(Au(e,o.workspaceConfig.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=vc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=zs(e),i=Th(e),o=n1(e);if(n)return te.Uri.parse(Ks(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await NC(r,e,this.output),i=h1(r,n,e);return te.Uri.parse(Au(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return te.Uri.parse(Ks(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ue(this.dockerParams.cliHost.path,e),i=await oi(this.dockerParams.cliHost,n,di()),o=i&&await Ws(this.dockerParams.cliHost,n,i,this.output);if(o&&"dockerComposeFile"in o.config){let s=await nr(this.dockerParams.cliHost,o.config),a=await Pu(this.dockerParams,n,s);return ON(r,a,o.config.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=Fh(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=pn(i.authority);a&&(Wt(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):ln(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await te.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},jn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(jn||(jn={}));var Bo=class{constructor(e){this.label=e;this.type=jn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===jn.Image}static isVolume(e){return!!e&&e.type===jn.Volume}static isDevVolume(e){return!!e&&e.type===jn.DevVolume}},AH=class{constructor(e){this.detail=e;this.type=jn.Image;this.context="image";this.label="Image"}inspect(e){return yo(e,this.detail)}},TH=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=jn.Volume;this.context="volume"}async inspect(e){return zp(e,this.volumeDetails)}},RH=class{constructor(e,r,n,i){this.context=e;this.dockerParams=r;this.telemetry=n;this.output=i;this._onDidChangeTreeData=new te.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new te.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?te.TreeItemCollapsibleState.Expanded:te.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=zs(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new AH(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new TH(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=vc(e.container),i;if(this.dockerParams&&n){let a=await oi(this.dockerParams.cliHost,Ue(this.dockerParams.cliHost.path,n),di());a&&(i=De(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:jn.Title});let o;this.dockerParams&&(o=await $t(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:jn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await $t(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await Ge(this.context,this.output),await Fd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},DH=class extends Bo{constructor(e){super(e.Name);this.type=jn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new te.TreeItem(e,te.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return jr(n)}}}get iconPath(){return new te.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/hr.years))>0?s===1?o="year":o="years":(s=Math.round(a/hr.days))>0?s===1?o="day":o="days":(s=Math.round(a/hr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/hr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/hr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return zp(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await te.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await te.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await Ww(e)).indexOf(this.volumeDetails.Name)>=0)){await te.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await te.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await Mb(e,this.volumeDetails.Name)}},OH=class{constructor(e,r,n){this.context=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new te.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await Ge(this.context,this.output,void 0,void 0),await Fd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await te.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await Ge(this.context,this.output),n=await wo(r),i=await su(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new DH(a))}async resolveTreeItem(e,r){let n=await Ge(this.context,this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,l,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await Ri(e,!0),o=await vo(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new te.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${l}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await au(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},lce="vm-active",uce="vm-default",dce="folder-active",fce="folder";function kg(t,e){let r=`${e}.svg`;return{light:te.Uri.file(t.asAbsolutePath(fa.join("resources","light",r))),dark:te.Uri.file(t.asAbsolutePath(fa.join("resources","dark",r))),highContrast:te.Uri.file(t.asAbsolutePath(fa.join("resources","highContrast",r)))}}var K_=K(require("util"));var wn=K(require("vscode"));async function NH(t,e,r={}){let n=Nl(e[0],e.slice(1),void 0),i=await fI(e[0],e.slice(1),void 0,t.loadNativeModule),o=await Rp({params:t,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:{},remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,remoteEnv:a,serverDownloaded:c}=await fo(t,o,r,void 0,void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:Eo,port:s,extensionHostEnv:a},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:c}}async function LH(t,e,r){var n,i,o;if(!!await Ro(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await Pe({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),f=(await Pe({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(f),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${f}`),await wn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&wn.commands.executeCommand(li);return}let m=h.length>1?(i=await wn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:h[0];if(m){let g=((o=p.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:hce({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await wn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await wn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&wn.commands.executeCommand(li)}async function FH(t,e,r,n,i){return await Ro(t)?se(G({},await pce(t,e,r,n,i)),{isTrusted:!0}):(await wn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function pce(t,e,r,n,i){return wn.window.withProgress({location:wn.ProgressLocation.Notification,title:Dc,cancellable:!1},async o=>{try{let s=mce(r),a=process.cwd(),c=await Qn(void 0,a,ui,Ln(),t.extensionPath,$i(),Promise.resolve({}),e.product,n.log),l=await Rc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:o,cliHost:c,env:c.env,cwd:a,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i});l.setWorkspaceName(`${s.name} in ${s.podname} (${s.image})`);let u=["kubectl","exec","-it",s.podname];return s.context&&u.push("--context",s.context),s.namespace&&u.push("--namespace",s.namespace),u.push("--container",s.name,"--"),await NH(l,u)}catch(s){let a=s instanceof ue?s:new ue({description:"An error occurred attaching to the container.",originalError:s});throw a.actions=[...Cc,Js,xo,wc,Ys],a}}).then(o=>(qi(e,"k8s-container","success",void 0,o.properties),o),o=>{let s=o instanceof ue?o:new ue({description:"An error occurred attaching to the container.",originalError:o});return qi(e,"k8s-container","failure",void 0,s.containerProperties,s),Po(s,"k8s-container",e,!0,n)})}function hce(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function mce(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var et=K(require("vscode")),Jc=K(require("fs")),Qc=K(require("os")),ha=K(require("path")),Ag=K(require("child_process")),Xc=K(require("util"));function Tg(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function MH(t,e){var c;let r=t.globalStorageUri,n=tn.joinPath(r,"cli-bin");await et.workspace.fs.createDirectory(n);let i="";try{i=(await et.workspace.fs.readFile(tn.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=tn.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=Tg(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)et.workspace.fs.copy(tn.joinPath(o,l.source),tn.joinPath(n,l.destination),{overwrite:!0});await et.workspace.fs.writeFile(tn.joinPath(n,"vscode-app-root"),Buffer.from(et.env.appRoot,"utf-8")),await et.workspace.fs.writeFile(tn.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await et.workspace.fs.writeFile(tn.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await et.workspace.fs.writeFile(tn.joinPath(n,"vscode-machine-id"),Buffer.from(et.env.machineId,"utf-8")),await et.workspace.fs.writeFile(tn.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function gce(t,e){let r=Tg(e),n="";try{if(n=(await(0,Xc.promisify)(Ag.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await et.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await et.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,Xc.promisify)(Ag.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=et.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await et.env.clipboard.writeText(t),await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function vce(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),i=[ha.join(Qc.homedir(),"bin"),ha.join(Qc.homedir(),".local/bin")],o="/usr/local/bin";Qc.platform()==="darwin"&&i.push(o);let s=(0,Xc.promisify)(Jc.stat);for(let c of i){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=Tg(e),u=ha.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await et.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let d=await et.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),f=ha.join(t,`devcontainer${l}`);switch(d){case"Create":if(c===o){if(!await yce(f,u))break}else await(0,Xc.promisify)(Jc.symlink)(f,u);await et.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await et.env.clipboard.writeText(t),await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function yce(t,e){try{return await Jc.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await et.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let i=`osascript -e "do shell script \\"mkdir -p ${ha.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,Xc.promisify)(Ag.exec)(i),!0}return!1}}async function qH(t,e){let r=t.globalStorageUri,n=tn.joinPath(r,"cli-bin").fsPath;switch(Qc.platform()){case"win32":if(await gce(n,e))return;break;case"darwin":case"linux":if(await vce(n,e))return;break}if(await et.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await et.env.clipboard.writeText(n);let o=Tg(e);await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var BH=class{constructor(e,r,n){this.context=e;this.telemetry=n,this.output=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=UH.parse(e.query);if(!r.url){U.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await Ge(this.context,this.output.log);if(!!await Pr(this.context,i,await this.telemetry)){if(!await jy(i.cliHost,n,this.output.log)){await U.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await U.commands.executeCommand(rm,r.url)}}};async function Cce(t){var P;IM();let e=new Date;kM(t);let r=await ks(t.extensionPath),n=await Dl(U.env.appRoot),i=xM(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${U.version} (${n.commit||"out-of-source"}).`,s=new lm(t.logPath,e,o);t.subscriptions.push(U.commands.registerCommand(li,()=>s.show()));let{channel:a,postCreate:c}=SM(s.log,e);t.subscriptions.push(U.commands.registerCommand(Rb,()=>a.show())),t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:nm(s,c,sr.results,async(x,k,A)=>J2(t,await i,x,sr.onRemoveOnShutdownChanged,k,A)),async getCanonicalURI(x){var A;let k=pn(x.authority);if(k&&Wt(k)){let{hostPath:D,settings:F}=k;return wr(D)?$l(D,s.log):F&&"host"in F&&((A=F.host)==null?void 0:A.startsWith("ssh://"))?Ol(F.host,D):U.Uri.file(D)}return x}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:nm(s,c,sr.results,async(x,k,A)=>lH(t,await i,x,k,A))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:nm(s,c,sr.results,async(x,k,A)=>FH(t,await i,x,k,A))}),U.window.registerUriHandler(new BH(t,s,i)));let l=async(x,k,A)=>{let D=await Ge(t,s.log);if(!await Pr(t,D,await i))return;let F;if(Yt.isFolderItem(x)?(F=x.folder,A=xce()):F=x,F.scheme==="vscode-remote")return U.commands.executeCommand("vscode.openFolder",F,A);{let V=Ue(D.cliHost.path,De(F,D.cliHost.platform));return Dg(t,V,D,await i,k,A)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(x,k)=>x?l(x,!1,k):WH(t,!0,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(x,k)=>x?l(x,!1,k):WH(t,!1,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand(aM,async x=>$d(t,await i,s.log,x))),t.subscriptions.push(U.commands.registerCommand(rm,async x=>$d(t,await i,s.log,x,dn))),t.subscriptions.push(U.commands.registerCommand(cM,async x=>{if(x.url){let k=x.url;return(x==null?void 0:x.ref)&&(k=`${x.url}/tree/${x.ref}`),$d(t,await i,s.log,k,dn)}})),t.subscriptions.push(U.commands.registerCommand(lM,async x=>kce(t,await i,s.log,x,dn))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(x,k,A)=>KH(t,x,k,A,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async x=>Ice(t,x,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async x=>$d(t,await i,s.log,void 0,x))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>u(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>u(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>u("rebuildNoCache")));let u=async x=>{if(!await U.workspace.requestWorkspaceTrust({message:Yu}))return;let A=await Ge(t,s.log);if(!await Pr(t,A,await i))return;let D=U.workspace.workspaceFile;if(D&&D.scheme==="untitled"){await mg();return}let F=U.workspace.workspaceFolders;if(!D&&F&&F.length){let ne=F.length>1?await U.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):F[0];ne&&(D=ne.uri)}let V=await Nb(D);if(V){await jd(t,V.repositoryPath,V.volumeName,V.folder,A);return}if(D){let ne;if(A.cliHost.type==="wsl"&&D.scheme==="file"){let J=De(D,process.platform),H=za(J)||await Ll(A.output)||(()=>{throw new Error("No default WSL distro found.")})();ne=await As(H,J,A.output)}else ne=De(D,A.cliHost.platform);let Y=Ue(A.cliHost.path,ne);await Dg(t,Y,A,await i,x,{forceReuseWindow:!0})}};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let x=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||x&&x.length&&x[0].uri;if(k&&k.scheme==="vscode-remote"){let A=pn(k.authority);if(A&&Wt(A)){let D=U.Uri.file(A.hostPath),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",D,F)}else U.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let x=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||x&&x.length&&x[0].uri;if(k&&k.scheme==="vscode-remote"){let A=pn(k.authority);if(A&&Wt(A)&&wr(A.hostPath)){let D=U.Uri.parse((await $l(A.hostPath,s.log)).toString()),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",D,F)}else U.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let x=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||x&&x.length&&x[0].uri;if(k&&k.scheme==="vscode-remote"){let A=pn(k.authority),D=A==null?void 0:A.settings;if(A&&Wt(A)&&D&&"host"in D&&D.host&&D.host.startsWith("ssh://")){let F=U.Uri.parse(Ol(D.host,A.hostPath).toString()),V={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",F,V)}else U.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let d,f=async x=>{var F;if(!await Ro(t))return;let k,A=typeof x=="string"?x:(F=x==null?void 0:x.containerDesc)==null?void 0:F.Id;if(A){let V=await Ge(t,s.log);if(!await Pr(t,V,await i))return;k=await $t(V,A)}else{let V=!1;d||(d=Zn(t.extensionPath,async Y=>(V=!0,Mi(Y))));let ne=await Ge(t,s.log,void 0,void 0,d);if(k=await Fce(ne,Pr(t,ne,await i),()=>V),!k)return}let D=await Ge(t,s.log);Ig(D,k,t)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async x=>LH(t,await Ge(t,s.log),x)));let p=async x=>{var D;let k=await Ge(t,s.log);if(!await Pr(t,k,await i))return;let A=(D=x==null?void 0:x.pullRequestModel)==null?void 0:D.html_url;$d(t,await i,s.log,A,dn)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",p)),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let x=await ta();if(x){let k=await Ge(t,s.log);await jd(t,x.repositoryPath,x.volumeName,x.folder,k,!0);return}return await Promise.all(sr.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let x=await ta();if(x){let k=await Ge(t,s.log);await jd(t,x.repositoryPath,x.volumeName,x.folder,k,"rebuildNoCache");return}return await Promise.all(sr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let h=U.env.remoteName&&U.env.remoteName!=="test"?"linux":process.platform,m=((P=(U.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||xe.file(process.cwd()),g=gg(h,m),v={fileHost:g,findDevContainerFiles:()=>$b(g),telemetry:i,output:s.log,existingFilesLearnMoreLink:Vu,predefinedDefinitionsLearnMoreLink:Gu,openConfigurationCommandId:Hu},w=await M2(t,v);t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!U.workspace.workspaceFolders){await U.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await X_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(x,k)=>{let A,D=await Ge(t,s.log),F;if(typeof x=="string"?A=[xe.file(x)]:(F=await $b(D.cliHost),A=(await Promise.all(F.map(V=>V.scheme==="vscode-remote"?V:D.cliHost.toCommonURI(De(V,D.cliHost.platform))))).filter(V=>!!V)),A.length){let V;A.length===1?V={uri:A[0]}:V=await U.window.showQuickPick(A.map(Y=>({label:Y.scheme==="file"?Y.fsPath:Y.toString(),uri:Y})),{placeHolder:"Select container configuration file to open"});let ne=await ta();if(ne){let Y=bM(ne.folder);for(let J of Y){try{await U.workspace.openTextDocument(U.Uri.parse(J.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(J.toString()),k);return}return}if(V){let Y=V.uri,J=jN(Y);if(J){let H=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?J.replace(/\\/g,"/"):J}`;return U.env.openExternal(U.Uri.parse(H))}else{if(Y.scheme==="file"&&await vt(Y.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="file"&&sr.results.size)return await on(kn,Y,[],Ai),await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="vscode-remote"&&sr.results.size)return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(x===void 0)return await X_(t,g,w,await i,s.log)}}}else if(x===void 0&&!(F==null?void 0:F.length))return await X_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:x,dockerParams:k}=[...sr.results.values()][0];if(!x||!k)return U.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let A=await $t(k,x),D=_g(t.globalStoragePath,A.Name),F=U.Uri.file(D);return await vt(D)?U.commands.executeCommand("vscode.open",F):(await on(kn,F,[],Ai),U.commands.executeCommand("vscode.open",F))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let x=[...(await nH(t.globalStoragePath)).map(A=>G({label:A.name},A)).sort((A,D)=>A.label.localeCompare(D.label)),...(await oH(t.globalStoragePath)).map(A=>G({label:A.image},A)).sort((A,D)=>A.label.localeCompare(D.label))],k=await U.window.showQuickPick(x.length?x:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(k&&"uri"in k)return U.commands.executeCommand("vscode.open",U.Uri.parse(k.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${GH()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>U.commands.executeCommand("vscode.openIssueReporter",GH()))),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/.devcontainer/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new W_(g))),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",async()=>{Hce(t,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>Vce(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>Gce(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>$ce(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Ece(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>Pg(s.log))),kH(t,sr.results,await i,s.log),await MH(t,n),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>qH(t,n))),(async()=>{await CM(t)||await XH(t,g,await i,s.log)})().catch(console.error),_ce(t);let C=U.env.remoteName,b=!C||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(C)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",w.addExtensionToConfiguration),U.languages.registerCompletionItemProvider([...b,{pattern:Lt.join(Sg(t.globalStoragePath),"*.json")},{pattern:Lt.join(Eg(t.globalStoragePath),"*.json")}],w.createCompletionItemProvider()),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var A;let x=await Ge(t,s.log),k=await I_(v,{readDockerComposeConfig:async(D,F)=>{let V=await pC(x.cliHost.cwd,D,x.output);return hC(x,V,F)}});if(k){let D;if(!k.manifest&&k.imageName)try{D=await yo(x,k.imageName)}catch(F){if(((A=F==null?void 0:F.stdout)==null?void 0:A.toString().replace(/\s/g,""))==="[]")try{await qe(x,"pull",k.imageName),D=await yo(x,k.imageName)}catch{}}await T_(v,k,(D==null?void 0:D.Config.Labels)||{})}}),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",w.addPortLabelToConfiguration)),await ta()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(k2())}var HH="showRecoveryContainerNotification",VH="showReopenInContainerNotificationReset",bce=5e3;function Ece(t){return t.globalState.update(VH,Date.now())}async function _ce(t){setTimeout(async()=>{let e=t.globalState.get(VH);if(Z_(t.globalState.get(HH),e))return;if(await ta()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await U.window.showInformationMessage(n,o,i);s===i?U.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(HH,Date.now())}},bce)}async function Sce(){await Promise.all([...sr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function GH(){let{name:t,publisher:e}=$H();return`${e}.${t}`}async function WH(t,e,r,n,i){var d;let o=await Ge(t,i);if(!await Pr(t,o,r))return;let s,a=U.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=pn(f.authority);if(p&&Wt(p)){let h=Ue(o.cliHost.path,p.hostPath);s=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||(((d=U.env.remoteName)==null?void 0:d.match(/^(wsl|ssh-remote)$/))?s=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await o.cliHost.homedir()}):s=U.Uri.file(jH.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await U.window.showOpenDialog(c),u=l&&l[0];if(u){let f=e?u:u.with({path:Lt.posix.dirname(u.path)}),p=await Ge(t,o.output,f,Ln()==="always"),h=De(u,p.cliHost.platform),m=Ue(p.cliHost.path,h);await Dg(t,m,p,r,n)}}function xce(){return U.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function Dg(t,e,r,n,i,o){var g;let{cliHost:s}=r;if(wr(e.rootFolderPath)){if(r=await Ge(t,r.output,e.rootFolderPath),s=r.cliHost,!await Pr(t,r,n))return;e=Ue(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Lt.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await tp(s,e);if(a){let v="Continue";if(await U.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},v)!==v)return}let c=await oi(s,e,di()),l=c&&await Ws(s,e,c,r.output);if(!l||!sc(l.config)){let v=await Nd({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:Vu,predefinedDefinitionsLearnMoreLink:Gu,openConfigurationCommandId:Hu},e);if(!v||(l=await Ws(s,e,xe.file(v).with({scheme:qt.scheme}),r.output),!l))return}let u=l.config;if(!await Pce(r,u))return;let d=l.workspaceConfig.workspaceFolder;if(at(u)){let v=Vt(s,u);if(!u.initializeCommand&&!await Ot(s).readDocument(v))return Ud(`"${v.fsPath}" does not exist.`,s,u.configFilePath);if(u.workspaceFolder&&!Lt.posix.isAbsolute(u.workspaceFolder))return Ud("Workspace folder in devcontainer.json must be an absolute path.",s,u.configFilePath)}else if(!("image"in u))if("dockerComposeFile"in u){if(!await CH(r)||!await Mce(e,r,u))return}else{let v=u.configFilePath;return Ud(`Configuration "${s.path.relative(e.rootFolderPath,De(v,s.platform))}" not valid.`,s,v)}e.isWorkspaceFile&&(d=Lt.posix.join(d,s.path.basename(e.workspaceOrFolderPath)));let f=si(r.env),p=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,h=(s.type==="local"||s.type==="wsl")&&f&&"host"in f&&((g=f.host)==null?void 0:g.startsWith("ssh://")),m=U.Uri.parse(Au(p,d,f,h));await Ng({uri:m,type:e.isWorkspaceFile?"workspace":"folder",label:`${m1(s.platform,e.workspaceOrFolderPath,await s.homedir())}${_o(f)} [Dev Container]`}),await qb(t,i?m.authority:!1),await zu(t,i==="rebuildNoCache"?m.authority:!1),await U.commands.executeCommand("vscode.openFolder",m,o)}async function Pce(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await qe(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&Y_(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${J_(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${J_(Y_(r.memory))}`),r.storage&&c.push(`disk ${J_(Y_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await U.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function Y_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function J_(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function $d(t,e,r,n,i){if(!await Ju(t))return;let o=await Ge(t,r),s=null;if(!!await Pr(t,o,e)){if(typeof n=="string")s=n;else{let a=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(typeof a=="string"){s=a.trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=ii(s);if(!await jy(o.cliHost,c.repositoryUrl,o.output)){await U.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}}else if(a){if(!a.branch)return;s=`${a.url}/tree/${a.branch}`}}s&&await zH(t,o,s,i)}}async function zH(t,e,r,n){if(n||(n=await Tce(e)),n){let i=Q_(r);n!==dn&&(i=await Dce(r)),i&&await jd(t,r,n,i,e)}}async function kce(t,e,r,n,i){if(!await Ju(t))return;let o=await Ge(t,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Pr(t,o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await U.window.showInputBox(a),!c)return;let l=ii(c);if(l.repository==="unknown"||!l.pullRequestId){await U.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await zH(t,o,c,i)}async function KH(t,e,r,n,i,o){let s=await Ge(t,o);!await Pr(t,s,i)||(e||(e=await Ace(s)),e&&(r&&n?await Lce(e,r,n,s):await Nce(e,s)))}async function Ice(t,e,r,n){let i=await Ge(t,n);!await Pr(t,i,await r)||e&&e.volumeName&&await KH(t,e.volumeName,void 0,void 0,r,n)}var Og=class{get detail(){return""}},YH=class extends Og{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},JH=class extends Og{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},QH=class extends Og{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function Ace(t){let e=await wo(t),n=(await su(t,e)).map(a=>new QH(a)),i="Select the volume to inspect with Visual Studio Code",o=U.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function Tce(t){let e=await wo(t,["vsch.local.repository.unique=false"]),n=(await su(t,e)).map(u=>new JH(u)),i=new YH,o=[i,...n],s="Select the volume for the cloned repository",a=U.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===i?l=await Rce(t):l=c.volumeName,l}async function Rce(t){let e="",r="vsc-remote-containers",n=await wo(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await U.window.showInputBox(i);return o?n.find(s=>s===o)?(await U.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function Dce(t){let e={prompt:"Enter the target folder name.",value:Q_(t),ignoreFocusOut:!0},r=await U.window.showInputBox(e);return r||null}function Q_(t){return jr(t).repositoryName}async function Oce(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function jd(t,e,r,n,i,o=!1){let s=si(i.env),a=mc(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Ch){U.window.showErrorMessage(u.description);return}let d=await Oce();try{c=await a.parseUrl(d)}catch{U.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=U.Uri.parse(Ks(e,r,n,!1,s,c));r===dn&&(r="a unique volume"),await Ng({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await qb(t,o?l.authority:!1),await zu(t,o==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Nce(t,e){let r=si(e.env),n=U.Uri.parse(Ks(void 0,t,void 0,!0,r,void 0));await Ng({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",n)}async function Lce(t,e,r,n){let i=si(n.env),o=U.Uri.parse(Ks(e,t,r,!0,i,void 0));await Ng({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",o)}async function Ng(t){return U.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function Ig(t,e,r,n){if(!await Ro(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let l=await o.toCommonURI(o.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let s=f1(e.Name,si(t.env),i),a=await tH(r.globalStoragePath,e),c=r.extensionMode===U.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=U.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function Fce(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await Ri(t),o=await vo(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw U.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await U.window.showQuickPick(n,i);if(!o&&r()){if(!await e)throw new Error("cancel");o=await U.window.showQuickPick(n,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Mce(t,e,r){if(!r.workspaceFolder)return Ud("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Lt.posix.isAbsolute(r.workspaceFolder))return Ud("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await nr(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await Pu(e,t,n),o=await hh(e,i,r.service),s=o&&await $t(e,o);return!(s&&!await qce(e.cliHost,n,r,s))}async function qce(t,e,r,n){let i=[];for(let o=0;o<e.length;o++)await t.isFile(e[o])||i.push(e[o]);return i.length>0?(U.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):r.devPort&&!n.Ports.find(o=>r.devPort===o.PrivatePort)?(U.window.showErrorMessage(`The port '${r.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function Ud(t,e,r){if(await U.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=De(r,e.platform),o=await e.toCommonURI(i);o&&U.window.showTextDocument(U.Uri.parse(o.toString()))}}async function X_(t,e,r,n,i){await r.createConfiguration()&&await XH(t,e,n,i)}async function XH(t,e,r,n){if([void 0,"wsl","ssh-remote"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,o=U.workspace.workspaceFolders,s=i||o&&o.length&&o[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=De(s,e.platform),c=Ue(e.path,a),l=await wC(e,c,di());l&&await jce(t,l,c,e,r,n)}}var Lg="showReopenInContainerNotification",ZH="showReopenInContainerNotificationReset";function $ce(t){return t.globalState.update(ZH,Date.now())}async function jce(t,e,r,n,i,o){let s=t.globalState.get(ZH);if(Z_(t.globalState.get(Lg),s)||Z_(t.workspaceState.get(Lg),s))return;let a=$N(n,r,e.uri),c,l="";n.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(n.platform==="win32"&&wr(r.rootFolderPath));let u;a?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",h=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`,m=c?[p,f,d]:[p,d];Uce(i,e.location);let g=await U.window.showInformationMessage(h,...m);if(Bce(i,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",e.location),g===d){if(!await U.workspace.requestWorkspaceTrust({message:Yu}))return;let C=await Ge(t,o);if(!await Pr(t,C,i))return;try{await Dg(t,r,C,i,!1,{forceReuseWindow:!0})}catch(b){await Po(b,"ui",i)}}else if(g===f){let w=await Ge(t,o),C=await bI(w.cliHost,r,w.output),b="OK",_="Cancel";(!C||b===await U.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",b,_))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Clone in Volume"},async(P,x)=>{P.report({message:"Follow the prompts at the top of the window."}),await U.commands.executeCommand(rm,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",C=r.isWorkspaceFile?"Current Workspace":"Current Folder",b=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",_=await U.window.showInformationMessage(b,w,C);_===w?await t.globalState.update(Lg,Date.now()):_===C&&await t.workspaceState.update(Lg,Date.now())}}function Uce(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Bce(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function Z_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function Hce(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await U.window.showQuickPick(r,n);if(!i)return;let o=await Ge(t,e);i.detail&&await jd(t,i.detail,dn,Q_(i.detail),o)}async function Vce(t){let e=await Promise.all((await eV(t)).map(async n=>{let i=await(0,K_.promisify)(Rg.stat)(n.path),o=n.time;return{label:n.prefix,description:`${Zc(o.getFullYear())}-${Zc(o.getMonth())}-${Zc(o.getDay())} ${Zc(o.getHours())}:${Zc(o.getMinutes())}:${Zc(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await U.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await U.window.showTextDocument(U.Uri.file(r.path))}function Zc(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function Gce(t,e,r){let n=(await eV(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await U.window.showTextDocument(U.Uri.file(n.path)):await U.window.showInformationMessage("No previous log file found.",{modal:!0})}async function eV(t){let e=[],r=Lt.basename(t.logPath),n=Lt.dirname(Lt.dirname(Lt.dirname(t.logPath)));for(let i of(await e0(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Lt.join(n,i);for(let a of await e0(s)){let c=Lt.join(s,a),l=Lt.join(c,r);for(let u of(await e0(l)).sort()){let d=Lt.join(l,u),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:u,path:d,time:p,prefix:f?u.substr(0,f.index-1):u.substr(0,u.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function e0(t){try{return await(0,K_.promisify)(Rg.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
